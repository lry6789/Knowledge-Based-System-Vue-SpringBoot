2023-01-26 00:00:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693435544866816[0;39m 生成今日电子书快照开始
2023-01-26 00:00:00.043 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:00:00.051 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==> Parameters: 
2023-01-26 00:00:00.073 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m <==    Updates: 5
2023-01-26 00:00:00.074 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693435544866816[0;39m 生成今日电子书快照结束，耗时：33毫秒
2023-01-26 00:00:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693456482832384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==> Parameters: 
2023-01-26 00:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m <==    Updates: 1
2023-01-26 00:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273693456482832384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:00:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693582311952384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==> Parameters: 
2023-01-26 00:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m <==    Updates: 1
2023-01-26 00:00:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273693582311952384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693687203106816[0;39m 生成今日电子书快照开始
2023-01-26 00:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:01:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==> Parameters: 
2023-01-26 00:01:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m <==    Updates: 0
2023-01-26 00:01:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693687203106816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:01:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273693708174626816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==> Parameters: 
2023-01-26 00:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m <==    Updates: 1
2023-01-26 00:01:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273693708174626816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:01:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273693833957609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==> Parameters: 
2023-01-26 00:01:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m <==    Updates: 1
2023-01-26 00:01:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273693833957609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:02:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693938819403776[0;39m 生成今日电子书快照开始
2023-01-26 00:02:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:02:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==> Parameters: 
2023-01-26 00:02:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m <==    Updates: 0
2023-01-26 00:02:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693938819403776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:02:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273693959820283904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==> Parameters: 
2023-01-26 00:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m <==    Updates: 1
2023-01-26 00:02:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273693959820283904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:02:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273694085666181120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==> Parameters: 
2023-01-26 00:02:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m <==    Updates: 1
2023-01-26 00:02:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273694085666181120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:03:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694190515392512[0;39m 生成今日电子书快照开始
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==> Parameters: 
2023-01-26 00:03:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m <==    Updates: 0
2023-01-26 00:03:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694190515392512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:03:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273694211453358080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==> Parameters: 
2023-01-26 00:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m <==    Updates: 1
2023-01-26 00:03:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694211453358080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694337307643904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==> Parameters: 
2023-01-26 00:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m <==    Updates: 1
2023-01-26 00:03:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694337307643904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:04:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694442127495168[0;39m 生成今日电子书快照开始
2023-01-26 00:04:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==> Parameters: 
2023-01-26 00:04:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m <==    Updates: 0
2023-01-26 00:04:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694442127495168[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273694463145152512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==> Parameters: 
2023-01-26 00:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m <==    Updates: 1
2023-01-26 00:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273694463145152512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:04:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273694588991049728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==> Parameters: 
2023-01-26 00:04:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m <==    Updates: 1
2023-01-26 00:04:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273694588991049728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694693798318080[0;39m 生成今日电子书快照开始
2023-01-26 00:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:05:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==> Parameters: 
2023-01-26 00:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m <==    Updates: 0
2023-01-26 00:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694693798318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:05:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694714795003904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==> Parameters: 
2023-01-26 00:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m <==    Updates: 1
2023-01-26 00:05:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694714795003904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:05:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273694840594763776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==> Parameters: 
2023-01-26 00:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m <==    Updates: 1
2023-01-26 00:05:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694840594763776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694945464946688[0;39m 生成今日电子书快照开始
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==> Parameters: 
2023-01-26 00:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m <==    Updates: 0
2023-01-26 00:06:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694945464946688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:06:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273694966415495168[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==> Parameters: 
2023-01-26 00:06:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m <==    Updates: 1
2023-01-26 00:06:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273694966415495168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:06:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695092273975296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==> Parameters: 
2023-01-26 00:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m <==    Updates: 1
2023-01-26 00:06:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695092273975296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:07:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695197110603776[0;39m 生成今日电子书快照开始
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==> Parameters: 
2023-01-26 00:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m <==    Updates: 0
2023-01-26 00:07:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695197110603776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:07:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273695218090512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==> Parameters: 
2023-01-26 00:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m <==    Updates: 1
2023-01-26 00:07:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273695218090512384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:07:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273695343948992512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==> Parameters: 
2023-01-26 00:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m <==    Updates: 1
2023-01-26 00:07:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273695343948992512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:08:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695448777232384[0;39m 生成今日电子书快照开始
2023-01-26 00:08:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==> Parameters: 
2023-01-26 00:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m <==    Updates: 0
2023-01-26 00:08:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695448777232384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:08:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695469786501120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==> Parameters: 
2023-01-26 00:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m <==    Updates: 1
2023-01-26 00:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273695469786501120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:08:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695595615621120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==> Parameters: 
2023-01-26 00:08:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m <==    Updates: 1
2023-01-26 00:08:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273695595615621120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695700469026816[0;39m 生成今日电子书快照开始
2023-01-26 00:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==> Parameters: 
2023-01-26 00:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m <==    Updates: 0
2023-01-26 00:09:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695700469026816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:09:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273695721394409472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==> Parameters: 
2023-01-26 00:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m <==    Updates: 1
2023-01-26 00:09:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273695721394409472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273695847269666816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==> Parameters: 
2023-01-26 00:09:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m <==    Updates: 1
2023-01-26 00:09:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273695847269666816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:10:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695952097906688[0;39m 生成今日电子书快照开始
2023-01-26 00:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==> Parameters: 
2023-01-26 00:10:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m <==    Updates: 0
2023-01-26 00:10:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695952097906688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:10:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695973077815296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==> Parameters: 
2023-01-26 00:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m <==    Updates: 1
2023-01-26 00:10:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695973077815296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:10:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273696098915323904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==> Parameters: 
2023-01-26 00:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m <==    Updates: 1
2023-01-26 00:10:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273696098915323904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:11:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273696203747758080[0;39m 生成今日电子书快照开始
2023-01-26 00:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==> Parameters: 
2023-01-26 00:11:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m <==    Updates: 0
2023-01-26 00:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273696203747758080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:11:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273696224723472384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==> Parameters: 
2023-01-26 00:11:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m <==    Updates: 1
2023-01-26 00:11:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273696224723472384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:18:41.817 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m51s657ms448µs800ns).
2023-01-26 00:18:56.659 INFO  com.example.wiki.job.DocJob                       :32   [32m273698202987925504[0;39m 更新电子书下的文档数据开始
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==> Parameters: 
2023-01-26 00:18:56.677 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m <==    Updates: 1
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.DocJob                       :35   [32m273698202987925504[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698203063422976[0;39m 生成今日电子书快照开始
2023-01-26 00:18:56.677 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:18:56.678 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==> Parameters: 
2023-01-26 00:18:56.681 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m <==    Updates: 0
2023-01-26 00:18:56.681 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698203063422976[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:19:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698217043038208[0;39m 生成今日电子书快照开始
2023-01-26 00:19:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==> Parameters: 
2023-01-26 00:19:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m <==    Updates: 0
2023-01-26 00:19:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698217043038208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:19:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273698238014558208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==> Parameters: 
2023-01-26 00:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m <==    Updates: 1
2023-01-26 00:19:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273698238014558208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:19:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273698363818512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==> Parameters: 
2023-01-26 00:19:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m <==    Updates: 1
2023-01-26 00:19:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273698363818512384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:20:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698468713861120[0;39m 生成今日电子书快照开始
2023-01-26 00:20:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:20:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==> Parameters: 
2023-01-26 00:20:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m <==    Updates: 0
2023-01-26 00:20:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698468713861120[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 00:20:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273698489689575424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==> Parameters: 
2023-01-26 00:20:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m <==    Updates: 1
2023-01-26 00:20:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698489689575424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:20:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273698615506112512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==> Parameters: 
2023-01-26 00:20:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m <==    Updates: 1
2023-01-26 00:20:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273698615506112512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:21:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698720338546688[0;39m 生成今日电子书快照开始
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==> Parameters: 
2023-01-26 00:21:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m <==    Updates: 0
2023-01-26 00:21:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698720338546688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:21:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273698741301678080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==> Parameters: 
2023-01-26 00:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m <==    Updates: 1
2023-01-26 00:21:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273698741301678080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:21:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273698867189518336[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==> Parameters: 
2023-01-26 00:21:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m <==    Updates: 1
2023-01-26 00:21:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273698867189518336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:22:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698972005175296[0;39m 生成今日电子书快照开始
2023-01-26 00:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:22:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==> Parameters: 
2023-01-26 00:22:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m <==    Updates: 0
2023-01-26 00:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698972005175296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:22:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273698993010249728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==> Parameters: 
2023-01-26 00:22:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m <==    Updates: 1
2023-01-26 00:22:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698993010249728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:22:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273699118784843776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==> Parameters: 
2023-01-26 00:22:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m <==    Updates: 1
2023-01-26 00:22:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273699118784843776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:23:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699223642443776[0;39m 生成今日电子书快照开始
2023-01-26 00:23:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:23:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==> Parameters: 
2023-01-26 00:23:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m <==    Updates: 0
2023-01-26 00:23:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699223642443776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:23:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273699244618158080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==> Parameters: 
2023-01-26 00:23:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m <==    Updates: 1
2023-01-26 00:23:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699244618158080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:23:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273699370497609728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==> Parameters: 
2023-01-26 00:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m <==    Updates: 1
2023-01-26 00:23:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273699370497609728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:24:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699475351015424[0;39m 生成今日电子书快照开始
2023-01-26 00:24:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:24:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==> Parameters: 
2023-01-26 00:24:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m <==    Updates: 0
2023-01-26 00:24:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699475351015424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:24:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273699496288980992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==> Parameters: 
2023-01-26 00:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m <==    Updates: 1
2023-01-26 00:24:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699496288980992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:24:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273699622122295296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==> Parameters: 
2023-01-26 00:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m <==    Updates: 1
2023-01-26 00:24:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699622122295296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699726979895296[0;39m 生成今日电子书快照开始
2023-01-26 00:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==> Parameters: 
2023-01-26 00:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m <==    Updates: 0
2023-01-26 00:25:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699726979895296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 00:25:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699747980775424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==> Parameters: 
2023-01-26 00:25:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m <==    Updates: 1
2023-01-26 00:25:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699747980775424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:25:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273699873818284032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==> Parameters: 
2023-01-26 00:25:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m <==    Updates: 1
2023-01-26 00:25:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699873818284032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:26:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699978617163776[0;39m 生成今日电子书快照开始
2023-01-26 00:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==> Parameters: 
2023-01-26 00:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m <==    Updates: 0
2023-01-26 00:26:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699978617163776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:26:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699999639015424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==> Parameters: 
2023-01-26 00:26:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m <==    Updates: 1
2023-01-26 00:26:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699999639015424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:26:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273700125413609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==> Parameters: 
2023-01-26 00:26:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m <==    Updates: 1
2023-01-26 00:26:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273700125413609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:27:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700230283792384[0;39m 生成今日电子书快照开始
2023-01-26 00:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==> Parameters: 
2023-01-26 00:27:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m <==    Updates: 0
2023-01-26 00:27:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700230283792384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:27:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273700251293061120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==> Parameters: 
2023-01-26 00:27:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m <==    Updates: 1
2023-01-26 00:27:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273700251293061120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:27:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273700377130569728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==> Parameters: 
2023-01-26 00:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m <==    Updates: 1
2023-01-26 00:27:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273700377130569728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 00:28:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700481979781120[0;39m 生成今日电子书快照开始
2023-01-26 00:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:28:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==> Parameters: 
2023-01-26 00:28:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m <==    Updates: 0
2023-01-26 00:28:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700481979781120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:28:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273700502934523904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==> Parameters: 
2023-01-26 00:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m <==    Updates: 1
2023-01-26 00:28:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273700502934523904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:28:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700628738478080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==> Parameters: 
2023-01-26 00:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m <==    Updates: 1
2023-01-26 00:28:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273700628738478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:29:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700733600272384[0;39m 生成今日电子书快照开始
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==> Parameters: 
2023-01-26 00:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m <==    Updates: 0
2023-01-26 00:29:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700733600272384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:29:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700754567598080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==> Parameters: 
2023-01-26 00:29:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m <==    Updates: 1
2023-01-26 00:29:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273700754567598080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:29:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273700880400912384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==> Parameters: 
2023-01-26 00:29:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m <==    Updates: 1
2023-01-26 00:29:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273700880400912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:30:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700985254318080[0;39m 生成今日电子书快照开始
2023-01-26 00:30:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:30:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==> Parameters: 
2023-01-26 00:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m <==    Updates: 0
2023-01-26 00:30:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700985254318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:30:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273701006234226688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==> Parameters: 
2023-01-26 00:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m <==    Updates: 1
2023-01-26 00:30:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273701006234226688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:30:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273701132071735296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==> Parameters: 
2023-01-26 00:30:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m <==    Updates: 1
2023-01-26 00:30:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273701132071735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:31:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701236920946688[0;39m 生成今日电子书快照开始
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==> Parameters: 
2023-01-26 00:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m <==    Updates: 0
2023-01-26 00:31:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701236920946688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:31:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701257905049600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==> Parameters: 
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m <==    Updates: 1
2023-01-26 00:31:05.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273701257905049600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 00:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701383717392384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==> Parameters: 
2023-01-26 00:31:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m <==    Updates: 1
2023-01-26 00:31:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273701383717392384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701488604352512[0;39m 生成今日电子书快照开始
2023-01-26 00:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:32:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==> Parameters: 
2023-01-26 00:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m <==    Updates: 0
2023-01-26 00:32:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701488604352512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 00:32:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273701509538123776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==> Parameters: 
2023-01-26 00:32:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m <==    Updates: 1
2023-01-26 00:32:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701509538123776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701635392409600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==> Parameters: 
2023-01-26 00:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m <==    Updates: 1
2023-01-26 00:32:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273701635392409600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701740275175424[0;39m 生成今日电子书快照开始
2023-01-26 00:33:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==> Parameters: 
2023-01-26 00:33:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m <==    Updates: 0
2023-01-26 00:33:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701740275175424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:33:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273701761229918208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==> Parameters: 
2023-01-26 00:33:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m <==    Updates: 1
2023-01-26 00:33:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273701761229918208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701887033872384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==> Parameters: 
2023-01-26 00:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m <==    Updates: 1
2023-01-26 00:33:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701887033872384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:34:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701991895666688[0;39m 生成今日电子书快照开始
2023-01-26 00:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==> Parameters: 
2023-01-26 00:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m <==    Updates: 0
2023-01-26 00:34:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701991895666688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:34:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273702012862992384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==> Parameters: 
2023-01-26 00:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m <==    Updates: 1
2023-01-26 00:34:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273702012862992384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:34:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273702138700500992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:34:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m ==> Parameters: 
2023-01-26 00:34:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m <==    Updates: 1
2023-01-26 00:34:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273702138700500992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:35:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702243541323776[0;39m 生成今日电子书快照开始
2023-01-26 00:35:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:35:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m ==> Parameters: 
2023-01-26 00:35:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m <==    Updates: 0
2023-01-26 00:35:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702243541323776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:35:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273702264546398208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m ==> Parameters: 
2023-01-26 00:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m <==    Updates: 1
2023-01-26 00:35:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273702264546398208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:35:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273702390400684032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m ==> Parameters: 
2023-01-26 00:35:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m <==    Updates: 1
2023-01-26 00:35:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273702390400684032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:36:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702495207952384[0;39m 生成今日电子书快照开始
2023-01-26 00:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m ==> Parameters: 
2023-01-26 00:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m <==    Updates: 0
2023-01-26 00:36:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702495207952384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:36:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273702516229804032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:36:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:36:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m ==> Parameters: 
2023-01-26 00:36:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m <==    Updates: 1
2023-01-26 00:36:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273702516229804032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:36:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273702642042146816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m ==> Parameters: 
2023-01-26 00:36:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m <==    Updates: 1
2023-01-26 00:36:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273702642042146816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:37:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702746857803776[0;39m 生成今日电子书快照开始
2023-01-26 00:37:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m ==> Parameters: 
2023-01-26 00:37:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m <==    Updates: 0
2023-01-26 00:37:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702746857803776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:37:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273702767875461120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m ==> Parameters: 
2023-01-26 00:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m <==    Updates: 1
2023-01-26 00:37:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273702767875461120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:37:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273702893708775424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:37:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m ==> Parameters: 
2023-01-26 00:37:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m <==    Updates: 1
2023-01-26 00:37:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273702893708775424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:38:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702998541209600[0;39m 生成今日电子书快照开始
2023-01-26 00:38:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m ==> Parameters: 
2023-01-26 00:38:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m <==    Updates: 0
2023-01-26 00:38:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702998541209600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:38:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273703019483369472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:38:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:38:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m ==> Parameters: 
2023-01-26 00:38:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m <==    Updates: 1
2023-01-26 00:38:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273703019483369472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:38:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273703145358626816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:38:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:38:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m ==> Parameters: 
2023-01-26 00:38:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m <==    Updates: 1
2023-01-26 00:38:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273703145358626816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:39:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703250228809728[0;39m 生成今日电子书快照开始
2023-01-26 00:39:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:39:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m ==> Parameters: 
2023-01-26 00:39:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m <==    Updates: 0
2023-01-26 00:39:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703250228809728[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 00:39:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273703271200329728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:39:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:39:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m ==> Parameters: 
2023-01-26 00:39:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m <==    Updates: 1
2023-01-26 00:39:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273703271200329728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:39:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273703396979118080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:39:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:39:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m ==> Parameters: 
2023-01-26 00:39:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m <==    Updates: 1
2023-01-26 00:39:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273703396979118080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:40:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703501828329472[0;39m 生成今日电子书快照开始
2023-01-26 00:40:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:40:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m ==> Parameters: 
2023-01-26 00:40:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m <==    Updates: 0
2023-01-26 00:40:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703501828329472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 00:40:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273703522799849472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:40:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:40:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m ==> Parameters: 
2023-01-26 00:40:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m <==    Updates: 1
2023-01-26 00:40:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273703522799849472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:40:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273703648633163776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:40:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:40:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m ==> Parameters: 
2023-01-26 00:40:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m <==    Updates: 1
2023-01-26 00:40:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273703648633163776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:41:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703753549484032[0;39m 生成今日电子书快照开始
2023-01-26 00:41:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:41:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m ==> Parameters: 
2023-01-26 00:41:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m <==    Updates: 0
2023-01-26 00:41:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703753549484032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:41:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273703774466478080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:41:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:41:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m ==> Parameters: 
2023-01-26 00:41:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m <==    Updates: 1
2023-01-26 00:41:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273703774466478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:41:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273703900312375296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:41:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:41:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m ==> Parameters: 
2023-01-26 00:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m <==    Updates: 1
2023-01-26 00:41:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273703900312375296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:42:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704005157392384[0;39m 生成今日电子书快照开始
2023-01-26 00:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m ==> Parameters: 
2023-01-26 00:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m <==    Updates: 0
2023-01-26 00:42:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704005157392384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:42:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273704026128912384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m ==> Parameters: 
2023-01-26 00:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m <==    Updates: 1
2023-01-26 00:42:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273704026128912384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:42:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273704151999975424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:42:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m ==> Parameters: 
2023-01-26 00:42:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m <==    Updates: 1
2023-01-26 00:42:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273704151999975424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:43:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704256815632384[0;39m 生成今日电子书快照开始
2023-01-26 00:43:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:43:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m ==> Parameters: 
2023-01-26 00:43:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m <==    Updates: 0
2023-01-26 00:43:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704256815632384[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 00:43:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273704277778763776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m ==> Parameters: 
2023-01-26 00:43:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m <==    Updates: 1
2023-01-26 00:43:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273704277778763776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:43:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273704403624660992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m ==> Parameters: 
2023-01-26 00:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m <==    Updates: 1
2023-01-26 00:43:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273704403624660992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:44:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704508473872384[0;39m 生成今日电子书快照开始
2023-01-26 00:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:44:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m ==> Parameters: 
2023-01-26 00:44:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m <==    Updates: 0
2023-01-26 00:44:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704508473872384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:44:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273704529466363904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:44:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:44:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m ==> Parameters: 
2023-01-26 00:44:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m <==    Updates: 1
2023-01-26 00:44:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273704529466363904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:44:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273704655299678208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:44:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m ==> Parameters: 
2023-01-26 00:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m <==    Updates: 1
2023-01-26 00:44:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273704655299678208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:45:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704760127918080[0;39m 生成今日电子书快照开始
2023-01-26 00:45:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:45:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m ==> Parameters: 
2023-01-26 00:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m <==    Updates: 0
2023-01-26 00:45:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704760127918080[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 00:45:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273704781116215296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:45:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:45:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m ==> Parameters: 
2023-01-26 00:45:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m <==    Updates: 1
2023-01-26 00:45:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273704781116215296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:45:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273704906945335296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:45:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:45:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m ==> Parameters: 
2023-01-26 00:45:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m <==    Updates: 1
2023-01-26 00:45:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273704906945335296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:46:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705011794546688[0;39m 生成今日电子书快照开始
2023-01-26 00:46:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:46:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m ==> Parameters: 
2023-01-26 00:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m <==    Updates: 0
2023-01-26 00:46:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705011794546688[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 00:46:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273705032803815424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m ==> Parameters: 
2023-01-26 00:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m <==    Updates: 1
2023-01-26 00:46:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273705032803815424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:46:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273705158586798080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m ==> Parameters: 
2023-01-26 00:46:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m <==    Updates: 1
2023-01-26 00:46:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273705158586798080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:47:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705263436009472[0;39m 生成今日电子书快照开始
2023-01-26 00:47:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:47:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m ==> Parameters: 
2023-01-26 00:47:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m <==    Updates: 0
2023-01-26 00:47:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705263436009472[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:47:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273705284449472512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:47:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:47:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m ==> Parameters: 
2023-01-26 00:47:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m <==    Updates: 1
2023-01-26 00:47:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273705284449472512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:47:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273705410257620992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:47:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:47:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m ==> Parameters: 
2023-01-26 00:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m <==    Updates: 1
2023-01-26 00:47:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273705410257620992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:48:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705515144581120[0;39m 生成今日电子书快照开始
2023-01-26 00:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m ==> Parameters: 
2023-01-26 00:48:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m <==    Updates: 0
2023-01-26 00:48:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705515144581120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:48:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273705536069963776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:48:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:48:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m ==> Parameters: 
2023-01-26 00:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m <==    Updates: 1
2023-01-26 00:48:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273705536069963776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 00:48:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273705661903278080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:48:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:48:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m ==> Parameters: 
2023-01-26 00:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m <==    Updates: 1
2023-01-26 00:48:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273705661903278080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:49:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705766773460992[0;39m 生成今日电子书快照开始
2023-01-26 00:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m ==> Parameters: 
2023-01-26 00:49:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m <==    Updates: 0
2023-01-26 00:49:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705766773460992[0;39m 生成今日电子书快照结束，耗时：23毫秒
2023-01-26 00:49:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273705787740786688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:49:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m ==> Parameters: 
2023-01-26 00:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m <==    Updates: 1
2023-01-26 00:49:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273705787740786688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:49:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273705913582489600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m ==> Parameters: 
2023-01-26 00:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m <==    Updates: 1
2023-01-26 00:49:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273705913582489600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:50:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706018444283904[0;39m 生成今日电子书快照开始
2023-01-26 00:50:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:50:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m ==> Parameters: 
2023-01-26 00:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m <==    Updates: 0
2023-01-26 00:50:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706018444283904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:50:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273706039411609600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:50:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:50:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m ==> Parameters: 
2023-01-26 00:50:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m <==    Updates: 1
2023-01-26 00:50:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273706039411609600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:50:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273706165265895424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m ==> Parameters: 
2023-01-26 00:50:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m <==    Updates: 1
2023-01-26 00:50:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273706165265895424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:51:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706270081552384[0;39m 生成今日电子书快照开始
2023-01-26 00:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m ==> Parameters: 
2023-01-26 00:51:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m <==    Updates: 0
2023-01-26 00:51:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706270081552384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:51:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273706291090821120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m ==> Parameters: 
2023-01-26 00:51:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m <==    Updates: 1
2023-01-26 00:51:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273706291090821120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:51:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273706416886386688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:51:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m ==> Parameters: 
2023-01-26 00:51:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m <==    Updates: 1
2023-01-26 00:51:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273706416886386688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:52:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706521760763904[0;39m 生成今日电子书快照开始
2023-01-26 00:52:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:52:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m ==> Parameters: 
2023-01-26 00:52:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m <==    Updates: 0
2023-01-26 00:52:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706521760763904[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 00:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273706542757449728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:52:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m ==> Parameters: 
2023-01-26 00:52:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m <==    Updates: 1
2023-01-26 00:52:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273706542757449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:52:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273706668548820992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m ==> Parameters: 
2023-01-26 00:52:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m <==    Updates: 1
2023-01-26 00:52:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273706668548820992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:53:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706773444169728[0;39m 生成今日电子书快照开始
2023-01-26 00:53:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m ==> Parameters: 
2023-01-26 00:53:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m <==    Updates: 0
2023-01-26 00:53:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706773444169728[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 00:53:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273706794386329600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m ==> Parameters: 
2023-01-26 00:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m <==    Updates: 1
2023-01-26 00:53:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273706794386329600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:53:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273706920240615424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:53:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m ==> Parameters: 
2023-01-26 00:53:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m <==    Updates: 1
2023-01-26 00:53:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273706920240615424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:54:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707025068855296[0;39m 生成今日电子书快照开始
2023-01-26 00:54:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:54:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m ==> Parameters: 
2023-01-26 00:54:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m <==    Updates: 0
2023-01-26 00:54:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707025068855296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:54:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707046019403776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:54:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:54:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m ==> Parameters: 
2023-01-26 00:54:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m <==    Updates: 1
2023-01-26 00:54:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273707046019403776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:54:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273707171890466816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:54:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:54:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m ==> Parameters: 
2023-01-26 00:54:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m <==    Updates: 1
2023-01-26 00:54:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273707171890466816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:55:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707276756455424[0;39m 生成今日电子书快照开始
2023-01-26 00:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m ==> Parameters: 
2023-01-26 00:55:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m <==    Updates: 0
2023-01-26 00:55:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707276756455424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:55:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273707297715392512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:55:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:55:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m ==> Parameters: 
2023-01-26 00:55:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m <==    Updates: 1
2023-01-26 00:55:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273707297715392512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:55:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273707423523540992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:55:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:55:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m ==> Parameters: 
2023-01-26 00:55:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m <==    Updates: 1
2023-01-26 00:55:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273707423523540992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:56:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707528402112512[0;39m 生成今日电子书快照开始
2023-01-26 00:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m ==> Parameters: 
2023-01-26 00:56:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m <==    Updates: 0
2023-01-26 00:56:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707528402112512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:56:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707549335883776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:56:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:56:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m ==> Parameters: 
2023-01-26 00:56:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m <==    Updates: 1
2023-01-26 00:56:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273707549335883776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:56:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273707675185975296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:56:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m ==> Parameters: 
2023-01-26 00:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m <==    Updates: 1
2023-01-26 00:56:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273707675185975296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:57:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707780043575296[0;39m 生成今日电子书快照开始
2023-01-26 00:57:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m ==> Parameters: 
2023-01-26 00:57:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m <==    Updates: 0
2023-01-26 00:57:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707780043575296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:57:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273707801036066816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:57:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m ==> Parameters: 
2023-01-26 00:57:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m <==    Updates: 1
2023-01-26 00:57:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273707801036066816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:57:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707926823243776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m ==> Parameters: 
2023-01-26 00:57:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m <==    Updates: 1
2023-01-26 00:57:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273707926823243776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708031731175424[0;39m 生成今日电子书快照开始
2023-01-26 00:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:58:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m ==> Parameters: 
2023-01-26 00:58:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m <==    Updates: 0
2023-01-26 00:58:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708031731175424[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:58:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273708052669140992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m ==> Parameters: 
2023-01-26 00:58:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m <==    Updates: 1
2023-01-26 00:58:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273708052669140992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:58:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273708178494066688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:58:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:58:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m ==> Parameters: 
2023-01-26 00:58:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m <==    Updates: 1
2023-01-26 00:58:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273708178494066688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 00:59:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708283343278080[0;39m 生成今日电子书快照开始
2023-01-26 00:59:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:59:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m ==> Parameters: 
2023-01-26 00:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m <==    Updates: 0
2023-01-26 00:59:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708283343278080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:59:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273708304310603776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:59:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:59:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m ==> Parameters: 
2023-01-26 00:59:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m <==    Updates: 1
2023-01-26 00:59:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273708304310603776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:59:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273708430143918080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:59:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:59:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m ==> Parameters: 
2023-01-26 00:59:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m <==    Updates: 1
2023-01-26 00:59:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273708430143918080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:00:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708535005712384[0;39m 生成今日电子书快照开始
2023-01-26 01:00:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m ==> Parameters: 
2023-01-26 01:00:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m <==    Updates: 0
2023-01-26 01:00:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708535005712384[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 01:00:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273708555985620992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m ==> Parameters: 
2023-01-26 01:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m <==    Updates: 1
2023-01-26 01:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273708555985620992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:00:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273708681823129600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:00:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m ==> Parameters: 
2023-01-26 01:00:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m <==    Updates: 1
2023-01-26 01:00:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273708681823129600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:01:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708786680729600[0;39m 生成今日电子书快照开始
2023-01-26 01:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m ==> Parameters: 
2023-01-26 01:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m <==    Updates: 0
2023-01-26 01:01:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708786680729600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:01:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273708807639666688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:01:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m ==> Parameters: 
2023-01-26 01:01:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m <==    Updates: 1
2023-01-26 01:01:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273708807639666688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:01:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273708933493952512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m ==> Parameters: 
2023-01-26 01:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m <==    Updates: 1
2023-01-26 01:01:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273708933493952512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:02:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709038372524032[0;39m 生成今日电子书快照开始
2023-01-26 01:02:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:02:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m ==> Parameters: 
2023-01-26 01:02:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m <==    Updates: 0
2023-01-26 01:02:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709038372524032[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 01:02:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273709059335655424[0;39m 更新电子书下的文档数据开始
2023-01-26 01:02:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:02:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m ==> Parameters: 
2023-01-26 01:02:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m <==    Updates: 1
2023-01-26 01:02:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273709059335655424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:02:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273709185114443776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:02:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m ==> Parameters: 
2023-01-26 01:02:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m <==    Updates: 1
2023-01-26 01:02:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273709185114443776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:03:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709290026569728[0;39m 生成今日电子书快照开始
2023-01-26 01:03:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:03:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m ==> Parameters: 
2023-01-26 01:03:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m <==    Updates: 0
2023-01-26 01:03:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709290026569728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:03:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273709310951952384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m ==> Parameters: 
2023-01-26 01:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m <==    Updates: 1
2023-01-26 01:03:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273709310951952384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:03:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273709436810432512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m ==> Parameters: 
2023-01-26 01:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m <==    Updates: 1
2023-01-26 01:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273709436810432512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:04:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709541626089472[0;39m 生成今日电子书快照开始
2023-01-26 01:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:04:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m ==> Parameters: 
2023-01-26 01:04:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m <==    Updates: 0
2023-01-26 01:04:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709541626089472[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273709562639552512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m ==> Parameters: 
2023-01-26 01:04:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m <==    Updates: 1
2023-01-26 01:04:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273709562639552512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:04:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273709688439312384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m ==> Parameters: 
2023-01-26 01:04:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m <==    Updates: 1
2023-01-26 01:04:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273709688439312384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:05:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709793288523776[0;39m 生成今日电子书快照开始
2023-01-26 01:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m ==> Parameters: 
2023-01-26 01:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m <==    Updates: 0
2023-01-26 01:05:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709793288523776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:05:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273709814293598208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m ==> Parameters: 
2023-01-26 01:05:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m <==    Updates: 1
2023-01-26 01:05:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273709814293598208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:05:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273709940135301120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:05:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:05:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m ==> Parameters: 
2023-01-26 01:05:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m <==    Updates: 1
2023-01-26 01:05:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273709940135301120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710044959346688[0;39m 生成今日电子书快照开始
2023-01-26 01:06:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m ==> Parameters: 
2023-01-26 01:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m <==    Updates: 0
2023-01-26 01:06:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710044959346688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:06:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273710065909895168[0;39m 更新电子书下的文档数据开始
2023-01-26 01:06:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:06:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m ==> Parameters: 
2023-01-26 01:06:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m <==    Updates: 1
2023-01-26 01:06:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273710065909895168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:06:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273710191751598080[0;39m 更新电子书下的文档数据开始
2023-01-26 01:06:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m ==> Parameters: 
2023-01-26 01:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m <==    Updates: 1
2023-01-26 01:06:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273710191751598080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:07:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710296655335424[0;39m 生成今日电子书快照开始
2023-01-26 01:07:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:07:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m ==> Parameters: 
2023-01-26 01:07:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m <==    Updates: 0
2023-01-26 01:07:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710296655335424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:07:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273710317589106688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m ==> Parameters: 
2023-01-26 01:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m <==    Updates: 1
2023-01-26 01:07:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273710317589106688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:07:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273710443405643776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:07:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:07:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m ==> Parameters: 
2023-01-26 01:07:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m <==    Updates: 1
2023-01-26 01:07:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273710443405643776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:08:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710548263243776[0;39m 生成今日电子书快照开始
2023-01-26 01:08:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:08:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m ==> Parameters: 
2023-01-26 01:08:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m <==    Updates: 0
2023-01-26 01:08:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710548263243776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:08:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273710569280901120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m ==> Parameters: 
2023-01-26 01:08:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m <==    Updates: 1
2023-01-26 01:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273710569280901120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:08:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273710695105826816[0;39m 更新电子书下的文档数据开始
2023-01-26 01:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m ==> Parameters: 
2023-01-26 01:08:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m <==    Updates: 1
2023-01-26 01:08:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273710695105826816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:09:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710799967621120[0;39m 生成今日电子书快照开始
2023-01-26 01:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m ==> Parameters: 
2023-01-26 01:09:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m <==    Updates: 0
2023-01-26 01:09:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710799967621120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:09:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273710820913975296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:09:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:09:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m ==> Parameters: 
2023-01-26 01:09:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m <==    Updates: 1
2023-01-26 01:09:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273710820913975296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:09:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273710946768261120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:09:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m ==> Parameters: 
2023-01-26 01:09:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m <==    Updates: 1
2023-01-26 01:09:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273710946768261120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:10:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273711051571335168[0;39m 生成今日电子书快照开始
2023-01-26 01:10:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:10:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m ==> Parameters: 
2023-01-26 01:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m <==    Updates: 0
2023-01-26 01:10:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273711051571335168[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 01:10:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273711072551243776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:10:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711072551243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
