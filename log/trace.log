2023-01-25 17:34:20.326 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-01-25 17:34:20.342 INFO  com.example.wiki.config.WikiApplication           :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_352 on Noland with PID 27684 (C:\Users\amper\project\Wiki\Knowledge-Based-System\wiki\target\classes started by amper in C:\Users\amper\project\Wiki\Knowledge-Based-System)
2023-01-25 17:34:20.342 INFO  com.example.wiki.config.WikiApplication           :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-01-25 17:34:20.412 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-01-25 17:34:20.413 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-01-25 17:34:21.241 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-01-25 17:34:21.244 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-01-25 17:34:21.266 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-01-25 17:34:21.989 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8080 (http)
2023-01-25 17:34:21.998 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8080"]
2023-01-25 17:34:21.999 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-01-25 17:34:22.000 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-01-25 17:34:22.209 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-01-25 17:34:22.210 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1796 ms
2023-01-25 17:34:23.233 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-01-25 17:34:23.672 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-01-25 17:34:23.746 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-01-25 17:34:23.777 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8080"]
2023-01-25 17:34:23.798 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8080 (http) with context path ''
2023-01-25 17:34:23.815 INFO  com.example.wiki.config.WikiApplication           :61   [32m                  [0;39m Started WikiApplication in 4.031 seconds (JVM running for 5.519)
2023-01-25 17:34:23.818 INFO  com.example.wiki.config.WikiApplication           :24   [32m                  [0;39m Start successfully!
2023-01-25 17:34:23.818 INFO  com.example.wiki.config.WikiApplication           :25   [32m                  [0;39m Address: 	http://127.0.0.1:8080
2023-01-25 17:34:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273596442269061120[0;39m 更新电子书下的文档数据开始
2023-01-25 17:34:35.036 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m273596442269061120[0;39m HikariPool-1 - Starting...
2023-01-25 17:34:35.474 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m273596442269061120[0;39m HikariPool-1 - Start completed.
2023-01-25 17:34:35.483 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596442269061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:34:35.507 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596442269061120[0;39m ==> Parameters: 
2023-01-25 17:34:35.513 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596442269061120[0;39m <==    Updates: 1
2023-01-25 17:34:35.515 INFO  com.example.wiki.job.DocJob                       :35   [32m273596442269061120[0;39m 更新电子书下的文档数据结束，耗时：501毫秒
2023-01-25 17:34:57.739 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-25 17:34:57.740 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-01-25 17:34:57.743 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-01-25 17:34:57.862 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m273596538054381568[0;39m ------------- 开始 -------------
2023-01-25 17:34:57.864 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m273596538054381568[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-25 17:34:57.864 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m273596538054381568[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-25 17:34:57.864 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m273596538054381568[0;39m 远程地址: 127.0.0.1
2023-01-25 17:34:57.935 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m273596538054381568[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-25 17:34:57.981 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273596538054381568[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-25 17:34:57.981 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273596538054381568[0;39m ==> Parameters: 
2023-01-25 17:34:57.999 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273596538054381568[0;39m <==    Columns: count(0)
2023-01-25 17:34:58.000 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273596538054381568[0;39m <==        Row: 5
2023-01-25 17:34:58.001 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273596538054381568[0;39m <==      Total: 1
2023-01-25 17:34:58.001 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273596538054381568[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-25 17:34:58.002 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273596538054381568[0;39m ==> Parameters: 
2023-01-25 17:34:58.003 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-25 17:34:58.003 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-25 17:34:58.004 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 17:34:58.004 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 17:34:58.005 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 17:34:58.005 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273596538054381568[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 17:34:58.006 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273596538054381568[0;39m <==      Total: 5
2023-01-25 17:34:58.007 INFO  com.example.wiki.service.EbookService             :51   [32m273596538054381568[0;39m 总行数 5
2023-01-25 17:34:58.008 INFO  com.example.wiki.service.EbookService             :52   [32m273596538054381568[0;39m 总页数 0
2023-01-25 17:34:58.016 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m273596538054381568[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-25 17:34:58.017 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m273596538054381568[0;39m ------------- 结束 耗时：167 ms -------------
2023-01-25 17:35:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273596547135049728[0;39m 生成今日电子书快照开始
2023-01-25 17:35:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596547135049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:35:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596547135049728[0;39m ==> Parameters: 
2023-01-25 17:35:00.060 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596547135049728[0;39m <==    Updates: 5
2023-01-25 17:35:00.063 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273596547135049728[0;39m 生成今日电子书快照结束，耗时：44毫秒
2023-01-25 17:35:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273596568098181120[0;39m 更新电子书下的文档数据开始
2023-01-25 17:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596568098181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:35:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596568098181120[0;39m ==> Parameters: 
2023-01-25 17:35:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596568098181120[0;39m <==    Updates: 1
2023-01-25 17:35:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273596568098181120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:35:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273596693889552384[0;39m 更新电子书下的文档数据开始
2023-01-25 17:35:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596693889552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:35:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596693889552384[0;39m ==> Parameters: 
2023-01-25 17:35:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596693889552384[0;39m <==    Updates: 1
2023-01-25 17:35:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273596693889552384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:36:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273596798763929600[0;39m 生成今日电子书快照开始
2023-01-25 17:36:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596798763929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:36:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596798763929600[0;39m ==> Parameters: 
2023-01-25 17:36:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273596798763929600[0;39m <==    Updates: 0
2023-01-25 17:36:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273596798763929600[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-25 17:36:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273596819735449600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:36:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596819735449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596819735449600[0;39m ==> Parameters: 
2023-01-25 17:36:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596819735449600[0;39m <==    Updates: 1
2023-01-25 17:36:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273596819735449600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:36:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273596945543598080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596945543598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596945543598080[0;39m ==> Parameters: 
2023-01-25 17:36:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273596945543598080[0;39m <==    Updates: 1
2023-01-25 17:36:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273596945543598080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 17:37:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273597050409586688[0;39m 生成今日电子书快照开始
2023-01-25 17:37:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597050409586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:37:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597050409586688[0;39m ==> Parameters: 
2023-01-25 17:37:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597050409586688[0;39m <==    Updates: 0
2023-01-25 17:37:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273597050409586688[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-25 17:37:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273597071372718080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597071372718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597071372718080[0;39m ==> Parameters: 
2023-01-25 17:37:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597071372718080[0;39m <==    Updates: 1
2023-01-25 17:37:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273597071372718080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:37:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273597197218615296[0;39m 更新电子书下的文档数据开始
2023-01-25 17:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597197218615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:37:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597197218615296[0;39m ==> Parameters: 
2023-01-25 17:37:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597197218615296[0;39m <==    Updates: 1
2023-01-25 17:37:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273597197218615296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:38:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273597302076215296[0;39m 生成今日电子书快照开始
2023-01-25 17:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597302076215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597302076215296[0;39m ==> Parameters: 
2023-01-25 17:38:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597302076215296[0;39m <==    Updates: 0
2023-01-25 17:38:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273597302076215296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 17:38:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273597323064512512[0;39m 更新电子书下的文档数据开始
2023-01-25 17:38:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597323064512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597323064512512[0;39m ==> Parameters: 
2023-01-25 17:38:05.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597323064512512[0;39m <==    Updates: 1
2023-01-25 17:38:05.029 INFO  com.example.wiki.job.DocJob                       :35   [32m273597323064512512[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-25 17:38:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273597448885243904[0;39m 更新电子书下的文档数据开始
2023-01-25 17:38:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597448885243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:38:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597448885243904[0;39m ==> Parameters: 
2023-01-25 17:38:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597448885243904[0;39m <==    Updates: 1
2023-01-25 17:38:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273597448885243904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:39:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273597553709289472[0;39m 生成今日电子书快照开始
2023-01-25 17:39:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597553709289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:39:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597553709289472[0;39m ==> Parameters: 
2023-01-25 17:39:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597553709289472[0;39m <==    Updates: 0
2023-01-25 17:39:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273597553709289472[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-25 17:39:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273597574735335424[0;39m 更新电子书下的文档数据开始
2023-01-25 17:39:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597574735335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:39:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597574735335424[0;39m ==> Parameters: 
2023-01-25 17:39:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597574735335424[0;39m <==    Updates: 1
2023-01-25 17:39:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273597574735335424[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-25 17:39:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273597700539289600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597700539289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597700539289600[0;39m ==> Parameters: 
2023-01-25 17:39:35.027 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597700539289600[0;39m <==    Updates: 1
2023-01-25 17:39:35.028 INFO  com.example.wiki.job.DocJob                       :35   [32m273597700539289600[0;39m 更新电子书下的文档数据结束，耗时：19毫秒
2023-01-25 17:40:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273597805375918080[0;39m 生成今日电子书快照开始
2023-01-25 17:40:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597805375918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:40:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597805375918080[0;39m ==> Parameters: 
2023-01-25 17:40:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273597805375918080[0;39m <==    Updates: 0
2023-01-25 17:40:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273597805375918080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 17:40:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273597826389381120[0;39m 更新电子书下的文档数据开始
2023-01-25 17:40:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597826389381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:40:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597826389381120[0;39m ==> Parameters: 
2023-01-25 17:40:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597826389381120[0;39m <==    Updates: 1
2023-01-25 17:40:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273597826389381120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 17:40:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273597952172363776[0;39m 更新电子书下的文档数据开始
2023-01-25 17:40:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597952172363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:40:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597952172363776[0;39m ==> Parameters: 
2023-01-25 17:40:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273597952172363776[0;39m <==    Updates: 1
2023-01-25 17:40:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273597952172363776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:41:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273598057055129600[0;39m 生成今日电子书快照开始
2023-01-25 17:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598057055129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:41:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598057055129600[0;39m ==> Parameters: 
2023-01-25 17:41:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598057055129600[0;39m <==    Updates: 0
2023-01-25 17:41:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273598057055129600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 17:41:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273598078005678080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:41:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598078005678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:41:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598078005678080[0;39m ==> Parameters: 
2023-01-25 17:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598078005678080[0;39m <==    Updates: 1
2023-01-25 17:41:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273598078005678080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 17:41:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273598203834798080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:41:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598203834798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:41:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598203834798080[0;39m ==> Parameters: 
2023-01-25 17:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598203834798080[0;39m <==    Updates: 1
2023-01-25 17:41:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273598203834798080[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:42:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273598308692398080[0;39m 生成今日电子书快照开始
2023-01-25 17:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598308692398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598308692398080[0;39m ==> Parameters: 
2023-01-25 17:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598308692398080[0;39m <==    Updates: 0
2023-01-25 17:42:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273598308692398080[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 17:42:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273598329676500992[0;39m 更新电子书下的文档数据开始
2023-01-25 17:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598329676500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598329676500992[0;39m ==> Parameters: 
2023-01-25 17:42:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598329676500992[0;39m <==    Updates: 1
2023-01-25 17:42:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273598329676500992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 17:42:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273598455484649472[0;39m 更新电子书下的文档数据开始
2023-01-25 17:42:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598455484649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:42:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598455484649472[0;39m ==> Parameters: 
2023-01-25 17:42:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598455484649472[0;39m <==    Updates: 1
2023-01-25 17:42:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273598455484649472[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:43:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273598560342249472[0;39m 生成今日电子书快照开始
2023-01-25 17:43:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598560342249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:43:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598560342249472[0;39m ==> Parameters: 
2023-01-25 17:43:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598560342249472[0;39m <==    Updates: 0
2023-01-25 17:43:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273598560342249472[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-25 17:43:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273598581347323904[0;39m 更新电子书下的文档数据开始
2023-01-25 17:43:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598581347323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:43:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598581347323904[0;39m ==> Parameters: 
2023-01-25 17:43:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598581347323904[0;39m <==    Updates: 1
2023-01-25 17:43:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273598581347323904[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-25 17:43:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273598707151278080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:43:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598707151278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:43:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598707151278080[0;39m ==> Parameters: 
2023-01-25 17:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598707151278080[0;39m <==    Updates: 1
2023-01-25 17:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273598707151278080[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-25 17:44:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273598812000489472[0;39m 生成今日电子书快照开始
2023-01-25 17:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598812000489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598812000489472[0;39m ==> Parameters: 
2023-01-25 17:44:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273598812000489472[0;39m <==    Updates: 0
2023-01-25 17:44:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273598812000489472[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 17:44:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273598833030729728[0;39m 更新电子书下的文档数据开始
2023-01-25 17:44:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598833030729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:44:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598833030729728[0;39m ==> Parameters: 
2023-01-25 17:44:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598833030729728[0;39m <==    Updates: 1
2023-01-25 17:44:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273598833030729728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:44:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273598958847266816[0;39m 更新电子书下的文档数据开始
2023-01-25 17:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598958847266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:44:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598958847266816[0;39m ==> Parameters: 
2023-01-25 17:44:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273598958847266816[0;39m <==    Updates: 1
2023-01-25 17:44:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273598958847266816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:45:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273599063658729472[0;39m 生成今日电子书快照开始
2023-01-25 17:45:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599063658729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:45:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599063658729472[0;39m ==> Parameters: 
2023-01-25 17:45:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599063658729472[0;39m <==    Updates: 0
2023-01-25 17:45:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273599063658729472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 17:45:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273599084642832384[0;39m 更新电子书下的文档数据开始
2023-01-25 17:45:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599084642832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:45:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599084642832384[0;39m ==> Parameters: 
2023-01-25 17:45:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599084642832384[0;39m <==    Updates: 1
2023-01-25 17:45:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273599084642832384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:45:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273599210488729600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:45:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599210488729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:45:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599210488729600[0;39m ==> Parameters: 
2023-01-25 17:45:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599210488729600[0;39m <==    Updates: 1
2023-01-25 17:45:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273599210488729600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:46:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273599315354718208[0;39m 生成今日电子书快照开始
2023-01-25 17:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599315354718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:46:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599315354718208[0;39m ==> Parameters: 
2023-01-25 17:46:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599315354718208[0;39m <==    Updates: 0
2023-01-25 17:46:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273599315354718208[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-25 17:46:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273599336338821120[0;39m 更新电子书下的文档数据开始
2023-01-25 17:46:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599336338821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599336338821120[0;39m ==> Parameters: 
2023-01-25 17:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599336338821120[0;39m <==    Updates: 1
2023-01-25 17:46:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273599336338821120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:46:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273599462167941120[0;39m 更新电子书下的文档数据开始
2023-01-25 17:46:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599462167941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:46:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599462167941120[0;39m ==> Parameters: 
2023-01-25 17:46:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599462167941120[0;39m <==    Updates: 1
2023-01-25 17:46:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273599462167941120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:47:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273599567012958208[0;39m 生成今日电子书快照开始
2023-01-25 17:47:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599567012958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:47:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599567012958208[0;39m ==> Parameters: 
2023-01-25 17:47:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599567012958208[0;39m <==    Updates: 0
2023-01-25 17:47:00.031 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273599567012958208[0;39m 生成今日电子书快照结束，耗时：21毫秒
2023-01-25 17:47:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273599587992866816[0;39m 更新电子书下的文档数据开始
2023-01-25 17:47:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599587992866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:47:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599587992866816[0;39m ==> Parameters: 
2023-01-25 17:47:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599587992866816[0;39m <==    Updates: 1
2023-01-25 17:47:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273599587992866816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:47:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273599713838764032[0;39m 更新电子书下的文档数据开始
2023-01-25 17:47:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599713838764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:47:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599713838764032[0;39m ==> Parameters: 
2023-01-25 17:47:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599713838764032[0;39m <==    Updates: 1
2023-01-25 17:47:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273599713838764032[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:48:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273599818650226688[0;39m 生成今日电子书快照开始
2023-01-25 17:48:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599818650226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:48:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599818650226688[0;39m ==> Parameters: 
2023-01-25 17:48:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273599818650226688[0;39m <==    Updates: 0
2023-01-25 17:48:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273599818650226688[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-25 17:48:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273599839613358080[0;39m 更新电子书下的文档数据开始
2023-01-25 17:48:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599839613358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:48:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599839613358080[0;39m ==> Parameters: 
2023-01-25 17:48:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599839613358080[0;39m <==    Updates: 1
2023-01-25 17:48:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273599839613358080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:48:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273599965446672384[0;39m 更新电子书下的文档数据开始
2023-01-25 17:48:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599965446672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599965446672384[0;39m ==> Parameters: 
2023-01-25 17:48:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273599965446672384[0;39m <==    Updates: 1
2023-01-25 17:48:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273599965446672384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:49:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273600070350409728[0;39m 生成今日电子书快照开始
2023-01-25 17:49:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600070350409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:49:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600070350409728[0;39m ==> Parameters: 
2023-01-25 17:49:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600070350409728[0;39m <==    Updates: 0
2023-01-25 17:49:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273600070350409728[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 17:49:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273600091267403776[0;39m 更新电子书下的文档数据开始
2023-01-25 17:49:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600091267403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:49:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600091267403776[0;39m ==> Parameters: 
2023-01-25 17:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600091267403776[0;39m <==    Updates: 1
2023-01-25 17:49:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273600091267403776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:49:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273600217113300992[0;39m 更新电子书下的文档数据开始
2023-01-25 17:49:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600217113300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:49:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600217113300992[0;39m ==> Parameters: 
2023-01-25 17:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600217113300992[0;39m <==    Updates: 1
2023-01-25 17:49:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273600217113300992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:50:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273600321987678208[0;39m 生成今日电子书快照开始
2023-01-25 17:50:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600321987678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:50:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600321987678208[0;39m ==> Parameters: 
2023-01-25 17:50:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600321987678208[0;39m <==    Updates: 0
2023-01-25 17:50:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273600321987678208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 17:50:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273600342963392512[0;39m 更新电子书下的文档数据开始
2023-01-25 17:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600342963392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600342963392512[0;39m ==> Parameters: 
2023-01-25 17:50:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600342963392512[0;39m <==    Updates: 1
2023-01-25 17:50:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273600342963392512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:50:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273600468779929600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:50:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600468779929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:50:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600468779929600[0;39m ==> Parameters: 
2023-01-25 17:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600468779929600[0;39m <==    Updates: 1
2023-01-25 17:50:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273600468779929600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:51:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273600573650112512[0;39m 生成今日电子书快照开始
2023-01-25 17:51:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600573650112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:51:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600573650112512[0;39m ==> Parameters: 
2023-01-25 17:51:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600573650112512[0;39m <==    Updates: 0
2023-01-25 17:51:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273600573650112512[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 17:51:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273600594604855296[0;39m 更新电子书下的文档数据开始
2023-01-25 17:51:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600594604855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:51:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600594604855296[0;39m ==> Parameters: 
2023-01-25 17:51:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600594604855296[0;39m <==    Updates: 1
2023-01-25 17:51:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273600594604855296[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-25 17:51:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273600720454946816[0;39m 更新电子书下的文档数据开始
2023-01-25 17:51:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600720454946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:51:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600720454946816[0;39m ==> Parameters: 
2023-01-25 17:51:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600720454946816[0;39m <==    Updates: 1
2023-01-25 17:51:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273600720454946816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:52:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273600825304158208[0;39m 生成今日电子书快照开始
2023-01-25 17:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600825304158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:52:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600825304158208[0;39m ==> Parameters: 
2023-01-25 17:52:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273600825304158208[0;39m <==    Updates: 0
2023-01-25 17:52:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273600825304158208[0;39m 生成今日电子书快照结束，耗时：17毫秒
2023-01-25 17:52:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273600846267289600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:52:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600846267289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:52:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600846267289600[0;39m ==> Parameters: 
2023-01-25 17:52:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600846267289600[0;39m <==    Updates: 1
2023-01-25 17:52:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273600846267289600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:52:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273600972100603904[0;39m 更新电子书下的文档数据开始
2023-01-25 17:52:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600972100603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:52:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600972100603904[0;39m ==> Parameters: 
2023-01-25 17:52:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273600972100603904[0;39m <==    Updates: 1
2023-01-25 17:52:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273600972100603904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:53:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273601076979175424[0;39m 生成今日电子书快照开始
2023-01-25 17:53:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601076979175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601076979175424[0;39m ==> Parameters: 
2023-01-25 17:53:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601076979175424[0;39m <==    Updates: 0
2023-01-25 17:53:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273601076979175424[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 17:53:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273601097929723904[0;39m 更新电子书下的文档数据开始
2023-01-25 17:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601097929723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601097929723904[0;39m ==> Parameters: 
2023-01-25 17:53:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601097929723904[0;39m <==    Updates: 1
2023-01-25 17:53:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273601097929723904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:53:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273601223779815424[0;39m 更新电子书下的文档数据开始
2023-01-25 17:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601223779815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601223779815424[0;39m ==> Parameters: 
2023-01-25 17:53:35.029 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601223779815424[0;39m <==    Updates: 1
2023-01-25 17:53:35.029 INFO  com.example.wiki.job.DocJob                       :35   [32m273601223779815424[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-25 17:54:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273601328612249600[0;39m 生成今日电子书快照开始
2023-01-25 17:54:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601328612249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601328612249600[0;39m ==> Parameters: 
2023-01-25 17:54:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601328612249600[0;39m <==    Updates: 0
2023-01-25 17:54:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273601328612249600[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 17:54:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273601349600546816[0;39m 更新电子书下的文档数据开始
2023-01-25 17:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601349600546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:54:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601349600546816[0;39m ==> Parameters: 
2023-01-25 17:54:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601349600546816[0;39m <==    Updates: 1
2023-01-25 17:54:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273601349600546816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:54:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273601475412889600[0;39m 更新电子书下的文档数据开始
2023-01-25 17:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601475412889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:54:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601475412889600[0;39m ==> Parameters: 
2023-01-25 17:54:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601475412889600[0;39m <==    Updates: 1
2023-01-25 17:54:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273601475412889600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:55:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273601580304044032[0;39m 生成今日电子书快照开始
2023-01-25 17:55:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601580304044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:55:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601580304044032[0;39m ==> Parameters: 
2023-01-25 17:55:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601580304044032[0;39m <==    Updates: 0
2023-01-25 17:55:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273601580304044032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 17:55:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273601601271369728[0;39m 更新电子书下的文档数据开始
2023-01-25 17:55:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601601271369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:55:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601601271369728[0;39m ==> Parameters: 
2023-01-25 17:55:05.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601601271369728[0;39m <==    Updates: 1
2023-01-25 17:55:05.028 INFO  com.example.wiki.job.DocJob                       :35   [32m273601601271369728[0;39m 更新电子书下的文档数据结束，耗时：13毫秒
2023-01-25 17:55:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273601727096295424[0;39m 更新电子书下的文档数据开始
2023-01-25 17:55:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601727096295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:55:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601727096295424[0;39m ==> Parameters: 
2023-01-25 17:55:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601727096295424[0;39m <==    Updates: 1
2023-01-25 17:55:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273601727096295424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:56:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273601831949701120[0;39m 生成今日电子书快照开始
2023-01-25 17:56:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601831949701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:56:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601831949701120[0;39m ==> Parameters: 
2023-01-25 17:56:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273601831949701120[0;39m <==    Updates: 0
2023-01-25 17:56:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273601831949701120[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 17:56:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273601852925415424[0;39m 更新电子书下的文档数据开始
2023-01-25 17:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601852925415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:56:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601852925415424[0;39m ==> Parameters: 
2023-01-25 17:56:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601852925415424[0;39m <==    Updates: 1
2023-01-25 17:56:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273601852925415424[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:56:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273601978695815168[0;39m 更新电子书下的文档数据开始
2023-01-25 17:56:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601978695815168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:56:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601978695815168[0;39m ==> Parameters: 
2023-01-25 17:56:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273601978695815168[0;39m <==    Updates: 1
2023-01-25 17:56:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273601978695815168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:57:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273602083574386688[0;39m 生成今日电子书快照开始
2023-01-25 17:57:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602083574386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602083574386688[0;39m ==> Parameters: 
2023-01-25 17:57:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602083574386688[0;39m <==    Updates: 0
2023-01-25 17:57:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273602083574386688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 17:57:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273602104587849728[0;39m 更新电子书下的文档数据开始
2023-01-25 17:57:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602104587849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:57:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602104587849728[0;39m ==> Parameters: 
2023-01-25 17:57:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602104587849728[0;39m <==    Updates: 1
2023-01-25 17:57:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273602104587849728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 17:57:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273602230421164032[0;39m 更新电子书下的文档数据开始
2023-01-25 17:57:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602230421164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:57:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602230421164032[0;39m ==> Parameters: 
2023-01-25 17:57:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602230421164032[0;39m <==    Updates: 1
2023-01-25 17:57:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273602230421164032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273602335270375424[0;39m 生成今日电子书快照开始
2023-01-25 17:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602335270375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:58:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602335270375424[0;39m ==> Parameters: 
2023-01-25 17:58:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602335270375424[0;39m <==    Updates: 0
2023-01-25 17:58:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273602335270375424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 17:58:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273602356199952384[0;39m 更新电子书下的文档数据开始
2023-01-25 17:58:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602356199952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602356199952384[0;39m ==> Parameters: 
2023-01-25 17:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602356199952384[0;39m <==    Updates: 1
2023-01-25 17:58:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273602356199952384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 17:58:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273602482058432512[0;39m 更新电子书下的文档数据开始
2023-01-25 17:58:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602482058432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:58:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602482058432512[0;39m ==> Parameters: 
2023-01-25 17:58:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602482058432512[0;39m <==    Updates: 1
2023-01-25 17:58:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273602482058432512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 17:59:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273602586899255296[0;39m 生成今日电子书快照开始
2023-01-25 17:59:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602586899255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 17:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602586899255296[0;39m ==> Parameters: 
2023-01-25 17:59:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602586899255296[0;39m <==    Updates: 0
2023-01-25 17:59:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273602586899255296[0;39m 生成今日电子书快照结束，耗时：21毫秒
2023-01-25 17:59:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273602607887552512[0;39m 更新电子书下的文档数据开始
2023-01-25 17:59:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602607887552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:59:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602607887552512[0;39m ==> Parameters: 
2023-01-25 17:59:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602607887552512[0;39m <==    Updates: 1
2023-01-25 17:59:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273602607887552512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 17:59:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273602733708283904[0;39m 更新电子书下的文档数据开始
2023-01-25 17:59:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602733708283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 17:59:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602733708283904[0;39m ==> Parameters: 
2023-01-25 17:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602733708283904[0;39m <==    Updates: 1
2023-01-25 17:59:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273602733708283904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:00:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273602838561689600[0;39m 生成今日电子书快照开始
2023-01-25 18:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602838561689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602838561689600[0;39m ==> Parameters: 
2023-01-25 18:00:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273602838561689600[0;39m <==    Updates: 0
2023-01-25 18:00:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273602838561689600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:00:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273602859549986816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:00:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602859549986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:00:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602859549986816[0;39m ==> Parameters: 
2023-01-25 18:00:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602859549986816[0;39m <==    Updates: 1
2023-01-25 18:00:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273602859549986816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 18:00:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273602985349746688[0;39m 更新电子书下的文档数据开始
2023-01-25 18:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602985349746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602985349746688[0;39m ==> Parameters: 
2023-01-25 18:00:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273602985349746688[0;39m <==    Updates: 1
2023-01-25 18:00:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273602985349746688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:01:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273603090207346688[0;39m 生成今日电子书快照开始
2023-01-25 18:01:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603090207346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:01:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603090207346688[0;39m ==> Parameters: 
2023-01-25 18:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603090207346688[0;39m <==    Updates: 0
2023-01-25 18:01:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273603090207346688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:01:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273603111208226816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603111208226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603111208226816[0;39m ==> Parameters: 
2023-01-25 18:01:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603111208226816[0;39m <==    Updates: 1
2023-01-25 18:01:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273603111208226816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:01:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273603237045735424[0;39m 更新电子书下的文档数据开始
2023-01-25 18:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603237045735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:01:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603237045735424[0;39m ==> Parameters: 
2023-01-25 18:01:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603237045735424[0;39m <==    Updates: 1
2023-01-25 18:01:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273603237045735424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:02:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273603341886558208[0;39m 生成今日电子书快照开始
2023-01-25 18:02:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603341886558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:02:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603341886558208[0;39m ==> Parameters: 
2023-01-25 18:02:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603341886558208[0;39m <==    Updates: 0
2023-01-25 18:02:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273603341886558208[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 18:02:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273603362841300992[0;39m 更新电子书下的文档数据开始
2023-01-25 18:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603362841300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603362841300992[0;39m ==> Parameters: 
2023-01-25 18:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603362841300992[0;39m <==    Updates: 1
2023-01-25 18:02:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273603362841300992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:02:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273603488653643776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603488653643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603488653643776[0;39m ==> Parameters: 
2023-01-25 18:02:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603488653643776[0;39m <==    Updates: 1
2023-01-25 18:02:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273603488653643776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:03:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273603593515438080[0;39m 生成今日电子书快照开始
2023-01-25 18:03:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603593515438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:03:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603593515438080[0;39m ==> Parameters: 
2023-01-25 18:03:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603593515438080[0;39m <==    Updates: 0
2023-01-25 18:03:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273603593515438080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 18:03:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273603614537289728[0;39m 更新电子书下的文档数据开始
2023-01-25 18:03:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603614537289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:03:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603614537289728[0;39m ==> Parameters: 
2023-01-25 18:03:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603614537289728[0;39m <==    Updates: 1
2023-01-25 18:03:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273603614537289728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:03:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273603740311883776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:03:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603740311883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:03:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603740311883776[0;39m ==> Parameters: 
2023-01-25 18:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603740311883776[0;39m <==    Updates: 1
2023-01-25 18:03:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273603740311883776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 18:04:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273603845194649600[0;39m 生成今日电子书快照开始
2023-01-25 18:04:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603845194649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:04:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603845194649600[0;39m ==> Parameters: 
2023-01-25 18:04:00.037 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273603845194649600[0;39m <==    Updates: 0
2023-01-25 18:04:00.038 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273603845194649600[0;39m 生成今日电子书快照结束，耗时：30毫秒
2023-01-25 18:04:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273603866141003776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:04:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603866141003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:04:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603866141003776[0;39m ==> Parameters: 
2023-01-25 18:04:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603866141003776[0;39m <==    Updates: 1
2023-01-25 18:04:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273603866141003776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:04:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273603992007872512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:04:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603992007872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603992007872512[0;39m ==> Parameters: 
2023-01-25 18:04:35.032 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273603992007872512[0;39m <==    Updates: 1
2023-01-25 18:04:35.032 INFO  com.example.wiki.job.DocJob                       :35   [32m273603992007872512[0;39m 更新电子书下的文档数据结束，耗时：21毫秒
2023-01-25 18:05:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273604096886444032[0;39m 生成今日电子书快照开始
2023-01-25 18:05:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604096886444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:05:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604096886444032[0;39m ==> Parameters: 
2023-01-25 18:05:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604096886444032[0;39m <==    Updates: 0
2023-01-25 18:05:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273604096886444032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 18:05:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273604117849575424[0;39m 更新电子书下的文档数据开始
2023-01-25 18:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604117849575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604117849575424[0;39m ==> Parameters: 
2023-01-25 18:05:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604117849575424[0;39m <==    Updates: 1
2023-01-25 18:05:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273604117849575424[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-25 18:05:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273604243649335296[0;39m 更新电子书下的文档数据开始
2023-01-25 18:05:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604243649335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:05:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604243649335296[0;39m ==> Parameters: 
2023-01-25 18:05:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604243649335296[0;39m <==    Updates: 1
2023-01-25 18:05:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273604243649335296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:06:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273604348477575168[0;39m 生成今日电子书快照开始
2023-01-25 18:06:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604348477575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:06:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604348477575168[0;39m ==> Parameters: 
2023-01-25 18:06:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604348477575168[0;39m <==    Updates: 0
2023-01-25 18:06:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273604348477575168[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 18:06:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273604369507815424[0;39m 更新电子书下的文档数据开始
2023-01-25 18:06:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604369507815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:06:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604369507815424[0;39m ==> Parameters: 
2023-01-25 18:06:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604369507815424[0;39m <==    Updates: 1
2023-01-25 18:06:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273604369507815424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:06:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273604495290798080[0;39m 更新电子书下的文档数据开始
2023-01-25 18:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604495290798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604495290798080[0;39m ==> Parameters: 
2023-01-25 18:06:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604495290798080[0;39m <==    Updates: 1
2023-01-25 18:06:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273604495290798080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:07:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273604600186146816[0;39m 生成今日电子书快照开始
2023-01-25 18:07:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604600186146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:07:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604600186146816[0;39m ==> Parameters: 
2023-01-25 18:07:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604600186146816[0;39m <==    Updates: 0
2023-01-25 18:07:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273604600186146816[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:07:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273604621157666816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:07:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604621157666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:07:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604621157666816[0;39m ==> Parameters: 
2023-01-25 18:07:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604621157666816[0;39m <==    Updates: 1
2023-01-25 18:07:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273604621157666816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:07:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273604746974203904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:07:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604746974203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604746974203904[0;39m ==> Parameters: 
2023-01-25 18:07:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604746974203904[0;39m <==    Updates: 1
2023-01-25 18:07:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273604746974203904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 18:08:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273604851831803904[0;39m 生成今日电子书快照开始
2023-01-25 18:08:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604851831803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:08:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604851831803904[0;39m ==> Parameters: 
2023-01-25 18:08:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273604851831803904[0;39m <==    Updates: 0
2023-01-25 18:08:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273604851831803904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:08:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273604872794935296[0;39m 更新电子书下的文档数据开始
2023-01-25 18:08:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604872794935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:08:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604872794935296[0;39m ==> Parameters: 
2023-01-25 18:08:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604872794935296[0;39m <==    Updates: 1
2023-01-25 18:08:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273604872794935296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:08:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273604998619860992[0;39m 更新电子书下的文档数据开始
2023-01-25 18:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604998619860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604998619860992[0;39m ==> Parameters: 
2023-01-25 18:08:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273604998619860992[0;39m <==    Updates: 1
2023-01-25 18:08:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273604998619860992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:09:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273605103494238208[0;39m 生成今日电子书快照开始
2023-01-25 18:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605103494238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605103494238208[0;39m ==> Parameters: 
2023-01-25 18:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605103494238208[0;39m <==    Updates: 0
2023-01-25 18:09:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273605103494238208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:09:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273605124428009472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:09:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605124428009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605124428009472[0;39m ==> Parameters: 
2023-01-25 18:09:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605124428009472[0;39m <==    Updates: 1
2023-01-25 18:09:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273605124428009472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:09:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273605250307461120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605250307461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605250307461120[0;39m ==> Parameters: 
2023-01-25 18:09:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605250307461120[0;39m <==    Updates: 1
2023-01-25 18:09:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273605250307461120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:10:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273605355169255424[0;39m 生成今日电子书快照开始
2023-01-25 18:10:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605355169255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605355169255424[0;39m ==> Parameters: 
2023-01-25 18:10:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605355169255424[0;39m <==    Updates: 0
2023-01-25 18:10:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273605355169255424[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-25 18:10:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273605376136581120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:10:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605376136581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:10:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605376136581120[0;39m ==> Parameters: 
2023-01-25 18:10:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605376136581120[0;39m <==    Updates: 1
2023-01-25 18:10:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273605376136581120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:10:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273605501915369472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:10:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605501915369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:10:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605501915369472[0;39m ==> Parameters: 
2023-01-25 18:10:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605501915369472[0;39m <==    Updates: 1
2023-01-25 18:10:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273605501915369472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:11:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273605606819106816[0;39m 生成今日电子书快照开始
2023-01-25 18:11:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605606819106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:11:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605606819106816[0;39m ==> Parameters: 
2023-01-25 18:11:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605606819106816[0;39m <==    Updates: 0
2023-01-25 18:11:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273605606819106816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:11:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273605627748683776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:11:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605627748683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:11:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605627748683776[0;39m ==> Parameters: 
2023-01-25 18:11:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605627748683776[0;39m <==    Updates: 1
2023-01-25 18:11:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273605627748683776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:11:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273605753598775296[0;39m 更新电子书下的文档数据开始
2023-01-25 18:11:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605753598775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:11:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605753598775296[0;39m ==> Parameters: 
2023-01-25 18:11:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605753598775296[0;39m <==    Updates: 1
2023-01-25 18:11:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273605753598775296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:12:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273605858443792384[0;39m 生成今日电子书快照开始
2023-01-25 18:12:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605858443792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:12:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605858443792384[0;39m ==> Parameters: 
2023-01-25 18:12:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273605858443792384[0;39m <==    Updates: 0
2023-01-25 18:12:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273605858443792384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 18:12:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273605879457255424[0;39m 更新电子书下的文档数据开始
2023-01-25 18:12:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605879457255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:12:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605879457255424[0;39m ==> Parameters: 
2023-01-25 18:12:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273605879457255424[0;39m <==    Updates: 1
2023-01-25 18:12:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273605879457255424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:12:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273606005244432384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:12:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606005244432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:12:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606005244432384[0;39m ==> Parameters: 
2023-01-25 18:12:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606005244432384[0;39m <==    Updates: 1
2023-01-25 18:12:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273606005244432384[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-25 18:13:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273606110139781120[0;39m 生成今日电子书快照开始
2023-01-25 18:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606110139781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:13:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606110139781120[0;39m ==> Parameters: 
2023-01-25 18:13:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606110139781120[0;39m <==    Updates: 0
2023-01-25 18:13:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273606110139781120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:13:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273606131069358080[0;39m 更新电子书下的文档数据开始
2023-01-25 18:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606131069358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:13:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606131069358080[0;39m ==> Parameters: 
2023-01-25 18:13:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606131069358080[0;39m <==    Updates: 1
2023-01-25 18:13:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273606131069358080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:13:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273606256898478080[0;39m 更新电子书下的文档数据开始
2023-01-25 18:13:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606256898478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:13:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606256898478080[0;39m ==> Parameters: 
2023-01-25 18:13:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606256898478080[0;39m <==    Updates: 1
2023-01-25 18:13:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273606256898478080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:14:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273606361764466688[0;39m 生成今日电子书快照开始
2023-01-25 18:14:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606361764466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:14:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606361764466688[0;39m ==> Parameters: 
2023-01-25 18:14:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606361764466688[0;39m <==    Updates: 0
2023-01-25 18:14:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273606361764466688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:14:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273606382752763904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:14:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606382752763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:14:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606382752763904[0;39m ==> Parameters: 
2023-01-25 18:14:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606382752763904[0;39m <==    Updates: 1
2023-01-25 18:14:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273606382752763904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:14:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273606508569300992[0;39m 更新电子书下的文档数据开始
2023-01-25 18:14:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606508569300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:14:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606508569300992[0;39m ==> Parameters: 
2023-01-25 18:14:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606508569300992[0;39m <==    Updates: 1
2023-01-25 18:14:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273606508569300992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:15:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273606613431095296[0;39m 生成今日电子书快照开始
2023-01-25 18:15:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606613431095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:15:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606613431095296[0;39m ==> Parameters: 
2023-01-25 18:15:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606613431095296[0;39m <==    Updates: 0
2023-01-25 18:15:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273606613431095296[0;39m 生成今日电子书快照结束，耗时：27毫秒
2023-01-25 18:15:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273606634377449472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:15:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606634377449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:15:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606634377449472[0;39m ==> Parameters: 
2023-01-25 18:15:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606634377449472[0;39m <==    Updates: 1
2023-01-25 18:15:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273606634377449472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:15:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273606760256901120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606760256901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606760256901120[0;39m ==> Parameters: 
2023-01-25 18:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606760256901120[0;39m <==    Updates: 1
2023-01-25 18:15:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273606760256901120[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:16:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273606865080946688[0;39m 生成今日电子书快照开始
2023-01-25 18:16:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606865080946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:16:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606865080946688[0;39m ==> Parameters: 
2023-01-25 18:16:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273606865080946688[0;39m <==    Updates: 0
2023-01-25 18:16:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273606865080946688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:16:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273606886086021120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606886086021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606886086021120[0;39m ==> Parameters: 
2023-01-25 18:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273606886086021120[0;39m <==    Updates: 1
2023-01-25 18:16:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273606886086021120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:16:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273607011898363904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607011898363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607011898363904[0;39m ==> Parameters: 
2023-01-25 18:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607011898363904[0;39m <==    Updates: 1
2023-01-25 18:16:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273607011898363904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:17:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273607116751769600[0;39m 生成今日电子书快照开始
2023-01-25 18:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607116751769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607116751769600[0;39m ==> Parameters: 
2023-01-25 18:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607116751769600[0;39m <==    Updates: 0
2023-01-25 18:17:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273607116751769600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:17:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273607137706512384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607137706512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607137706512384[0;39m ==> Parameters: 
2023-01-25 18:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607137706512384[0;39m <==    Updates: 1
2023-01-25 18:17:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273607137706512384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:17:35.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273607263602741248[0;39m 更新电子书下的文档数据开始
2023-01-25 18:17:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607263602741248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:17:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607263602741248[0;39m ==> Parameters: 
2023-01-25 18:17:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607263602741248[0;39m <==    Updates: 1
2023-01-25 18:17:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273607263602741248[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:18:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273607368410009600[0;39m 生成今日电子书快照开始
2023-01-25 18:18:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607368410009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:18:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607368410009600[0;39m ==> Parameters: 
2023-01-25 18:18:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607368410009600[0;39m <==    Updates: 0
2023-01-25 18:18:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273607368410009600[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-25 18:18:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273607389364752384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607389364752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607389364752384[0;39m ==> Parameters: 
2023-01-25 18:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607389364752384[0;39m <==    Updates: 1
2023-01-25 18:18:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273607389364752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:18:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273607515214843904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607515214843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607515214843904[0;39m ==> Parameters: 
2023-01-25 18:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607515214843904[0;39m <==    Updates: 1
2023-01-25 18:18:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273607515214843904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:19:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273607620068249600[0;39m 生成今日电子书快照开始
2023-01-25 18:19:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607620068249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:19:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607620068249600[0;39m ==> Parameters: 
2023-01-25 18:19:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607620068249600[0;39m <==    Updates: 0
2023-01-25 18:19:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273607620068249600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:19:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273607641043963904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:19:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607641043963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:19:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607641043963904[0;39m ==> Parameters: 
2023-01-25 18:19:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607641043963904[0;39m <==    Updates: 1
2023-01-25 18:19:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273607641043963904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:19:35.021 INFO  com.example.wiki.job.DocJob                       :32   [32m273607766923415552[0;39m 更新电子书下的文档数据开始
2023-01-25 18:19:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607766923415552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:19:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607766923415552[0;39m ==> Parameters: 
2023-01-25 18:19:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607766923415552[0;39m <==    Updates: 1
2023-01-25 18:19:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273607766923415552[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:20:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273607871701323776[0;39m 生成今日电子书快照开始
2023-01-25 18:20:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607871701323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:20:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607871701323776[0;39m ==> Parameters: 
2023-01-25 18:20:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273607871701323776[0;39m <==    Updates: 0
2023-01-25 18:20:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273607871701323776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:20:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273607892714786816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607892714786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607892714786816[0;39m ==> Parameters: 
2023-01-25 18:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273607892714786816[0;39m <==    Updates: 1
2023-01-25 18:20:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273607892714786816[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:20:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273608018522935296[0;39m 更新电子书下的文档数据开始
2023-01-25 18:20:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608018522935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:20:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608018522935296[0;39m ==> Parameters: 
2023-01-25 18:20:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608018522935296[0;39m <==    Updates: 1
2023-01-25 18:20:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273608018522935296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:21:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273608123384729600[0;39m 生成今日电子书快照开始
2023-01-25 18:21:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608123384729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:21:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608123384729600[0;39m ==> Parameters: 
2023-01-25 18:21:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608123384729600[0;39m <==    Updates: 0
2023-01-25 18:21:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273608123384729600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:21:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273608144339472384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608144339472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608144339472384[0;39m ==> Parameters: 
2023-01-25 18:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608144339472384[0;39m <==    Updates: 1
2023-01-25 18:21:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273608144339472384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:21:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273608270156009472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:21:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608270156009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:21:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608270156009472[0;39m ==> Parameters: 
2023-01-25 18:21:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608270156009472[0;39m <==    Updates: 1
2023-01-25 18:21:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273608270156009472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:22:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273608375042969600[0;39m 生成今日电子书快照开始
2023-01-25 18:22:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608375042969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:22:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608375042969600[0;39m ==> Parameters: 
2023-01-25 18:22:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608375042969600[0;39m <==    Updates: 0
2023-01-25 18:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273608375042969600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 18:22:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273608396014489600[0;39m 更新电子书下的文档数据开始
2023-01-25 18:22:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608396014489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:22:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608396014489600[0;39m ==> Parameters: 
2023-01-25 18:22:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608396014489600[0;39m <==    Updates: 1
2023-01-25 18:22:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273608396014489600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:22:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273608521877164032[0;39m 更新电子书下的文档数据开始
2023-01-25 18:22:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608521877164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:22:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608521877164032[0;39m ==> Parameters: 
2023-01-25 18:22:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608521877164032[0;39m <==    Updates: 1
2023-01-25 18:22:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273608521877164032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:23:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273608626697015296[0;39m 生成今日电子书快照开始
2023-01-25 18:23:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608626697015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:23:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608626697015296[0;39m ==> Parameters: 
2023-01-25 18:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608626697015296[0;39m <==    Updates: 0
2023-01-25 18:23:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273608626697015296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 18:23:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273608647676923904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608647676923904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608647676923904[0;39m ==> Parameters: 
2023-01-25 18:23:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608647676923904[0;39m <==    Updates: 1
2023-01-25 18:23:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273608647676923904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:23:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273608773501849600[0;39m 更新电子书下的文档数据开始
2023-01-25 18:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608773501849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608773501849600[0;39m ==> Parameters: 
2023-01-25 18:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608773501849600[0;39m <==    Updates: 1
2023-01-25 18:23:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273608773501849600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:24:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273608878338478080[0;39m 生成今日电子书快照开始
2023-01-25 18:24:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608878338478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:24:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608878338478080[0;39m ==> Parameters: 
2023-01-25 18:24:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273608878338478080[0;39m <==    Updates: 0
2023-01-25 18:24:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273608878338478080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:24:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273608899364524032[0;39m 更新电子书下的文档数据开始
2023-01-25 18:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608899364524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608899364524032[0;39m ==> Parameters: 
2023-01-25 18:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273608899364524032[0;39m <==    Updates: 1
2023-01-25 18:24:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273608899364524032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:24:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273609025147506688[0;39m 更新电子书下的文档数据开始
2023-01-25 18:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609025147506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609025147506688[0;39m ==> Parameters: 
2023-01-25 18:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609025147506688[0;39m <==    Updates: 1
2023-01-25 18:24:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273609025147506688[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:25:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273609130034466816[0;39m 生成今日电子书快照开始
2023-01-25 18:25:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609130034466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:25:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609130034466816[0;39m ==> Parameters: 
2023-01-25 18:25:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609130034466816[0;39m <==    Updates: 0
2023-01-25 18:25:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273609130034466816[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-25 18:25:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273609151005986816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:25:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609151005986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609151005986816[0;39m ==> Parameters: 
2023-01-25 18:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609151005986816[0;39m <==    Updates: 1
2023-01-25 18:25:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273609151005986816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:25:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273609276835106816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:25:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609276835106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:25:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609276835106816[0;39m ==> Parameters: 
2023-01-25 18:25:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609276835106816[0;39m <==    Updates: 1
2023-01-25 18:25:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273609276835106816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:26:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273609381688512512[0;39m 生成今日电子书快照开始
2023-01-25 18:26:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609381688512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:26:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609381688512512[0;39m ==> Parameters: 
2023-01-25 18:26:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609381688512512[0;39m <==    Updates: 0
2023-01-25 18:26:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273609381688512512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:26:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273609402651643904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:26:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609402651643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:26:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609402651643904[0;39m ==> Parameters: 
2023-01-25 18:26:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609402651643904[0;39m <==    Updates: 1
2023-01-25 18:26:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273609402651643904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:26:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273609528497541120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:26:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609528497541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:26:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609528497541120[0;39m ==> Parameters: 
2023-01-25 18:26:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609528497541120[0;39m <==    Updates: 1
2023-01-25 18:26:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273609528497541120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:27:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273609633388695552[0;39m 生成今日电子书快照开始
2023-01-25 18:27:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609633388695552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:27:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609633388695552[0;39m ==> Parameters: 
2023-01-25 18:27:00.038 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609633388695552[0;39m <==    Updates: 0
2023-01-25 18:27:00.038 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273609633388695552[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-25 18:27:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273609654339244032[0;39m 更新电子书下的文档数据开始
2023-01-25 18:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609654339244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609654339244032[0;39m ==> Parameters: 
2023-01-25 18:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609654339244032[0;39m <==    Updates: 1
2023-01-25 18:27:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273609654339244032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:27:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273609780139003904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:27:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609780139003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:27:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609780139003904[0;39m ==> Parameters: 
2023-01-25 18:27:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609780139003904[0;39m <==    Updates: 1
2023-01-25 18:27:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273609780139003904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:28:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273609884975632384[0;39m 生成今日电子书快照开始
2023-01-25 18:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609884975632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609884975632384[0;39m ==> Parameters: 
2023-01-25 18:28:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273609884975632384[0;39m <==    Updates: 0
2023-01-25 18:28:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273609884975632384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 18:28:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273609905955540992[0;39m 更新电子书下的文档数据开始
2023-01-25 18:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609905955540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609905955540992[0;39m ==> Parameters: 
2023-01-25 18:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273609905955540992[0;39m <==    Updates: 1
2023-01-25 18:28:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273609905955540992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:28:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273610031814021120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610031814021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610031814021120[0;39m ==> Parameters: 
2023-01-25 18:28:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610031814021120[0;39m <==    Updates: 1
2023-01-25 18:28:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273610031814021120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:29:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273610136642260992[0;39m 生成今日电子书快照开始
2023-01-25 18:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610136642260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610136642260992[0;39m ==> Parameters: 
2023-01-25 18:29:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610136642260992[0;39m <==    Updates: 0
2023-01-25 18:29:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273610136642260992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:29:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273610157609586688[0;39m 更新电子书下的文档数据开始
2023-01-25 18:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610157609586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610157609586688[0;39m ==> Parameters: 
2023-01-25 18:29:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610157609586688[0;39m <==    Updates: 1
2023-01-25 18:29:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273610157609586688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:29:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273610283434512384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610283434512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610283434512384[0;39m ==> Parameters: 
2023-01-25 18:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610283434512384[0;39m <==    Updates: 1
2023-01-25 18:29:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273610283434512384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:30:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273610388338249728[0;39m 生成今日电子书快照开始
2023-01-25 18:30:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610388338249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:30:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610388338249728[0;39m ==> Parameters: 
2023-01-25 18:30:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610388338249728[0;39m <==    Updates: 0
2023-01-25 18:30:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273610388338249728[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 18:30:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273610409292992512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:30:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610409292992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:30:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610409292992512[0;39m ==> Parameters: 
2023-01-25 18:30:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610409292992512[0;39m <==    Updates: 1
2023-01-25 18:30:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273610409292992512[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 18:30:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273610535096946688[0;39m 更新电子书下的文档数据开始
2023-01-25 18:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610535096946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610535096946688[0;39m ==> Parameters: 
2023-01-25 18:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610535096946688[0;39m <==    Updates: 1
2023-01-25 18:30:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273610535096946688[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273610640004878336[0;39m 生成今日电子书快照开始
2023-01-25 18:31:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610640004878336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:31:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610640004878336[0;39m ==> Parameters: 
2023-01-25 18:31:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610640004878336[0;39m <==    Updates: 0
2023-01-25 18:31:00.034 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273610640004878336[0;39m 生成今日电子书快照结束，耗时：17毫秒
2023-01-25 18:31:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273610660951232512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610660951232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610660951232512[0;39m ==> Parameters: 
2023-01-25 18:31:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610660951232512[0;39m <==    Updates: 1
2023-01-25 18:31:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273610660951232512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:31:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273610786742603776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:31:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610786742603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:31:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610786742603776[0;39m ==> Parameters: 
2023-01-25 18:31:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610786742603776[0;39m <==    Updates: 1
2023-01-25 18:31:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273610786742603776[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:32:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273610891604398080[0;39m 生成今日电子书快照开始
2023-01-25 18:32:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610891604398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:32:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610891604398080[0;39m ==> Parameters: 
2023-01-25 18:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273610891604398080[0;39m <==    Updates: 0
2023-01-25 18:32:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273610891604398080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 18:32:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273610912609472512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:32:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610912609472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:32:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610912609472512[0;39m ==> Parameters: 
2023-01-25 18:32:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273610912609472512[0;39m <==    Updates: 1
2023-01-25 18:32:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273610912609472512[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:32:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273611038405038080[0;39m 更新电子书下的文档数据开始
2023-01-25 18:32:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611038405038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:32:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611038405038080[0;39m ==> Parameters: 
2023-01-25 18:32:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611038405038080[0;39m <==    Updates: 1
2023-01-25 18:32:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273611038405038080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:33:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273611143262638080[0;39m 生成今日电子书快照开始
2023-01-25 18:33:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611143262638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:33:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611143262638080[0;39m ==> Parameters: 
2023-01-25 18:33:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611143262638080[0;39m <==    Updates: 0
2023-01-25 18:33:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273611143262638080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 18:33:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273611164238352384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:33:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611164238352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:33:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611164238352384[0;39m ==> Parameters: 
2023-01-25 18:33:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611164238352384[0;39m <==    Updates: 1
2023-01-25 18:33:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273611164238352384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:33:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273611290063278080[0;39m 更新电子书下的文档数据开始
2023-01-25 18:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611290063278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611290063278080[0;39m ==> Parameters: 
2023-01-25 18:33:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611290063278080[0;39m <==    Updates: 1
2023-01-25 18:33:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273611290063278080[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-25 18:34:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273611394925072384[0;39m 生成今日电子书快照开始
2023-01-25 18:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611394925072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611394925072384[0;39m ==> Parameters: 
2023-01-25 18:34:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611394925072384[0;39m <==    Updates: 0
2023-01-25 18:34:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273611394925072384[0;39m 生成今日电子书快照结束，耗时：24毫秒
2023-01-25 18:34:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273611415951118336[0;39m 更新电子书下的文档数据开始
2023-01-25 18:34:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611415951118336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:34:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611415951118336[0;39m ==> Parameters: 
2023-01-25 18:34:05.042 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611415951118336[0;39m <==    Updates: 1
2023-01-25 18:34:05.042 INFO  com.example.wiki.job.DocJob                       :35   [32m273611415951118336[0;39m 更新电子书下的文档数据结束，耗时：24毫秒
2023-01-25 18:34:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273611541755072512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:34:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611541755072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:34:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611541755072512[0;39m ==> Parameters: 
2023-01-25 18:34:35.030 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611541755072512[0;39m <==    Updates: 1
2023-01-25 18:34:35.030 INFO  com.example.wiki.job.DocJob                       :35   [32m273611541755072512[0;39m 更新电子书下的文档数据结束，耗时：18毫秒
2023-01-25 18:35:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273611646583312384[0;39m 生成今日电子书快照开始
2023-01-25 18:35:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611646583312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611646583312384[0;39m ==> Parameters: 
2023-01-25 18:35:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611646583312384[0;39m <==    Updates: 0
2023-01-25 18:35:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273611646583312384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 18:35:05.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273611667621941248[0;39m 更新电子书下的文档数据开始
2023-01-25 18:35:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611667621941248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:35:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611667621941248[0;39m ==> Parameters: 
2023-01-25 18:35:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611667621941248[0;39m <==    Updates: 1
2023-01-25 18:35:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273611667621941248[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:35:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273611793409118208[0;39m 更新电子书下的文档数据开始
2023-01-25 18:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611793409118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611793409118208[0;39m ==> Parameters: 
2023-01-25 18:35:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611793409118208[0;39m <==    Updates: 1
2023-01-25 18:35:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273611793409118208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 18:36:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273611898262523904[0;39m 生成今日电子书快照开始
2023-01-25 18:36:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611898262523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:36:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611898262523904[0;39m ==> Parameters: 
2023-01-25 18:36:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273611898262523904[0;39m <==    Updates: 0
2023-01-25 18:36:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273611898262523904[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-25 18:36:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273611919200489472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:36:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611919200489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:36:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611919200489472[0;39m ==> Parameters: 
2023-01-25 18:36:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273611919200489472[0;39m <==    Updates: 1
2023-01-25 18:36:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273611919200489472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:36:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273612045042192384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612045042192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612045042192384[0;39m ==> Parameters: 
2023-01-25 18:36:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612045042192384[0;39m <==    Updates: 1
2023-01-25 18:36:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273612045042192384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:37:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273612149933346816[0;39m 生成今日电子书快照开始
2023-01-25 18:37:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612149933346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:37:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612149933346816[0;39m ==> Parameters: 
2023-01-25 18:37:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612149933346816[0;39m <==    Updates: 0
2023-01-25 18:37:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273612149933346816[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 18:37:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273612170892283904[0;39m 更新电子书下的文档数据开始
2023-01-25 18:37:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612170892283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:37:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612170892283904[0;39m ==> Parameters: 
2023-01-25 18:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612170892283904[0;39m <==    Updates: 1
2023-01-25 18:37:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273612170892283904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:37:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273612296717209600[0;39m 更新电子书下的文档数据开始
2023-01-25 18:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612296717209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612296717209600[0;39m ==> Parameters: 
2023-01-25 18:37:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612296717209600[0;39m <==    Updates: 1
2023-01-25 18:37:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273612296717209600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 18:38:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273612401595781120[0;39m 生成今日电子书快照开始
2023-01-25 18:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612401595781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612401595781120[0;39m ==> Parameters: 
2023-01-25 18:38:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612401595781120[0;39m <==    Updates: 0
2023-01-25 18:38:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273612401595781120[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 18:38:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273612422554718208[0;39m 更新电子书下的文档数据开始
2023-01-25 18:38:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612422554718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:38:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612422554718208[0;39m ==> Parameters: 
2023-01-25 18:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612422554718208[0;39m <==    Updates: 1
2023-01-25 18:38:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273612422554718208[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-25 18:38:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273612548358672384[0;39m 更新电子书下的文档数据开始
2023-01-25 18:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612548358672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612548358672384[0;39m ==> Parameters: 
2023-01-25 18:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612548358672384[0;39m <==    Updates: 1
2023-01-25 18:38:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273612548358672384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:39:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273612653279186944[0;39m 生成今日电子书快照开始
2023-01-25 18:39:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612653279186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:39:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612653279186944[0;39m ==> Parameters: 
2023-01-25 18:39:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612653279186944[0;39m <==    Updates: 0
2023-01-25 18:39:00.036 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273612653279186944[0;39m 生成今日电子书快照结束，耗时：17毫秒
2023-01-25 18:39:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273612674225541120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:39:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612674225541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:39:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612674225541120[0;39m ==> Parameters: 
2023-01-25 18:39:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612674225541120[0;39m <==    Updates: 1
2023-01-25 18:39:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273612674225541120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 18:39:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273612800054661120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:39:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612800054661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:39:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612800054661120[0;39m ==> Parameters: 
2023-01-25 18:39:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612800054661120[0;39m <==    Updates: 1
2023-01-25 18:39:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273612800054661120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:40:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273612904878706688[0;39m 生成今日电子书快照开始
2023-01-25 18:40:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612904878706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:40:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612904878706688[0;39m ==> Parameters: 
2023-01-25 18:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273612904878706688[0;39m <==    Updates: 0
2023-01-25 18:40:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273612904878706688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:40:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273612925879586816[0;39m 更新电子书下的文档数据开始
2023-01-25 18:40:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612925879586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:40:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612925879586816[0;39m ==> Parameters: 
2023-01-25 18:40:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273612925879586816[0;39m <==    Updates: 1
2023-01-25 18:40:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273612925879586816[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:40:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273613051717095424[0;39m 更新电子书下的文档数据开始
2023-01-25 18:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613051717095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613051717095424[0;39m ==> Parameters: 
2023-01-25 18:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613051717095424[0;39m <==    Updates: 1
2023-01-25 18:40:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273613051717095424[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:41:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273613156524363776[0;39m 生成今日电子书快照开始
2023-01-25 18:41:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613156524363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:41:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613156524363776[0;39m ==> Parameters: 
2023-01-25 18:41:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613156524363776[0;39m <==    Updates: 0
2023-01-25 18:41:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273613156524363776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 18:41:05.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273613177571381248[0;39m 更新电子书下的文档数据开始
2023-01-25 18:41:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613177571381248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:41:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613177571381248[0;39m ==> Parameters: 
2023-01-25 18:41:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613177571381248[0;39m <==    Updates: 1
2023-01-25 18:41:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273613177571381248[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:41:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273613303371141120[0;39m 更新电子书下的文档数据开始
2023-01-25 18:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613303371141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613303371141120[0;39m ==> Parameters: 
2023-01-25 18:41:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613303371141120[0;39m <==    Updates: 1
2023-01-25 18:41:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273613303371141120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:42:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273613408241324032[0;39m 生成今日电子书快照开始
2023-01-25 18:42:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613408241324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:42:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613408241324032[0;39m ==> Parameters: 
2023-01-25 18:42:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613408241324032[0;39m <==    Updates: 0
2023-01-25 18:42:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273613408241324032[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 18:42:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273613429154123776[0;39m 更新电子书下的文档数据开始
2023-01-25 18:42:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613429154123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:42:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613429154123776[0;39m ==> Parameters: 
2023-01-25 18:42:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613429154123776[0;39m <==    Updates: 1
2023-01-25 18:42:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273613429154123776[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 18:42:35.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273613555054546944[0;39m 更新电子书下的文档数据开始
2023-01-25 18:42:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613555054546944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:42:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613555054546944[0;39m ==> Parameters: 
2023-01-25 18:42:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613555054546944[0;39m <==    Updates: 1
2023-01-25 18:42:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273613555054546944[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 18:43:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273613659853426688[0;39m 生成今日电子书快照开始
2023-01-25 18:43:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613659853426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:43:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613659853426688[0;39m ==> Parameters: 
2023-01-25 18:43:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613659853426688[0;39m <==    Updates: 0
2023-01-25 18:43:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273613659853426688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:43:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273613680833335296[0;39m 更新电子书下的文档数据开始
2023-01-25 18:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613680833335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613680833335296[0;39m ==> Parameters: 
2023-01-25 18:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613680833335296[0;39m <==    Updates: 1
2023-01-25 18:43:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273613680833335296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:43:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273613806658260992[0;39m 更新电子书下的文档数据开始
2023-01-25 18:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613806658260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613806658260992[0;39m ==> Parameters: 
2023-01-25 18:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613806658260992[0;39m <==    Updates: 1
2023-01-25 18:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273613806658260992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 18:44:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273613911511666688[0;39m 生成今日电子书快照开始
2023-01-25 18:44:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613911511666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:44:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613911511666688[0;39m ==> Parameters: 
2023-01-25 18:44:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273613911511666688[0;39m <==    Updates: 0
2023-01-25 18:44:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273613911511666688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 18:44:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273613932508352512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:44:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613932508352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:44:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613932508352512[0;39m ==> Parameters: 
2023-01-25 18:44:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273613932508352512[0;39m <==    Updates: 1
2023-01-25 18:44:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273613932508352512[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:44:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273614058337472512[0;39m 更新电子书下的文档数据开始
2023-01-25 18:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614058337472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614058337472512[0;39m ==> Parameters: 
2023-01-25 18:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614058337472512[0;39m <==    Updates: 1
2023-01-25 18:44:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273614058337472512[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-25 18:45:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273614163182489600[0;39m 生成今日电子书快照开始
2023-01-25 18:45:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273614163182489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 18:45:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273614163182489600[0;39m ==> Parameters: 
2023-01-25 18:45:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273614163182489600[0;39m <==    Updates: 0
2023-01-25 18:45:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273614163182489600[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-25 18:45:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273614184124649472[0;39m 更新电子书下的文档数据开始
2023-01-25 18:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614184124649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 18:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614184124649472[0;39m ==> Parameters: 
2023-01-25 18:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273614184124649472[0;39m <==    Updates: 1
2023-01-25 18:45:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273614184124649472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 20:14:09.305 INFO  com.example.wiki.job.DocJob                       :32   [32m273636599760293888[0;39m 更新电子书下的文档数据开始
2023-01-25 20:14:09.308 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636599760293888[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:14:09.310 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636599760293888[0;39m ==> Parameters: 
2023-01-25 20:14:09.314 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636599760293888[0;39m <==    Updates: 1
2023-01-25 20:14:09.315 INFO  com.example.wiki.job.DocJob                       :35   [32m273636599760293888[0;39m 更新电子书下的文档数据结束，耗时：10毫秒
2023-01-25 20:14:09.315 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273636599802236928[0;39m 生成今日电子书快照开始
2023-01-25 20:14:09.318 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636599802236928[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:14:09.320 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636599802236928[0;39m ==> Parameters: 
2023-01-25 20:14:09.326 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636599802236928[0;39m <==    Updates: 0
2023-01-25 20:14:09.326 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273636599802236928[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 20:14:10.981 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h29m4s319ms792µs400ns).
2023-01-25 20:14:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273636707537129472[0;39m 更新电子书下的文档数据开始
2023-01-25 20:14:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636707537129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:14:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636707537129472[0;39m ==> Parameters: 
2023-01-25 20:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636707537129472[0;39m <==    Updates: 1
2023-01-25 20:14:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273636707537129472[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-25 20:15:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273636812407312384[0;39m 生成今日电子书快照开始
2023-01-25 20:15:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636812407312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:15:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636812407312384[0;39m ==> Parameters: 
2023-01-25 20:15:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273636812407312384[0;39m <==    Updates: 0
2023-01-25 20:15:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273636812407312384[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 20:15:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273636833399803904[0;39m 更新电子书下的文档数据开始
2023-01-25 20:15:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636833399803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:15:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636833399803904[0;39m ==> Parameters: 
2023-01-25 20:15:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636833399803904[0;39m <==    Updates: 1
2023-01-25 20:15:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273636833399803904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:15:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273636959195369472[0;39m 更新电子书下的文档数据开始
2023-01-25 20:15:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636959195369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:15:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636959195369472[0;39m ==> Parameters: 
2023-01-25 20:15:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273636959195369472[0;39m <==    Updates: 1
2023-01-25 20:15:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273636959195369472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 20:16:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273637064099106816[0;39m 生成今日电子书快照开始
2023-01-25 20:16:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637064099106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:16:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637064099106816[0;39m ==> Parameters: 
2023-01-25 20:16:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637064099106816[0;39m <==    Updates: 0
2023-01-25 20:16:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273637064099106816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:16:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273637085053849600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:16:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637085053849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:16:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637085053849600[0;39m ==> Parameters: 
2023-01-25 20:16:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637085053849600[0;39m <==    Updates: 1
2023-01-25 20:16:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273637085053849600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:16:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273637210853609472[0;39m 更新电子书下的文档数据开始
2023-01-25 20:16:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637210853609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:16:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637210853609472[0;39m ==> Parameters: 
2023-01-25 20:16:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637210853609472[0;39m <==    Updates: 1
2023-01-25 20:16:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273637210853609472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:17:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273637315727986688[0;39m 生成今日电子书快照开始
2023-01-25 20:17:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637315727986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:17:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637315727986688[0;39m ==> Parameters: 
2023-01-25 20:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637315727986688[0;39m <==    Updates: 0
2023-01-25 20:17:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273637315727986688[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 20:17:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273637336712089600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:17:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637336712089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:17:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637336712089600[0;39m ==> Parameters: 
2023-01-25 20:17:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637336712089600[0;39m <==    Updates: 1
2023-01-25 20:17:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273637336712089600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:17:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273637462516043776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:17:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637462516043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:17:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637462516043776[0;39m ==> Parameters: 
2023-01-25 20:17:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637462516043776[0;39m <==    Updates: 1
2023-01-25 20:17:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273637462516043776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:18:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273637567365255168[0;39m 生成今日电子书快照开始
2023-01-25 20:18:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637567365255168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:18:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637567365255168[0;39m ==> Parameters: 
2023-01-25 20:18:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637567365255168[0;39m <==    Updates: 0
2023-01-25 20:18:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273637567365255168[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:18:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273637588378718208[0;39m 更新电子书下的文档数据开始
2023-01-25 20:18:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637588378718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:18:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637588378718208[0;39m ==> Parameters: 
2023-01-25 20:18:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637588378718208[0;39m <==    Updates: 1
2023-01-25 20:18:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273637588378718208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:18:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273637714170089472[0;39m 更新电子书下的文档数据开始
2023-01-25 20:18:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637714170089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:18:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637714170089472[0;39m ==> Parameters: 
2023-01-25 20:18:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637714170089472[0;39m <==    Updates: 1
2023-01-25 20:18:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273637714170089472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:19:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273637819044466688[0;39m 生成今日电子书快照开始
2023-01-25 20:19:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637819044466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:19:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637819044466688[0;39m ==> Parameters: 
2023-01-25 20:19:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273637819044466688[0;39m <==    Updates: 0
2023-01-25 20:19:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273637819044466688[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 20:19:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273637840045346816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637840045346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637840045346816[0;39m ==> Parameters: 
2023-01-25 20:19:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637840045346816[0;39m <==    Updates: 1
2023-01-25 20:19:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273637840045346816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:19:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273637965870272512[0;39m 更新电子书下的文档数据开始
2023-01-25 20:19:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637965870272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:19:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637965870272512[0;39m ==> Parameters: 
2023-01-25 20:19:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273637965870272512[0;39m <==    Updates: 1
2023-01-25 20:19:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273637965870272512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:20:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273638070702706688[0;39m 生成今日电子书快照开始
2023-01-25 20:20:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638070702706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:20:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638070702706688[0;39m ==> Parameters: 
2023-01-25 20:20:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638070702706688[0;39m <==    Updates: 0
2023-01-25 20:20:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273638070702706688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:20:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273638091695198208[0;39m 更新电子书下的文档数据开始
2023-01-25 20:20:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638091695198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:20:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638091695198208[0;39m ==> Parameters: 
2023-01-25 20:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638091695198208[0;39m <==    Updates: 1
2023-01-25 20:20:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273638091695198208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:20:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273638217503346688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638217503346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638217503346688[0;39m ==> Parameters: 
2023-01-25 20:20:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638217503346688[0;39m <==    Updates: 1
2023-01-25 20:20:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273638217503346688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:21:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273638322344169472[0;39m 生成今日电子书快照开始
2023-01-25 20:21:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638322344169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:21:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638322344169472[0;39m ==> Parameters: 
2023-01-25 20:21:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638322344169472[0;39m <==    Updates: 0
2023-01-25 20:21:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273638322344169472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 20:21:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273638343332466688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:21:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638343332466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:21:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638343332466688[0;39m ==> Parameters: 
2023-01-25 20:21:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638343332466688[0;39m <==    Updates: 1
2023-01-25 20:21:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273638343332466688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:21:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273638469190946816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:21:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638469190946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:21:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638469190946816[0;39m ==> Parameters: 
2023-01-25 20:21:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638469190946816[0;39m <==    Updates: 1
2023-01-25 20:21:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273638469190946816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:22:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273638574052741120[0;39m 生成今日电子书快照开始
2023-01-25 20:22:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638574052741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:22:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638574052741120[0;39m ==> Parameters: 
2023-01-25 20:22:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638574052741120[0;39m <==    Updates: 0
2023-01-25 20:22:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273638574052741120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 20:22:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273638594982318080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:22:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638594982318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:22:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638594982318080[0;39m ==> Parameters: 
2023-01-25 20:22:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638594982318080[0;39m <==    Updates: 1
2023-01-25 20:22:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273638594982318080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:22:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273638720840798208[0;39m 更新电子书下的文档数据开始
2023-01-25 20:22:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638720840798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:22:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638720840798208[0;39m ==> Parameters: 
2023-01-25 20:22:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638720840798208[0;39m <==    Updates: 1
2023-01-25 20:22:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273638720840798208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:23:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273638825677426688[0;39m 生成今日电子书快照开始
2023-01-25 20:23:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638825677426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:23:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638825677426688[0;39m ==> Parameters: 
2023-01-25 20:23:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273638825677426688[0;39m <==    Updates: 0
2023-01-25 20:23:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273638825677426688[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 20:23:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273638846640558080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:23:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638846640558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:23:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638846640558080[0;39m ==> Parameters: 
2023-01-25 20:23:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638846640558080[0;39m <==    Updates: 1
2023-01-25 20:23:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273638846640558080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:23:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273638972511621120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638972511621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:23:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638972511621120[0;39m ==> Parameters: 
2023-01-25 20:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273638972511621120[0;39m <==    Updates: 1
2023-01-25 20:23:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273638972511621120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:24:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273639077356638208[0;39m 生成今日电子书快照开始
2023-01-25 20:24:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639077356638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:24:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639077356638208[0;39m ==> Parameters: 
2023-01-25 20:24:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639077356638208[0;39m <==    Updates: 0
2023-01-25 20:24:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273639077356638208[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 20:24:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273639098319769600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:24:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639098319769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:24:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639098319769600[0;39m ==> Parameters: 
2023-01-25 20:24:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639098319769600[0;39m <==    Updates: 1
2023-01-25 20:24:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273639098319769600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:24:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273639224123723776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:24:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639224123723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:24:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639224123723776[0;39m ==> Parameters: 
2023-01-25 20:24:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639224123723776[0;39m <==    Updates: 1
2023-01-25 20:24:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273639224123723776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:25:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273639329031655424[0;39m 生成今日电子书快照开始
2023-01-25 20:25:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639329031655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:25:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639329031655424[0;39m ==> Parameters: 
2023-01-25 20:25:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639329031655424[0;39m <==    Updates: 0
2023-01-25 20:25:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273639329031655424[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 20:25:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273639349994786816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:25:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639349994786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639349994786816[0;39m ==> Parameters: 
2023-01-25 20:25:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639349994786816[0;39m <==    Updates: 1
2023-01-25 20:25:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273639349994786816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:25:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273639475798740992[0;39m 更新电子书下的文档数据开始
2023-01-25 20:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639475798740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639475798740992[0;39m ==> Parameters: 
2023-01-25 20:25:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639475798740992[0;39m <==    Updates: 1
2023-01-25 20:25:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273639475798740992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:26:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273639580681506816[0;39m 生成今日电子书快照开始
2023-01-25 20:26:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639580681506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:26:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639580681506816[0;39m ==> Parameters: 
2023-01-25 20:26:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639580681506816[0;39m <==    Updates: 0
2023-01-25 20:26:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273639580681506816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:26:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273639601653026816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:26:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639601653026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:26:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639601653026816[0;39m ==> Parameters: 
2023-01-25 20:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639601653026816[0;39m <==    Updates: 1
2023-01-25 20:26:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273639601653026816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:26:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273639727494729728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:26:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639727494729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:26:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639727494729728[0;39m ==> Parameters: 
2023-01-25 20:26:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639727494729728[0;39m <==    Updates: 1
2023-01-25 20:26:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273639727494729728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:27:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273639832306192384[0;39m 生成今日电子书快照开始
2023-01-25 20:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639832306192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639832306192384[0;39m ==> Parameters: 
2023-01-25 20:27:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273639832306192384[0;39m <==    Updates: 0
2023-01-25 20:27:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273639832306192384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:27:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273639853281906688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:27:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639853281906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:27:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639853281906688[0;39m ==> Parameters: 
2023-01-25 20:27:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639853281906688[0;39m <==    Updates: 1
2023-01-25 20:27:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273639853281906688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:27:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273639979144581120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:27:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639979144581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:27:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639979144581120[0;39m ==> Parameters: 
2023-01-25 20:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273639979144581120[0;39m <==    Updates: 1
2023-01-25 20:27:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273639979144581120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:28:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273640083968626688[0;39m 生成今日电子书快照开始
2023-01-25 20:28:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640083968626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:28:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640083968626688[0;39m ==> Parameters: 
2023-01-25 20:28:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640083968626688[0;39m <==    Updates: 0
2023-01-25 20:28:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273640083968626688[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 20:28:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273640104948535296[0;39m 更新电子书下的文档数据开始
2023-01-25 20:28:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640104948535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640104948535296[0;39m ==> Parameters: 
2023-01-25 20:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640104948535296[0;39m <==    Updates: 1
2023-01-25 20:28:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273640104948535296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:28:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273640230756683776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:28:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640230756683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640230756683776[0;39m ==> Parameters: 
2023-01-25 20:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640230756683776[0;39m <==    Updates: 1
2023-01-25 20:28:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273640230756683776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:29:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273640335673004032[0;39m 生成今日电子书快照开始
2023-01-25 20:29:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640335673004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:29:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640335673004032[0;39m ==> Parameters: 
2023-01-25 20:29:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640335673004032[0;39m <==    Updates: 0
2023-01-25 20:29:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273640335673004032[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-25 20:29:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273640356627746816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:29:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640356627746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:29:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640356627746816[0;39m ==> Parameters: 
2023-01-25 20:29:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640356627746816[0;39m <==    Updates: 1
2023-01-25 20:29:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273640356627746816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:29:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273640482440089600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:29:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640482440089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:29:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640482440089600[0;39m ==> Parameters: 
2023-01-25 20:29:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640482440089600[0;39m <==    Updates: 1
2023-01-25 20:29:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273640482440089600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:30:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273640587310272512[0;39m 生成今日电子书快照开始
2023-01-25 20:30:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640587310272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:30:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640587310272512[0;39m ==> Parameters: 
2023-01-25 20:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640587310272512[0;39m <==    Updates: 0
2023-01-25 20:30:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273640587310272512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:30:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273640608269209600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640608269209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640608269209600[0;39m ==> Parameters: 
2023-01-25 20:30:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640608269209600[0;39m <==    Updates: 1
2023-01-25 20:30:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273640608269209600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:30:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273640734123495424[0;39m 更新电子书下的文档数据开始
2023-01-25 20:30:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640734123495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:30:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640734123495424[0;39m ==> Parameters: 
2023-01-25 20:30:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640734123495424[0;39m <==    Updates: 1
2023-01-25 20:30:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273640734123495424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:31:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273640838939152384[0;39m 生成今日电子书快照开始
2023-01-25 20:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640838939152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:31:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640838939152384[0;39m ==> Parameters: 
2023-01-25 20:31:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273640838939152384[0;39m <==    Updates: 0
2023-01-25 20:31:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273640838939152384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:31:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273640859906478080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:31:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640859906478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:31:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640859906478080[0;39m ==> Parameters: 
2023-01-25 20:31:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640859906478080[0;39m <==    Updates: 1
2023-01-25 20:31:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273640859906478080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:31:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273640985777541120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:31:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640985777541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:31:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640985777541120[0;39m ==> Parameters: 
2023-01-25 20:31:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273640985777541120[0;39m <==    Updates: 1
2023-01-25 20:31:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273640985777541120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:32:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273641090589003776[0;39m 生成今日电子书快照开始
2023-01-25 20:32:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641090589003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:32:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641090589003776[0;39m ==> Parameters: 
2023-01-25 20:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641090589003776[0;39m <==    Updates: 0
2023-01-25 20:32:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273641090589003776[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 20:32:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273641111598272512[0;39m 更新电子书下的文档数据开始
2023-01-25 20:32:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641111598272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:32:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641111598272512[0;39m ==> Parameters: 
2023-01-25 20:32:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641111598272512[0;39m <==    Updates: 1
2023-01-25 20:32:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273641111598272512[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:32:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273641237431586816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:32:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641237431586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:32:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641237431586816[0;39m ==> Parameters: 
2023-01-25 20:32:35.026 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641237431586816[0;39m <==    Updates: 1
2023-01-25 20:32:35.027 INFO  com.example.wiki.job.DocJob                       :35   [32m273641237431586816[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-25 20:33:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273641342247243776[0;39m 生成今日电子书快照开始
2023-01-25 20:33:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641342247243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:33:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641342247243776[0;39m ==> Parameters: 
2023-01-25 20:33:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641342247243776[0;39m <==    Updates: 0
2023-01-25 20:33:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273641342247243776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 20:33:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273641363218763776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:33:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641363218763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:33:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641363218763776[0;39m ==> Parameters: 
2023-01-25 20:33:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641363218763776[0;39m <==    Updates: 1
2023-01-25 20:33:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273641363218763776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:33:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273641489073049600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:33:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641489073049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641489073049600[0;39m ==> Parameters: 
2023-01-25 20:33:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641489073049600[0;39m <==    Updates: 1
2023-01-25 20:33:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273641489073049600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:34:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273641593960009728[0;39m 生成今日电子书快照开始
2023-01-25 20:34:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641593960009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:34:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641593960009728[0;39m ==> Parameters: 
2023-01-25 20:34:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641593960009728[0;39m <==    Updates: 0
2023-01-25 20:34:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273641593960009728[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 20:34:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273641614881198080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641614881198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:34:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641614881198080[0;39m ==> Parameters: 
2023-01-25 20:34:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641614881198080[0;39m <==    Updates: 1
2023-01-25 20:34:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273641614881198080[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:34:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273641740760649728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:34:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641740760649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:34:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641740760649728[0;39m ==> Parameters: 
2023-01-25 20:34:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641740760649728[0;39m <==    Updates: 1
2023-01-25 20:34:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273641740760649728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:35:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273641845567918080[0;39m 生成今日电子书快照开始
2023-01-25 20:35:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641845567918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641845567918080[0;39m ==> Parameters: 
2023-01-25 20:35:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273641845567918080[0;39m <==    Updates: 0
2023-01-25 20:35:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273641845567918080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 20:35:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273641866556215296[0;39m 更新电子书下的文档数据开始
2023-01-25 20:35:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641866556215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:35:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641866556215296[0;39m ==> Parameters: 
2023-01-25 20:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641866556215296[0;39m <==    Updates: 1
2023-01-25 20:35:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273641866556215296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:35:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273641992389529600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:35:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641992389529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:35:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641992389529600[0;39m ==> Parameters: 
2023-01-25 20:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273641992389529600[0;39m <==    Updates: 1
2023-01-25 20:35:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273641992389529600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:36:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273642097276489728[0;39m 生成今日电子书快照开始
2023-01-25 20:36:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642097276489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:36:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642097276489728[0;39m ==> Parameters: 
2023-01-25 20:36:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642097276489728[0;39m <==    Updates: 0
2023-01-25 20:36:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273642097276489728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:36:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273642118206066688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:36:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642118206066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:36:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642118206066688[0;39m ==> Parameters: 
2023-01-25 20:36:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642118206066688[0;39m <==    Updates: 1
2023-01-25 20:36:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273642118206066688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:36:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273642244047769600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642244047769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642244047769600[0;39m ==> Parameters: 
2023-01-25 20:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642244047769600[0;39m <==    Updates: 1
2023-01-25 20:36:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273642244047769600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:37:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273642348884398080[0;39m 生成今日电子书快照开始
2023-01-25 20:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642348884398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:37:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642348884398080[0;39m ==> Parameters: 
2023-01-25 20:37:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642348884398080[0;39m <==    Updates: 0
2023-01-25 20:37:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273642348884398080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 20:37:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273642369889472512[0;39m 更新电子书下的文档数据开始
2023-01-25 20:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642369889472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642369889472512[0;39m ==> Parameters: 
2023-01-25 20:37:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642369889472512[0;39m <==    Updates: 1
2023-01-25 20:37:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273642369889472512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:37:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273642495689232384[0;39m 更新电子书下的文档数据开始
2023-01-25 20:37:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642495689232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:37:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642495689232384[0;39m ==> Parameters: 
2023-01-25 20:37:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642495689232384[0;39m <==    Updates: 1
2023-01-25 20:37:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273642495689232384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:38:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273642600597164032[0;39m 生成今日电子书快照开始
2023-01-25 20:38:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642600597164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:38:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642600597164032[0;39m ==> Parameters: 
2023-01-25 20:38:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642600597164032[0;39m <==    Updates: 0
2023-01-25 20:38:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273642600597164032[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:38:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273642621560295424[0;39m 更新电子书下的文档数据开始
2023-01-25 20:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642621560295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642621560295424[0;39m ==> Parameters: 
2023-01-25 20:38:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642621560295424[0;39m <==    Updates: 1
2023-01-25 20:38:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273642621560295424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:38:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273642747351666688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642747351666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642747351666688[0;39m ==> Parameters: 
2023-01-25 20:38:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642747351666688[0;39m <==    Updates: 1
2023-01-25 20:38:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273642747351666688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:39:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273642852192489472[0;39m 生成今日电子书快照开始
2023-01-25 20:39:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642852192489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642852192489472[0;39m ==> Parameters: 
2023-01-25 20:39:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273642852192489472[0;39m <==    Updates: 0
2023-01-25 20:39:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273642852192489472[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 20:39:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273642873184980992[0;39m 更新电子书下的文档数据开始
2023-01-25 20:39:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642873184980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:39:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642873184980992[0;39m ==> Parameters: 
2023-01-25 20:39:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642873184980992[0;39m <==    Updates: 1
2023-01-25 20:39:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273642873184980992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:39:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273642998988935168[0;39m 更新电子书下的文档数据开始
2023-01-25 20:39:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642998988935168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:39:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642998988935168[0;39m ==> Parameters: 
2023-01-25 20:39:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273642998988935168[0;39m <==    Updates: 1
2023-01-25 20:39:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273642998988935168[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:40:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273643103896866816[0;39m 生成今日电子书快照开始
2023-01-25 20:40:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643103896866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:40:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643103896866816[0;39m ==> Parameters: 
2023-01-25 20:40:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643103896866816[0;39m <==    Updates: 0
2023-01-25 20:40:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273643103896866816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:40:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273643124876775424[0;39m 更新电子书下的文档数据开始
2023-01-25 20:40:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643124876775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:40:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643124876775424[0;39m ==> Parameters: 
2023-01-25 20:40:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643124876775424[0;39m <==    Updates: 1
2023-01-25 20:40:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273643124876775424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:40:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273643250659758080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:40:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643250659758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:40:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643250659758080[0;39m ==> Parameters: 
2023-01-25 20:40:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643250659758080[0;39m <==    Updates: 1
2023-01-25 20:40:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273643250659758080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:41:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273643355534135296[0;39m 生成今日电子书快照开始
2023-01-25 20:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643355534135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:41:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643355534135296[0;39m ==> Parameters: 
2023-01-25 20:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643355534135296[0;39m <==    Updates: 0
2023-01-25 20:41:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273643355534135296[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-25 20:41:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273643376543404032[0;39m 更新电子书下的文档数据开始
2023-01-25 20:41:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643376543404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:41:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643376543404032[0;39m ==> Parameters: 
2023-01-25 20:41:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643376543404032[0;39m <==    Updates: 1
2023-01-25 20:41:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273643376543404032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:41:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273643502313803776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:41:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643502313803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:41:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643502313803776[0;39m ==> Parameters: 
2023-01-25 20:41:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643502313803776[0;39m <==    Updates: 1
2023-01-25 20:41:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273643502313803776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:42:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273643607179792384[0;39m 生成今日电子书快照开始
2023-01-25 20:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643607179792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:42:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643607179792384[0;39m ==> Parameters: 
2023-01-25 20:42:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643607179792384[0;39m <==    Updates: 0
2023-01-25 20:42:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273643607179792384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 20:42:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273643628163895296[0;39m 更新电子书下的文档数据开始
2023-01-25 20:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643628163895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643628163895296[0;39m ==> Parameters: 
2023-01-25 20:42:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643628163895296[0;39m <==    Updates: 1
2023-01-25 20:42:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273643628163895296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:42:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273643754013986816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:42:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643754013986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:42:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643754013986816[0;39m ==> Parameters: 
2023-01-25 20:42:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643754013986816[0;39m <==    Updates: 1
2023-01-25 20:42:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273643754013986816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:43:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273643858850615296[0;39m 生成今日电子书快照开始
2023-01-25 20:43:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643858850615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:43:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643858850615296[0;39m ==> Parameters: 
2023-01-25 20:43:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273643858850615296[0;39m <==    Updates: 0
2023-01-25 20:43:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273643858850615296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 20:43:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273643879805358080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643879805358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643879805358080[0;39m ==> Parameters: 
2023-01-25 20:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273643879805358080[0;39m <==    Updates: 1
2023-01-25 20:43:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273643879805358080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:43:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273644005684809728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:43:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644005684809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:43:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644005684809728[0;39m ==> Parameters: 
2023-01-25 20:43:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644005684809728[0;39m <==    Updates: 1
2023-01-25 20:43:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273644005684809728[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:44:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273644110525632512[0;39m 生成今日电子书快照开始
2023-01-25 20:44:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644110525632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:44:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644110525632512[0;39m ==> Parameters: 
2023-01-25 20:44:00.042 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644110525632512[0;39m <==    Updates: 0
2023-01-25 20:44:00.044 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273644110525632512[0;39m 生成今日电子书快照结束，耗时：32毫秒
2023-01-25 20:44:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273644131513929728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:44:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644131513929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:44:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644131513929728[0;39m ==> Parameters: 
2023-01-25 20:44:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644131513929728[0;39m <==    Updates: 1
2023-01-25 20:44:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273644131513929728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:44:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273644257317883904[0;39m 更新电子书下的文档数据开始
2023-01-25 20:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644257317883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644257317883904[0;39m ==> Parameters: 
2023-01-25 20:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644257317883904[0;39m <==    Updates: 1
2023-01-25 20:44:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273644257317883904[0;39m 更新电子书下的文档数据结束，耗时：9毫秒
2023-01-25 20:45:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273644362183872512[0;39m 生成今日电子书快照开始
2023-01-25 20:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644362183872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:45:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644362183872512[0;39m ==> Parameters: 
2023-01-25 20:45:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644362183872512[0;39m <==    Updates: 0
2023-01-25 20:45:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273644362183872512[0;39m 生成今日电子书快照结束，耗时：17毫秒
2023-01-25 20:45:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273644383142809600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:45:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644383142809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:45:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644383142809600[0;39m ==> Parameters: 
2023-01-25 20:45:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644383142809600[0;39m <==    Updates: 1
2023-01-25 20:45:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273644383142809600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:45:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273644508997095424[0;39m 更新电子书下的文档数据开始
2023-01-25 20:45:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644508997095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:45:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644508997095424[0;39m ==> Parameters: 
2023-01-25 20:45:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644508997095424[0;39m <==    Updates: 1
2023-01-25 20:45:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273644508997095424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:46:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273644613804363776[0;39m 生成今日电子书快照开始
2023-01-25 20:46:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644613804363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:46:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644613804363776[0;39m ==> Parameters: 
2023-01-25 20:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644613804363776[0;39m <==    Updates: 0
2023-01-25 20:46:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273644613804363776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:46:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273644634830409728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:46:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644634830409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644634830409728[0;39m ==> Parameters: 
2023-01-25 20:46:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644634830409728[0;39m <==    Updates: 1
2023-01-25 20:46:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273644634830409728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:46:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273644760651141120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:46:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644760651141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:46:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644760651141120[0;39m ==> Parameters: 
2023-01-25 20:46:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644760651141120[0;39m <==    Updates: 1
2023-01-25 20:46:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273644760651141120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:47:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273644865512935424[0;39m 生成今日电子书快照开始
2023-01-25 20:47:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644865512935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:47:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644865512935424[0;39m ==> Parameters: 
2023-01-25 20:47:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273644865512935424[0;39m <==    Updates: 0
2023-01-25 20:47:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273644865512935424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:47:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273644886434123776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:47:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644886434123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:47:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644886434123776[0;39m ==> Parameters: 
2023-01-25 20:47:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273644886434123776[0;39m <==    Updates: 1
2023-01-25 20:47:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273644886434123776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:47:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273645012317769728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645012317769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645012317769728[0;39m ==> Parameters: 
2023-01-25 20:47:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645012317769728[0;39m <==    Updates: 1
2023-01-25 20:47:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273645012317769728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:48:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273645117129232384[0;39m 生成今日电子书快照开始
2023-01-25 20:48:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645117129232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:48:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645117129232384[0;39m ==> Parameters: 
2023-01-25 20:48:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645117129232384[0;39m <==    Updates: 0
2023-01-25 20:48:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273645117129232384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:48:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273645138138501120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:48:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645138138501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:48:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645138138501120[0;39m ==> Parameters: 
2023-01-25 20:48:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645138138501120[0;39m <==    Updates: 1
2023-01-25 20:48:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273645138138501120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:48:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273645263925678080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:48:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645263925678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:48:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645263925678080[0;39m ==> Parameters: 
2023-01-25 20:48:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645263925678080[0;39m <==    Updates: 1
2023-01-25 20:48:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273645263925678080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:49:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273645368821026816[0;39m 生成今日电子书快照开始
2023-01-25 20:49:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645368821026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:49:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645368821026816[0;39m ==> Parameters: 
2023-01-25 20:49:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645368821026816[0;39m <==    Updates: 0
2023-01-25 20:49:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273645368821026816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 20:49:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273645389784158208[0;39m 更新电子书下的文档数据开始
2023-01-25 20:49:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645389784158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:49:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645389784158208[0;39m ==> Parameters: 
2023-01-25 20:49:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645389784158208[0;39m <==    Updates: 1
2023-01-25 20:49:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273645389784158208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:49:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273645515592306688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:49:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645515592306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:49:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645515592306688[0;39m ==> Parameters: 
2023-01-25 20:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645515592306688[0;39m <==    Updates: 1
2023-01-25 20:49:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273645515592306688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:50:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273645620458295296[0;39m 生成今日电子书快照开始
2023-01-25 20:50:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645620458295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:50:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645620458295296[0;39m ==> Parameters: 
2023-01-25 20:50:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645620458295296[0;39m <==    Updates: 0
2023-01-25 20:50:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273645620458295296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:50:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273645641454981120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645641454981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:50:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645641454981120[0;39m ==> Parameters: 
2023-01-25 20:50:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645641454981120[0;39m <==    Updates: 1
2023-01-25 20:50:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273645641454981120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:50:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273645767258935296[0;39m 更新电子书下的文档数据开始
2023-01-25 20:50:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645767258935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:50:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645767258935296[0;39m ==> Parameters: 
2023-01-25 20:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645767258935296[0;39m <==    Updates: 1
2023-01-25 20:50:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273645767258935296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:51:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273645872103952384[0;39m 生成今日电子书快照开始
2023-01-25 20:51:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645872103952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645872103952384[0;39m ==> Parameters: 
2023-01-25 20:51:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273645872103952384[0;39m <==    Updates: 0
2023-01-25 20:51:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273645872103952384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:51:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273645893104832512[0;39m 更新电子书下的文档数据开始
2023-01-25 20:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645893104832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645893104832512[0;39m ==> Parameters: 
2023-01-25 20:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273645893104832512[0;39m <==    Updates: 1
2023-01-25 20:51:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273645893104832512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:51:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273646018900398080[0;39m 更新电子书下的文档数据开始
2023-01-25 20:51:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646018900398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:51:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646018900398080[0;39m ==> Parameters: 
2023-01-25 20:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646018900398080[0;39m <==    Updates: 1
2023-01-25 20:51:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273646018900398080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:52:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273646123774775296[0;39m 生成今日电子书快照开始
2023-01-25 20:52:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646123774775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:52:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646123774775296[0;39m ==> Parameters: 
2023-01-25 20:52:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646123774775296[0;39m <==    Updates: 0
2023-01-25 20:52:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273646123774775296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:52:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273646144775655424[0;39m 更新电子书下的文档数据开始
2023-01-25 20:52:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646144775655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:52:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646144775655424[0;39m ==> Parameters: 
2023-01-25 20:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646144775655424[0;39m <==    Updates: 1
2023-01-25 20:52:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273646144775655424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:52:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273646270571220992[0;39m 更新电子书下的文档数据开始
2023-01-25 20:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646270571220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646270571220992[0;39m ==> Parameters: 
2023-01-25 20:52:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646270571220992[0;39m <==    Updates: 1
2023-01-25 20:52:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273646270571220992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:53:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273646375428820992[0;39m 生成今日电子书快照开始
2023-01-25 20:53:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646375428820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:53:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646375428820992[0;39m ==> Parameters: 
2023-01-25 20:53:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646375428820992[0;39m <==    Updates: 0
2023-01-25 20:53:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273646375428820992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:53:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273646396417118208[0;39m 更新电子书下的文档数据开始
2023-01-25 20:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646396417118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646396417118208[0;39m ==> Parameters: 
2023-01-25 20:53:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646396417118208[0;39m <==    Updates: 1
2023-01-25 20:53:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273646396417118208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:53:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273646522225266688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:53:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646522225266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646522225266688[0;39m ==> Parameters: 
2023-01-25 20:53:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646522225266688[0;39m <==    Updates: 1
2023-01-25 20:53:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273646522225266688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273646627120615424[0;39m 生成今日电子书快照开始
2023-01-25 20:54:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646627120615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:54:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646627120615424[0;39m ==> Parameters: 
2023-01-25 20:54:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646627120615424[0;39m <==    Updates: 0
2023-01-25 20:54:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273646627120615424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:54:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273646648083746816[0;39m 更新电子书下的文档数据开始
2023-01-25 20:54:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646648083746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646648083746816[0;39m ==> Parameters: 
2023-01-25 20:54:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646648083746816[0;39m <==    Updates: 1
2023-01-25 20:54:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273646648083746816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:54:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273646773883506688[0;39m 更新电子书下的文档数据开始
2023-01-25 20:54:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646773883506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:54:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646773883506688[0;39m ==> Parameters: 
2023-01-25 20:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646773883506688[0;39m <==    Updates: 1
2023-01-25 20:54:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273646773883506688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:55:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273646878770466816[0;39m 生成今日电子书快照开始
2023-01-25 20:55:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646878770466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646878770466816[0;39m ==> Parameters: 
2023-01-25 20:55:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273646878770466816[0;39m <==    Updates: 0
2023-01-25 20:55:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273646878770466816[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 20:55:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273646899725209600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646899725209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:55:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646899725209600[0;39m ==> Parameters: 
2023-01-25 20:55:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273646899725209600[0;39m <==    Updates: 1
2023-01-25 20:55:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273646899725209600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 20:55:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273647025524969472[0;39m 更新电子书下的文档数据开始
2023-01-25 20:55:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647025524969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:55:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647025524969472[0;39m ==> Parameters: 
2023-01-25 20:55:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647025524969472[0;39m <==    Updates: 1
2023-01-25 20:55:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273647025524969472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:56:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273647130411929600[0;39m 生成今日电子书快照开始
2023-01-25 20:56:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647130411929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:56:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647130411929600[0;39m ==> Parameters: 
2023-01-25 20:56:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647130411929600[0;39m <==    Updates: 0
2023-01-25 20:56:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273647130411929600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 20:56:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273647151404421120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:56:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647151404421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647151404421120[0;39m ==> Parameters: 
2023-01-25 20:56:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647151404421120[0;39m <==    Updates: 1
2023-01-25 20:56:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273647151404421120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:56:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273647277233541120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:56:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647277233541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:56:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647277233541120[0;39m ==> Parameters: 
2023-01-25 20:56:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647277233541120[0;39m <==    Updates: 1
2023-01-25 20:56:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273647277233541120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:57:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273647382095335424[0;39m 生成今日电子书快照开始
2023-01-25 20:57:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647382095335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:57:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647382095335424[0;39m ==> Parameters: 
2023-01-25 20:57:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647382095335424[0;39m <==    Updates: 0
2023-01-25 20:57:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273647382095335424[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 20:57:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273647403041689600[0;39m 更新电子书下的文档数据开始
2023-01-25 20:57:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647403041689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:57:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647403041689600[0;39m ==> Parameters: 
2023-01-25 20:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647403041689600[0;39m <==    Updates: 1
2023-01-25 20:57:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273647403041689600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 20:57:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273647528900169728[0;39m 更新电子书下的文档数据开始
2023-01-25 20:57:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647528900169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:57:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647528900169728[0;39m ==> Parameters: 
2023-01-25 20:57:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647528900169728[0;39m <==    Updates: 1
2023-01-25 20:57:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273647528900169728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273647633753575424[0;39m 生成今日电子书快照开始
2023-01-25 20:58:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647633753575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647633753575424[0;39m ==> Parameters: 
2023-01-25 20:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647633753575424[0;39m <==    Updates: 0
2023-01-25 20:58:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273647633753575424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 20:58:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273647654733484032[0;39m 更新电子书下的文档数据开始
2023-01-25 20:58:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647654733484032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:58:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647654733484032[0;39m ==> Parameters: 
2023-01-25 20:58:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647654733484032[0;39m <==    Updates: 1
2023-01-25 20:58:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273647654733484032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 20:58:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273647780503883776[0;39m 更新电子书下的文档数据开始
2023-01-25 20:58:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647780503883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:58:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647780503883776[0;39m ==> Parameters: 
2023-01-25 20:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647780503883776[0;39m <==    Updates: 1
2023-01-25 20:58:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273647780503883776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:59:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273647885374066688[0;39m 生成今日电子书快照开始
2023-01-25 20:59:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647885374066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 20:59:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647885374066688[0;39m ==> Parameters: 
2023-01-25 20:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273647885374066688[0;39m <==    Updates: 0
2023-01-25 20:59:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273647885374066688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 20:59:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273647906349780992[0;39m 更新电子书下的文档数据开始
2023-01-25 20:59:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647906349780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:59:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647906349780992[0;39m ==> Parameters: 
2023-01-25 20:59:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273647906349780992[0;39m <==    Updates: 1
2023-01-25 20:59:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273647906349780992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 20:59:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273648032208261120[0;39m 更新电子书下的文档数据开始
2023-01-25 20:59:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648032208261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 20:59:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648032208261120[0;39m ==> Parameters: 
2023-01-25 20:59:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648032208261120[0;39m <==    Updates: 1
2023-01-25 20:59:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273648032208261120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:00:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273648137044889600[0;39m 生成今日电子书快照开始
2023-01-25 21:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648137044889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648137044889600[0;39m ==> Parameters: 
2023-01-25 21:00:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648137044889600[0;39m <==    Updates: 0
2023-01-25 21:00:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273648137044889600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:00:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273648157982855168[0;39m 更新电子书下的文档数据开始
2023-01-25 21:00:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648157982855168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:00:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648157982855168[0;39m ==> Parameters: 
2023-01-25 21:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648157982855168[0;39m <==    Updates: 1
2023-01-25 21:00:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273648157982855168[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 21:00:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273648283858112512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:00:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648283858112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:00:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648283858112512[0;39m ==> Parameters: 
2023-01-25 21:00:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648283858112512[0;39m <==    Updates: 1
2023-01-25 21:00:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273648283858112512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:01:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273648388711518208[0;39m 生成今日电子书快照开始
2023-01-25 21:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648388711518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648388711518208[0;39m ==> Parameters: 
2023-01-25 21:01:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648388711518208[0;39m <==    Updates: 0
2023-01-25 21:01:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273648388711518208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:01:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273648409657872384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648409657872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648409657872384[0;39m ==> Parameters: 
2023-01-25 21:01:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648409657872384[0;39m <==    Updates: 1
2023-01-25 21:01:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273648409657872384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:01:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273648535499575296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:01:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648535499575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:01:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648535499575296[0;39m ==> Parameters: 
2023-01-25 21:01:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648535499575296[0;39m <==    Updates: 1
2023-01-25 21:01:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273648535499575296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:02:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273648640386535424[0;39m 生成今日电子书快照开始
2023-01-25 21:02:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648640386535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:02:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648640386535424[0;39m ==> Parameters: 
2023-01-25 21:02:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648640386535424[0;39m <==    Updates: 0
2023-01-25 21:02:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273648640386535424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:02:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273648661349666816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648661349666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:02:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648661349666816[0;39m ==> Parameters: 
2023-01-25 21:02:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648661349666816[0;39m <==    Updates: 1
2023-01-25 21:02:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273648661349666816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:02:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273648787162009600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:02:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648787162009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:02:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648787162009600[0;39m ==> Parameters: 
2023-01-25 21:02:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648787162009600[0;39m <==    Updates: 1
2023-01-25 21:02:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273648787162009600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:03:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273648892019609600[0;39m 生成今日电子书快照开始
2023-01-25 21:03:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648892019609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:03:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648892019609600[0;39m ==> Parameters: 
2023-01-25 21:03:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273648892019609600[0;39m <==    Updates: 0
2023-01-25 21:03:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273648892019609600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:03:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273648912991129600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:03:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648912991129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648912991129600[0;39m ==> Parameters: 
2023-01-25 21:03:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273648912991129600[0;39m <==    Updates: 1
2023-01-25 21:03:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273648912991129600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273649038824443904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:03:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649038824443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:03:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649038824443904[0;39m ==> Parameters: 
2023-01-25 21:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649038824443904[0;39m <==    Updates: 1
2023-01-25 21:03:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273649038824443904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:04:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273649143711404032[0;39m 生成今日电子书快照开始
2023-01-25 21:04:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649143711404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:04:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649143711404032[0;39m ==> Parameters: 
2023-01-25 21:04:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649143711404032[0;39m <==    Updates: 0
2023-01-25 21:04:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273649143711404032[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 21:04:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273649164632592384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:04:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649164632592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:04:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649164632592384[0;39m ==> Parameters: 
2023-01-25 21:04:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649164632592384[0;39m <==    Updates: 1
2023-01-25 21:04:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273649164632592384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:04:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273649290474295296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:04:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649290474295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649290474295296[0;39m ==> Parameters: 
2023-01-25 21:04:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649290474295296[0;39m <==    Updates: 1
2023-01-25 21:04:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273649290474295296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:05:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273649395336089600[0;39m 生成今日电子书快照开始
2023-01-25 21:05:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649395336089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:05:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649395336089600[0;39m ==> Parameters: 
2023-01-25 21:05:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649395336089600[0;39m <==    Updates: 0
2023-01-25 21:05:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273649395336089600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:05:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273649416290832384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649416290832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649416290832384[0;39m ==> Parameters: 
2023-01-25 21:05:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649416290832384[0;39m <==    Updates: 1
2023-01-25 21:05:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273649416290832384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:05:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273649542145118208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649542145118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649542145118208[0;39m ==> Parameters: 
2023-01-25 21:05:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649542145118208[0;39m <==    Updates: 1
2023-01-25 21:05:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273649542145118208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:06:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273649647002718208[0;39m 生成今日电子书快照开始
2023-01-25 21:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649647002718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:06:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649647002718208[0;39m ==> Parameters: 
2023-01-25 21:06:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649647002718208[0;39m <==    Updates: 0
2023-01-25 21:06:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273649647002718208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:06:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273649667970043904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:06:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649667970043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649667970043904[0;39m ==> Parameters: 
2023-01-25 21:06:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649667970043904[0;39m <==    Updates: 1
2023-01-25 21:06:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273649667970043904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:06:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273649793803358208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649793803358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649793803358208[0;39m ==> Parameters: 
2023-01-25 21:06:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649793803358208[0;39m <==    Updates: 1
2023-01-25 21:06:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273649793803358208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:07:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273649898627403776[0;39m 生成今日电子书快照开始
2023-01-25 21:07:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649898627403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649898627403776[0;39m ==> Parameters: 
2023-01-25 21:07:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273649898627403776[0;39m <==    Updates: 0
2023-01-25 21:07:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273649898627403776[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 21:07:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273649919619895296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649919619895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649919619895296[0;39m ==> Parameters: 
2023-01-25 21:07:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273649919619895296[0;39m <==    Updates: 1
2023-01-25 21:07:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273649919619895296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:07:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273650045440626688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:07:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650045440626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:07:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650045440626688[0;39m ==> Parameters: 
2023-01-25 21:07:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650045440626688[0;39m <==    Updates: 1
2023-01-25 21:07:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273650045440626688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:08:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273650150327586816[0;39m 生成今日电子书快照开始
2023-01-25 21:08:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650150327586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:08:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650150327586816[0;39m ==> Parameters: 
2023-01-25 21:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650150327586816[0;39m <==    Updates: 0
2023-01-25 21:08:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273650150327586816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:08:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273650171294912512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:08:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650171294912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:08:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650171294912512[0;39m ==> Parameters: 
2023-01-25 21:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650171294912512[0;39m <==    Updates: 1
2023-01-25 21:08:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273650171294912512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:08:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273650297136615424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650297136615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650297136615424[0;39m ==> Parameters: 
2023-01-25 21:08:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650297136615424[0;39m <==    Updates: 1
2023-01-25 21:08:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273650297136615424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:09:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273650401998409728[0;39m 生成今日电子书快照开始
2023-01-25 21:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650401998409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:09:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650401998409728[0;39m ==> Parameters: 
2023-01-25 21:09:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650401998409728[0;39m <==    Updates: 0
2023-01-25 21:09:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273650401998409728[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-25 21:09:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273650422936375296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:09:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650422936375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:09:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650422936375296[0;39m ==> Parameters: 
2023-01-25 21:09:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650422936375296[0;39m <==    Updates: 1
2023-01-25 21:09:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273650422936375296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:09:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273650548769689600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:09:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650548769689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:09:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650548769689600[0;39m ==> Parameters: 
2023-01-25 21:09:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650548769689600[0;39m <==    Updates: 1
2023-01-25 21:09:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273650548769689600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 21:10:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273650653602123776[0;39m 生成今日电子书快照开始
2023-01-25 21:10:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650653602123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:10:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650653602123776[0;39m ==> Parameters: 
2023-01-25 21:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650653602123776[0;39m <==    Updates: 0
2023-01-25 21:10:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273650653602123776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:10:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273650674577838080[0;39m 更新电子书下的文档数据开始
2023-01-25 21:10:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650674577838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:10:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650674577838080[0;39m ==> Parameters: 
2023-01-25 21:10:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650674577838080[0;39m <==    Updates: 1
2023-01-25 21:10:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273650674577838080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:10:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273650800411152384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:10:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650800411152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:10:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650800411152384[0;39m ==> Parameters: 
2023-01-25 21:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650800411152384[0;39m <==    Updates: 1
2023-01-25 21:10:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273650800411152384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:11:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273650905260363776[0;39m 生成今日电子书快照开始
2023-01-25 21:11:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650905260363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:11:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650905260363776[0;39m ==> Parameters: 
2023-01-25 21:11:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273650905260363776[0;39m <==    Updates: 0
2023-01-25 21:11:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273650905260363776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:11:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273650926252855296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:11:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650926252855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:11:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650926252855296[0;39m ==> Parameters: 
2023-01-25 21:11:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273650926252855296[0;39m <==    Updates: 1
2023-01-25 21:11:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273650926252855296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:11:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273651052090363904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651052090363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:11:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651052090363904[0;39m ==> Parameters: 
2023-01-25 21:11:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651052090363904[0;39m <==    Updates: 1
2023-01-25 21:11:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273651052090363904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:12:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273651156935380992[0;39m 生成今日电子书快照开始
2023-01-25 21:12:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651156935380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:12:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651156935380992[0;39m ==> Parameters: 
2023-01-25 21:12:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651156935380992[0;39m <==    Updates: 0
2023-01-25 21:12:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273651156935380992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:12:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273651177885929472[0;39m 更新电子书下的文档数据开始
2023-01-25 21:12:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651177885929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:12:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651177885929472[0;39m ==> Parameters: 
2023-01-25 21:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651177885929472[0;39m <==    Updates: 1
2023-01-25 21:12:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273651177885929472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:12:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273651303727632384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:12:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651303727632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:12:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651303727632384[0;39m ==> Parameters: 
2023-01-25 21:12:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651303727632384[0;39m <==    Updates: 1
2023-01-25 21:12:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273651303727632384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:13:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273651408572649472[0;39m 生成今日电子书快照开始
2023-01-25 21:13:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651408572649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:13:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651408572649472[0;39m ==> Parameters: 
2023-01-25 21:13:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651408572649472[0;39m <==    Updates: 0
2023-01-25 21:13:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273651408572649472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:13:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273651429556752384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:13:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651429556752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:13:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651429556752384[0;39m ==> Parameters: 
2023-01-25 21:13:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651429556752384[0;39m <==    Updates: 1
2023-01-25 21:13:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273651429556752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:13:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273651555390066688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:13:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651555390066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:13:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651555390066688[0;39m ==> Parameters: 
2023-01-25 21:13:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651555390066688[0;39m <==    Updates: 1
2023-01-25 21:13:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273651555390066688[0;39m 更新电子书下的文档数据结束，耗时：11毫秒
2023-01-25 21:14:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273651660281221120[0;39m 生成今日电子书快照开始
2023-01-25 21:14:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651660281221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:14:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651660281221120[0;39m ==> Parameters: 
2023-01-25 21:14:00.036 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651660281221120[0;39m <==    Updates: 0
2023-01-25 21:14:00.038 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273651660281221120[0;39m 生成今日电子书快照结束，耗时：25毫秒
2023-01-25 21:14:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273651681248546816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:14:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651681248546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:14:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651681248546816[0;39m ==> Parameters: 
2023-01-25 21:14:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651681248546816[0;39m <==    Updates: 1
2023-01-25 21:14:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273651681248546816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 21:14:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273651807073472512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:14:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651807073472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:14:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651807073472512[0;39m ==> Parameters: 
2023-01-25 21:14:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651807073472512[0;39m <==    Updates: 1
2023-01-25 21:14:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273651807073472512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:15:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273651911889129472[0;39m 生成今日电子书快照开始
2023-01-25 21:15:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651911889129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:15:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651911889129472[0;39m ==> Parameters: 
2023-01-25 21:15:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273651911889129472[0;39m <==    Updates: 0
2023-01-25 21:15:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273651911889129472[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-25 21:15:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273651932910981120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:15:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651932910981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:15:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651932910981120[0;39m ==> Parameters: 
2023-01-25 21:15:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273651932910981120[0;39m <==    Updates: 1
2023-01-25 21:15:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273651932910981120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:15:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273652058744295424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652058744295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:15:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652058744295424[0;39m ==> Parameters: 
2023-01-25 21:15:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652058744295424[0;39m <==    Updates: 1
2023-01-25 21:15:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273652058744295424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:16:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273652163555758080[0;39m 生成今日电子书快照开始
2023-01-25 21:16:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652163555758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:16:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652163555758080[0;39m ==> Parameters: 
2023-01-25 21:16:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652163555758080[0;39m <==    Updates: 0
2023-01-25 21:16:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273652163555758080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:16:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273652184560832512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:16:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652184560832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:16:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652184560832512[0;39m ==> Parameters: 
2023-01-25 21:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652184560832512[0;39m <==    Updates: 1
2023-01-25 21:16:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273652184560832512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:16:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273652310356398080[0;39m 更新电子书下的文档数据开始
2023-01-25 21:16:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652310356398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:16:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652310356398080[0;39m ==> Parameters: 
2023-01-25 21:16:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652310356398080[0;39m <==    Updates: 1
2023-01-25 21:16:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273652310356398080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:17:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273652415230775296[0;39m 生成今日电子书快照开始
2023-01-25 21:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652415230775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:17:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652415230775296[0;39m ==> Parameters: 
2023-01-25 21:17:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652415230775296[0;39m <==    Updates: 0
2023-01-25 21:17:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273652415230775296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:17:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273652436231655424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:17:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652436231655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:17:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652436231655424[0;39m ==> Parameters: 
2023-01-25 21:17:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652436231655424[0;39m <==    Updates: 1
2023-01-25 21:17:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273652436231655424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:17:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273652562031415296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:17:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652562031415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:17:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652562031415296[0;39m ==> Parameters: 
2023-01-25 21:17:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652562031415296[0;39m <==    Updates: 1
2023-01-25 21:17:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273652562031415296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:18:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273652666889015296[0;39m 生成今日电子书快照开始
2023-01-25 21:18:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652666889015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:18:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652666889015296[0;39m ==> Parameters: 
2023-01-25 21:18:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652666889015296[0;39m <==    Updates: 0
2023-01-25 21:18:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273652666889015296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:18:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273652687843758080[0;39m 更新电子书下的文档数据开始
2023-01-25 21:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652687843758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:18:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652687843758080[0;39m ==> Parameters: 
2023-01-25 21:18:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652687843758080[0;39m <==    Updates: 1
2023-01-25 21:18:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273652687843758080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:18:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273652813702238208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652813702238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:18:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652813702238208[0;39m ==> Parameters: 
2023-01-25 21:18:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652813702238208[0;39m <==    Updates: 1
2023-01-25 21:18:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273652813702238208[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 21:19:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273652918530478080[0;39m 生成今日电子书快照开始
2023-01-25 21:19:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652918530478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:19:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652918530478080[0;39m ==> Parameters: 
2023-01-25 21:19:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273652918530478080[0;39m <==    Updates: 0
2023-01-25 21:19:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273652918530478080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 21:19:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273652939518775296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:19:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652939518775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:19:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652939518775296[0;39m ==> Parameters: 
2023-01-25 21:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273652939518775296[0;39m <==    Updates: 1
2023-01-25 21:19:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273652939518775296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:19:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273653065339506688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:19:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653065339506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:19:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653065339506688[0;39m ==> Parameters: 
2023-01-25 21:19:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653065339506688[0;39m <==    Updates: 1
2023-01-25 21:19:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273653065339506688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:20:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273653170205495296[0;39m 生成今日电子书快照开始
2023-01-25 21:20:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653170205495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:20:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653170205495296[0;39m ==> Parameters: 
2023-01-25 21:20:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653170205495296[0;39m <==    Updates: 0
2023-01-25 21:20:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273653170205495296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:20:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273653191193792512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653191193792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653191193792512[0;39m ==> Parameters: 
2023-01-25 21:20:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653191193792512[0;39m <==    Updates: 1
2023-01-25 21:20:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273653191193792512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:20:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273653317043884032[0;39m 更新电子书下的文档数据开始
2023-01-25 21:20:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653317043884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:20:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653317043884032[0;39m ==> Parameters: 
2023-01-25 21:20:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653317043884032[0;39m <==    Updates: 1
2023-01-25 21:20:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273653317043884032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:21:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273653421893095424[0;39m 生成今日电子书快照开始
2023-01-25 21:21:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653421893095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:21:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653421893095424[0;39m ==> Parameters: 
2023-01-25 21:21:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653421893095424[0;39m <==    Updates: 0
2023-01-25 21:21:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273653421893095424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:21:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273653442822672384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:21:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653442822672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:21:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653442822672384[0;39m ==> Parameters: 
2023-01-25 21:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653442822672384[0;39m <==    Updates: 1
2023-01-25 21:21:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273653442822672384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:21:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273653568672763904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:21:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653568672763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:21:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653568672763904[0;39m ==> Parameters: 
2023-01-25 21:21:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653568672763904[0;39m <==    Updates: 1
2023-01-25 21:21:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273653568672763904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:22:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273653673513586688[0;39m 生成今日电子书快照开始
2023-01-25 21:22:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653673513586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:22:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653673513586688[0;39m ==> Parameters: 
2023-01-25 21:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653673513586688[0;39m <==    Updates: 0
2023-01-25 21:22:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273653673513586688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 21:22:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273653694476718080[0;39m 更新电子书下的文档数据开始
2023-01-25 21:22:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653694476718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:22:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653694476718080[0;39m ==> Parameters: 
2023-01-25 21:22:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653694476718080[0;39m <==    Updates: 1
2023-01-25 21:22:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273653694476718080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:22:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273653820339392512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:22:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653820339392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:22:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653820339392512[0;39m ==> Parameters: 
2023-01-25 21:22:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653820339392512[0;39m <==    Updates: 1
2023-01-25 21:22:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273653820339392512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:23:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273653925180215296[0;39m 生成今日电子书快照开始
2023-01-25 21:23:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653925180215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:23:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653925180215296[0;39m ==> Parameters: 
2023-01-25 21:23:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273653925180215296[0;39m <==    Updates: 0
2023-01-25 21:23:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273653925180215296[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 21:23:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273653946189484032[0;39m 更新电子书下的文档数据开始
2023-01-25 21:23:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653946189484032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:23:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653946189484032[0;39m ==> Parameters: 
2023-01-25 21:23:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273653946189484032[0;39m <==    Updates: 1
2023-01-25 21:23:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273653946189484032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:23:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273654071972466688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:23:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654071972466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:23:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654071972466688[0;39m ==> Parameters: 
2023-01-25 21:23:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654071972466688[0;39m <==    Updates: 1
2023-01-25 21:23:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273654071972466688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:24:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273654176851038208[0;39m 生成今日电子书快照开始
2023-01-25 21:24:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654176851038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:24:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654176851038208[0;39m ==> Parameters: 
2023-01-25 21:24:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654176851038208[0;39m <==    Updates: 0
2023-01-25 21:24:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273654176851038208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:24:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273654197809975296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:24:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654197809975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654197809975296[0;39m ==> Parameters: 
2023-01-25 21:24:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654197809975296[0;39m <==    Updates: 1
2023-01-25 21:24:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273654197809975296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:24:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273654323639095296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654323639095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654323639095296[0;39m ==> Parameters: 
2023-01-25 21:24:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654323639095296[0;39m <==    Updates: 1
2023-01-25 21:24:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273654323639095296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273654428496695296[0;39m 生成今日电子书快照开始
2023-01-25 21:25:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654428496695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654428496695296[0;39m ==> Parameters: 
2023-01-25 21:25:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654428496695296[0;39m <==    Updates: 0
2023-01-25 21:25:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273654428496695296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:25:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273654449468215296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:25:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654449468215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:25:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654449468215296[0;39m ==> Parameters: 
2023-01-25 21:25:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654449468215296[0;39m <==    Updates: 1
2023-01-25 21:25:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273654449468215296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:25:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273654575284752384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:25:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654575284752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:25:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654575284752384[0;39m ==> Parameters: 
2023-01-25 21:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654575284752384[0;39m <==    Updates: 1
2023-01-25 21:25:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273654575284752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:26:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273654680154935296[0;39m 生成今日电子书快照开始
2023-01-25 21:26:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654680154935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:26:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654680154935296[0;39m ==> Parameters: 
2023-01-25 21:26:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654680154935296[0;39m <==    Updates: 0
2023-01-25 21:26:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273654680154935296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:26:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273654701134843904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:26:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654701134843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:26:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654701134843904[0;39m ==> Parameters: 
2023-01-25 21:26:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654701134843904[0;39m <==    Updates: 1
2023-01-25 21:26:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273654701134843904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:26:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273654826980741120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:26:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654826980741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:26:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654826980741120[0;39m ==> Parameters: 
2023-01-25 21:26:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654826980741120[0;39m <==    Updates: 1
2023-01-25 21:26:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273654826980741120[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-25 21:27:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273654931796398080[0;39m 生成今日电子书快照开始
2023-01-25 21:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654931796398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654931796398080[0;39m ==> Parameters: 
2023-01-25 21:27:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273654931796398080[0;39m <==    Updates: 0
2023-01-25 21:27:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273654931796398080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 21:27:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273654952776306688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654952776306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654952776306688[0;39m ==> Parameters: 
2023-01-25 21:27:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273654952776306688[0;39m <==    Updates: 1
2023-01-25 21:27:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273654952776306688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:27:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273655078613815296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655078613815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:27:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655078613815296[0;39m ==> Parameters: 
2023-01-25 21:27:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655078613815296[0;39m <==    Updates: 1
2023-01-25 21:27:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273655078613815296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:28:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273655183492386816[0;39m 生成今日电子书快照开始
2023-01-25 21:28:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655183492386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655183492386816[0;39m ==> Parameters: 
2023-01-25 21:28:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655183492386816[0;39m <==    Updates: 0
2023-01-25 21:28:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273655183492386816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:28:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273655204476489728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:28:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655204476489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:28:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655204476489728[0;39m ==> Parameters: 
2023-01-25 21:28:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655204476489728[0;39m <==    Updates: 1
2023-01-25 21:28:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273655204476489728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:28:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273655330276249600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:28:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655330276249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:28:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655330276249600[0;39m ==> Parameters: 
2023-01-25 21:28:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655330276249600[0;39m <==    Updates: 1
2023-01-25 21:28:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273655330276249600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:29:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273655435121266688[0;39m 生成今日电子书快照开始
2023-01-25 21:29:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655435121266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655435121266688[0;39m ==> Parameters: 
2023-01-25 21:29:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655435121266688[0;39m <==    Updates: 0
2023-01-25 21:29:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273655435121266688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:29:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273655456092786688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655456092786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655456092786688[0;39m ==> Parameters: 
2023-01-25 21:29:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655456092786688[0;39m <==    Updates: 1
2023-01-25 21:29:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273655456092786688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:29:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273655581968044032[0;39m 更新电子书下的文档数据开始
2023-01-25 21:29:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655581968044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:29:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655581968044032[0;39m ==> Parameters: 
2023-01-25 21:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655581968044032[0;39m <==    Updates: 1
2023-01-25 21:29:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273655581968044032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:30:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273655686817255424[0;39m 生成今日电子书快照开始
2023-01-25 21:30:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655686817255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:30:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655686817255424[0;39m ==> Parameters: 
2023-01-25 21:30:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655686817255424[0;39m <==    Updates: 0
2023-01-25 21:30:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273655686817255424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:30:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273655707792969728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:30:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655707792969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:30:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655707792969728[0;39m ==> Parameters: 
2023-01-25 21:30:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655707792969728[0;39m <==    Updates: 1
2023-01-25 21:30:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273655707792969728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-25 21:30:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273655833584340992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:30:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655833584340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655833584340992[0;39m ==> Parameters: 
2023-01-25 21:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655833584340992[0;39m <==    Updates: 1
2023-01-25 21:30:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273655833584340992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:31:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273655938437746688[0;39m 生成今日电子书快照开始
2023-01-25 21:31:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655938437746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655938437746688[0;39m ==> Parameters: 
2023-01-25 21:31:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273655938437746688[0;39m <==    Updates: 0
2023-01-25 21:31:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273655938437746688[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 21:31:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273655959409266688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:31:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655959409266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:31:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655959409266688[0;39m ==> Parameters: 
2023-01-25 21:31:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273655959409266688[0;39m <==    Updates: 1
2023-01-25 21:31:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273655959409266688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:31:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273656085280329728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:31:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656085280329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:31:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656085280329728[0;39m ==> Parameters: 
2023-01-25 21:31:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656085280329728[0;39m <==    Updates: 1
2023-01-25 21:31:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273656085280329728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:32:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273656190112763904[0;39m 生成今日电子书快照开始
2023-01-25 21:32:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656190112763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656190112763904[0;39m ==> Parameters: 
2023-01-25 21:32:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656190112763904[0;39m <==    Updates: 0
2023-01-25 21:32:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273656190112763904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:32:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273656211105255424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:32:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656211105255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:32:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656211105255424[0;39m ==> Parameters: 
2023-01-25 21:32:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656211105255424[0;39m <==    Updates: 1
2023-01-25 21:32:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273656211105255424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:32:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273656336938569728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:32:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656336938569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:32:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656336938569728[0;39m ==> Parameters: 
2023-01-25 21:32:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656336938569728[0;39m <==    Updates: 1
2023-01-25 21:32:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273656336938569728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:33:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273656441783586816[0;39m 生成今日电子书快照开始
2023-01-25 21:33:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656441783586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:33:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656441783586816[0;39m ==> Parameters: 
2023-01-25 21:33:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656441783586816[0;39m <==    Updates: 0
2023-01-25 21:33:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273656441783586816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:33:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273656462738329600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656462738329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656462738329600[0;39m ==> Parameters: 
2023-01-25 21:33:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656462738329600[0;39m <==    Updates: 1
2023-01-25 21:33:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273656462738329600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:33:21.821 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m273656533257162752[0;39m ------------- 开始 -------------
2023-01-25 21:33:21.827 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m273656533257162752[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-25 21:33:21.828 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m273656533257162752[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-25 21:33:21.828 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m273656533257162752[0;39m 远程地址: 127.0.0.1
2023-01-25 21:33:21.829 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m273656533257162752[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-25 21:33:21.837 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656533257162752[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-25 21:33:21.838 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656533257162752[0;39m ==> Parameters: 
2023-01-25 21:33:21.847 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656533257162752[0;39m <==    Columns: count(0)
2023-01-25 21:33:21.848 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656533257162752[0;39m <==        Row: 5
2023-01-25 21:33:21.849 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656533257162752[0;39m <==      Total: 1
2023-01-25 21:33:21.851 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656533257162752[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-25 21:33:21.851 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656533257162752[0;39m ==> Parameters: 
2023-01-25 21:33:21.853 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-25 21:33:21.854 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-25 21:33:21.859 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:21.860 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:21.861 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:21.861 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656533257162752[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:21.863 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656533257162752[0;39m <==      Total: 5
2023-01-25 21:33:21.863 INFO  com.example.wiki.service.EbookService             :51   [32m273656533257162752[0;39m 总行数 5
2023-01-25 21:33:21.864 INFO  com.example.wiki.service.EbookService             :52   [32m273656533257162752[0;39m 总页数 0
2023-01-25 21:33:21.894 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m273656533257162752[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-25 21:33:21.895 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m273656533257162752[0;39m ------------- 结束 耗时：74 ms -------------
2023-01-25 21:33:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273656588554866688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656588554866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656588554866688[0;39m ==> Parameters: 
2023-01-25 21:33:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656588554866688[0;39m <==    Updates: 1
2023-01-25 21:33:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273656588554866688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:33:58.706 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m273656687964065792[0;39m ------------- 开始 -------------
2023-01-25 21:33:58.706 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m273656687964065792[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-25 21:33:58.707 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m273656687964065792[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-25 21:33:58.707 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m273656687964065792[0;39m 远程地址: 127.0.0.1
2023-01-25 21:33:58.707 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m273656687964065792[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-25 21:33:58.709 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656687964065792[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-25 21:33:58.710 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656687964065792[0;39m ==> Parameters: 
2023-01-25 21:33:58.713 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656687964065792[0;39m <==    Columns: count(0)
2023-01-25 21:33:58.714 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656687964065792[0;39m <==        Row: 5
2023-01-25 21:33:58.715 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656687964065792[0;39m <==      Total: 1
2023-01-25 21:33:58.716 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656687964065792[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-25 21:33:58.716 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656687964065792[0;39m ==> Parameters: 
2023-01-25 21:33:58.717 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-25 21:33:58.718 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-25 21:33:58.718 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:58.719 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:58.719 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:58.719 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656687964065792[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:33:58.720 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656687964065792[0;39m <==      Total: 5
2023-01-25 21:33:58.721 INFO  com.example.wiki.service.EbookService             :51   [32m273656687964065792[0;39m 总行数 5
2023-01-25 21:33:58.721 INFO  com.example.wiki.service.EbookService             :52   [32m273656687964065792[0;39m 总页数 0
2023-01-25 21:33:58.722 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m273656687964065792[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-25 21:33:58.722 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m273656687964065792[0;39m ------------- 结束 耗时：17 ms -------------
2023-01-25 21:34:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273656693420855296[0;39m 生成今日电子书快照开始
2023-01-25 21:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656693420855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:34:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656693420855296[0;39m ==> Parameters: 
2023-01-25 21:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656693420855296[0;39m <==    Updates: 0
2023-01-25 21:34:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273656693420855296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:34:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273656714434318336[0;39m 更新电子书下的文档数据开始
2023-01-25 21:34:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656714434318336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:34:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656714434318336[0;39m ==> Parameters: 
2023-01-25 21:34:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656714434318336[0;39m <==    Updates: 1
2023-01-25 21:34:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273656714434318336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:34:29.317 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m273656816355905536[0;39m ------------- 开始 -------------
2023-01-25 21:34:29.318 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m273656816355905536[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-25 21:34:29.318 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m273656816355905536[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-25 21:34:29.318 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m273656816355905536[0;39m 远程地址: 127.0.0.1
2023-01-25 21:34:29.319 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m273656816355905536[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-25 21:34:29.320 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656816355905536[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-25 21:34:29.321 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656816355905536[0;39m ==> Parameters: 
2023-01-25 21:34:29.324 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656816355905536[0;39m <==    Columns: count(0)
2023-01-25 21:34:29.324 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273656816355905536[0;39m <==        Row: 5
2023-01-25 21:34:29.324 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273656816355905536[0;39m <==      Total: 1
2023-01-25 21:34:29.325 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656816355905536[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-25 21:34:29.326 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656816355905536[0;39m ==> Parameters: 
2023-01-25 21:34:29.327 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-25 21:34:29.328 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-25 21:34:29.331 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:34:29.331 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:34:29.332 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:34:29.333 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273656816355905536[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:34:29.333 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273656816355905536[0;39m <==      Total: 5
2023-01-25 21:34:29.334 INFO  com.example.wiki.service.EbookService             :51   [32m273656816355905536[0;39m 总行数 5
2023-01-25 21:34:29.335 INFO  com.example.wiki.service.EbookService             :52   [32m273656816355905536[0;39m 总页数 0
2023-01-25 21:34:29.592 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m273656816355905536[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-25 21:34:29.592 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m273656816355905536[0;39m ------------- 结束 耗时：275 ms -------------
2023-01-25 21:34:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273656840250855424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:34:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656840250855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:34:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656840250855424[0;39m ==> Parameters: 
2023-01-25 21:34:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656840250855424[0;39m <==    Updates: 1
2023-01-25 21:34:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273656840250855424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:35:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273656945100066816[0;39m 生成今日电子书快照开始
2023-01-25 21:35:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656945100066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656945100066816[0;39m ==> Parameters: 
2023-01-25 21:35:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273656945100066816[0;39m <==    Updates: 0
2023-01-25 21:35:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273656945100066816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:35:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273656966063198208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656966063198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:35:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656966063198208[0;39m ==> Parameters: 
2023-01-25 21:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273656966063198208[0;39m <==    Updates: 1
2023-01-25 21:35:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273656966063198208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:35:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273657091892318208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657091892318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657091892318208[0;39m ==> Parameters: 
2023-01-25 21:35:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657091892318208[0;39m <==    Updates: 1
2023-01-25 21:35:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273657091892318208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:36:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273657196766695424[0;39m 生成今日电子书快照开始
2023-01-25 21:36:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657196766695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:36:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657196766695424[0;39m ==> Parameters: 
2023-01-25 21:36:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657196766695424[0;39m <==    Updates: 0
2023-01-25 21:36:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273657196766695424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:36:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273657217704660992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:36:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657217704660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657217704660992[0;39m ==> Parameters: 
2023-01-25 21:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657217704660992[0;39m <==    Updates: 1
2023-01-25 21:36:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273657217704660992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:36:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273657343546363904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657343546363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657343546363904[0;39m ==> Parameters: 
2023-01-25 21:36:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657343546363904[0;39m <==    Updates: 1
2023-01-25 21:36:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273657343546363904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:37:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273657448387186688[0;39m 生成今日电子书快照开始
2023-01-25 21:37:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657448387186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:37:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657448387186688[0;39m ==> Parameters: 
2023-01-25 21:37:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657448387186688[0;39m <==    Updates: 0
2023-01-25 21:37:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273657448387186688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 21:37:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273657469383872512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:37:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657469383872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:37:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657469383872512[0;39m ==> Parameters: 
2023-01-25 21:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657469383872512[0;39m <==    Updates: 1
2023-01-25 21:37:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273657469383872512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:37:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273657595204603904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:37:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657595204603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:37:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657595204603904[0;39m ==> Parameters: 
2023-01-25 21:37:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657595204603904[0;39m <==    Updates: 1
2023-01-25 21:37:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273657595204603904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:38:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273657700037038080[0;39m 生成今日电子书快照开始
2023-01-25 21:38:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657700037038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:38:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657700037038080[0;39m ==> Parameters: 
2023-01-25 21:38:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657700037038080[0;39m <==    Updates: 0
2023-01-25 21:38:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273657700037038080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:38:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273657721054695424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657721054695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657721054695424[0;39m ==> Parameters: 
2023-01-25 21:38:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657721054695424[0;39m <==    Updates: 1
2023-01-25 21:38:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273657721054695424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:38:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273657846846066688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657846846066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657846846066688[0;39m ==> Parameters: 
2023-01-25 21:38:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657846846066688[0;39m <==    Updates: 1
2023-01-25 21:38:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273657846846066688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:39:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273657951686889472[0;39m 生成今日电子书快照开始
2023-01-25 21:39:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657951686889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657951686889472[0;39m ==> Parameters: 
2023-01-25 21:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273657951686889472[0;39m <==    Updates: 0
2023-01-25 21:39:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273657951686889472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:39:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273657972675186688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657972675186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657972675186688[0;39m ==> Parameters: 
2023-01-25 21:39:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273657972675186688[0;39m <==    Updates: 1
2023-01-25 21:39:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273657972675186688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:39:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273658098521083904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658098521083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658098521083904[0;39m ==> Parameters: 
2023-01-25 21:39:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658098521083904[0;39m <==    Updates: 1
2023-01-25 21:39:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273658098521083904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:40:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273658203395461120[0;39m 生成今日电子书快照开始
2023-01-25 21:40:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658203395461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:40:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658203395461120[0;39m ==> Parameters: 
2023-01-25 21:40:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658203395461120[0;39m <==    Updates: 0
2023-01-25 21:40:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273658203395461120[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:40:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273658224312455168[0;39m 更新电子书下的文档数据开始
2023-01-25 21:40:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658224312455168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:40:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658224312455168[0;39m ==> Parameters: 
2023-01-25 21:40:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658224312455168[0;39m <==    Updates: 1
2023-01-25 21:40:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273658224312455168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:40:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273658350158352384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:40:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658350158352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:40:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658350158352384[0;39m ==> Parameters: 
2023-01-25 21:40:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658350158352384[0;39m <==    Updates: 1
2023-01-25 21:40:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273658350158352384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:41:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273658455020146688[0;39m 生成今日电子书快照开始
2023-01-25 21:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658455020146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658455020146688[0;39m ==> Parameters: 
2023-01-25 21:41:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658455020146688[0;39m <==    Updates: 0
2023-01-25 21:41:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273658455020146688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:41:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273658475987472384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658475987472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658475987472384[0;39m ==> Parameters: 
2023-01-25 21:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658475987472384[0;39m <==    Updates: 1
2023-01-25 21:41:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273658475987472384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:41:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273658601845952512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:41:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658601845952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:41:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658601845952512[0;39m ==> Parameters: 
2023-01-25 21:41:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658601845952512[0;39m <==    Updates: 1
2023-01-25 21:41:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273658601845952512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:42:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273658706699358208[0;39m 生成今日电子书快照开始
2023-01-25 21:42:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658706699358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:42:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658706699358208[0;39m ==> Parameters: 
2023-01-25 21:42:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658706699358208[0;39m <==    Updates: 0
2023-01-25 21:42:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273658706699358208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:42:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273658727637323776[0;39m 更新电子书下的文档数据开始
2023-01-25 21:42:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658727637323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:42:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658727637323776[0;39m ==> Parameters: 
2023-01-25 21:42:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658727637323776[0;39m <==    Updates: 1
2023-01-25 21:42:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273658727637323776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:42:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273658853504192512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658853504192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658853504192512[0;39m ==> Parameters: 
2023-01-25 21:42:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658853504192512[0;39m <==    Updates: 1
2023-01-25 21:42:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273658853504192512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:43:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273658958349209600[0;39m 生成今日电子书快照开始
2023-01-25 21:43:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658958349209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:43:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658958349209600[0;39m ==> Parameters: 
2023-01-25 21:43:00.036 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273658958349209600[0;39m <==    Updates: 0
2023-01-25 21:43:00.039 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273658958349209600[0;39m 生成今日电子书快照结束，耗时：30毫秒
2023-01-25 21:43:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273658979337506816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:43:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658979337506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:43:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658979337506816[0;39m ==> Parameters: 
2023-01-25 21:43:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273658979337506816[0;39m <==    Updates: 1
2023-01-25 21:43:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273658979337506816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:43:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273659105166626816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:43:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659105166626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:43:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659105166626816[0;39m ==> Parameters: 
2023-01-25 21:43:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659105166626816[0;39m <==    Updates: 1
2023-01-25 21:43:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273659105166626816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:44:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273659210036809728[0;39m 生成今日电子书快照开始
2023-01-25 21:44:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659210036809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:44:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659210036809728[0;39m ==> Parameters: 
2023-01-25 21:44:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659210036809728[0;39m <==    Updates: 0
2023-01-25 21:44:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273659210036809728[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-25 21:44:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273659230949609472[0;39m 更新电子书下的文档数据开始
2023-01-25 21:44:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659230949609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:44:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659230949609472[0;39m ==> Parameters: 
2023-01-25 21:44:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659230949609472[0;39m <==    Updates: 1
2023-01-25 21:44:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273659230949609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:44:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273659356829061120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659356829061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:44:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659356829061120[0;39m ==> Parameters: 
2023-01-25 21:44:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659356829061120[0;39m <==    Updates: 1
2023-01-25 21:44:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273659356829061120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:45:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273659461674078208[0;39m 生成今日电子书快照开始
2023-01-25 21:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659461674078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:45:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659461674078208[0;39m ==> Parameters: 
2023-01-25 21:45:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659461674078208[0;39m <==    Updates: 0
2023-01-25 21:45:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273659461674078208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:45:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273659482628820992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:45:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659482628820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:45:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659482628820992[0;39m ==> Parameters: 
2023-01-25 21:45:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659482628820992[0;39m <==    Updates: 1
2023-01-25 21:45:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273659482628820992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:45:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273659608487301120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:45:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659608487301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:45:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659608487301120[0;39m ==> Parameters: 
2023-01-25 21:45:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659608487301120[0;39m <==    Updates: 1
2023-01-25 21:45:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273659608487301120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:46:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273659713344901120[0;39m 生成今日电子书快照开始
2023-01-25 21:46:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659713344901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:46:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659713344901120[0;39m ==> Parameters: 
2023-01-25 21:46:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659713344901120[0;39m <==    Updates: 0
2023-01-25 21:46:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273659713344901120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:46:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273659734282866688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:46:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659734282866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:46:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659734282866688[0;39m ==> Parameters: 
2023-01-25 21:46:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659734282866688[0;39m <==    Updates: 1
2023-01-25 21:46:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273659734282866688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:46:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273659860137152512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:46:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659860137152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:46:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659860137152512[0;39m ==> Parameters: 
2023-01-25 21:46:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659860137152512[0;39m <==    Updates: 1
2023-01-25 21:46:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273659860137152512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:47:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273659964965392384[0;39m 生成今日电子书快照开始
2023-01-25 21:47:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659964965392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:47:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659964965392384[0;39m ==> Parameters: 
2023-01-25 21:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273659964965392384[0;39m <==    Updates: 0
2023-01-25 21:47:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273659964965392384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:47:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273659985949495296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:47:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659985949495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:47:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659985949495296[0;39m ==> Parameters: 
2023-01-25 21:47:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273659985949495296[0;39m <==    Updates: 1
2023-01-25 21:47:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273659985949495296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:47:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273660111803781120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:47:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660111803781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:47:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660111803781120[0;39m ==> Parameters: 
2023-01-25 21:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660111803781120[0;39m <==    Updates: 1
2023-01-25 21:47:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273660111803781120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:48:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273660216657186816[0;39m 生成今日电子书快照开始
2023-01-25 21:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660216657186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:48:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660216657186816[0;39m ==> Parameters: 
2023-01-25 21:48:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660216657186816[0;39m <==    Updates: 0
2023-01-25 21:48:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273660216657186816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 21:48:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273660237607735296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660237607735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660237607735296[0;39m ==> Parameters: 
2023-01-25 21:48:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660237607735296[0;39m <==    Updates: 1
2023-01-25 21:48:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273660237607735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:48:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273660363457826816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660363457826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:48:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660363457826816[0;39m ==> Parameters: 
2023-01-25 21:48:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660363457826816[0;39m <==    Updates: 1
2023-01-25 21:48:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273660363457826816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:49:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273660468315426816[0;39m 生成今日电子书快照开始
2023-01-25 21:49:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660468315426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:49:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660468315426816[0;39m ==> Parameters: 
2023-01-25 21:49:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660468315426816[0;39m <==    Updates: 0
2023-01-25 21:49:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273660468315426816[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 21:49:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273660489261780992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660489261780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:49:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660489261780992[0;39m ==> Parameters: 
2023-01-25 21:49:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660489261780992[0;39m <==    Updates: 1
2023-01-25 21:49:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273660489261780992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:49:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273660615111872512[0;39m 更新电子书下的文档数据开始
2023-01-25 21:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660615111872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660615111872512[0;39m ==> Parameters: 
2023-01-25 21:49:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660615111872512[0;39m <==    Updates: 1
2023-01-25 21:49:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273660615111872512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:50:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273660719977861120[0;39m 生成今日电子书快照开始
2023-01-25 21:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660719977861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:50:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660719977861120[0;39m ==> Parameters: 
2023-01-25 21:50:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660719977861120[0;39m <==    Updates: 0
2023-01-25 21:50:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273660719977861120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:50:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273660740920020992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:50:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660740920020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:50:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660740920020992[0;39m ==> Parameters: 
2023-01-25 21:50:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660740920020992[0;39m <==    Updates: 1
2023-01-25 21:50:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273660740920020992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:50:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273660866761723904[0;39m 更新电子书下的文档数据开始
2023-01-25 21:50:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660866761723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660866761723904[0;39m ==> Parameters: 
2023-01-25 21:50:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660866761723904[0;39m <==    Updates: 1
2023-01-25 21:50:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273660866761723904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:51:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273660971631906816[0;39m 生成今日电子书快照开始
2023-01-25 21:51:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660971631906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:51:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660971631906816[0;39m ==> Parameters: 
2023-01-25 21:51:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273660971631906816[0;39m <==    Updates: 0
2023-01-25 21:51:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273660971631906816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 21:51:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273660992616009728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:51:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660992616009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:51:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660992616009728[0;39m ==> Parameters: 
2023-01-25 21:51:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273660992616009728[0;39m <==    Updates: 1
2023-01-25 21:51:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273660992616009728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:51:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273661118432546816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:51:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661118432546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:51:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661118432546816[0;39m ==> Parameters: 
2023-01-25 21:51:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661118432546816[0;39m <==    Updates: 1
2023-01-25 21:51:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273661118432546816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:52:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273661223260786688[0;39m 生成今日电子书快照开始
2023-01-25 21:52:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661223260786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:52:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661223260786688[0;39m ==> Parameters: 
2023-01-25 21:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661223260786688[0;39m <==    Updates: 0
2023-01-25 21:52:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273661223260786688[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 21:52:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273661244232306688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:52:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661244232306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:52:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661244232306688[0;39m ==> Parameters: 
2023-01-25 21:52:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661244232306688[0;39m <==    Updates: 1
2023-01-25 21:52:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273661244232306688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:52:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273661370074009600[0;39m 更新电子书下的文档数据开始
2023-01-25 21:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661370074009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661370074009600[0;39m ==> Parameters: 
2023-01-25 21:52:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661370074009600[0;39m <==    Updates: 1
2023-01-25 21:52:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273661370074009600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:52:36.233 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m273661375212032000[0;39m ------------- 开始 -------------
2023-01-25 21:52:36.234 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m273661375212032000[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-25 21:52:36.234 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m273661375212032000[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-25 21:52:36.235 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m273661375212032000[0;39m 远程地址: 127.0.0.1
2023-01-25 21:52:36.235 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m273661375212032000[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-25 21:52:36.237 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273661375212032000[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-25 21:52:36.237 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273661375212032000[0;39m ==> Parameters: 
2023-01-25 21:52:36.251 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273661375212032000[0;39m <==    Columns: count(0)
2023-01-25 21:52:36.251 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m273661375212032000[0;39m <==        Row: 5
2023-01-25 21:52:36.251 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m273661375212032000[0;39m <==      Total: 1
2023-01-25 21:52:36.252 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273661375212032000[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-25 21:52:36.252 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273661375212032000[0;39m ==> Parameters: 
2023-01-25 21:52:36.253 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-25 21:52:36.254 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-25 21:52:36.254 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:52:36.254 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:52:36.255 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:52:36.255 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m273661375212032000[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-25 21:52:36.256 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m273661375212032000[0;39m <==      Total: 5
2023-01-25 21:52:36.256 INFO  com.example.wiki.service.EbookService             :51   [32m273661375212032000[0;39m 总行数 5
2023-01-25 21:52:36.257 INFO  com.example.wiki.service.EbookService             :52   [32m273661375212032000[0;39m 总页数 0
2023-01-25 21:52:36.258 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m273661375212032000[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-25 21:52:36.259 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m273661375212032000[0;39m ------------- 结束 耗时：26 ms -------------
2023-01-25 21:53:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273661474944192512[0;39m 生成今日电子书快照开始
2023-01-25 21:53:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661474944192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:53:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661474944192512[0;39m ==> Parameters: 
2023-01-25 21:53:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661474944192512[0;39m <==    Updates: 0
2023-01-25 21:53:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273661474944192512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 21:53:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273661495919906816[0;39m 更新电子书下的文档数据开始
2023-01-25 21:53:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661495919906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:53:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661495919906816[0;39m ==> Parameters: 
2023-01-25 21:53:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661495919906816[0;39m <==    Updates: 1
2023-01-25 21:53:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273661495919906816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:53:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273661621723860992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661621723860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:53:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661621723860992[0;39m ==> Parameters: 
2023-01-25 21:53:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661621723860992[0;39m <==    Updates: 1
2023-01-25 21:53:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273661621723860992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:54:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273661726573072384[0;39m 生成今日电子书快照开始
2023-01-25 21:54:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661726573072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:54:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661726573072384[0;39m ==> Parameters: 
2023-01-25 21:54:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661726573072384[0;39m <==    Updates: 0
2023-01-25 21:54:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273661726573072384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 21:54:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273661747532009472[0;39m 更新电子书下的文档数据开始
2023-01-25 21:54:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661747532009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:54:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661747532009472[0;39m ==> Parameters: 
2023-01-25 21:54:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661747532009472[0;39m <==    Updates: 1
2023-01-25 21:54:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273661747532009472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 21:54:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273661873411461120[0;39m 更新电子书下的文档数据开始
2023-01-25 21:54:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661873411461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:54:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661873411461120[0;39m ==> Parameters: 
2023-01-25 21:54:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661873411461120[0;39m <==    Updates: 1
2023-01-25 21:54:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273661873411461120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:55:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273661978260672512[0;39m 生成今日电子书快照开始
2023-01-25 21:55:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661978260672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:55:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661978260672512[0;39m ==> Parameters: 
2023-01-25 21:55:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273661978260672512[0;39m <==    Updates: 0
2023-01-25 21:55:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273661978260672512[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-25 21:55:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273661999207026688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661999207026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661999207026688[0;39m ==> Parameters: 
2023-01-25 21:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273661999207026688[0;39m <==    Updates: 1
2023-01-25 21:55:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273661999207026688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:55:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273662125036146688[0;39m 更新电子书下的文档数据开始
2023-01-25 21:55:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662125036146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:55:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662125036146688[0;39m ==> Parameters: 
2023-01-25 21:55:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662125036146688[0;39m <==    Updates: 1
2023-01-25 21:55:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273662125036146688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:56:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273662229881163776[0;39m 生成今日电子书快照开始
2023-01-25 21:56:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662229881163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:56:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662229881163776[0;39m ==> Parameters: 
2023-01-25 21:56:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662229881163776[0;39m <==    Updates: 0
2023-01-25 21:56:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273662229881163776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 21:56:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273662250861072384[0;39m 更新电子书下的文档数据开始
2023-01-25 21:56:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662250861072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:56:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662250861072384[0;39m ==> Parameters: 
2023-01-25 21:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662250861072384[0;39m <==    Updates: 1
2023-01-25 21:56:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273662250861072384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:56:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273662376736329728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:56:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662376736329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:56:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662376736329728[0;39m ==> Parameters: 
2023-01-25 21:56:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662376736329728[0;39m <==    Updates: 1
2023-01-25 21:56:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273662376736329728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:57:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273662481556180992[0;39m 生成今日电子书快照开始
2023-01-25 21:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662481556180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662481556180992[0;39m ==> Parameters: 
2023-01-25 21:57:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662481556180992[0;39m <==    Updates: 0
2023-01-25 21:57:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273662481556180992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-25 21:57:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273662502565449728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:57:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662502565449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:57:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662502565449728[0;39m ==> Parameters: 
2023-01-25 21:57:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662502565449728[0;39m <==    Updates: 1
2023-01-25 21:57:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273662502565449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:57:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273662628356820992[0;39m 更新电子书下的文档数据开始
2023-01-25 21:57:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662628356820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:57:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662628356820992[0;39m ==> Parameters: 
2023-01-25 21:57:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662628356820992[0;39m <==    Updates: 1
2023-01-25 21:57:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273662628356820992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:58:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273662733231198208[0;39m 生成今日电子书快照开始
2023-01-25 21:58:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662733231198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:58:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662733231198208[0;39m ==> Parameters: 
2023-01-25 21:58:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662733231198208[0;39m <==    Updates: 0
2023-01-25 21:58:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273662733231198208[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-25 21:58:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273662754190135296[0;39m 更新电子书下的文档数据开始
2023-01-25 21:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662754190135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662754190135296[0;39m ==> Parameters: 
2023-01-25 21:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662754190135296[0;39m <==    Updates: 1
2023-01-25 21:58:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273662754190135296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 21:58:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273662880052809728[0;39m 更新电子书下的文档数据开始
2023-01-25 21:58:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662880052809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:58:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662880052809728[0;39m ==> Parameters: 
2023-01-25 21:58:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273662880052809728[0;39m <==    Updates: 1
2023-01-25 21:58:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273662880052809728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 21:59:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273662984876855296[0;39m 生成今日电子书快照开始
2023-01-25 21:59:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662984876855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 21:59:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662984876855296[0;39m ==> Parameters: 
2023-01-25 21:59:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273662984876855296[0;39m <==    Updates: 0
2023-01-25 21:59:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273662984876855296[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-25 21:59:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273663005877735424[0;39m 更新电子书下的文档数据开始
2023-01-25 21:59:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663005877735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:59:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663005877735424[0;39m ==> Parameters: 
2023-01-25 21:59:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663005877735424[0;39m <==    Updates: 1
2023-01-25 21:59:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273663005877735424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 21:59:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273663131690078208[0;39m 更新电子书下的文档数据开始
2023-01-25 21:59:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663131690078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 21:59:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663131690078208[0;39m ==> Parameters: 
2023-01-25 21:59:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663131690078208[0;39m <==    Updates: 1
2023-01-25 21:59:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273663131690078208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 22:00:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273663236547678208[0;39m 生成今日电子书快照开始
2023-01-25 22:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663236547678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:00:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663236547678208[0;39m ==> Parameters: 
2023-01-25 22:00:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663236547678208[0;39m <==    Updates: 0
2023-01-25 22:00:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273663236547678208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 22:00:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273663257481449472[0;39m 更新电子书下的文档数据开始
2023-01-25 22:00:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663257481449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:00:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663257481449472[0;39m ==> Parameters: 
2023-01-25 22:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663257481449472[0;39m <==    Updates: 1
2023-01-25 22:00:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273663257481449472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 22:00:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273663383373484032[0;39m 更新电子书下的文档数据开始
2023-01-25 22:00:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663383373484032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:00:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663383373484032[0;39m ==> Parameters: 
2023-01-25 22:00:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663383373484032[0;39m <==    Updates: 1
2023-01-25 22:00:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273663383373484032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 22:01:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273663488189140992[0;39m 生成今日电子书快照开始
2023-01-25 22:01:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663488189140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663488189140992[0;39m ==> Parameters: 
2023-01-25 22:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663488189140992[0;39m <==    Updates: 0
2023-01-25 22:01:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273663488189140992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 22:01:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273663509156466688[0;39m 更新电子书下的文档数据开始
2023-01-25 22:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663509156466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663509156466688[0;39m ==> Parameters: 
2023-01-25 22:01:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663509156466688[0;39m <==    Updates: 1
2023-01-25 22:01:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273663509156466688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 22:01:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273663635019141120[0;39m 更新电子书下的文档数据开始
2023-01-25 22:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663635019141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663635019141120[0;39m ==> Parameters: 
2023-01-25 22:01:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663635019141120[0;39m <==    Updates: 1
2023-01-25 22:01:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273663635019141120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:02:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273663739855769600[0;39m 生成今日电子书快照开始
2023-01-25 22:02:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663739855769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:02:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663739855769600[0;39m ==> Parameters: 
2023-01-25 22:02:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663739855769600[0;39m <==    Updates: 0
2023-01-25 22:02:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273663739855769600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-25 22:02:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273663760793735168[0;39m 更新电子书下的文档数据开始
2023-01-25 22:02:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663760793735168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:02:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663760793735168[0;39m ==> Parameters: 
2023-01-25 22:02:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663760793735168[0;39m <==    Updates: 1
2023-01-25 22:02:05.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273663760793735168[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 22:02:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273663886677381120[0;39m 更新电子书下的文档数据开始
2023-01-25 22:02:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663886677381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663886677381120[0;39m ==> Parameters: 
2023-01-25 22:02:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273663886677381120[0;39m <==    Updates: 1
2023-01-25 22:02:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273663886677381120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 22:03:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273663991501426688[0;39m 生成今日电子书快照开始
2023-01-25 22:03:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663991501426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:03:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663991501426688[0;39m ==> Parameters: 
2023-01-25 22:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273663991501426688[0;39m <==    Updates: 0
2023-01-25 22:03:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273663991501426688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 22:03:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273664012493918208[0;39m 更新电子书下的文档数据开始
2023-01-25 22:03:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664012493918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:03:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664012493918208[0;39m ==> Parameters: 
2023-01-25 22:03:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664012493918208[0;39m <==    Updates: 1
2023-01-25 22:03:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273664012493918208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:03:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273664138314649600[0;39m 更新电子书下的文档数据开始
2023-01-25 22:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664138314649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664138314649600[0;39m ==> Parameters: 
2023-01-25 22:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664138314649600[0;39m <==    Updates: 1
2023-01-25 22:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273664138314649600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 22:04:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273664243189026816[0;39m 生成今日电子书快照开始
2023-01-25 22:04:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664243189026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:04:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664243189026816[0;39m ==> Parameters: 
2023-01-25 22:04:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664243189026816[0;39m <==    Updates: 0
2023-01-25 22:04:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273664243189026816[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-25 22:04:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273664264152158208[0;39m 更新电子书下的文档数据开始
2023-01-25 22:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664264152158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664264152158208[0;39m ==> Parameters: 
2023-01-25 22:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664264152158208[0;39m <==    Updates: 1
2023-01-25 22:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273664264152158208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 22:04:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273664389951918080[0;39m 更新电子书下的文档数据开始
2023-01-25 22:04:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664389951918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:04:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664389951918080[0;39m ==> Parameters: 
2023-01-25 22:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664389951918080[0;39m <==    Updates: 1
2023-01-25 22:04:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273664389951918080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:05:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273664494851461120[0;39m 生成今日电子书快照开始
2023-01-25 22:05:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664494851461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:05:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664494851461120[0;39m ==> Parameters: 
2023-01-25 22:05:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664494851461120[0;39m <==    Updates: 0
2023-01-25 22:05:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273664494851461120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-25 22:05:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273664515806203904[0;39m 更新电子书下的文档数据开始
2023-01-25 22:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664515806203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664515806203904[0;39m ==> Parameters: 
2023-01-25 22:05:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664515806203904[0;39m <==    Updates: 1
2023-01-25 22:05:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273664515806203904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 22:05:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273664641605963776[0;39m 更新电子书下的文档数据开始
2023-01-25 22:05:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664641605963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:05:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664641605963776[0;39m ==> Parameters: 
2023-01-25 22:05:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664641605963776[0;39m <==    Updates: 1
2023-01-25 22:05:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273664641605963776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:06:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273664746497118208[0;39m 生成今日电子书快照开始
2023-01-25 22:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664746497118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:06:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664746497118208[0;39m ==> Parameters: 
2023-01-25 22:06:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664746497118208[0;39m <==    Updates: 0
2023-01-25 22:06:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273664746497118208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 22:06:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273664767430889472[0;39m 更新电子书下的文档数据开始
2023-01-25 22:06:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664767430889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:06:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664767430889472[0;39m ==> Parameters: 
2023-01-25 22:06:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664767430889472[0;39m <==    Updates: 1
2023-01-25 22:06:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273664767430889472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-25 22:06:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273664893289369600[0;39m 更新电子书下的文档数据开始
2023-01-25 22:06:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664893289369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:06:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664893289369600[0;39m ==> Parameters: 
2023-01-25 22:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273664893289369600[0;39m <==    Updates: 1
2023-01-25 22:06:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273664893289369600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-25 22:07:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273664998176329728[0;39m 生成今日电子书快照开始
2023-01-25 22:07:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664998176329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:07:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664998176329728[0;39m ==> Parameters: 
2023-01-25 22:07:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273664998176329728[0;39m <==    Updates: 0
2023-01-25 22:07:00.036 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273664998176329728[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-25 22:07:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273665019101712384[0;39m 更新电子书下的文档数据开始
2023-01-25 22:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665019101712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665019101712384[0;39m ==> Parameters: 
2023-01-25 22:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665019101712384[0;39m <==    Updates: 1
2023-01-25 22:07:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273665019101712384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:07:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273665144968581120[0;39m 更新电子书下的文档数据开始
2023-01-25 22:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665144968581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665144968581120[0;39m ==> Parameters: 
2023-01-25 22:07:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665144968581120[0;39m <==    Updates: 1
2023-01-25 22:07:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273665144968581120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-25 22:08:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273665249813598208[0;39m 生成今日电子书快照开始
2023-01-25 22:08:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665249813598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:08:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665249813598208[0;39m ==> Parameters: 
2023-01-25 22:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665249813598208[0;39m <==    Updates: 0
2023-01-25 22:08:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273665249813598208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-25 22:08:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273665270759952384[0;39m 更新电子书下的文档数据开始
2023-01-25 22:08:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665270759952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:08:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665270759952384[0;39m ==> Parameters: 
2023-01-25 22:08:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665270759952384[0;39m <==    Updates: 1
2023-01-25 22:08:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273665270759952384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:08:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273665396589072384[0;39m 更新电子书下的文档数据开始
2023-01-25 22:08:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665396589072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:08:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665396589072384[0;39m ==> Parameters: 
2023-01-25 22:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665396589072384[0;39m <==    Updates: 1
2023-01-25 22:08:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273665396589072384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:09:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273665501488615424[0;39m 生成今日电子书快照开始
2023-01-25 22:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665501488615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-25 22:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665501488615424[0;39m ==> Parameters: 
2023-01-25 22:09:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273665501488615424[0;39m <==    Updates: 0
2023-01-25 22:09:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273665501488615424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-25 22:09:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273665522422386688[0;39m 更新电子书下的文档数据开始
2023-01-25 22:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665522422386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665522422386688[0;39m ==> Parameters: 
2023-01-25 22:09:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665522422386688[0;39m <==    Updates: 1
2023-01-25 22:09:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273665522422386688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-25 22:09:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273665648272478208[0;39m 更新电子书下的文档数据开始
2023-01-25 22:09:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665648272478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-25 22:09:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665648272478208[0;39m ==> Parameters: 
2023-01-25 22:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273665648272478208[0;39m <==    Updates: 1
2023-01-25 22:09:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273665648272478208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
