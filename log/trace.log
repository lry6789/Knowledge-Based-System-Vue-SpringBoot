2023-01-26 00:00:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693435544866816[0;39m 生成今日电子书快照开始
2023-01-26 00:00:00.043 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:00:00.051 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==> Parameters: 
2023-01-26 00:00:00.073 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m <==    Updates: 5
2023-01-26 00:00:00.074 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693435544866816[0;39m 生成今日电子书快照结束，耗时：33毫秒
2023-01-26 00:00:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693456482832384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==> Parameters: 
2023-01-26 00:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m <==    Updates: 1
2023-01-26 00:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273693456482832384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:00:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693582311952384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==> Parameters: 
2023-01-26 00:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m <==    Updates: 1
2023-01-26 00:00:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273693582311952384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693687203106816[0;39m 生成今日电子书快照开始
2023-01-26 00:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:01:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==> Parameters: 
2023-01-26 00:01:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m <==    Updates: 0
2023-01-26 00:01:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693687203106816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:01:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273693708174626816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==> Parameters: 
2023-01-26 00:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m <==    Updates: 1
2023-01-26 00:01:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273693708174626816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:01:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273693833957609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==> Parameters: 
2023-01-26 00:01:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m <==    Updates: 1
2023-01-26 00:01:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273693833957609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:02:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693938819403776[0;39m 生成今日电子书快照开始
2023-01-26 00:02:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:02:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==> Parameters: 
2023-01-26 00:02:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m <==    Updates: 0
2023-01-26 00:02:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693938819403776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:02:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273693959820283904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==> Parameters: 
2023-01-26 00:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m <==    Updates: 1
2023-01-26 00:02:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273693959820283904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:02:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273694085666181120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==> Parameters: 
2023-01-26 00:02:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m <==    Updates: 1
2023-01-26 00:02:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273694085666181120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:03:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694190515392512[0;39m 生成今日电子书快照开始
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==> Parameters: 
2023-01-26 00:03:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m <==    Updates: 0
2023-01-26 00:03:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694190515392512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:03:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273694211453358080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==> Parameters: 
2023-01-26 00:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m <==    Updates: 1
2023-01-26 00:03:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694211453358080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694337307643904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==> Parameters: 
2023-01-26 00:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m <==    Updates: 1
2023-01-26 00:03:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694337307643904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:04:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694442127495168[0;39m 生成今日电子书快照开始
2023-01-26 00:04:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==> Parameters: 
2023-01-26 00:04:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m <==    Updates: 0
2023-01-26 00:04:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694442127495168[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273694463145152512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==> Parameters: 
2023-01-26 00:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m <==    Updates: 1
2023-01-26 00:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273694463145152512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:04:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273694588991049728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==> Parameters: 
2023-01-26 00:04:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m <==    Updates: 1
2023-01-26 00:04:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273694588991049728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694693798318080[0;39m 生成今日电子书快照开始
2023-01-26 00:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:05:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==> Parameters: 
2023-01-26 00:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m <==    Updates: 0
2023-01-26 00:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694693798318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:05:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694714795003904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==> Parameters: 
2023-01-26 00:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m <==    Updates: 1
2023-01-26 00:05:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694714795003904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:05:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273694840594763776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==> Parameters: 
2023-01-26 00:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m <==    Updates: 1
2023-01-26 00:05:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694840594763776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694945464946688[0;39m 生成今日电子书快照开始
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==> Parameters: 
2023-01-26 00:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m <==    Updates: 0
2023-01-26 00:06:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694945464946688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:06:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273694966415495168[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==> Parameters: 
2023-01-26 00:06:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m <==    Updates: 1
2023-01-26 00:06:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273694966415495168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:06:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695092273975296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==> Parameters: 
2023-01-26 00:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m <==    Updates: 1
2023-01-26 00:06:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695092273975296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:07:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695197110603776[0;39m 生成今日电子书快照开始
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==> Parameters: 
2023-01-26 00:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m <==    Updates: 0
2023-01-26 00:07:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695197110603776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:07:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273695218090512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==> Parameters: 
2023-01-26 00:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m <==    Updates: 1
2023-01-26 00:07:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273695218090512384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:07:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273695343948992512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==> Parameters: 
2023-01-26 00:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m <==    Updates: 1
2023-01-26 00:07:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273695343948992512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:08:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695448777232384[0;39m 生成今日电子书快照开始
2023-01-26 00:08:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==> Parameters: 
2023-01-26 00:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m <==    Updates: 0
2023-01-26 00:08:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695448777232384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:08:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695469786501120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==> Parameters: 
2023-01-26 00:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m <==    Updates: 1
2023-01-26 00:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273695469786501120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:08:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695595615621120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==> Parameters: 
2023-01-26 00:08:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m <==    Updates: 1
2023-01-26 00:08:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273695595615621120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695700469026816[0;39m 生成今日电子书快照开始
2023-01-26 00:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==> Parameters: 
2023-01-26 00:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m <==    Updates: 0
2023-01-26 00:09:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695700469026816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:09:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273695721394409472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==> Parameters: 
2023-01-26 00:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m <==    Updates: 1
2023-01-26 00:09:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273695721394409472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273695847269666816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==> Parameters: 
2023-01-26 00:09:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m <==    Updates: 1
2023-01-26 00:09:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273695847269666816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:10:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695952097906688[0;39m 生成今日电子书快照开始
2023-01-26 00:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==> Parameters: 
2023-01-26 00:10:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m <==    Updates: 0
2023-01-26 00:10:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695952097906688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:10:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695973077815296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==> Parameters: 
2023-01-26 00:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m <==    Updates: 1
2023-01-26 00:10:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695973077815296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:10:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273696098915323904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==> Parameters: 
2023-01-26 00:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m <==    Updates: 1
2023-01-26 00:10:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273696098915323904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:11:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273696203747758080[0;39m 生成今日电子书快照开始
2023-01-26 00:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==> Parameters: 
2023-01-26 00:11:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m <==    Updates: 0
2023-01-26 00:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273696203747758080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:11:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273696224723472384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==> Parameters: 
2023-01-26 00:11:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m <==    Updates: 1
2023-01-26 00:11:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273696224723472384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:18:41.817 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m51s657ms448µs800ns).
2023-01-26 00:18:56.659 INFO  com.example.wiki.job.DocJob                       :32   [32m273698202987925504[0;39m 更新电子书下的文档数据开始
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==> Parameters: 
2023-01-26 00:18:56.677 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m <==    Updates: 1
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.DocJob                       :35   [32m273698202987925504[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698203063422976[0;39m 生成今日电子书快照开始
2023-01-26 00:18:56.677 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:18:56.678 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==> Parameters: 
2023-01-26 00:18:56.681 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m <==    Updates: 0
2023-01-26 00:18:56.681 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698203063422976[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:19:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698217043038208[0;39m 生成今日电子书快照开始
2023-01-26 00:19:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==> Parameters: 
2023-01-26 00:19:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m <==    Updates: 0
2023-01-26 00:19:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698217043038208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:19:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273698238014558208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==> Parameters: 
2023-01-26 00:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m <==    Updates: 1
2023-01-26 00:19:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273698238014558208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:19:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273698363818512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==> Parameters: 
2023-01-26 00:19:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m <==    Updates: 1
2023-01-26 00:19:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273698363818512384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:20:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698468713861120[0;39m 生成今日电子书快照开始
2023-01-26 00:20:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:20:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==> Parameters: 
2023-01-26 00:20:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m <==    Updates: 0
2023-01-26 00:20:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698468713861120[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 00:20:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273698489689575424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==> Parameters: 
2023-01-26 00:20:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m <==    Updates: 1
2023-01-26 00:20:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698489689575424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:20:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273698615506112512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==> Parameters: 
2023-01-26 00:20:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m <==    Updates: 1
2023-01-26 00:20:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273698615506112512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:21:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698720338546688[0;39m 生成今日电子书快照开始
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==> Parameters: 
2023-01-26 00:21:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m <==    Updates: 0
2023-01-26 00:21:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698720338546688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:21:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273698741301678080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==> Parameters: 
2023-01-26 00:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m <==    Updates: 1
2023-01-26 00:21:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273698741301678080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:21:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273698867189518336[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==> Parameters: 
2023-01-26 00:21:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m <==    Updates: 1
2023-01-26 00:21:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273698867189518336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:22:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698972005175296[0;39m 生成今日电子书快照开始
2023-01-26 00:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:22:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==> Parameters: 
2023-01-26 00:22:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m <==    Updates: 0
2023-01-26 00:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698972005175296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:22:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273698993010249728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==> Parameters: 
2023-01-26 00:22:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m <==    Updates: 1
2023-01-26 00:22:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698993010249728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:22:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273699118784843776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==> Parameters: 
2023-01-26 00:22:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m <==    Updates: 1
2023-01-26 00:22:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273699118784843776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:23:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699223642443776[0;39m 生成今日电子书快照开始
2023-01-26 00:23:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:23:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==> Parameters: 
2023-01-26 00:23:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m <==    Updates: 0
2023-01-26 00:23:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699223642443776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:23:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273699244618158080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==> Parameters: 
2023-01-26 00:23:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m <==    Updates: 1
2023-01-26 00:23:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699244618158080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:23:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273699370497609728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==> Parameters: 
2023-01-26 00:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m <==    Updates: 1
2023-01-26 00:23:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273699370497609728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:24:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699475351015424[0;39m 生成今日电子书快照开始
2023-01-26 00:24:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:24:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==> Parameters: 
2023-01-26 00:24:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m <==    Updates: 0
2023-01-26 00:24:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699475351015424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:24:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273699496288980992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==> Parameters: 
2023-01-26 00:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m <==    Updates: 1
2023-01-26 00:24:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699496288980992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:24:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273699622122295296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==> Parameters: 
2023-01-26 00:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m <==    Updates: 1
2023-01-26 00:24:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699622122295296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699726979895296[0;39m 生成今日电子书快照开始
2023-01-26 00:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==> Parameters: 
2023-01-26 00:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m <==    Updates: 0
2023-01-26 00:25:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699726979895296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 00:25:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699747980775424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==> Parameters: 
2023-01-26 00:25:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m <==    Updates: 1
2023-01-26 00:25:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699747980775424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:25:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273699873818284032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==> Parameters: 
2023-01-26 00:25:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m <==    Updates: 1
2023-01-26 00:25:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699873818284032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:26:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699978617163776[0;39m 生成今日电子书快照开始
2023-01-26 00:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==> Parameters: 
2023-01-26 00:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m <==    Updates: 0
2023-01-26 00:26:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699978617163776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:26:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699999639015424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==> Parameters: 
2023-01-26 00:26:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m <==    Updates: 1
2023-01-26 00:26:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699999639015424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:26:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273700125413609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==> Parameters: 
2023-01-26 00:26:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m <==    Updates: 1
2023-01-26 00:26:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273700125413609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:27:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700230283792384[0;39m 生成今日电子书快照开始
2023-01-26 00:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==> Parameters: 
2023-01-26 00:27:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m <==    Updates: 0
2023-01-26 00:27:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700230283792384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:27:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273700251293061120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==> Parameters: 
2023-01-26 00:27:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m <==    Updates: 1
2023-01-26 00:27:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273700251293061120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:27:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273700377130569728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==> Parameters: 
2023-01-26 00:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m <==    Updates: 1
2023-01-26 00:27:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273700377130569728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 00:28:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700481979781120[0;39m 生成今日电子书快照开始
2023-01-26 00:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:28:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==> Parameters: 
2023-01-26 00:28:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m <==    Updates: 0
2023-01-26 00:28:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700481979781120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:28:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273700502934523904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==> Parameters: 
2023-01-26 00:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m <==    Updates: 1
2023-01-26 00:28:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273700502934523904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:28:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700628738478080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==> Parameters: 
2023-01-26 00:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m <==    Updates: 1
2023-01-26 00:28:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273700628738478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:29:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700733600272384[0;39m 生成今日电子书快照开始
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==> Parameters: 
2023-01-26 00:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m <==    Updates: 0
2023-01-26 00:29:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700733600272384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:29:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700754567598080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==> Parameters: 
2023-01-26 00:29:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m <==    Updates: 1
2023-01-26 00:29:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273700754567598080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:29:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273700880400912384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==> Parameters: 
2023-01-26 00:29:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m <==    Updates: 1
2023-01-26 00:29:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273700880400912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:30:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700985254318080[0;39m 生成今日电子书快照开始
2023-01-26 00:30:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:30:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==> Parameters: 
2023-01-26 00:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m <==    Updates: 0
2023-01-26 00:30:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700985254318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:30:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273701006234226688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==> Parameters: 
2023-01-26 00:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m <==    Updates: 1
2023-01-26 00:30:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273701006234226688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:30:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273701132071735296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==> Parameters: 
2023-01-26 00:30:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m <==    Updates: 1
2023-01-26 00:30:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273701132071735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:31:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701236920946688[0;39m 生成今日电子书快照开始
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==> Parameters: 
2023-01-26 00:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m <==    Updates: 0
2023-01-26 00:31:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701236920946688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:31:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701257905049600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==> Parameters: 
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m <==    Updates: 1
2023-01-26 00:31:05.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273701257905049600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 00:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701383717392384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==> Parameters: 
2023-01-26 00:31:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m <==    Updates: 1
2023-01-26 00:31:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273701383717392384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701488604352512[0;39m 生成今日电子书快照开始
2023-01-26 00:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:32:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==> Parameters: 
2023-01-26 00:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m <==    Updates: 0
2023-01-26 00:32:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701488604352512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 00:32:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273701509538123776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==> Parameters: 
2023-01-26 00:32:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m <==    Updates: 1
2023-01-26 00:32:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701509538123776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701635392409600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==> Parameters: 
2023-01-26 00:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m <==    Updates: 1
2023-01-26 00:32:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273701635392409600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701740275175424[0;39m 生成今日电子书快照开始
2023-01-26 00:33:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==> Parameters: 
2023-01-26 00:33:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m <==    Updates: 0
2023-01-26 00:33:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701740275175424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:33:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273701761229918208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==> Parameters: 
2023-01-26 00:33:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m <==    Updates: 1
2023-01-26 00:33:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273701761229918208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701887033872384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==> Parameters: 
2023-01-26 00:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m <==    Updates: 1
2023-01-26 00:33:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701887033872384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:34:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701991895666688[0;39m 生成今日电子书快照开始
2023-01-26 00:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==> Parameters: 
2023-01-26 00:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m <==    Updates: 0
2023-01-26 00:34:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701991895666688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:34:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273702012862992384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==> Parameters: 
2023-01-26 00:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m <==    Updates: 1
2023-01-26 00:34:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273702012862992384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:34:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273702138700500992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:34:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m ==> Parameters: 
2023-01-26 00:34:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702138700500992[0;39m <==    Updates: 1
2023-01-26 00:34:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273702138700500992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:35:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702243541323776[0;39m 生成今日电子书快照开始
2023-01-26 00:35:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:35:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m ==> Parameters: 
2023-01-26 00:35:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702243541323776[0;39m <==    Updates: 0
2023-01-26 00:35:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702243541323776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:35:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273702264546398208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m ==> Parameters: 
2023-01-26 00:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702264546398208[0;39m <==    Updates: 1
2023-01-26 00:35:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273702264546398208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:35:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273702390400684032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m ==> Parameters: 
2023-01-26 00:35:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702390400684032[0;39m <==    Updates: 1
2023-01-26 00:35:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273702390400684032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:36:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702495207952384[0;39m 生成今日电子书快照开始
2023-01-26 00:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m ==> Parameters: 
2023-01-26 00:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702495207952384[0;39m <==    Updates: 0
2023-01-26 00:36:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702495207952384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:36:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273702516229804032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:36:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:36:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m ==> Parameters: 
2023-01-26 00:36:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702516229804032[0;39m <==    Updates: 1
2023-01-26 00:36:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273702516229804032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:36:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273702642042146816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m ==> Parameters: 
2023-01-26 00:36:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702642042146816[0;39m <==    Updates: 1
2023-01-26 00:36:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273702642042146816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:37:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702746857803776[0;39m 生成今日电子书快照开始
2023-01-26 00:37:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m ==> Parameters: 
2023-01-26 00:37:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702746857803776[0;39m <==    Updates: 0
2023-01-26 00:37:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702746857803776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:37:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273702767875461120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:37:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m ==> Parameters: 
2023-01-26 00:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702767875461120[0;39m <==    Updates: 1
2023-01-26 00:37:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273702767875461120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:37:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273702893708775424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:37:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m ==> Parameters: 
2023-01-26 00:37:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702893708775424[0;39m <==    Updates: 1
2023-01-26 00:37:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273702893708775424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:38:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273702998541209600[0;39m 生成今日电子书快照开始
2023-01-26 00:38:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m ==> Parameters: 
2023-01-26 00:38:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273702998541209600[0;39m <==    Updates: 0
2023-01-26 00:38:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273702998541209600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:38:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273703019483369472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:38:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:38:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m ==> Parameters: 
2023-01-26 00:38:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703019483369472[0;39m <==    Updates: 1
2023-01-26 00:38:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273703019483369472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:38:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273703145358626816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:38:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:38:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m ==> Parameters: 
2023-01-26 00:38:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703145358626816[0;39m <==    Updates: 1
2023-01-26 00:38:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273703145358626816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:39:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703250228809728[0;39m 生成今日电子书快照开始
2023-01-26 00:39:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:39:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m ==> Parameters: 
2023-01-26 00:39:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703250228809728[0;39m <==    Updates: 0
2023-01-26 00:39:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703250228809728[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 00:39:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273703271200329728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:39:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:39:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m ==> Parameters: 
2023-01-26 00:39:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703271200329728[0;39m <==    Updates: 1
2023-01-26 00:39:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273703271200329728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:39:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273703396979118080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:39:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:39:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m ==> Parameters: 
2023-01-26 00:39:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703396979118080[0;39m <==    Updates: 1
2023-01-26 00:39:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273703396979118080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:40:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703501828329472[0;39m 生成今日电子书快照开始
2023-01-26 00:40:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:40:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m ==> Parameters: 
2023-01-26 00:40:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703501828329472[0;39m <==    Updates: 0
2023-01-26 00:40:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703501828329472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 00:40:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273703522799849472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:40:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:40:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m ==> Parameters: 
2023-01-26 00:40:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703522799849472[0;39m <==    Updates: 1
2023-01-26 00:40:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273703522799849472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:40:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273703648633163776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:40:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:40:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m ==> Parameters: 
2023-01-26 00:40:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703648633163776[0;39m <==    Updates: 1
2023-01-26 00:40:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273703648633163776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:41:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273703753549484032[0;39m 生成今日电子书快照开始
2023-01-26 00:41:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:41:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m ==> Parameters: 
2023-01-26 00:41:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273703753549484032[0;39m <==    Updates: 0
2023-01-26 00:41:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273703753549484032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:41:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273703774466478080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:41:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:41:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m ==> Parameters: 
2023-01-26 00:41:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703774466478080[0;39m <==    Updates: 1
2023-01-26 00:41:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273703774466478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:41:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273703900312375296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:41:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:41:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m ==> Parameters: 
2023-01-26 00:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273703900312375296[0;39m <==    Updates: 1
2023-01-26 00:41:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273703900312375296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:42:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704005157392384[0;39m 生成今日电子书快照开始
2023-01-26 00:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m ==> Parameters: 
2023-01-26 00:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704005157392384[0;39m <==    Updates: 0
2023-01-26 00:42:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704005157392384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:42:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273704026128912384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m ==> Parameters: 
2023-01-26 00:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704026128912384[0;39m <==    Updates: 1
2023-01-26 00:42:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273704026128912384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:42:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273704151999975424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:42:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m ==> Parameters: 
2023-01-26 00:42:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704151999975424[0;39m <==    Updates: 1
2023-01-26 00:42:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273704151999975424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:43:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704256815632384[0;39m 生成今日电子书快照开始
2023-01-26 00:43:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:43:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m ==> Parameters: 
2023-01-26 00:43:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704256815632384[0;39m <==    Updates: 0
2023-01-26 00:43:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704256815632384[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 00:43:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273704277778763776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m ==> Parameters: 
2023-01-26 00:43:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704277778763776[0;39m <==    Updates: 1
2023-01-26 00:43:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273704277778763776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:43:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273704403624660992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m ==> Parameters: 
2023-01-26 00:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704403624660992[0;39m <==    Updates: 1
2023-01-26 00:43:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273704403624660992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:44:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704508473872384[0;39m 生成今日电子书快照开始
2023-01-26 00:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:44:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m ==> Parameters: 
2023-01-26 00:44:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704508473872384[0;39m <==    Updates: 0
2023-01-26 00:44:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704508473872384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:44:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273704529466363904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:44:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:44:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m ==> Parameters: 
2023-01-26 00:44:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704529466363904[0;39m <==    Updates: 1
2023-01-26 00:44:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273704529466363904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:44:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273704655299678208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:44:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m ==> Parameters: 
2023-01-26 00:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704655299678208[0;39m <==    Updates: 1
2023-01-26 00:44:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273704655299678208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:45:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273704760127918080[0;39m 生成今日电子书快照开始
2023-01-26 00:45:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:45:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m ==> Parameters: 
2023-01-26 00:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273704760127918080[0;39m <==    Updates: 0
2023-01-26 00:45:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273704760127918080[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 00:45:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273704781116215296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:45:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:45:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m ==> Parameters: 
2023-01-26 00:45:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704781116215296[0;39m <==    Updates: 1
2023-01-26 00:45:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273704781116215296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:45:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273704906945335296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:45:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:45:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m ==> Parameters: 
2023-01-26 00:45:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273704906945335296[0;39m <==    Updates: 1
2023-01-26 00:45:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273704906945335296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:46:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705011794546688[0;39m 生成今日电子书快照开始
2023-01-26 00:46:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:46:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m ==> Parameters: 
2023-01-26 00:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705011794546688[0;39m <==    Updates: 0
2023-01-26 00:46:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705011794546688[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 00:46:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273705032803815424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m ==> Parameters: 
2023-01-26 00:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705032803815424[0;39m <==    Updates: 1
2023-01-26 00:46:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273705032803815424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:46:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273705158586798080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m ==> Parameters: 
2023-01-26 00:46:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705158586798080[0;39m <==    Updates: 1
2023-01-26 00:46:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273705158586798080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:47:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705263436009472[0;39m 生成今日电子书快照开始
2023-01-26 00:47:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:47:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m ==> Parameters: 
2023-01-26 00:47:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705263436009472[0;39m <==    Updates: 0
2023-01-26 00:47:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705263436009472[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:47:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273705284449472512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:47:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:47:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m ==> Parameters: 
2023-01-26 00:47:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705284449472512[0;39m <==    Updates: 1
2023-01-26 00:47:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273705284449472512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:47:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273705410257620992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:47:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:47:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m ==> Parameters: 
2023-01-26 00:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705410257620992[0;39m <==    Updates: 1
2023-01-26 00:47:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273705410257620992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:48:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705515144581120[0;39m 生成今日电子书快照开始
2023-01-26 00:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m ==> Parameters: 
2023-01-26 00:48:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705515144581120[0;39m <==    Updates: 0
2023-01-26 00:48:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705515144581120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:48:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273705536069963776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:48:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:48:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m ==> Parameters: 
2023-01-26 00:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705536069963776[0;39m <==    Updates: 1
2023-01-26 00:48:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273705536069963776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 00:48:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273705661903278080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:48:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:48:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m ==> Parameters: 
2023-01-26 00:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705661903278080[0;39m <==    Updates: 1
2023-01-26 00:48:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273705661903278080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:49:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273705766773460992[0;39m 生成今日电子书快照开始
2023-01-26 00:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m ==> Parameters: 
2023-01-26 00:49:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273705766773460992[0;39m <==    Updates: 0
2023-01-26 00:49:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273705766773460992[0;39m 生成今日电子书快照结束，耗时：23毫秒
2023-01-26 00:49:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273705787740786688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:49:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m ==> Parameters: 
2023-01-26 00:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705787740786688[0;39m <==    Updates: 1
2023-01-26 00:49:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273705787740786688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:49:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273705913582489600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m ==> Parameters: 
2023-01-26 00:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273705913582489600[0;39m <==    Updates: 1
2023-01-26 00:49:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273705913582489600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:50:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706018444283904[0;39m 生成今日电子书快照开始
2023-01-26 00:50:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:50:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m ==> Parameters: 
2023-01-26 00:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706018444283904[0;39m <==    Updates: 0
2023-01-26 00:50:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706018444283904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:50:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273706039411609600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:50:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:50:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m ==> Parameters: 
2023-01-26 00:50:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706039411609600[0;39m <==    Updates: 1
2023-01-26 00:50:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273706039411609600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:50:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273706165265895424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m ==> Parameters: 
2023-01-26 00:50:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706165265895424[0;39m <==    Updates: 1
2023-01-26 00:50:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273706165265895424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:51:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706270081552384[0;39m 生成今日电子书快照开始
2023-01-26 00:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m ==> Parameters: 
2023-01-26 00:51:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706270081552384[0;39m <==    Updates: 0
2023-01-26 00:51:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706270081552384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:51:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273706291090821120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m ==> Parameters: 
2023-01-26 00:51:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706291090821120[0;39m <==    Updates: 1
2023-01-26 00:51:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273706291090821120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:51:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273706416886386688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:51:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m ==> Parameters: 
2023-01-26 00:51:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706416886386688[0;39m <==    Updates: 1
2023-01-26 00:51:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273706416886386688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:52:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706521760763904[0;39m 生成今日电子书快照开始
2023-01-26 00:52:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:52:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m ==> Parameters: 
2023-01-26 00:52:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706521760763904[0;39m <==    Updates: 0
2023-01-26 00:52:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706521760763904[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 00:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273706542757449728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:52:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m ==> Parameters: 
2023-01-26 00:52:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706542757449728[0;39m <==    Updates: 1
2023-01-26 00:52:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273706542757449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:52:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273706668548820992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:52:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m ==> Parameters: 
2023-01-26 00:52:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706668548820992[0;39m <==    Updates: 1
2023-01-26 00:52:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273706668548820992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:53:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273706773444169728[0;39m 生成今日电子书快照开始
2023-01-26 00:53:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m ==> Parameters: 
2023-01-26 00:53:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273706773444169728[0;39m <==    Updates: 0
2023-01-26 00:53:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273706773444169728[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 00:53:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273706794386329600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m ==> Parameters: 
2023-01-26 00:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706794386329600[0;39m <==    Updates: 1
2023-01-26 00:53:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273706794386329600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:53:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273706920240615424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:53:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m ==> Parameters: 
2023-01-26 00:53:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273706920240615424[0;39m <==    Updates: 1
2023-01-26 00:53:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273706920240615424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:54:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707025068855296[0;39m 生成今日电子书快照开始
2023-01-26 00:54:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:54:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m ==> Parameters: 
2023-01-26 00:54:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707025068855296[0;39m <==    Updates: 0
2023-01-26 00:54:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707025068855296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:54:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707046019403776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:54:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:54:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m ==> Parameters: 
2023-01-26 00:54:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707046019403776[0;39m <==    Updates: 1
2023-01-26 00:54:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273707046019403776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:54:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273707171890466816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:54:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:54:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m ==> Parameters: 
2023-01-26 00:54:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707171890466816[0;39m <==    Updates: 1
2023-01-26 00:54:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273707171890466816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:55:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707276756455424[0;39m 生成今日电子书快照开始
2023-01-26 00:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m ==> Parameters: 
2023-01-26 00:55:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707276756455424[0;39m <==    Updates: 0
2023-01-26 00:55:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707276756455424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:55:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273707297715392512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:55:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:55:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m ==> Parameters: 
2023-01-26 00:55:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707297715392512[0;39m <==    Updates: 1
2023-01-26 00:55:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273707297715392512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:55:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273707423523540992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:55:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:55:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m ==> Parameters: 
2023-01-26 00:55:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707423523540992[0;39m <==    Updates: 1
2023-01-26 00:55:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273707423523540992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:56:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707528402112512[0;39m 生成今日电子书快照开始
2023-01-26 00:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m ==> Parameters: 
2023-01-26 00:56:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707528402112512[0;39m <==    Updates: 0
2023-01-26 00:56:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707528402112512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:56:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707549335883776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:56:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:56:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m ==> Parameters: 
2023-01-26 00:56:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707549335883776[0;39m <==    Updates: 1
2023-01-26 00:56:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273707549335883776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:56:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273707675185975296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:56:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m ==> Parameters: 
2023-01-26 00:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707675185975296[0;39m <==    Updates: 1
2023-01-26 00:56:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273707675185975296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:57:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273707780043575296[0;39m 生成今日电子书快照开始
2023-01-26 00:57:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m ==> Parameters: 
2023-01-26 00:57:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273707780043575296[0;39m <==    Updates: 0
2023-01-26 00:57:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273707780043575296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:57:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273707801036066816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:57:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m ==> Parameters: 
2023-01-26 00:57:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707801036066816[0;39m <==    Updates: 1
2023-01-26 00:57:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273707801036066816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:57:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273707926823243776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m ==> Parameters: 
2023-01-26 00:57:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273707926823243776[0;39m <==    Updates: 1
2023-01-26 00:57:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273707926823243776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708031731175424[0;39m 生成今日电子书快照开始
2023-01-26 00:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:58:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m ==> Parameters: 
2023-01-26 00:58:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708031731175424[0;39m <==    Updates: 0
2023-01-26 00:58:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708031731175424[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:58:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273708052669140992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m ==> Parameters: 
2023-01-26 00:58:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708052669140992[0;39m <==    Updates: 1
2023-01-26 00:58:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273708052669140992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:58:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273708178494066688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:58:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:58:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m ==> Parameters: 
2023-01-26 00:58:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708178494066688[0;39m <==    Updates: 1
2023-01-26 00:58:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273708178494066688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 00:59:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708283343278080[0;39m 生成今日电子书快照开始
2023-01-26 00:59:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:59:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m ==> Parameters: 
2023-01-26 00:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708283343278080[0;39m <==    Updates: 0
2023-01-26 00:59:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708283343278080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:59:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273708304310603776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:59:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:59:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m ==> Parameters: 
2023-01-26 00:59:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708304310603776[0;39m <==    Updates: 1
2023-01-26 00:59:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273708304310603776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:59:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273708430143918080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:59:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:59:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m ==> Parameters: 
2023-01-26 00:59:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708430143918080[0;39m <==    Updates: 1
2023-01-26 00:59:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273708430143918080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:00:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708535005712384[0;39m 生成今日电子书快照开始
2023-01-26 01:00:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m ==> Parameters: 
2023-01-26 01:00:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708535005712384[0;39m <==    Updates: 0
2023-01-26 01:00:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708535005712384[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 01:00:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273708555985620992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m ==> Parameters: 
2023-01-26 01:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708555985620992[0;39m <==    Updates: 1
2023-01-26 01:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273708555985620992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:00:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273708681823129600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:00:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m ==> Parameters: 
2023-01-26 01:00:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708681823129600[0;39m <==    Updates: 1
2023-01-26 01:00:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273708681823129600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:01:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273708786680729600[0;39m 生成今日电子书快照开始
2023-01-26 01:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m ==> Parameters: 
2023-01-26 01:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273708786680729600[0;39m <==    Updates: 0
2023-01-26 01:01:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273708786680729600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:01:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273708807639666688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:01:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m ==> Parameters: 
2023-01-26 01:01:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708807639666688[0;39m <==    Updates: 1
2023-01-26 01:01:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273708807639666688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:01:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273708933493952512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m ==> Parameters: 
2023-01-26 01:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273708933493952512[0;39m <==    Updates: 1
2023-01-26 01:01:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273708933493952512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:02:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709038372524032[0;39m 生成今日电子书快照开始
2023-01-26 01:02:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:02:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m ==> Parameters: 
2023-01-26 01:02:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709038372524032[0;39m <==    Updates: 0
2023-01-26 01:02:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709038372524032[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 01:02:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273709059335655424[0;39m 更新电子书下的文档数据开始
2023-01-26 01:02:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:02:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m ==> Parameters: 
2023-01-26 01:02:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709059335655424[0;39m <==    Updates: 1
2023-01-26 01:02:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273709059335655424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:02:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273709185114443776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:02:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m ==> Parameters: 
2023-01-26 01:02:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709185114443776[0;39m <==    Updates: 1
2023-01-26 01:02:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273709185114443776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:03:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709290026569728[0;39m 生成今日电子书快照开始
2023-01-26 01:03:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:03:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m ==> Parameters: 
2023-01-26 01:03:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709290026569728[0;39m <==    Updates: 0
2023-01-26 01:03:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709290026569728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:03:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273709310951952384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m ==> Parameters: 
2023-01-26 01:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709310951952384[0;39m <==    Updates: 1
2023-01-26 01:03:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273709310951952384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:03:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273709436810432512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m ==> Parameters: 
2023-01-26 01:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709436810432512[0;39m <==    Updates: 1
2023-01-26 01:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273709436810432512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:04:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709541626089472[0;39m 生成今日电子书快照开始
2023-01-26 01:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:04:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m ==> Parameters: 
2023-01-26 01:04:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709541626089472[0;39m <==    Updates: 0
2023-01-26 01:04:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709541626089472[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273709562639552512[0;39m 更新电子书下的文档数据开始
2023-01-26 01:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m ==> Parameters: 
2023-01-26 01:04:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709562639552512[0;39m <==    Updates: 1
2023-01-26 01:04:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273709562639552512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:04:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273709688439312384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m ==> Parameters: 
2023-01-26 01:04:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709688439312384[0;39m <==    Updates: 1
2023-01-26 01:04:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273709688439312384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:05:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273709793288523776[0;39m 生成今日电子书快照开始
2023-01-26 01:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m ==> Parameters: 
2023-01-26 01:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273709793288523776[0;39m <==    Updates: 0
2023-01-26 01:05:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273709793288523776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:05:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273709814293598208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m ==> Parameters: 
2023-01-26 01:05:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709814293598208[0;39m <==    Updates: 1
2023-01-26 01:05:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273709814293598208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:05:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273709940135301120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:05:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:05:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m ==> Parameters: 
2023-01-26 01:05:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273709940135301120[0;39m <==    Updates: 1
2023-01-26 01:05:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273709940135301120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710044959346688[0;39m 生成今日电子书快照开始
2023-01-26 01:06:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m ==> Parameters: 
2023-01-26 01:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710044959346688[0;39m <==    Updates: 0
2023-01-26 01:06:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710044959346688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:06:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273710065909895168[0;39m 更新电子书下的文档数据开始
2023-01-26 01:06:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:06:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m ==> Parameters: 
2023-01-26 01:06:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710065909895168[0;39m <==    Updates: 1
2023-01-26 01:06:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273710065909895168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:06:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273710191751598080[0;39m 更新电子书下的文档数据开始
2023-01-26 01:06:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m ==> Parameters: 
2023-01-26 01:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710191751598080[0;39m <==    Updates: 1
2023-01-26 01:06:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273710191751598080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:07:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710296655335424[0;39m 生成今日电子书快照开始
2023-01-26 01:07:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:07:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m ==> Parameters: 
2023-01-26 01:07:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710296655335424[0;39m <==    Updates: 0
2023-01-26 01:07:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710296655335424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:07:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273710317589106688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m ==> Parameters: 
2023-01-26 01:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710317589106688[0;39m <==    Updates: 1
2023-01-26 01:07:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273710317589106688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:07:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273710443405643776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:07:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:07:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m ==> Parameters: 
2023-01-26 01:07:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710443405643776[0;39m <==    Updates: 1
2023-01-26 01:07:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273710443405643776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:08:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710548263243776[0;39m 生成今日电子书快照开始
2023-01-26 01:08:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:08:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m ==> Parameters: 
2023-01-26 01:08:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710548263243776[0;39m <==    Updates: 0
2023-01-26 01:08:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710548263243776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:08:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273710569280901120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m ==> Parameters: 
2023-01-26 01:08:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710569280901120[0;39m <==    Updates: 1
2023-01-26 01:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273710569280901120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:08:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273710695105826816[0;39m 更新电子书下的文档数据开始
2023-01-26 01:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m ==> Parameters: 
2023-01-26 01:08:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710695105826816[0;39m <==    Updates: 1
2023-01-26 01:08:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273710695105826816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:09:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273710799967621120[0;39m 生成今日电子书快照开始
2023-01-26 01:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m ==> Parameters: 
2023-01-26 01:09:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273710799967621120[0;39m <==    Updates: 0
2023-01-26 01:09:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273710799967621120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:09:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273710820913975296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:09:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:09:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m ==> Parameters: 
2023-01-26 01:09:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710820913975296[0;39m <==    Updates: 1
2023-01-26 01:09:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273710820913975296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:09:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273710946768261120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:09:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m ==> Parameters: 
2023-01-26 01:09:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273710946768261120[0;39m <==    Updates: 1
2023-01-26 01:09:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273710946768261120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:10:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273711051571335168[0;39m 生成今日电子书快照开始
2023-01-26 01:10:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:10:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m ==> Parameters: 
2023-01-26 01:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711051571335168[0;39m <==    Updates: 0
2023-01-26 01:10:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273711051571335168[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 01:10:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273711072551243776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:10:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711072551243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:10:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711072551243776[0;39m ==> Parameters: 
2023-01-26 01:10:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711072551243776[0;39m <==    Updates: 1
2023-01-26 01:10:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273711072551243776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:10:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273711198413918208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:10:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711198413918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:10:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711198413918208[0;39m ==> Parameters: 
2023-01-26 01:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711198413918208[0;39m <==    Updates: 1
2023-01-26 01:10:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273711198413918208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:11:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273711303250546688[0;39m 生成今日电子书快照开始
2023-01-26 01:11:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711303250546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:11:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711303250546688[0;39m ==> Parameters: 
2023-01-26 01:11:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711303250546688[0;39m <==    Updates: 0
2023-01-26 01:11:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273711303250546688[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 01:11:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273711324222066688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:11:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711324222066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:11:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711324222066688[0;39m ==> Parameters: 
2023-01-26 01:11:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711324222066688[0;39m <==    Updates: 1
2023-01-26 01:11:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273711324222066688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:11:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273711450063769600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711450063769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711450063769600[0;39m ==> Parameters: 
2023-01-26 01:11:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711450063769600[0;39m <==    Updates: 1
2023-01-26 01:11:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273711450063769600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:12:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273711554942341120[0;39m 生成今日电子书快照开始
2023-01-26 01:12:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711554942341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:12:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711554942341120[0;39m ==> Parameters: 
2023-01-26 01:12:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711554942341120[0;39m <==    Updates: 0
2023-01-26 01:12:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273711554942341120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:12:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273711575876112384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711575876112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:12:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711575876112384[0;39m ==> Parameters: 
2023-01-26 01:12:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711575876112384[0;39m <==    Updates: 1
2023-01-26 01:12:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273711575876112384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:12:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273711701709426688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:12:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711701709426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:12:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711701709426688[0;39m ==> Parameters: 
2023-01-26 01:12:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711701709426688[0;39m <==    Updates: 1
2023-01-26 01:12:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273711701709426688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:13:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273711806604775424[0;39m 生成今日电子书快照开始
2023-01-26 01:13:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711806604775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:13:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711806604775424[0;39m ==> Parameters: 
2023-01-26 01:13:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273711806604775424[0;39m <==    Updates: 0
2023-01-26 01:13:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273711806604775424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 01:13:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273711827551129600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:13:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711827551129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711827551129600[0;39m ==> Parameters: 
2023-01-26 01:13:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711827551129600[0;39m <==    Updates: 1
2023-01-26 01:13:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273711827551129600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:13:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273711953376055296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:13:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711953376055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:13:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711953376055296[0;39m ==> Parameters: 
2023-01-26 01:13:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273711953376055296[0;39m <==    Updates: 1
2023-01-26 01:13:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273711953376055296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:14:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273712058246238208[0;39m 生成今日电子书快照开始
2023-01-26 01:14:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273712058246238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:14:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273712058246238208[0;39m ==> Parameters: 
2023-01-26 01:14:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273712058246238208[0;39m <==    Updates: 0
2023-01-26 01:14:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273712058246238208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 01:14:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273712079213563904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273712079213563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273712079213563904[0;39m ==> Parameters: 
2023-01-26 01:14:05.036 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273712079213563904[0;39m <==    Updates: 1
2023-01-26 01:14:05.039 INFO  com.example.wiki.job.DocJob                       :35   [32m273712079213563904[0;39m 更新电子书下的文档数据结束，耗时：29毫秒
2023-01-26 01:20:20.947 INFO  com.example.wiki.job.DocJob                       :32   [32m273713656011821056[0;39m 更新电子书下的文档数据开始
2023-01-26 01:20:20.948 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713656011821056[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:20:20.949 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713656011821056[0;39m ==> Parameters: 
2023-01-26 01:20:20.950 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713656011821056[0;39m <==    Updates: 1
2023-01-26 01:20:20.951 INFO  com.example.wiki.job.DocJob                       :35   [32m273713656011821056[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:20:20.951 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273713656028598272[0;39m 生成今日电子书快照开始
2023-01-26 01:20:20.952 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713656028598272[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:20:20.952 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713656028598272[0;39m ==> Parameters: 
2023-01-26 01:20:20.956 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713656028598272[0;39m <==    Updates: 0
2023-01-26 01:20:20.957 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273713656028598272[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:20:28.698 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=6m15s947ms597µs).
2023-01-26 01:20:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273713714992123904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:20:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713714992123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:20:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713714992123904[0;39m ==> Parameters: 
2023-01-26 01:20:35.026 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713714992123904[0;39m <==    Updates: 1
2023-01-26 01:20:35.026 INFO  com.example.wiki.job.DocJob                       :35   [32m273713714992123904[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-26 01:21:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273713819853918208[0;39m 生成今日电子书快照开始
2023-01-26 01:21:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713819853918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:21:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713819853918208[0;39m ==> Parameters: 
2023-01-26 01:21:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273713819853918208[0;39m <==    Updates: 0
2023-01-26 01:21:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273713819853918208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 01:21:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273713840800272384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713840800272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713840800272384[0;39m ==> Parameters: 
2023-01-26 01:21:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713840800272384[0;39m <==    Updates: 1
2023-01-26 01:21:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273713840800272384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:21:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273713966637780992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:21:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713966637780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:21:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713966637780992[0;39m ==> Parameters: 
2023-01-26 01:21:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273713966637780992[0;39m <==    Updates: 1
2023-01-26 01:21:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273713966637780992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:22:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273714071499575296[0;39m 生成今日电子书快照开始
2023-01-26 01:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714071499575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714071499575296[0;39m ==> Parameters: 
2023-01-26 01:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714071499575296[0;39m <==    Updates: 0
2023-01-26 01:22:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273714071499575296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:22:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273714092513038336[0;39m 更新电子书下的文档数据开始
2023-01-26 01:22:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714092513038336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:22:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714092513038336[0;39m ==> Parameters: 
2023-01-26 01:22:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714092513038336[0;39m <==    Updates: 1
2023-01-26 01:22:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273714092513038336[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:22:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273714218296020992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714218296020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714218296020992[0;39m ==> Parameters: 
2023-01-26 01:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714218296020992[0;39m <==    Updates: 1
2023-01-26 01:22:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273714218296020992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:23:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273714323182981120[0;39m 生成今日电子书快照开始
2023-01-26 01:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714323182981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714323182981120[0;39m ==> Parameters: 
2023-01-26 01:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714323182981120[0;39m <==    Updates: 0
2023-01-26 01:23:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273714323182981120[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 01:23:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273714344162889728[0;39m 更新电子书下的文档数据开始
2023-01-26 01:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714344162889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714344162889728[0;39m ==> Parameters: 
2023-01-26 01:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714344162889728[0;39m <==    Updates: 1
2023-01-26 01:23:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273714344162889728[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:23:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273714469971038208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714469971038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714469971038208[0;39m ==> Parameters: 
2023-01-26 01:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714469971038208[0;39m <==    Updates: 1
2023-01-26 01:23:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273714469971038208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:24:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273714574853804032[0;39m 生成今日电子书快照开始
2023-01-26 01:24:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714574853804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:24:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714574853804032[0;39m ==> Parameters: 
2023-01-26 01:24:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273714574853804032[0;39m <==    Updates: 0
2023-01-26 01:24:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273714574853804032[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 01:24:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273714595833712640[0;39m 更新电子书下的文档数据开始
2023-01-26 01:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714595833712640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714595833712640[0;39m ==> Parameters: 
2023-01-26 01:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714595833712640[0;39m <==    Updates: 1
2023-01-26 01:24:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273714595833712640[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:24:35.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273714721671221248[0;39m 更新电子书下的文档数据开始
2023-01-26 01:24:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714721671221248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:24:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714721671221248[0;39m ==> Parameters: 
2023-01-26 01:24:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273714721671221248[0;39m <==    Updates: 1
2023-01-26 01:24:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273714721671221248[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:28:08.537 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m39s772ms373µs200ns).
2023-01-26 01:28:09.761 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273715622360256512[0;39m 生成今日电子书快照开始
2023-01-26 01:28:09.761 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715622360256512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:28:09.761 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715622360256512[0;39m ==> Parameters: 
2023-01-26 01:28:09.761 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715622360256512[0;39m <==    Updates: 0
2023-01-26 01:28:09.761 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273715622360256512[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 01:28:09.761 INFO  com.example.wiki.job.DocJob                       :32   [32m273715622360256513[0;39m 更新电子书下的文档数据开始
2023-01-26 01:28:09.761 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715622360256513[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:28:09.761 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715622360256513[0;39m ==> Parameters: 
2023-01-26 01:28:09.769 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715622360256513[0;39m <==    Updates: 1
2023-01-26 01:28:09.769 INFO  com.example.wiki.job.DocJob                       :35   [32m273715622360256513[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-26 01:28:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273715728287404032[0;39m 更新电子书下的文档数据开始
2023-01-26 01:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715728287404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715728287404032[0;39m ==> Parameters: 
2023-01-26 01:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715728287404032[0;39m <==    Updates: 1
2023-01-26 01:28:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273715728287404032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:29:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273715833136615424[0;39m 生成今日电子书快照开始
2023-01-26 01:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715833136615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715833136615424[0;39m ==> Parameters: 
2023-01-26 01:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273715833136615424[0;39m <==    Updates: 0
2023-01-26 01:29:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273715833136615424[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 01:29:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273715854078775296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715854078775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715854078775296[0;39m ==> Parameters: 
2023-01-26 01:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715854078775296[0;39m <==    Updates: 1
2023-01-26 01:29:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273715854078775296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:29:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273715979945644032[0;39m 更新电子书下的文档数据开始
2023-01-26 01:29:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715979945644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:29:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715979945644032[0;39m ==> Parameters: 
2023-01-26 01:29:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273715979945644032[0;39m <==    Updates: 1
2023-01-26 01:29:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273715979945644032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:30:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273716084803244032[0;39m 生成今日电子书快照开始
2023-01-26 01:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716084803244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716084803244032[0;39m ==> Parameters: 
2023-01-26 01:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716084803244032[0;39m <==    Updates: 0
2023-01-26 01:30:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273716084803244032[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 01:30:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273716105741209600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:30:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716105741209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:30:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716105741209600[0;39m ==> Parameters: 
2023-01-26 01:30:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716105741209600[0;39m <==    Updates: 1
2023-01-26 01:30:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273716105741209600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:30:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273716231574523904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716231574523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716231574523904[0;39m ==> Parameters: 
2023-01-26 01:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716231574523904[0;39m <==    Updates: 1
2023-01-26 01:30:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273716231574523904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273716336461484032[0;39m 生成今日电子书快照开始
2023-01-26 01:31:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716336461484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:31:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716336461484032[0;39m ==> Parameters: 
2023-01-26 01:31:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716336461484032[0;39m <==    Updates: 0
2023-01-26 01:31:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273716336461484032[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 01:31:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273716357441392640[0;39m 更新电子书下的文档数据开始
2023-01-26 01:31:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716357441392640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:31:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716357441392640[0;39m ==> Parameters: 
2023-01-26 01:31:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716357441392640[0;39m <==    Updates: 1
2023-01-26 01:31:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273716357441392640[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273716483211792384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716483211792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716483211792384[0;39m ==> Parameters: 
2023-01-26 01:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716483211792384[0;39m <==    Updates: 1
2023-01-26 01:31:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273716483211792384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:32:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273716588136501248[0;39m 生成今日电子书快照开始
2023-01-26 01:32:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716588136501248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:32:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716588136501248[0;39m ==> Parameters: 
2023-01-26 01:32:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716588136501248[0;39m <==    Updates: 0
2023-01-26 01:32:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273716588136501248[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:32:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273716609061883904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716609061883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716609061883904[0;39m ==> Parameters: 
2023-01-26 01:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716609061883904[0;39m <==    Updates: 1
2023-01-26 01:32:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273716609061883904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:32:35.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273716734937141248[0;39m 更新电子书下的文档数据开始
2023-01-26 01:32:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716734937141248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:32:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716734937141248[0;39m ==> Parameters: 
2023-01-26 01:32:35.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716734937141248[0;39m <==    Updates: 1
2023-01-26 01:32:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273716734937141248[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:33:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273716839719243776[0;39m 生成今日电子书快照开始
2023-01-26 01:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716839719243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716839719243776[0;39m ==> Parameters: 
2023-01-26 01:33:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273716839719243776[0;39m <==    Updates: 0
2023-01-26 01:33:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273716839719243776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 01:33:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273716860724318208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716860724318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716860724318208[0;39m ==> Parameters: 
2023-01-26 01:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716860724318208[0;39m <==    Updates: 1
2023-01-26 01:33:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273716860724318208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:33:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273716986540855296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716986540855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716986540855296[0;39m ==> Parameters: 
2023-01-26 01:33:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273716986540855296[0;39m <==    Updates: 1
2023-01-26 01:33:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273716986540855296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:34:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273717091398455296[0;39m 生成今日电子书快照开始
2023-01-26 01:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717091398455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:34:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717091398455296[0;39m ==> Parameters: 
2023-01-26 01:34:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717091398455296[0;39m <==    Updates: 0
2023-01-26 01:34:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273717091398455296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 01:34:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273717112399335424[0;39m 更新电子书下的文档数据开始
2023-01-26 01:34:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717112399335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:34:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717112399335424[0;39m ==> Parameters: 
2023-01-26 01:34:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717112399335424[0;39m <==    Updates: 1
2023-01-26 01:34:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273717112399335424[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:34:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273717238194900992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717238194900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717238194900992[0;39m ==> Parameters: 
2023-01-26 01:34:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717238194900992[0;39m <==    Updates: 1
2023-01-26 01:34:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273717238194900992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:35:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273717343065083904[0;39m 生成今日电子书快照开始
2023-01-26 01:35:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717343065083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:35:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717343065083904[0;39m ==> Parameters: 
2023-01-26 01:35:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717343065083904[0;39m <==    Updates: 0
2023-01-26 01:35:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273717343065083904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:35:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273717364015632384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:35:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717364015632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:35:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717364015632384[0;39m ==> Parameters: 
2023-01-26 01:35:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717364015632384[0;39m <==    Updates: 1
2023-01-26 01:35:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273717364015632384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:35:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273717489853140992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:35:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717489853140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:35:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717489853140992[0;39m ==> Parameters: 
2023-01-26 01:35:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717489853140992[0;39m <==    Updates: 1
2023-01-26 01:35:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273717489853140992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:36:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273717594723323904[0;39m 生成今日电子书快照开始
2023-01-26 01:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717594723323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717594723323904[0;39m ==> Parameters: 
2023-01-26 01:36:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717594723323904[0;39m <==    Updates: 0
2023-01-26 01:36:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273717594723323904[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 01:36:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273717615682260992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717615682260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717615682260992[0;39m ==> Parameters: 
2023-01-26 01:36:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717615682260992[0;39m <==    Updates: 1
2023-01-26 01:36:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273717615682260992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:36:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273717741511380992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:36:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717741511380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:36:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717741511380992[0;39m ==> Parameters: 
2023-01-26 01:36:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717741511380992[0;39m <==    Updates: 1
2023-01-26 01:36:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273717741511380992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:37:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273717846377369600[0;39m 生成今日电子书快照开始
2023-01-26 01:37:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717846377369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:37:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717846377369600[0;39m ==> Parameters: 
2023-01-26 01:37:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273717846377369600[0;39m <==    Updates: 0
2023-01-26 01:37:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273717846377369600[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 01:37:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273717867378249728[0;39m 更新电子书下的文档数据开始
2023-01-26 01:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717867378249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717867378249728[0;39m ==> Parameters: 
2023-01-26 01:37:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717867378249728[0;39m <==    Updates: 1
2023-01-26 01:37:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273717867378249728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:37:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273717993169620992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:37:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717993169620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717993169620992[0;39m ==> Parameters: 
2023-01-26 01:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273717993169620992[0;39m <==    Updates: 1
2023-01-26 01:37:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273717993169620992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:38:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273718098085941248[0;39m 生成今日电子书快照开始
2023-01-26 01:38:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718098085941248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:38:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718098085941248[0;39m ==> Parameters: 
2023-01-26 01:38:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718098085941248[0;39m <==    Updates: 0
2023-01-26 01:38:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273718098085941248[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 01:38:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273718119002935296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:38:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718119002935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:38:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718119002935296[0;39m ==> Parameters: 
2023-01-26 01:38:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718119002935296[0;39m <==    Updates: 1
2023-01-26 01:38:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273718119002935296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:38:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273718244819472384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:38:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718244819472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:38:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718244819472384[0;39m ==> Parameters: 
2023-01-26 01:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718244819472384[0;39m <==    Updates: 1
2023-01-26 01:38:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273718244819472384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:39:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273718349702238208[0;39m 生成今日电子书快照开始
2023-01-26 01:39:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718349702238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:39:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718349702238208[0;39m ==> Parameters: 
2023-01-26 01:39:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718349702238208[0;39m <==    Updates: 0
2023-01-26 01:39:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273718349702238208[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:39:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273718370661175296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:39:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718370661175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:39:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718370661175296[0;39m ==> Parameters: 
2023-01-26 01:39:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718370661175296[0;39m <==    Updates: 1
2023-01-26 01:39:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273718370661175296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:39:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273718496494489600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:39:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718496494489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:39:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718496494489600[0;39m ==> Parameters: 
2023-01-26 01:39:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718496494489600[0;39m <==    Updates: 1
2023-01-26 01:39:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273718496494489600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:40:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273718601339506688[0;39m 生成今日电子书快照开始
2023-01-26 01:40:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718601339506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:40:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718601339506688[0;39m ==> Parameters: 
2023-01-26 01:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718601339506688[0;39m <==    Updates: 0
2023-01-26 01:40:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273718601339506688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:40:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273718622311026688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:40:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718622311026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:40:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718622311026688[0;39m ==> Parameters: 
2023-01-26 01:40:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718622311026688[0;39m <==    Updates: 1
2023-01-26 01:40:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273718622311026688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:40:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273718748152729600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:40:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718748152729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:40:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718748152729600[0;39m ==> Parameters: 
2023-01-26 01:40:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718748152729600[0;39m <==    Updates: 1
2023-01-26 01:40:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273718748152729600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:41:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273718853010329600[0;39m 生成今日电子书快照开始
2023-01-26 01:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718853010329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:41:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718853010329600[0;39m ==> Parameters: 
2023-01-26 01:41:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273718853010329600[0;39m <==    Updates: 0
2023-01-26 01:41:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273718853010329600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:41:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273718873973460992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718873973460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718873973460992[0;39m ==> Parameters: 
2023-01-26 01:41:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718873973460992[0;39m <==    Updates: 1
2023-01-26 01:41:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273718873973460992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:41:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273718999806775296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:41:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718999806775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:41:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718999806775296[0;39m ==> Parameters: 
2023-01-26 01:41:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273718999806775296[0;39m <==    Updates: 1
2023-01-26 01:41:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273718999806775296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:42:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273719104676958208[0;39m 生成今日电子书快照开始
2023-01-26 01:42:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719104676958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:42:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719104676958208[0;39m ==> Parameters: 
2023-01-26 01:42:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719104676958208[0;39m <==    Updates: 0
2023-01-26 01:42:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273719104676958208[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 01:42:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273719125661061120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:42:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719125661061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:42:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719125661061120[0;39m ==> Parameters: 
2023-01-26 01:42:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719125661061120[0;39m <==    Updates: 1
2023-01-26 01:42:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273719125661061120[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:42:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273719251456626688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:42:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719251456626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:42:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719251456626688[0;39m ==> Parameters: 
2023-01-26 01:42:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719251456626688[0;39m <==    Updates: 1
2023-01-26 01:42:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273719251456626688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:43:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273719356339392512[0;39m 生成今日电子书快照开始
2023-01-26 01:43:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719356339392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:43:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719356339392512[0;39m ==> Parameters: 
2023-01-26 01:43:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719356339392512[0;39m <==    Updates: 0
2023-01-26 01:43:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273719356339392512[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 01:43:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273719377302523904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:43:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719377302523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:43:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719377302523904[0;39m ==> Parameters: 
2023-01-26 01:43:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719377302523904[0;39m <==    Updates: 1
2023-01-26 01:43:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273719377302523904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:43:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273719503127449600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719503127449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719503127449600[0;39m ==> Parameters: 
2023-01-26 01:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719503127449600[0;39m <==    Updates: 1
2023-01-26 01:43:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273719503127449600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:44:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273719608031186944[0;39m 生成今日电子书快照开始
2023-01-26 01:44:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719608031186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:44:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719608031186944[0;39m ==> Parameters: 
2023-01-26 01:44:00.035 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719608031186944[0;39m <==    Updates: 0
2023-01-26 01:44:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273719608031186944[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 01:44:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273719628960763904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:44:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719628960763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:44:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719628960763904[0;39m ==> Parameters: 
2023-01-26 01:44:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719628960763904[0;39m <==    Updates: 1
2023-01-26 01:44:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273719628960763904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:44:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273719754781495296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:44:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719754781495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:44:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719754781495296[0;39m ==> Parameters: 
2023-01-26 01:44:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719754781495296[0;39m <==    Updates: 1
2023-01-26 01:44:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273719754781495296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:45:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273719859647483904[0;39m 生成今日电子书快照开始
2023-01-26 01:45:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719859647483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719859647483904[0;39m ==> Parameters: 
2023-01-26 01:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273719859647483904[0;39m <==    Updates: 0
2023-01-26 01:45:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273719859647483904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 01:45:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273719880598032384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:45:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719880598032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:45:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719880598032384[0;39m ==> Parameters: 
2023-01-26 01:45:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273719880598032384[0;39m <==    Updates: 1
2023-01-26 01:45:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273719880598032384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:45:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273720006418763776[0;39m 更新电子书下的文档数据开始
2023-01-26 01:45:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720006418763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:45:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720006418763776[0;39m ==> Parameters: 
2023-01-26 01:45:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720006418763776[0;39m <==    Updates: 1
2023-01-26 01:45:35.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273720006418763776[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:46:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273720111309918208[0;39m 生成今日电子书快照开始
2023-01-26 01:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720111309918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720111309918208[0;39m ==> Parameters: 
2023-01-26 01:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720111309918208[0;39m <==    Updates: 0
2023-01-26 01:46:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273720111309918208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 01:46:05.026 INFO  com.example.wiki.job.DocJob                       :32   [32m273720132348547072[0;39m 更新电子书下的文档数据开始
2023-01-26 01:46:05.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720132348547072[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:46:05.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720132348547072[0;39m ==> Parameters: 
2023-01-26 01:46:05.029 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720132348547072[0;39m <==    Updates: 1
2023-01-26 01:46:05.029 INFO  com.example.wiki.job.DocJob                       :35   [32m273720132348547072[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:46:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273720258102169600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:46:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720258102169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:46:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720258102169600[0;39m ==> Parameters: 
2023-01-26 01:46:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720258102169600[0;39m <==    Updates: 1
2023-01-26 01:46:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273720258102169600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:47:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273720362968158208[0;39m 生成今日电子书快照开始
2023-01-26 01:47:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720362968158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:47:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720362968158208[0;39m ==> Parameters: 
2023-01-26 01:47:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720362968158208[0;39m <==    Updates: 0
2023-01-26 01:47:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273720362968158208[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 01:47:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273720383939678208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:47:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720383939678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:47:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720383939678208[0;39m ==> Parameters: 
2023-01-26 01:47:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720383939678208[0;39m <==    Updates: 1
2023-01-26 01:47:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273720383939678208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:47:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273720509747826688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:47:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720509747826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:47:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720509747826688[0;39m ==> Parameters: 
2023-01-26 01:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720509747826688[0;39m <==    Updates: 1
2023-01-26 01:47:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273720509747826688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:48:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273720614622203904[0;39m 生成今日电子书快照开始
2023-01-26 01:48:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720614622203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:48:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720614622203904[0;39m ==> Parameters: 
2023-01-26 01:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720614622203904[0;39m <==    Updates: 0
2023-01-26 01:48:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273720614622203904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 01:48:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273720635593723904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720635593723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720635593723904[0;39m ==> Parameters: 
2023-01-26 01:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720635593723904[0;39m <==    Updates: 1
2023-01-26 01:48:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273720635593723904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:48:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273720761422843904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:48:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720761422843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:48:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720761422843904[0;39m ==> Parameters: 
2023-01-26 01:48:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720761422843904[0;39m <==    Updates: 1
2023-01-26 01:48:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273720761422843904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:49:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273720866288832512[0;39m 生成今日电子书快照开始
2023-01-26 01:49:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720866288832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:49:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720866288832512[0;39m ==> Parameters: 
2023-01-26 01:49:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273720866288832512[0;39m <==    Updates: 0
2023-01-26 01:49:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273720866288832512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:49:05.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273720887293906944[0;39m 更新电子书下的文档数据开始
2023-01-26 01:49:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720887293906944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:49:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720887293906944[0;39m ==> Parameters: 
2023-01-26 01:49:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273720887293906944[0;39m <==    Updates: 1
2023-01-26 01:49:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273720887293906944[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:49:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273721013060112384[0;39m 更新电子书下的文档数据开始
2023-01-26 01:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721013060112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721013060112384[0;39m ==> Parameters: 
2023-01-26 01:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721013060112384[0;39m <==    Updates: 1
2023-01-26 01:49:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273721013060112384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:50:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273721117938683904[0;39m 生成今日电子书快照开始
2023-01-26 01:50:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721117938683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:50:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721117938683904[0;39m ==> Parameters: 
2023-01-26 01:50:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721117938683904[0;39m <==    Updates: 0
2023-01-26 01:50:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273721117938683904[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 01:50:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273721138906009600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:50:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721138906009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:50:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721138906009600[0;39m ==> Parameters: 
2023-01-26 01:50:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721138906009600[0;39m <==    Updates: 1
2023-01-26 01:50:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273721138906009600[0;39m 更新电子书下的文档数据结束，耗时：13毫秒
2023-01-26 01:50:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273721264739323904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721264739323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721264739323904[0;39m ==> Parameters: 
2023-01-26 01:50:35.027 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721264739323904[0;39m <==    Updates: 1
2023-01-26 01:50:35.030 INFO  com.example.wiki.job.DocJob                       :35   [32m273721264739323904[0;39m 更新电子书下的文档数据结束，耗时：20毫秒
2023-01-26 01:51:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273721369596923904[0;39m 生成今日电子书快照开始
2023-01-26 01:51:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721369596923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:51:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721369596923904[0;39m ==> Parameters: 
2023-01-26 01:51:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721369596923904[0;39m <==    Updates: 0
2023-01-26 01:51:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273721369596923904[0;39m 生成今日电子书快照结束，耗时：22毫秒
2023-01-26 01:51:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273721390572638208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721390572638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721390572638208[0;39m ==> Parameters: 
2023-01-26 01:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721390572638208[0;39m <==    Updates: 1
2023-01-26 01:51:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273721390572638208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:51:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273721516401758208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:51:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721516401758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:51:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721516401758208[0;39m ==> Parameters: 
2023-01-26 01:51:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721516401758208[0;39m <==    Updates: 1
2023-01-26 01:51:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273721516401758208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:52:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273721621255163904[0;39m 生成今日电子书快照开始
2023-01-26 01:52:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721621255163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:52:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721621255163904[0;39m ==> Parameters: 
2023-01-26 01:52:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721621255163904[0;39m <==    Updates: 0
2023-01-26 01:52:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273721621255163904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 01:52:05.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273721642268626944[0;39m 更新电子书下的文档数据开始
2023-01-26 01:52:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721642268626944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:52:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721642268626944[0;39m ==> Parameters: 
2023-01-26 01:52:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721642268626944[0;39m <==    Updates: 1
2023-01-26 01:52:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273721642268626944[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:52:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273721768051609600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721768051609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721768051609600[0;39m ==> Parameters: 
2023-01-26 01:52:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721768051609600[0;39m <==    Updates: 1
2023-01-26 01:52:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273721768051609600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 01:53:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273721872934375424[0;39m 生成今日电子书快照开始
2023-01-26 01:53:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721872934375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:53:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721872934375424[0;39m ==> Parameters: 
2023-01-26 01:53:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273721872934375424[0;39m <==    Updates: 0
2023-01-26 01:53:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273721872934375424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:53:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273721893872340992[0;39m 更新电子书下的文档数据开始
2023-01-26 01:53:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721893872340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:53:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721893872340992[0;39m ==> Parameters: 
2023-01-26 01:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273721893872340992[0;39m <==    Updates: 1
2023-01-26 01:53:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273721893872340992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:53:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273722019718238208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:53:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722019718238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:53:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722019718238208[0;39m ==> Parameters: 
2023-01-26 01:53:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722019718238208[0;39m <==    Updates: 1
2023-01-26 01:53:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273722019718238208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273722124592615424[0;39m 生成今日电子书快照开始
2023-01-26 01:54:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722124592615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:54:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722124592615424[0;39m ==> Parameters: 
2023-01-26 01:54:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722124592615424[0;39m <==    Updates: 0
2023-01-26 01:54:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273722124592615424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:54:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273722145526386688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:54:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722145526386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:54:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722145526386688[0;39m ==> Parameters: 
2023-01-26 01:54:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722145526386688[0;39m <==    Updates: 1
2023-01-26 01:54:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273722145526386688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:54:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273722271376478208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:54:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722271376478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:54:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722271376478208[0;39m ==> Parameters: 
2023-01-26 01:54:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722271376478208[0;39m <==    Updates: 1
2023-01-26 01:54:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273722271376478208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:55:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273722376250855424[0;39m 生成今日电子书快照开始
2023-01-26 01:55:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722376250855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:55:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722376250855424[0;39m ==> Parameters: 
2023-01-26 01:55:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722376250855424[0;39m <==    Updates: 0
2023-01-26 01:55:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273722376250855424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:55:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273722397184626688[0;39m 更新电子书下的文档数据开始
2023-01-26 01:55:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722397184626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:55:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722397184626688[0;39m ==> Parameters: 
2023-01-26 01:55:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722397184626688[0;39m <==    Updates: 1
2023-01-26 01:55:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273722397184626688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:55:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273722523034718208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:55:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722523034718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:55:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722523034718208[0;39m ==> Parameters: 
2023-01-26 01:55:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722523034718208[0;39m <==    Updates: 1
2023-01-26 01:55:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273722523034718208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 01:56:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273722627879735296[0;39m 生成今日电子书快照开始
2023-01-26 01:56:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722627879735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:56:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722627879735296[0;39m ==> Parameters: 
2023-01-26 01:56:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722627879735296[0;39m <==    Updates: 0
2023-01-26 01:56:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273722627879735296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 01:56:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273722648851255296[0;39m 更新电子书下的文档数据开始
2023-01-26 01:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722648851255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722648851255296[0;39m ==> Parameters: 
2023-01-26 01:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722648851255296[0;39m <==    Updates: 1
2023-01-26 01:56:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273722648851255296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:56:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273722774684569600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722774684569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722774684569600[0;39m ==> Parameters: 
2023-01-26 01:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722774684569600[0;39m <==    Updates: 1
2023-01-26 01:56:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273722774684569600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 01:57:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273722879567335424[0;39m 生成今日电子书快照开始
2023-01-26 01:57:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722879567335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:57:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722879567335424[0;39m ==> Parameters: 
2023-01-26 01:57:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273722879567335424[0;39m <==    Updates: 0
2023-01-26 01:57:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273722879567335424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:57:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273722900522078208[0;39m 更新电子书下的文档数据开始
2023-01-26 01:57:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722900522078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:57:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722900522078208[0;39m ==> Parameters: 
2023-01-26 01:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273722900522078208[0;39m <==    Updates: 1
2023-01-26 01:57:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273722900522078208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:57:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273723026347003904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:57:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723026347003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:57:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723026347003904[0;39m ==> Parameters: 
2023-01-26 01:57:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723026347003904[0;39m <==    Updates: 1
2023-01-26 01:57:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273723026347003904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 01:58:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273723131200409600[0;39m 生成今日电子书快照开始
2023-01-26 01:58:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723131200409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723131200409600[0;39m ==> Parameters: 
2023-01-26 01:58:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723131200409600[0;39m <==    Updates: 0
2023-01-26 01:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273723131200409600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 01:58:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273723152171929600[0;39m 更新电子书下的文档数据开始
2023-01-26 01:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723152171929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723152171929600[0;39m ==> Parameters: 
2023-01-26 01:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723152171929600[0;39m <==    Updates: 1
2023-01-26 01:58:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273723152171929600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 01:58:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273723278005243904[0;39m 更新电子书下的文档数据开始
2023-01-26 01:58:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723278005243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:58:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723278005243904[0;39m ==> Parameters: 
2023-01-26 01:58:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723278005243904[0;39m <==    Updates: 1
2023-01-26 01:58:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273723278005243904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 01:59:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273723382888009728[0;39m 生成今日电子书快照开始
2023-01-26 01:59:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723382888009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 01:59:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723382888009728[0;39m ==> Parameters: 
2023-01-26 01:59:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723382888009728[0;39m <==    Updates: 0
2023-01-26 01:59:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273723382888009728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 01:59:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273723403851141120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:59:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723403851141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:59:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723403851141120[0;39m ==> Parameters: 
2023-01-26 01:59:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723403851141120[0;39m <==    Updates: 1
2023-01-26 01:59:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273723403851141120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 01:59:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273723529680261120[0;39m 更新电子书下的文档数据开始
2023-01-26 01:59:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723529680261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 01:59:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723529680261120[0;39m ==> Parameters: 
2023-01-26 01:59:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723529680261120[0;39m <==    Updates: 1
2023-01-26 01:59:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273723529680261120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:00:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273723634500112384[0;39m 生成今日电子书快照开始
2023-01-26 02:00:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723634500112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:00:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723634500112384[0;39m ==> Parameters: 
2023-01-26 02:00:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723634500112384[0;39m <==    Updates: 0
2023-01-26 02:00:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273723634500112384[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 02:00:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273723655496798208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:00:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723655496798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:00:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723655496798208[0;39m ==> Parameters: 
2023-01-26 02:00:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723655496798208[0;39m <==    Updates: 1
2023-01-26 02:00:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273723655496798208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:00:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273723781321723904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723781321723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723781321723904[0;39m ==> Parameters: 
2023-01-26 02:00:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723781321723904[0;39m <==    Updates: 1
2023-01-26 02:00:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273723781321723904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 02:01:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273723886179323904[0;39m 生成今日电子书快照开始
2023-01-26 02:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723886179323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723886179323904[0;39m ==> Parameters: 
2023-01-26 02:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273723886179323904[0;39m <==    Updates: 0
2023-01-26 02:01:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273723886179323904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:01:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273723907171815424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723907171815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723907171815424[0;39m ==> Parameters: 
2023-01-26 02:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273723907171815424[0;39m <==    Updates: 1
2023-01-26 02:01:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273723907171815424[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:01:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273724033000935424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724033000935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724033000935424[0;39m ==> Parameters: 
2023-01-26 02:01:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724033000935424[0;39m <==    Updates: 1
2023-01-26 02:01:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273724033000935424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:02:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273724137862729728[0;39m 生成今日电子书快照开始
2023-01-26 02:02:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724137862729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:02:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724137862729728[0;39m ==> Parameters: 
2023-01-26 02:02:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724137862729728[0;39m <==    Updates: 0
2023-01-26 02:02:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273724137862729728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:02:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273724158800695296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724158800695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724158800695296[0;39m ==> Parameters: 
2023-01-26 02:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724158800695296[0;39m <==    Updates: 1
2023-01-26 02:02:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273724158800695296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:02:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273724284659175424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724284659175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724284659175424[0;39m ==> Parameters: 
2023-01-26 02:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724284659175424[0;39m <==    Updates: 1
2023-01-26 02:02:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273724284659175424[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:03:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273724389495803904[0;39m 生成今日电子书快照开始
2023-01-26 02:03:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724389495803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:03:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724389495803904[0;39m ==> Parameters: 
2023-01-26 02:03:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724389495803904[0;39m <==    Updates: 0
2023-01-26 02:03:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273724389495803904[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 02:03:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273724410471518208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724410471518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724410471518208[0;39m ==> Parameters: 
2023-01-26 02:03:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724410471518208[0;39m <==    Updates: 1
2023-01-26 02:03:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273724410471518208[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 02:03:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273724536288055296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724536288055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724536288055296[0;39m ==> Parameters: 
2023-01-26 02:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724536288055296[0;39m <==    Updates: 1
2023-01-26 02:03:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273724536288055296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:04:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273724641154043904[0;39m 生成今日电子书快照开始
2023-01-26 02:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724641154043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724641154043904[0;39m ==> Parameters: 
2023-01-26 02:04:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724641154043904[0;39m <==    Updates: 0
2023-01-26 02:04:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273724641154043904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:04:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273724662121369600[0;39m 更新电子书下的文档数据开始
2023-01-26 02:04:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724662121369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:04:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724662121369600[0;39m ==> Parameters: 
2023-01-26 02:04:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724662121369600[0;39m <==    Updates: 1
2023-01-26 02:04:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273724662121369600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:04:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273724787979849728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724787979849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:04:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724787979849728[0;39m ==> Parameters: 
2023-01-26 02:04:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724787979849728[0;39m <==    Updates: 1
2023-01-26 02:04:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273724787979849728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273724892787118080[0;39m 生成今日电子书快照开始
2023-01-26 02:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724892787118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724892787118080[0;39m ==> Parameters: 
2023-01-26 02:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273724892787118080[0;39m <==    Updates: 0
2023-01-26 02:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273724892787118080[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 02:05:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273724913813164032[0;39m 更新电子书下的文档数据开始
2023-01-26 02:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724913813164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724913813164032[0;39m ==> Parameters: 
2023-01-26 02:05:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273724913813164032[0;39m <==    Updates: 1
2023-01-26 02:05:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273724913813164032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:05:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273725039638089728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:05:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725039638089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:05:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725039638089728[0;39m ==> Parameters: 
2023-01-26 02:05:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725039638089728[0;39m <==    Updates: 1
2023-01-26 02:05:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273725039638089728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:06:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273725144504078336[0;39m 生成今日电子书快照开始
2023-01-26 02:06:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725144504078336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:06:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725144504078336[0;39m ==> Parameters: 
2023-01-26 02:06:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725144504078336[0;39m <==    Updates: 0
2023-01-26 02:06:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273725144504078336[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 02:06:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273725165463015424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:06:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725165463015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:06:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725165463015424[0;39m ==> Parameters: 
2023-01-26 02:06:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725165463015424[0;39m <==    Updates: 1
2023-01-26 02:06:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273725165463015424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:06:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273725291292135424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725291292135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:06:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725291292135424[0;39m ==> Parameters: 
2023-01-26 02:06:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725291292135424[0;39m <==    Updates: 1
2023-01-26 02:06:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273725291292135424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:07:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273725396166512640[0;39m 生成今日电子书快照开始
2023-01-26 02:07:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725396166512640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:07:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725396166512640[0;39m ==> Parameters: 
2023-01-26 02:07:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725396166512640[0;39m <==    Updates: 0
2023-01-26 02:07:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273725396166512640[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 02:07:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273725417129644032[0;39m 更新电子书下的文档数据开始
2023-01-26 02:07:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725417129644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:07:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725417129644032[0;39m ==> Parameters: 
2023-01-26 02:07:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725417129644032[0;39m <==    Updates: 1
2023-01-26 02:07:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273725417129644032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:07:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273725542954569728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:07:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725542954569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:07:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725542954569728[0;39m ==> Parameters: 
2023-01-26 02:07:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725542954569728[0;39m <==    Updates: 1
2023-01-26 02:07:35.033 INFO  com.example.wiki.job.DocJob                       :35   [32m273725542954569728[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-26 02:08:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273725647753449472[0;39m 生成今日电子书快照开始
2023-01-26 02:08:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725647753449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:08:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725647753449472[0;39m ==> Parameters: 
2023-01-26 02:08:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725647753449472[0;39m <==    Updates: 0
2023-01-26 02:08:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273725647753449472[0;39m 生成今日电子书快照结束，耗时：21毫秒
2023-01-26 02:08:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273725668724969472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:08:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725668724969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:08:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725668724969472[0;39m ==> Parameters: 
2023-01-26 02:08:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725668724969472[0;39m <==    Updates: 1
2023-01-26 02:08:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273725668724969472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:08:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273725794608615424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:08:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725794608615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725794608615424[0;39m ==> Parameters: 
2023-01-26 02:08:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725794608615424[0;39m <==    Updates: 1
2023-01-26 02:08:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273725794608615424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:09:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273725899487186944[0;39m 生成今日电子书快照开始
2023-01-26 02:09:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725899487186944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:09:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725899487186944[0;39m ==> Parameters: 
2023-01-26 02:09:00.032 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273725899487186944[0;39m <==    Updates: 0
2023-01-26 02:09:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273725899487186944[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 02:09:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273725920425152512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:09:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725920425152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:09:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725920425152512[0;39m ==> Parameters: 
2023-01-26 02:09:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273725920425152512[0;39m <==    Updates: 1
2023-01-26 02:09:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273725920425152512[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:09:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273726046229106688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726046229106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:09:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726046229106688[0;39m ==> Parameters: 
2023-01-26 02:09:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726046229106688[0;39m <==    Updates: 1
2023-01-26 02:09:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273726046229106688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:10:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273726151078318080[0;39m 生成今日电子书快照开始
2023-01-26 02:10:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726151078318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726151078318080[0;39m ==> Parameters: 
2023-01-26 02:10:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726151078318080[0;39m <==    Updates: 0
2023-01-26 02:10:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273726151078318080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 02:10:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273726172045643776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:10:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726172045643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:10:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726172045643776[0;39m ==> Parameters: 
2023-01-26 02:10:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726172045643776[0;39m <==    Updates: 1
2023-01-26 02:10:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273726172045643776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:10:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273726297933484032[0;39m 更新电子书下的文档数据开始
2023-01-26 02:10:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726297933484032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:10:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726297933484032[0;39m ==> Parameters: 
2023-01-26 02:10:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726297933484032[0;39m <==    Updates: 1
2023-01-26 02:10:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273726297933484032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:11:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273726402740752384[0;39m 生成今日电子书快照开始
2023-01-26 02:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726402740752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:11:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726402740752384[0;39m ==> Parameters: 
2023-01-26 02:11:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726402740752384[0;39m <==    Updates: 0
2023-01-26 02:11:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273726402740752384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 02:11:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273726423766798336[0;39m 更新电子书下的文档数据开始
2023-01-26 02:11:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726423766798336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:11:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726423766798336[0;39m ==> Parameters: 
2023-01-26 02:11:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726423766798336[0;39m <==    Updates: 1
2023-01-26 02:11:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273726423766798336[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:11:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273726549545586688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:11:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726549545586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726549545586688[0;39m ==> Parameters: 
2023-01-26 02:11:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726549545586688[0;39m <==    Updates: 1
2023-01-26 02:11:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273726549545586688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:12:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273726654394798080[0;39m 生成今日电子书快照开始
2023-01-26 02:12:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726654394798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:12:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726654394798080[0;39m ==> Parameters: 
2023-01-26 02:12:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726654394798080[0;39m <==    Updates: 0
2023-01-26 02:12:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273726654394798080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 02:12:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273726675357929472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:12:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726675357929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:12:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726675357929472[0;39m ==> Parameters: 
2023-01-26 02:12:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726675357929472[0;39m <==    Updates: 1
2023-01-26 02:12:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273726675357929472[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 02:12:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273726801187049472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:12:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726801187049472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:12:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726801187049472[0;39m ==> Parameters: 
2023-01-26 02:12:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726801187049472[0;39m <==    Updates: 1
2023-01-26 02:12:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273726801187049472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:13:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273726906128535552[0;39m 生成今日电子书快照开始
2023-01-26 02:13:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726906128535552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:13:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726906128535552[0;39m ==> Parameters: 
2023-01-26 02:13:00.032 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273726906128535552[0;39m <==    Updates: 0
2023-01-26 02:13:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273726906128535552[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:13:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273726927024558080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726927024558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726927024558080[0;39m ==> Parameters: 
2023-01-26 02:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273726927024558080[0;39m <==    Updates: 1
2023-01-26 02:13:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273726927024558080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:13:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273727052870455296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727052870455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727052870455296[0;39m ==> Parameters: 
2023-01-26 02:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727052870455296[0;39m <==    Updates: 1
2023-01-26 02:13:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273727052870455296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:14:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273727157711278080[0;39m 生成今日电子书快照开始
2023-01-26 02:14:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727157711278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:14:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727157711278080[0;39m ==> Parameters: 
2023-01-26 02:14:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727157711278080[0;39m <==    Updates: 0
2023-01-26 02:14:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273727157711278080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:14:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273727178674409472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:14:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727178674409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:14:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727178674409472[0;39m ==> Parameters: 
2023-01-26 02:14:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727178674409472[0;39m <==    Updates: 1
2023-01-26 02:14:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273727178674409472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:14:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273727304503529472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:14:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727304503529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:14:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727304503529472[0;39m ==> Parameters: 
2023-01-26 02:14:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727304503529472[0;39m <==    Updates: 1
2023-01-26 02:14:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273727304503529472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:15:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273727409377906688[0;39m 生成今日电子书快照开始
2023-01-26 02:15:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727409377906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:15:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727409377906688[0;39m ==> Parameters: 
2023-01-26 02:15:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727409377906688[0;39m <==    Updates: 0
2023-01-26 02:15:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273727409377906688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:15:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273727430341038080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:15:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727430341038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:15:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727430341038080[0;39m ==> Parameters: 
2023-01-26 02:15:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727430341038080[0;39m <==    Updates: 1
2023-01-26 02:15:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273727430341038080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:15:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273727556174352384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:15:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727556174352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:15:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727556174352384[0;39m ==> Parameters: 
2023-01-26 02:15:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727556174352384[0;39m <==    Updates: 1
2023-01-26 02:15:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273727556174352384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 02:16:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273727661031952384[0;39m 生成今日电子书快照开始
2023-01-26 02:16:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727661031952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:16:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727661031952384[0;39m ==> Parameters: 
2023-01-26 02:16:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727661031952384[0;39m <==    Updates: 0
2023-01-26 02:16:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273727661031952384[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:16:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273727682003472384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:16:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727682003472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:16:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727682003472384[0;39m ==> Parameters: 
2023-01-26 02:16:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727682003472384[0;39m <==    Updates: 1
2023-01-26 02:16:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273727682003472384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:16:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273727807824203776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:16:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727807824203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:16:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727807824203776[0;39m ==> Parameters: 
2023-01-26 02:16:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727807824203776[0;39m <==    Updates: 1
2023-01-26 02:16:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273727807824203776[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:17:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273727912694386688[0;39m 生成今日电子书快照开始
2023-01-26 02:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727912694386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:17:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727912694386688[0;39m ==> Parameters: 
2023-01-26 02:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273727912694386688[0;39m <==    Updates: 0
2023-01-26 02:17:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273727912694386688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:17:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273727933657518080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727933657518080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727933657518080[0;39m ==> Parameters: 
2023-01-26 02:17:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273727933657518080[0;39m <==    Updates: 1
2023-01-26 02:17:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273727933657518080[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:17:35.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273728059549552640[0;39m 更新电子书下的文档数据开始
2023-01-26 02:17:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728059549552640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:17:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728059549552640[0;39m ==> Parameters: 
2023-01-26 02:17:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728059549552640[0;39m <==    Updates: 1
2023-01-26 02:17:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273728059549552640[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:18:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273728164352626688[0;39m 生成今日电子书快照开始
2023-01-26 02:18:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728164352626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:18:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728164352626688[0;39m ==> Parameters: 
2023-01-26 02:18:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728164352626688[0;39m <==    Updates: 0
2023-01-26 02:18:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273728164352626688[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 02:18:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273728185311563776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:18:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728185311563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:18:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728185311563776[0;39m ==> Parameters: 
2023-01-26 02:18:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728185311563776[0;39m <==    Updates: 1
2023-01-26 02:18:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273728185311563776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:18:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273728311149072384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:18:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728311149072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:18:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728311149072384[0;39m ==> Parameters: 
2023-01-26 02:18:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728311149072384[0;39m <==    Updates: 1
2023-01-26 02:18:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273728311149072384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:19:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273728416015060992[0;39m 生成今日电子书快照开始
2023-01-26 02:19:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728416015060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:19:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728416015060992[0;39m ==> Parameters: 
2023-01-26 02:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728416015060992[0;39m <==    Updates: 0
2023-01-26 02:19:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273728416015060992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:19:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273728436965609472[0;39m 更新电子书下的文档数据开始
2023-01-26 02:19:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728436965609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:19:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728436965609472[0;39m ==> Parameters: 
2023-01-26 02:19:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728436965609472[0;39m <==    Updates: 1
2023-01-26 02:19:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273728436965609472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:19:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273728562807312384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:19:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728562807312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:19:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728562807312384[0;39m ==> Parameters: 
2023-01-26 02:19:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728562807312384[0;39m <==    Updates: 1
2023-01-26 02:19:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273728562807312384[0;39m 更新电子书下的文档数据结束，耗时：18毫秒
2023-01-26 02:20:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273728667669106688[0;39m 生成今日电子书快照开始
2023-01-26 02:20:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728667669106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:20:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728667669106688[0;39m ==> Parameters: 
2023-01-26 02:20:00.033 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728667669106688[0;39m <==    Updates: 0
2023-01-26 02:20:00.034 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273728667669106688[0;39m 生成今日电子书快照结束，耗时：29毫秒
2023-01-26 02:20:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273728688628043776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:20:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728688628043776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:20:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728688628043776[0;39m ==> Parameters: 
2023-01-26 02:20:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728688628043776[0;39m <==    Updates: 1
2023-01-26 02:20:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273728688628043776[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 02:20:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273728814461358080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:20:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728814461358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728814461358080[0;39m ==> Parameters: 
2023-01-26 02:20:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728814461358080[0;39m <==    Updates: 1
2023-01-26 02:20:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273728814461358080[0;39m 更新电子书下的文档数据结束，耗时：18毫秒
2023-01-26 02:21:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273728919335735296[0;39m 生成今日电子书快照开始
2023-01-26 02:21:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728919335735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:21:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728919335735296[0;39m ==> Parameters: 
2023-01-26 02:21:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273728919335735296[0;39m <==    Updates: 0
2023-01-26 02:21:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273728919335735296[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 02:21:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273728940311449600[0;39m 更新电子书下的文档数据开始
2023-01-26 02:21:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728940311449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:21:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728940311449600[0;39m ==> Parameters: 
2023-01-26 02:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273728940311449600[0;39m <==    Updates: 1
2023-01-26 02:21:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273728940311449600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:21:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273729066127986688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:21:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729066127986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:21:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729066127986688[0;39m ==> Parameters: 
2023-01-26 02:21:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729066127986688[0;39m <==    Updates: 1
2023-01-26 02:21:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273729066127986688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:22:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273729170985586688[0;39m 生成今日电子书快照开始
2023-01-26 02:22:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729170985586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729170985586688[0;39m ==> Parameters: 
2023-01-26 02:22:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729170985586688[0;39m <==    Updates: 0
2023-01-26 02:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273729170985586688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:22:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273729191952912384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:22:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729191952912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:22:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729191952912384[0;39m ==> Parameters: 
2023-01-26 02:22:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729191952912384[0;39m <==    Updates: 1
2023-01-26 02:22:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273729191952912384[0;39m 更新电子书下的文档数据结束，耗时：9毫秒
2023-01-26 02:22:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273729317786226688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729317786226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729317786226688[0;39m ==> Parameters: 
2023-01-26 02:22:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729317786226688[0;39m <==    Updates: 1
2023-01-26 02:22:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273729317786226688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:23:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273729422648020992[0;39m 生成今日电子书快照开始
2023-01-26 02:23:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729422648020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:23:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729422648020992[0;39m ==> Parameters: 
2023-01-26 02:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729422648020992[0;39m <==    Updates: 0
2023-01-26 02:23:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273729422648020992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:23:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273729443615346688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729443615346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729443615346688[0;39m ==> Parameters: 
2023-01-26 02:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729443615346688[0;39m <==    Updates: 1
2023-01-26 02:23:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273729443615346688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:23:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273729569444466688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:23:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729569444466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:23:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729569444466688[0;39m ==> Parameters: 
2023-01-26 02:23:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729569444466688[0;39m <==    Updates: 1
2023-01-26 02:23:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273729569444466688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:24:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273729674306260992[0;39m 生成今日电子书快照开始
2023-01-26 02:24:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729674306260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:24:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729674306260992[0;39m ==> Parameters: 
2023-01-26 02:24:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729674306260992[0;39m <==    Updates: 0
2023-01-26 02:24:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273729674306260992[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 02:24:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273729695269392384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:24:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729695269392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729695269392384[0;39m ==> Parameters: 
2023-01-26 02:24:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729695269392384[0;39m <==    Updates: 1
2023-01-26 02:24:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273729695269392384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:24:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273729821106900992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729821106900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729821106900992[0;39m ==> Parameters: 
2023-01-26 02:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729821106900992[0;39m <==    Updates: 1
2023-01-26 02:24:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273729821106900992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:25:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273729925972889600[0;39m 生成今日电子书快照开始
2023-01-26 02:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729925972889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:25:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729925972889600[0;39m ==> Parameters: 
2023-01-26 02:25:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273729925972889600[0;39m <==    Updates: 0
2023-01-26 02:25:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273729925972889600[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:25:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273729946936020992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729946936020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:25:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729946936020992[0;39m ==> Parameters: 
2023-01-26 02:25:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273729946936020992[0;39m <==    Updates: 1
2023-01-26 02:25:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273729946936020992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:25:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273730072765140992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730072765140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730072765140992[0;39m ==> Parameters: 
2023-01-26 02:25:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730072765140992[0;39m <==    Updates: 1
2023-01-26 02:25:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273730072765140992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:26:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273730177605963776[0;39m 生成今日电子书快照开始
2023-01-26 02:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730177605963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:26:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730177605963776[0;39m ==> Parameters: 
2023-01-26 02:26:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730177605963776[0;39m <==    Updates: 0
2023-01-26 02:26:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273730177605963776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 02:26:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273730198585872384[0;39m 更新电子书下的文档数据开始
2023-01-26 02:26:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730198585872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:26:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730198585872384[0;39m ==> Parameters: 
2023-01-26 02:26:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730198585872384[0;39m <==    Updates: 1
2023-01-26 02:26:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273730198585872384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:26:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273730324423380992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:26:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730324423380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:26:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730324423380992[0;39m ==> Parameters: 
2023-01-26 02:26:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730324423380992[0;39m <==    Updates: 1
2023-01-26 02:26:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273730324423380992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:27:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273730429289369600[0;39m 生成今日电子书快照开始
2023-01-26 02:27:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730429289369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:27:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730429289369600[0;39m ==> Parameters: 
2023-01-26 02:27:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730429289369600[0;39m <==    Updates: 0
2023-01-26 02:27:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273730429289369600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:27:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273730450252500992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:27:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730450252500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:27:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730450252500992[0;39m ==> Parameters: 
2023-01-26 02:27:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730450252500992[0;39m <==    Updates: 1
2023-01-26 02:27:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273730450252500992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:27:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273730576077426688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:27:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730576077426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:27:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730576077426688[0;39m ==> Parameters: 
2023-01-26 02:27:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730576077426688[0;39m <==    Updates: 1
2023-01-26 02:27:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273730576077426688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:28:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273730680947609600[0;39m 生成今日电子书快照开始
2023-01-26 02:28:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730680947609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:28:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730680947609600[0;39m ==> Parameters: 
2023-01-26 02:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730680947609600[0;39m <==    Updates: 0
2023-01-26 02:28:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273730680947609600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:28:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273730701906546688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730701906546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730701906546688[0;39m ==> Parameters: 
2023-01-26 02:28:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730701906546688[0;39m <==    Updates: 1
2023-01-26 02:28:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273730701906546688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:28:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273730827748249600[0;39m 更新电子书下的文档数据开始
2023-01-26 02:28:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730827748249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:28:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730827748249600[0;39m ==> Parameters: 
2023-01-26 02:28:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730827748249600[0;39m <==    Updates: 1
2023-01-26 02:28:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273730827748249600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:29:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273730932610043904[0;39m 生成今日电子书快照开始
2023-01-26 02:29:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730932610043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:29:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730932610043904[0;39m ==> Parameters: 
2023-01-26 02:29:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273730932610043904[0;39m <==    Updates: 0
2023-01-26 02:29:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273730932610043904[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 02:29:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273730953568980992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730953568980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730953568980992[0;39m ==> Parameters: 
2023-01-26 02:29:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273730953568980992[0;39m <==    Updates: 1
2023-01-26 02:29:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273730953568980992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:29:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273731079398100992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:29:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731079398100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:29:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731079398100992[0;39m ==> Parameters: 
2023-01-26 02:29:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731079398100992[0;39m <==    Updates: 1
2023-01-26 02:29:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273731079398100992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:30:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273731184272478208[0;39m 生成今日电子书快照开始
2023-01-26 02:30:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731184272478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:30:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731184272478208[0;39m ==> Parameters: 
2023-01-26 02:30:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731184272478208[0;39m <==    Updates: 0
2023-01-26 02:30:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273731184272478208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:30:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273731205227220992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:30:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731205227220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731205227220992[0;39m ==> Parameters: 
2023-01-26 02:30:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731205227220992[0;39m <==    Updates: 1
2023-01-26 02:30:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273731205227220992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:30:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273731331056340992[0;39m 更新电子书下的文档数据开始
2023-01-26 02:30:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731331056340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:30:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731331056340992[0;39m ==> Parameters: 
2023-01-26 02:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731331056340992[0;39m <==    Updates: 1
2023-01-26 02:30:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273731331056340992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:31:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273731435926523904[0;39m 生成今日电子书快照开始
2023-01-26 02:31:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731435926523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:31:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731435926523904[0;39m ==> Parameters: 
2023-01-26 02:31:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731435926523904[0;39m <==    Updates: 0
2023-01-26 02:31:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273731435926523904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 02:31:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273731456906432512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731456906432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731456906432512[0;39m ==> Parameters: 
2023-01-26 02:31:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731456906432512[0;39m <==    Updates: 1
2023-01-26 02:31:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273731456906432512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:31:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273731582718775296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:31:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731582718775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:31:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731582718775296[0;39m ==> Parameters: 
2023-01-26 02:31:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731582718775296[0;39m <==    Updates: 1
2023-01-26 02:31:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273731582718775296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:32:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273731687597346816[0;39m 生成今日电子书快照开始
2023-01-26 02:32:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731687597346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:32:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731687597346816[0;39m ==> Parameters: 
2023-01-26 02:32:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731687597346816[0;39m <==    Updates: 0
2023-01-26 02:32:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273731687597346816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 02:32:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273731708556283904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:32:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731708556283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:32:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731708556283904[0;39m ==> Parameters: 
2023-01-26 02:32:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731708556283904[0;39m <==    Updates: 1
2023-01-26 02:32:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273731708556283904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:32:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273731834381209600[0;39m 更新电子书下的文档数据开始
2023-01-26 02:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731834381209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731834381209600[0;39m ==> Parameters: 
2023-01-26 02:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731834381209600[0;39m <==    Updates: 1
2023-01-26 02:32:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273731834381209600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:33:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273731939247198208[0;39m 生成今日电子书快照开始
2023-01-26 02:33:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731939247198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:33:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731939247198208[0;39m ==> Parameters: 
2023-01-26 02:33:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273731939247198208[0;39m <==    Updates: 0
2023-01-26 02:33:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273731939247198208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:33:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273731960210329600[0;39m 更新电子书下的文档数据开始
2023-01-26 02:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731960210329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731960210329600[0;39m ==> Parameters: 
2023-01-26 02:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273731960210329600[0;39m <==    Updates: 1
2023-01-26 02:33:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273731960210329600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:33:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273732086035255296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:33:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732086035255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:33:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732086035255296[0;39m ==> Parameters: 
2023-01-26 02:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732086035255296[0;39m <==    Updates: 1
2023-01-26 02:33:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273732086035255296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:34:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273732190909632512[0;39m 生成今日电子书快照开始
2023-01-26 02:34:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732190909632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:34:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732190909632512[0;39m ==> Parameters: 
2023-01-26 02:34:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732190909632512[0;39m <==    Updates: 0
2023-01-26 02:34:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273732190909632512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 02:34:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273732211881152512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:34:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732211881152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:34:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732211881152512[0;39m ==> Parameters: 
2023-01-26 02:34:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732211881152512[0;39m <==    Updates: 1
2023-01-26 02:34:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273732211881152512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:34:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273732337701883904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:34:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732337701883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:34:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732337701883904[0;39m ==> Parameters: 
2023-01-26 02:34:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732337701883904[0;39m <==    Updates: 1
2023-01-26 02:34:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273732337701883904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:35:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273732442576261120[0;39m 生成今日电子书快照开始
2023-01-26 02:35:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732442576261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732442576261120[0;39m ==> Parameters: 
2023-01-26 02:35:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732442576261120[0;39m <==    Updates: 0
2023-01-26 02:35:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273732442576261120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:35:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273732463522615296[0;39m 更新电子书下的文档数据开始
2023-01-26 02:35:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732463522615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:35:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732463522615296[0;39m ==> Parameters: 
2023-01-26 02:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732463522615296[0;39m <==    Updates: 1
2023-01-26 02:35:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273732463522615296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:35:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273732589364318208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732589364318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732589364318208[0;39m ==> Parameters: 
2023-01-26 02:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732589364318208[0;39m <==    Updates: 1
2023-01-26 02:35:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273732589364318208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:36:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273732694226112512[0;39m 生成今日电子书快照开始
2023-01-26 02:36:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732694226112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:36:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732694226112512[0;39m ==> Parameters: 
2023-01-26 02:36:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732694226112512[0;39m <==    Updates: 0
2023-01-26 02:36:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273732694226112512[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 02:36:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273732715189243904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:36:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732715189243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:36:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732715189243904[0;39m ==> Parameters: 
2023-01-26 02:36:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732715189243904[0;39m <==    Updates: 1
2023-01-26 02:36:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273732715189243904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:36:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273732841018363904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732841018363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:36:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732841018363904[0;39m ==> Parameters: 
2023-01-26 02:36:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732841018363904[0;39m <==    Updates: 1
2023-01-26 02:36:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273732841018363904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:37:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273732945892741120[0;39m 生成今日电子书快照开始
2023-01-26 02:37:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732945892741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:37:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732945892741120[0;39m ==> Parameters: 
2023-01-26 02:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273732945892741120[0;39m <==    Updates: 0
2023-01-26 02:37:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273732945892741120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 02:37:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273732966847483904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:37:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732966847483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:37:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732966847483904[0;39m ==> Parameters: 
2023-01-26 02:37:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273732966847483904[0;39m <==    Updates: 1
2023-01-26 02:37:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273732966847483904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:37:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273733092676603904[0;39m 更新电子书下的文档数据开始
2023-01-26 02:37:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733092676603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:37:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733092676603904[0;39m ==> Parameters: 
2023-01-26 02:37:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733092676603904[0;39m <==    Updates: 1
2023-01-26 02:37:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273733092676603904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:38:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273733197550981120[0;39m 生成今日电子书快照开始
2023-01-26 02:38:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733197550981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:38:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733197550981120[0;39m ==> Parameters: 
2023-01-26 02:38:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733197550981120[0;39m <==    Updates: 0
2023-01-26 02:38:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273733197550981120[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 02:38:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733218509918208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:38:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733218509918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:38:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733218509918208[0;39m ==> Parameters: 
2023-01-26 02:38:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733218509918208[0;39m <==    Updates: 1
2023-01-26 02:38:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273733218509918208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:38:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733344339038208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:38:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733344339038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:38:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733344339038208[0;39m ==> Parameters: 
2023-01-26 02:38:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733344339038208[0;39m <==    Updates: 1
2023-01-26 02:38:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273733344339038208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:39:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273733449200832512[0;39m 生成今日电子书快照开始
2023-01-26 02:39:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733449200832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:39:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733449200832512[0;39m ==> Parameters: 
2023-01-26 02:39:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733449200832512[0;39m <==    Updates: 0
2023-01-26 02:39:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273733449200832512[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:39:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733470168158208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:39:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733470168158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:39:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733470168158208[0;39m ==> Parameters: 
2023-01-26 02:39:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733470168158208[0;39m <==    Updates: 1
2023-01-26 02:39:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273733470168158208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:39:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733595997278208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:39:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733595997278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733595997278208[0;39m ==> Parameters: 
2023-01-26 02:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733595997278208[0;39m <==    Updates: 1
2023-01-26 02:39:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273733595997278208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:40:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273733700859072512[0;39m 生成今日电子书快照开始
2023-01-26 02:40:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733700859072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:40:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733700859072512[0;39m ==> Parameters: 
2023-01-26 02:40:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733700859072512[0;39m <==    Updates: 0
2023-01-26 02:40:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273733700859072512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:40:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733721826398208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:40:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733721826398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:40:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733721826398208[0;39m ==> Parameters: 
2023-01-26 02:40:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733721826398208[0;39m <==    Updates: 1
2023-01-26 02:40:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273733721826398208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:40:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273733847680684032[0;39m 更新电子书下的文档数据开始
2023-01-26 02:40:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733847680684032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:40:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733847680684032[0;39m ==> Parameters: 
2023-01-26 02:40:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733847680684032[0;39m <==    Updates: 1
2023-01-26 02:40:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273733847680684032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:41:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273733952529895424[0;39m 生成今日电子书快照开始
2023-01-26 02:41:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733952529895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:41:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733952529895424[0;39m ==> Parameters: 
2023-01-26 02:41:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273733952529895424[0;39m <==    Updates: 0
2023-01-26 02:41:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273733952529895424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 02:41:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273733973484638208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:41:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733973484638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:41:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733973484638208[0;39m ==> Parameters: 
2023-01-26 02:41:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273733973484638208[0;39m <==    Updates: 1
2023-01-26 02:41:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273733973484638208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:41:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273734099322146816[0;39m 更新电子书下的文档数据开始
2023-01-26 02:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734099322146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734099322146816[0;39m ==> Parameters: 
2023-01-26 02:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734099322146816[0;39m <==    Updates: 1
2023-01-26 02:41:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273734099322146816[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:42:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273734204188135424[0;39m 生成今日电子书快照开始
2023-01-26 02:42:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734204188135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:42:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734204188135424[0;39m ==> Parameters: 
2023-01-26 02:42:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734204188135424[0;39m <==    Updates: 0
2023-01-26 02:42:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273734204188135424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:42:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273734225142878208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:42:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734225142878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:42:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734225142878208[0;39m ==> Parameters: 
2023-01-26 02:42:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734225142878208[0;39m <==    Updates: 1
2023-01-26 02:42:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273734225142878208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:42:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273734350984581120[0;39m 更新电子书下的文档数据开始
2023-01-26 02:42:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734350984581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734350984581120[0;39m ==> Parameters: 
2023-01-26 02:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734350984581120[0;39m <==    Updates: 1
2023-01-26 02:42:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273734350984581120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:43:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273734455846375424[0;39m 生成今日电子书快照开始
2023-01-26 02:43:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734455846375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:43:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734455846375424[0;39m ==> Parameters: 
2023-01-26 02:43:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734455846375424[0;39m <==    Updates: 0
2023-01-26 02:43:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273734455846375424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 02:43:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273734476805312512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:43:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734476805312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:43:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734476805312512[0;39m ==> Parameters: 
2023-01-26 02:43:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734476805312512[0;39m <==    Updates: 1
2023-01-26 02:43:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273734476805312512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:43:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273734602634432512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:43:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734602634432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:43:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734602634432512[0;39m ==> Parameters: 
2023-01-26 02:43:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734602634432512[0;39m <==    Updates: 1
2023-01-26 02:43:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273734602634432512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:44:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273734707508809728[0;39m 生成今日电子书快照开始
2023-01-26 02:44:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734707508809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:44:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734707508809728[0;39m ==> Parameters: 
2023-01-26 02:44:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734707508809728[0;39m <==    Updates: 0
2023-01-26 02:44:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273734707508809728[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 02:44:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273734728463552512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:44:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734728463552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:44:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734728463552512[0;39m ==> Parameters: 
2023-01-26 02:44:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734728463552512[0;39m <==    Updates: 1
2023-01-26 02:44:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273734728463552512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:44:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273734854296866816[0;39m 更新电子书下的文档数据开始
2023-01-26 02:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734854296866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734854296866816[0;39m ==> Parameters: 
2023-01-26 02:44:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734854296866816[0;39m <==    Updates: 1
2023-01-26 02:44:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273734854296866816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:45:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273734959162855424[0;39m 生成今日电子书快照开始
2023-01-26 02:45:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734959162855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:45:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734959162855424[0;39m ==> Parameters: 
2023-01-26 02:45:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273734959162855424[0;39m <==    Updates: 0
2023-01-26 02:45:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273734959162855424[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 02:45:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273734980121792512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:45:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734980121792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:45:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734980121792512[0;39m ==> Parameters: 
2023-01-26 02:45:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273734980121792512[0;39m <==    Updates: 1
2023-01-26 02:45:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273734980121792512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:45:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273735105955106816[0;39m 更新电子书下的文档数据开始
2023-01-26 02:45:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735105955106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:45:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735105955106816[0;39m ==> Parameters: 
2023-01-26 02:45:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735105955106816[0;39m <==    Updates: 1
2023-01-26 02:45:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273735105955106816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:46:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273735210829484032[0;39m 生成今日电子书快照开始
2023-01-26 02:46:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735210829484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:46:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735210829484032[0;39m ==> Parameters: 
2023-01-26 02:46:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735210829484032[0;39m <==    Updates: 0
2023-01-26 02:46:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273735210829484032[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 02:46:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273735231792615424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:46:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735231792615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:46:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735231792615424[0;39m ==> Parameters: 
2023-01-26 02:46:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735231792615424[0;39m <==    Updates: 1
2023-01-26 02:46:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273735231792615424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:46:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273735357609152512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:46:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735357609152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:46:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735357609152512[0;39m ==> Parameters: 
2023-01-26 02:46:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735357609152512[0;39m <==    Updates: 1
2023-01-26 02:46:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273735357609152512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:47:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273735462483529728[0;39m 生成今日电子书快照开始
2023-01-26 02:47:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735462483529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:47:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735462483529728[0;39m ==> Parameters: 
2023-01-26 02:47:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735462483529728[0;39m <==    Updates: 0
2023-01-26 02:47:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273735462483529728[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 02:47:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273735483459244032[0;39m 更新电子书下的文档数据开始
2023-01-26 02:47:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735483459244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:47:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735483459244032[0;39m ==> Parameters: 
2023-01-26 02:47:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735483459244032[0;39m <==    Updates: 1
2023-01-26 02:47:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273735483459244032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:47:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273735609267392512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735609267392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735609267392512[0;39m ==> Parameters: 
2023-01-26 02:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735609267392512[0;39m <==    Updates: 1
2023-01-26 02:47:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273735609267392512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:48:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273735714145964032[0;39m 生成今日电子书快照开始
2023-01-26 02:48:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735714145964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:48:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735714145964032[0;39m ==> Parameters: 
2023-01-26 02:48:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735714145964032[0;39m <==    Updates: 0
2023-01-26 02:48:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273735714145964032[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:48:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273735735113289728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:48:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735735113289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:48:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735735113289728[0;39m ==> Parameters: 
2023-01-26 02:48:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735735113289728[0;39m <==    Updates: 1
2023-01-26 02:48:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273735735113289728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:48:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273735860934021120[0;39m 更新电子书下的文档数据开始
2023-01-26 02:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735860934021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:48:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735860934021120[0;39m ==> Parameters: 
2023-01-26 02:48:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735860934021120[0;39m <==    Updates: 1
2023-01-26 02:48:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273735860934021120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:49:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273735965749678080[0;39m 生成今日电子书快照开始
2023-01-26 02:49:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735965749678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:49:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735965749678080[0;39m ==> Parameters: 
2023-01-26 02:49:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273735965749678080[0;39m <==    Updates: 0
2023-01-26 02:49:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273735965749678080[0;39m 生成今日电子书快照结束，耗时：25毫秒
2023-01-26 02:49:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273735986771529728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:49:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735986771529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:49:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735986771529728[0;39m ==> Parameters: 
2023-01-26 02:49:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273735986771529728[0;39m <==    Updates: 1
2023-01-26 02:49:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273735986771529728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:49:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273736112596455424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:49:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736112596455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:49:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736112596455424[0;39m ==> Parameters: 
2023-01-26 02:49:35.031 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736112596455424[0;39m <==    Updates: 1
2023-01-26 02:49:35.031 INFO  com.example.wiki.job.DocJob                       :35   [32m273736112596455424[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-26 02:50:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273736217399529472[0;39m 生成今日电子书快照开始
2023-01-26 02:50:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736217399529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:50:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736217399529472[0;39m ==> Parameters: 
2023-01-26 02:50:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736217399529472[0;39m <==    Updates: 0
2023-01-26 02:50:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273736217399529472[0;39m 生成今日电子书快照结束，耗时：22毫秒
2023-01-26 02:50:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273736238375243776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:50:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736238375243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:50:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736238375243776[0;39m ==> Parameters: 
2023-01-26 02:50:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736238375243776[0;39m <==    Updates: 1
2023-01-26 02:50:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273736238375243776[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 02:50:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273736364250501120[0;39m 更新电子书下的文档数据开始
2023-01-26 02:50:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736364250501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:50:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736364250501120[0;39m ==> Parameters: 
2023-01-26 02:50:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736364250501120[0;39m <==    Updates: 1
2023-01-26 02:50:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273736364250501120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:51:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273736469066158080[0;39m 生成今日电子书快照开始
2023-01-26 02:51:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736469066158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:51:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736469066158080[0;39m ==> Parameters: 
2023-01-26 02:51:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736469066158080[0;39m <==    Updates: 0
2023-01-26 02:51:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273736469066158080[0;39m 生成今日电子书快照结束，耗时：21毫秒
2023-01-26 02:51:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273736490067038208[0;39m 更新电子书下的文档数据开始
2023-01-26 02:51:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736490067038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:51:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736490067038208[0;39m ==> Parameters: 
2023-01-26 02:51:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736490067038208[0;39m <==    Updates: 1
2023-01-26 02:51:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273736490067038208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:51:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273736615904546816[0;39m 更新电子书下的文档数据开始
2023-01-26 02:51:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736615904546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:51:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736615904546816[0;39m ==> Parameters: 
2023-01-26 02:51:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736615904546816[0;39m <==    Updates: 1
2023-01-26 02:51:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273736615904546816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:52:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273736720783118336[0;39m 生成今日电子书快照开始
2023-01-26 02:52:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736720783118336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:52:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736720783118336[0;39m ==> Parameters: 
2023-01-26 02:52:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736720783118336[0;39m <==    Updates: 0
2023-01-26 02:52:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273736720783118336[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 02:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273736741746249728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:52:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736741746249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736741746249728[0;39m ==> Parameters: 
2023-01-26 02:52:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736741746249728[0;39m <==    Updates: 1
2023-01-26 02:52:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273736741746249728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:52:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273736867566981120[0;39m 更新电子书下的文档数据开始
2023-01-26 02:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736867566981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736867566981120[0;39m ==> Parameters: 
2023-01-26 02:52:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736867566981120[0;39m <==    Updates: 1
2023-01-26 02:52:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273736867566981120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:53:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273736972441358336[0;39m 生成今日电子书快照开始
2023-01-26 02:53:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736972441358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:53:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736972441358336[0;39m ==> Parameters: 
2023-01-26 02:53:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273736972441358336[0;39m <==    Updates: 0
2023-01-26 02:53:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273736972441358336[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:53:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273736993349963776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:53:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736993349963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:53:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736993349963776[0;39m ==> Parameters: 
2023-01-26 02:53:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273736993349963776[0;39m <==    Updates: 1
2023-01-26 02:53:05.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273736993349963776[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:53:35.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273737119246192640[0;39m 更新电子书下的文档数据开始
2023-01-26 02:53:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737119246192640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:53:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737119246192640[0;39m ==> Parameters: 
2023-01-26 02:53:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737119246192640[0;39m <==    Updates: 1
2023-01-26 02:53:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273737119246192640[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 02:54:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273737224036683776[0;39m 生成今日电子书快照开始
2023-01-26 02:54:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737224036683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:54:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737224036683776[0;39m ==> Parameters: 
2023-01-26 02:54:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737224036683776[0;39m <==    Updates: 0
2023-01-26 02:54:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273737224036683776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:54:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273737245045952512[0;39m 更新电子书下的文档数据开始
2023-01-26 02:54:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737245045952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:54:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737245045952512[0;39m ==> Parameters: 
2023-01-26 02:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737245045952512[0;39m <==    Updates: 1
2023-01-26 02:54:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273737245045952512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:54:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273737370887655424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:54:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737370887655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:54:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737370887655424[0;39m ==> Parameters: 
2023-01-26 02:54:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737370887655424[0;39m <==    Updates: 1
2023-01-26 02:54:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273737370887655424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 02:55:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273737475699118080[0;39m 生成今日电子书快照开始
2023-01-26 02:55:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737475699118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:55:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737475699118080[0;39m ==> Parameters: 
2023-01-26 02:55:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737475699118080[0;39m <==    Updates: 0
2023-01-26 02:55:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273737475699118080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 02:55:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273737496720969728[0;39m 更新电子书下的文档数据开始
2023-01-26 02:55:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737496720969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:55:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737496720969728[0;39m ==> Parameters: 
2023-01-26 02:55:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737496720969728[0;39m <==    Updates: 1
2023-01-26 02:55:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273737496720969728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 02:55:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273737622495563776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:55:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737622495563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:55:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737622495563776[0;39m ==> Parameters: 
2023-01-26 02:55:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737622495563776[0;39m <==    Updates: 1
2023-01-26 02:55:35.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273737622495563776[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:56:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273737727348969472[0;39m 生成今日电子书快照开始
2023-01-26 02:56:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737727348969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:56:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737727348969472[0;39m ==> Parameters: 
2023-01-26 02:56:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737727348969472[0;39m <==    Updates: 0
2023-01-26 02:56:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273737727348969472[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 02:56:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273737748391792640[0;39m 更新电子书下的文档数据开始
2023-01-26 02:56:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737748391792640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:56:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737748391792640[0;39m ==> Parameters: 
2023-01-26 02:56:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737748391792640[0;39m <==    Updates: 1
2023-01-26 02:56:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273737748391792640[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:56:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273737874204135424[0;39m 更新电子书下的文档数据开始
2023-01-26 02:56:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737874204135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:56:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737874204135424[0;39m ==> Parameters: 
2023-01-26 02:56:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737874204135424[0;39m <==    Updates: 1
2023-01-26 02:56:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273737874204135424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:57:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273737979007209472[0;39m 生成今日电子书快照开始
2023-01-26 02:57:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737979007209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:57:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737979007209472[0;39m ==> Parameters: 
2023-01-26 02:57:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273737979007209472[0;39m <==    Updates: 0
2023-01-26 02:57:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273737979007209472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 02:57:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273737999995506688[0;39m 更新电子书下的文档数据开始
2023-01-26 02:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737999995506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737999995506688[0;39m ==> Parameters: 
2023-01-26 02:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273737999995506688[0;39m <==    Updates: 1
2023-01-26 02:57:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273737999995506688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 02:57:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273738125816238080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:57:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738125816238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:57:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738125816238080[0;39m ==> Parameters: 
2023-01-26 02:57:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738125816238080[0;39m <==    Updates: 1
2023-01-26 02:57:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273738125816238080[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 02:58:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273738230678032384[0;39m 生成今日电子书快照开始
2023-01-26 02:58:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738230678032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:58:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738230678032384[0;39m ==> Parameters: 
2023-01-26 02:58:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738230678032384[0;39m <==    Updates: 0
2023-01-26 02:58:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273738230678032384[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 02:58:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273738251704078336[0;39m 更新电子书下的文档数据开始
2023-01-26 02:58:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738251704078336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:58:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738251704078336[0;39m ==> Parameters: 
2023-01-26 02:58:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738251704078336[0;39m <==    Updates: 1
2023-01-26 02:58:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273738251704078336[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:58:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273738377474478080[0;39m 更新电子书下的文档数据开始
2023-01-26 02:58:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738377474478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:58:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738377474478080[0;39m ==> Parameters: 
2023-01-26 02:58:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738377474478080[0;39m <==    Updates: 1
2023-01-26 02:58:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273738377474478080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 02:59:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273738482332078080[0;39m 生成今日电子书快照开始
2023-01-26 02:59:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738482332078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 02:59:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738482332078080[0;39m ==> Parameters: 
2023-01-26 02:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738482332078080[0;39m <==    Updates: 0
2023-01-26 02:59:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273738482332078080[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 02:59:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273738503366512640[0;39m 更新电子书下的文档数据开始
2023-01-26 02:59:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738503366512640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:59:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738503366512640[0;39m ==> Parameters: 
2023-01-26 02:59:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738503366512640[0;39m <==    Updates: 1
2023-01-26 02:59:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273738503366512640[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 02:59:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273738629128523776[0;39m 更新电子书下的文档数据开始
2023-01-26 02:59:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738629128523776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 02:59:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738629128523776[0;39m ==> Parameters: 
2023-01-26 02:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738629128523776[0;39m <==    Updates: 1
2023-01-26 02:59:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273738629128523776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:00:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273738733990318080[0;39m 生成今日电子书快照开始
2023-01-26 03:00:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738733990318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:00:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738733990318080[0;39m ==> Parameters: 
2023-01-26 03:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738733990318080[0;39m <==    Updates: 0
2023-01-26 03:00:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273738733990318080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:00:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273738755012169728[0;39m 更新电子书下的文档数据开始
2023-01-26 03:00:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738755012169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:00:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738755012169728[0;39m ==> Parameters: 
2023-01-26 03:00:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738755012169728[0;39m <==    Updates: 1
2023-01-26 03:00:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273738755012169728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:00:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273738880782569472[0;39m 更新电子书下的文档数据开始
2023-01-26 03:00:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738880782569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:00:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738880782569472[0;39m ==> Parameters: 
2023-01-26 03:00:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273738880782569472[0;39m <==    Updates: 1
2023-01-26 03:00:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273738880782569472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:01:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273738985661140992[0;39m 生成今日电子书快照开始
2023-01-26 03:01:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738985661140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738985661140992[0;39m ==> Parameters: 
2023-01-26 03:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273738985661140992[0;39m <==    Updates: 0
2023-01-26 03:01:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273738985661140992[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:01:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273739006678798336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:01:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739006678798336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:01:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739006678798336[0;39m ==> Parameters: 
2023-01-26 03:01:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739006678798336[0;39m <==    Updates: 1
2023-01-26 03:01:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273739006678798336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:01:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273739132440809472[0;39m 更新电子书下的文档数据开始
2023-01-26 03:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739132440809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739132440809472[0;39m ==> Parameters: 
2023-01-26 03:01:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739132440809472[0;39m <==    Updates: 1
2023-01-26 03:01:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273739132440809472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:02:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273739237315186688[0;39m 生成今日电子书快照开始
2023-01-26 03:02:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739237315186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:02:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739237315186688[0;39m ==> Parameters: 
2023-01-26 03:02:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739237315186688[0;39m <==    Updates: 0
2023-01-26 03:02:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273739237315186688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:02:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273739258282512384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:02:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739258282512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:02:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739258282512384[0;39m ==> Parameters: 
2023-01-26 03:02:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739258282512384[0;39m <==    Updates: 1
2023-01-26 03:02:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273739258282512384[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:02:35.020 INFO  com.example.wiki.job.DocJob                       :32   [32m273739384178741248[0;39m 更新电子书下的文档数据开始
2023-01-26 03:02:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739384178741248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:02:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739384178741248[0;39m ==> Parameters: 
2023-01-26 03:02:35.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739384178741248[0;39m <==    Updates: 1
2023-01-26 03:02:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273739384178741248[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:03:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273739488977620992[0;39m 生成今日电子书快照开始
2023-01-26 03:03:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739488977620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:03:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739488977620992[0;39m ==> Parameters: 
2023-01-26 03:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739488977620992[0;39m <==    Updates: 0
2023-01-26 03:03:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273739488977620992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:03:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273739509982695424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:03:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739509982695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:03:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739509982695424[0;39m ==> Parameters: 
2023-01-26 03:03:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739509982695424[0;39m <==    Updates: 1
2023-01-26 03:03:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273739509982695424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:03:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273739635757289472[0;39m 更新电子书下的文档数据开始
2023-01-26 03:03:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739635757289472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:03:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739635757289472[0;39m ==> Parameters: 
2023-01-26 03:03:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739635757289472[0;39m <==    Updates: 1
2023-01-26 03:03:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273739635757289472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:04:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273739740640055296[0;39m 生成今日电子书快照开始
2023-01-26 03:04:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739740640055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:04:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739740640055296[0;39m ==> Parameters: 
2023-01-26 03:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739740640055296[0;39m <==    Updates: 0
2023-01-26 03:04:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273739740640055296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 03:04:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273739761611575296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:04:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739761611575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:04:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739761611575296[0;39m ==> Parameters: 
2023-01-26 03:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739761611575296[0;39m <==    Updates: 1
2023-01-26 03:04:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273739761611575296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:04:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273739887423918080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:04:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739887423918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:04:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739887423918080[0;39m ==> Parameters: 
2023-01-26 03:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273739887423918080[0;39m <==    Updates: 1
2023-01-26 03:04:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273739887423918080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:05:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273739992289906688[0;39m 生成今日电子书快照开始
2023-01-26 03:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739992289906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:05:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739992289906688[0;39m ==> Parameters: 
2023-01-26 03:05:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273739992289906688[0;39m <==    Updates: 0
2023-01-26 03:05:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273739992289906688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:05:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273740013253038080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:05:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740013253038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:05:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740013253038080[0;39m ==> Parameters: 
2023-01-26 03:05:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740013253038080[0;39m <==    Updates: 1
2023-01-26 03:05:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273740013253038080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:05:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273740139140878336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:05:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740139140878336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:05:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740139140878336[0;39m ==> Parameters: 
2023-01-26 03:05:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740139140878336[0;39m <==    Updates: 1
2023-01-26 03:05:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273740139140878336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:06:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273740243956535296[0;39m 生成今日电子书快照开始
2023-01-26 03:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740243956535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740243956535296[0;39m ==> Parameters: 
2023-01-26 03:06:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740243956535296[0;39m <==    Updates: 0
2023-01-26 03:06:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273740243956535296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:06:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273740264915472384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:06:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740264915472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:06:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740264915472384[0;39m ==> Parameters: 
2023-01-26 03:06:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740264915472384[0;39m <==    Updates: 1
2023-01-26 03:06:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273740264915472384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:06:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273740390740398080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740390740398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740390740398080[0;39m ==> Parameters: 
2023-01-26 03:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740390740398080[0;39m <==    Updates: 1
2023-01-26 03:06:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273740390740398080[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:07:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273740495614775296[0;39m 生成今日电子书快照开始
2023-01-26 03:07:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740495614775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:07:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740495614775296[0;39m ==> Parameters: 
2023-01-26 03:07:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740495614775296[0;39m <==    Updates: 0
2023-01-26 03:07:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273740495614775296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:07:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273740516573712384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740516573712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740516573712384[0;39m ==> Parameters: 
2023-01-26 03:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740516573712384[0;39m <==    Updates: 1
2023-01-26 03:07:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273740516573712384[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:07:35.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273740642465746944[0;39m 更新电子书下的文档数据开始
2023-01-26 03:07:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740642465746944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:07:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740642465746944[0;39m ==> Parameters: 
2023-01-26 03:07:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740642465746944[0;39m <==    Updates: 1
2023-01-26 03:07:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273740642465746944[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:08:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273740747273015296[0;39m 生成今日电子书快照开始
2023-01-26 03:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740747273015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740747273015296[0;39m ==> Parameters: 
2023-01-26 03:08:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740747273015296[0;39m <==    Updates: 0
2023-01-26 03:08:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273740747273015296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:08:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273740768231952384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:08:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740768231952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:08:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740768231952384[0;39m ==> Parameters: 
2023-01-26 03:08:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740768231952384[0;39m <==    Updates: 1
2023-01-26 03:08:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273740768231952384[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:08:35.022 INFO  com.example.wiki.job.DocJob                       :32   [32m273740894136569856[0;39m 更新电子书下的文档数据开始
2023-01-26 03:08:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740894136569856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:08:35.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740894136569856[0;39m ==> Parameters: 
2023-01-26 03:08:35.026 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273740894136569856[0;39m <==    Updates: 1
2023-01-26 03:08:35.027 INFO  com.example.wiki.job.DocJob                       :35   [32m273740894136569856[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:09:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273740998927060992[0;39m 生成今日电子书快照开始
2023-01-26 03:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740998927060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:09:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740998927060992[0;39m ==> Parameters: 
2023-01-26 03:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273740998927060992[0;39m <==    Updates: 0
2023-01-26 03:09:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273740998927060992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:09:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273741019890192384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741019890192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741019890192384[0;39m ==> Parameters: 
2023-01-26 03:09:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741019890192384[0;39m <==    Updates: 1
2023-01-26 03:09:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273741019890192384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:09:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273741145719312384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:09:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741145719312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741145719312384[0;39m ==> Parameters: 
2023-01-26 03:09:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741145719312384[0;39m <==    Updates: 1
2023-01-26 03:09:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273741145719312384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:10:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273741250576912384[0;39m 生成今日电子书快照开始
2023-01-26 03:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741250576912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741250576912384[0;39m ==> Parameters: 
2023-01-26 03:10:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741250576912384[0;39m <==    Updates: 0
2023-01-26 03:10:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273741250576912384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:10:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273741271548432384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:10:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741271548432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:10:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741271548432384[0;39m ==> Parameters: 
2023-01-26 03:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741271548432384[0;39m <==    Updates: 1
2023-01-26 03:10:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273741271548432384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:10:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273741397381746688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:10:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741397381746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:10:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741397381746688[0;39m ==> Parameters: 
2023-01-26 03:10:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741397381746688[0;39m <==    Updates: 1
2023-01-26 03:10:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273741397381746688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:11:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273741502247735296[0;39m 生成今日电子书快照开始
2023-01-26 03:11:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741502247735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:11:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741502247735296[0;39m ==> Parameters: 
2023-01-26 03:11:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741502247735296[0;39m <==    Updates: 0
2023-01-26 03:11:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273741502247735296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:11:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273741523210866688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:11:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741523210866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:11:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741523210866688[0;39m ==> Parameters: 
2023-01-26 03:11:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741523210866688[0;39m <==    Updates: 1
2023-01-26 03:11:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273741523210866688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:11:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273741649039986688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741649039986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741649039986688[0;39m ==> Parameters: 
2023-01-26 03:11:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741649039986688[0;39m <==    Updates: 1
2023-01-26 03:11:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273741649039986688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:12:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273741753910169600[0;39m 生成今日电子书快照开始
2023-01-26 03:12:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741753910169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:12:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741753910169600[0;39m ==> Parameters: 
2023-01-26 03:12:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273741753910169600[0;39m <==    Updates: 0
2023-01-26 03:12:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273741753910169600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:12:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273741774869106688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741774869106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741774869106688[0;39m ==> Parameters: 
2023-01-26 03:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741774869106688[0;39m <==    Updates: 1
2023-01-26 03:12:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273741774869106688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:12:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273741900702420992[0;39m 更新电子书下的文档数据开始
2023-01-26 03:12:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741900702420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:12:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741900702420992[0;39m ==> Parameters: 
2023-01-26 03:12:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273741900702420992[0;39m <==    Updates: 1
2023-01-26 03:12:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273741900702420992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:13:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273742005560020992[0;39m 生成今日电子书快照开始
2023-01-26 03:13:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742005560020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:13:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742005560020992[0;39m ==> Parameters: 
2023-01-26 03:13:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742005560020992[0;39m <==    Updates: 0
2023-01-26 03:13:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273742005560020992[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 03:13:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273742026518958080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742026518958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742026518958080[0;39m ==> Parameters: 
2023-01-26 03:13:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742026518958080[0;39m <==    Updates: 1
2023-01-26 03:13:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273742026518958080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:13:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273742152356466688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742152356466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742152356466688[0;39m ==> Parameters: 
2023-01-26 03:13:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742152356466688[0;39m <==    Updates: 1
2023-01-26 03:13:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273742152356466688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:14:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273742257230843904[0;39m 生成今日电子书快照开始
2023-01-26 03:14:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742257230843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:14:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742257230843904[0;39m ==> Parameters: 
2023-01-26 03:14:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742257230843904[0;39m <==    Updates: 0
2023-01-26 03:14:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273742257230843904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:14:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273742278177198080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:14:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742278177198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:14:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742278177198080[0;39m ==> Parameters: 
2023-01-26 03:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742278177198080[0;39m <==    Updates: 1
2023-01-26 03:14:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273742278177198080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:14:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273742404023095296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742404023095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742404023095296[0;39m ==> Parameters: 
2023-01-26 03:14:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742404023095296[0;39m <==    Updates: 1
2023-01-26 03:14:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273742404023095296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:15:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273742508884889600[0;39m 生成今日电子书快照开始
2023-01-26 03:15:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742508884889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:15:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742508884889600[0;39m ==> Parameters: 
2023-01-26 03:15:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742508884889600[0;39m <==    Updates: 0
2023-01-26 03:15:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273742508884889600[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 03:15:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273742529848020992[0;39m 更新电子书下的文档数据开始
2023-01-26 03:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742529848020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742529848020992[0;39m ==> Parameters: 
2023-01-26 03:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742529848020992[0;39m <==    Updates: 1
2023-01-26 03:15:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273742529848020992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:15:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273742655685529600[0;39m 更新电子书下的文档数据开始
2023-01-26 03:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742655685529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:15:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742655685529600[0;39m ==> Parameters: 
2023-01-26 03:15:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742655685529600[0;39m <==    Updates: 1
2023-01-26 03:15:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273742655685529600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:16:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273742760547323904[0;39m 生成今日电子书快照开始
2023-01-26 03:16:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742760547323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:16:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742760547323904[0;39m ==> Parameters: 
2023-01-26 03:16:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273742760547323904[0;39m <==    Updates: 0
2023-01-26 03:16:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273742760547323904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:16:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273742781510455296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:16:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742781510455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:16:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742781510455296[0;39m ==> Parameters: 
2023-01-26 03:16:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742781510455296[0;39m <==    Updates: 1
2023-01-26 03:16:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273742781510455296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:16:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273742907339575296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:16:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742907339575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:16:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742907339575296[0;39m ==> Parameters: 
2023-01-26 03:16:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273742907339575296[0;39m <==    Updates: 1
2023-01-26 03:16:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273742907339575296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:17:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273743012209758208[0;39m 生成今日电子书快照开始
2023-01-26 03:17:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743012209758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743012209758208[0;39m ==> Parameters: 
2023-01-26 03:17:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743012209758208[0;39m <==    Updates: 0
2023-01-26 03:17:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273743012209758208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:17:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273743033168695296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:17:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743033168695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:17:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743033168695296[0;39m ==> Parameters: 
2023-01-26 03:17:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743033168695296[0;39m <==    Updates: 1
2023-01-26 03:17:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273743033168695296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:17:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273743158985232384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:17:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743158985232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:17:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743158985232384[0;39m ==> Parameters: 
2023-01-26 03:17:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743158985232384[0;39m <==    Updates: 1
2023-01-26 03:17:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273743158985232384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:18:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273743263872192512[0;39m 生成今日电子书快照开始
2023-01-26 03:18:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743263872192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743263872192512[0;39m ==> Parameters: 
2023-01-26 03:18:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743263872192512[0;39m <==    Updates: 0
2023-01-26 03:18:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273743263872192512[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 03:18:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273743284826935296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743284826935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743284826935296[0;39m ==> Parameters: 
2023-01-26 03:18:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743284826935296[0;39m <==    Updates: 1
2023-01-26 03:18:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273743284826935296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:18:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273743410664443904[0;39m 更新电子书下的文档数据开始
2023-01-26 03:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743410664443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743410664443904[0;39m ==> Parameters: 
2023-01-26 03:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743410664443904[0;39m <==    Updates: 1
2023-01-26 03:18:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273743410664443904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:19:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273743515526238208[0;39m 生成今日电子书快照开始
2023-01-26 03:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743515526238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:19:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743515526238208[0;39m ==> Parameters: 
2023-01-26 03:19:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743515526238208[0;39m <==    Updates: 0
2023-01-26 03:19:00.033 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273743515526238208[0;39m 生成今日电子书快照结束，耗时：22毫秒
2023-01-26 03:19:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273743536485175296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:19:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743536485175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:19:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743536485175296[0;39m ==> Parameters: 
2023-01-26 03:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743536485175296[0;39m <==    Updates: 1
2023-01-26 03:19:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273743536485175296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:19:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273743662305906688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:19:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743662305906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:19:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743662305906688[0;39m ==> Parameters: 
2023-01-26 03:19:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743662305906688[0;39m <==    Updates: 1
2023-01-26 03:19:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273743662305906688[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 03:20:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273743767188672512[0;39m 生成今日电子书快照开始
2023-01-26 03:20:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743767188672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:20:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743767188672512[0;39m ==> Parameters: 
2023-01-26 03:20:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273743767188672512[0;39m <==    Updates: 0
2023-01-26 03:20:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273743767188672512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:20:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273743788155998208[0;39m 更新电子书下的文档数据开始
2023-01-26 03:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743788155998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743788155998208[0;39m ==> Parameters: 
2023-01-26 03:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743788155998208[0;39m <==    Updates: 1
2023-01-26 03:20:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273743788155998208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:20:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273743913993506816[0;39m 更新电子书下的文档数据开始
2023-01-26 03:20:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743913993506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:20:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743913993506816[0;39m ==> Parameters: 
2023-01-26 03:20:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273743913993506816[0;39m <==    Updates: 1
2023-01-26 03:20:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273743913993506816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:21:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273744018851106816[0;39m 生成今日电子书快照开始
2023-01-26 03:21:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744018851106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:21:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744018851106816[0;39m ==> Parameters: 
2023-01-26 03:21:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744018851106816[0;39m <==    Updates: 0
2023-01-26 03:21:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273744018851106816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:21:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273744039805849600[0;39m 更新电子书下的文档数据开始
2023-01-26 03:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744039805849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:21:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744039805849600[0;39m ==> Parameters: 
2023-01-26 03:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744039805849600[0;39m <==    Updates: 1
2023-01-26 03:21:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273744039805849600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:21:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273744165639163904[0;39m 更新电子书下的文档数据开始
2023-01-26 03:21:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744165639163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:21:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744165639163904[0;39m ==> Parameters: 
2023-01-26 03:21:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744165639163904[0;39m <==    Updates: 1
2023-01-26 03:21:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273744165639163904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:22:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273744270505152512[0;39m 生成今日电子书快照开始
2023-01-26 03:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744270505152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744270505152512[0;39m ==> Parameters: 
2023-01-26 03:22:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744270505152512[0;39m <==    Updates: 0
2023-01-26 03:22:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273744270505152512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:22:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273744291472478208[0;39m 更新电子书下的文档数据开始
2023-01-26 03:22:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744291472478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:22:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744291472478208[0;39m ==> Parameters: 
2023-01-26 03:22:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744291472478208[0;39m <==    Updates: 1
2023-01-26 03:22:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273744291472478208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:22:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273744417272238080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744417272238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:22:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744417272238080[0;39m ==> Parameters: 
2023-01-26 03:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744417272238080[0;39m <==    Updates: 1
2023-01-26 03:22:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273744417272238080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:23:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273744522150809600[0;39m 生成今日电子书快照开始
2023-01-26 03:23:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744522150809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:23:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744522150809600[0;39m ==> Parameters: 
2023-01-26 03:23:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744522150809600[0;39m <==    Updates: 0
2023-01-26 03:23:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273744522150809600[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 03:23:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273744543134912512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:23:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744543134912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:23:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744543134912512[0;39m ==> Parameters: 
2023-01-26 03:23:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744543134912512[0;39m <==    Updates: 1
2023-01-26 03:23:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273744543134912512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:23:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273744668964032512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744668964032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:23:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744668964032512[0;39m ==> Parameters: 
2023-01-26 03:23:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744668964032512[0;39m <==    Updates: 1
2023-01-26 03:23:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273744668964032512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:24:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273744773825826816[0;39m 生成今日电子书快照开始
2023-01-26 03:24:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744773825826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:24:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744773825826816[0;39m ==> Parameters: 
2023-01-26 03:24:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273744773825826816[0;39m <==    Updates: 0
2023-01-26 03:24:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273744773825826816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:24:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273744794780569600[0;39m 更新电子书下的文档数据开始
2023-01-26 03:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744794780569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:24:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744794780569600[0;39m ==> Parameters: 
2023-01-26 03:24:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744794780569600[0;39m <==    Updates: 1
2023-01-26 03:24:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273744794780569600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:24:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273744920618078208[0;39m 更新电子书下的文档数据开始
2023-01-26 03:24:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744920618078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:24:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744920618078208[0;39m ==> Parameters: 
2023-01-26 03:24:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273744920618078208[0;39m <==    Updates: 1
2023-01-26 03:24:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273744920618078208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:25:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273745025475678208[0;39m 生成今日电子书快照开始
2023-01-26 03:25:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745025475678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:25:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745025475678208[0;39m ==> Parameters: 
2023-01-26 03:25:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745025475678208[0;39m <==    Updates: 0
2023-01-26 03:25:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273745025475678208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:25:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273745046447198208[0;39m 更新电子书下的文档数据开始
2023-01-26 03:25:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745046447198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:25:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745046447198208[0;39m ==> Parameters: 
2023-01-26 03:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745046447198208[0;39m <==    Updates: 1
2023-01-26 03:25:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273745046447198208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:25:35.023 INFO  com.example.wiki.job.DocJob                       :32   [32m273745172330844160[0;39m 更新电子书下的文档数据开始
2023-01-26 03:25:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745172330844160[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:25:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745172330844160[0;39m ==> Parameters: 
2023-01-26 03:25:35.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745172330844160[0;39m <==    Updates: 1
2023-01-26 03:25:35.028 INFO  com.example.wiki.job.DocJob                       :35   [32m273745172330844160[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:26:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273745277146501120[0;39m 生成今日电子书快照开始
2023-01-26 03:26:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745277146501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:26:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745277146501120[0;39m ==> Parameters: 
2023-01-26 03:26:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745277146501120[0;39m <==    Updates: 0
2023-01-26 03:26:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273745277146501120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:26:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273745298109632512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:26:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745298109632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:26:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745298109632512[0;39m ==> Parameters: 
2023-01-26 03:26:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745298109632512[0;39m <==    Updates: 1
2023-01-26 03:26:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273745298109632512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:26:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273745423938752512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:26:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745423938752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:26:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745423938752512[0;39m ==> Parameters: 
2023-01-26 03:26:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745423938752512[0;39m <==    Updates: 1
2023-01-26 03:26:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273745423938752512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:27:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273745528804741120[0;39m 生成今日电子书快照开始
2023-01-26 03:27:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745528804741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:27:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745528804741120[0;39m ==> Parameters: 
2023-01-26 03:27:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745528804741120[0;39m <==    Updates: 0
2023-01-26 03:27:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273745528804741120[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 03:27:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273745549776261120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745549776261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745549776261120[0;39m ==> Parameters: 
2023-01-26 03:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745549776261120[0;39m <==    Updates: 1
2023-01-26 03:27:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273745549776261120[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:27:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273745675596992512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:27:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745675596992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:27:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745675596992512[0;39m ==> Parameters: 
2023-01-26 03:27:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745675596992512[0;39m <==    Updates: 1
2023-01-26 03:27:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273745675596992512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:28:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273745780458786816[0;39m 生成今日电子书快照开始
2023-01-26 03:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745780458786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745780458786816[0;39m ==> Parameters: 
2023-01-26 03:28:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273745780458786816[0;39m <==    Updates: 0
2023-01-26 03:28:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273745780458786816[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-26 03:28:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273745801426112512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745801426112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745801426112512[0;39m ==> Parameters: 
2023-01-26 03:28:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745801426112512[0;39m <==    Updates: 1
2023-01-26 03:28:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273745801426112512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:28:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273745927225872384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745927225872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:28:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745927225872384[0;39m ==> Parameters: 
2023-01-26 03:28:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273745927225872384[0;39m <==    Updates: 1
2023-01-26 03:28:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273745927225872384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:29:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273746032117026816[0;39m 生成今日电子书快照开始
2023-01-26 03:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746032117026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:29:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746032117026816[0;39m ==> Parameters: 
2023-01-26 03:29:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746032117026816[0;39m <==    Updates: 0
2023-01-26 03:29:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273746032117026816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:29:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273746053088546816[0;39m 更新电子书下的文档数据开始
2023-01-26 03:29:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746053088546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:29:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746053088546816[0;39m ==> Parameters: 
2023-01-26 03:29:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746053088546816[0;39m <==    Updates: 1
2023-01-26 03:29:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273746053088546816[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:29:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273746178913472512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:29:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746178913472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:29:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746178913472512[0;39m ==> Parameters: 
2023-01-26 03:29:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746178913472512[0;39m <==    Updates: 1
2023-01-26 03:29:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273746178913472512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:30:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273746283792044032[0;39m 生成今日电子书快照开始
2023-01-26 03:30:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746283792044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:30:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746283792044032[0;39m ==> Parameters: 
2023-01-26 03:30:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746283792044032[0;39m <==    Updates: 0
2023-01-26 03:30:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273746283792044032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:30:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273746304734203904[0;39m 更新电子书下的文档数据开始
2023-01-26 03:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746304734203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:30:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746304734203904[0;39m ==> Parameters: 
2023-01-26 03:30:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746304734203904[0;39m <==    Updates: 1
2023-01-26 03:30:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273746304734203904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:30:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273746430571712512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:30:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746430571712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:30:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746430571712512[0;39m ==> Parameters: 
2023-01-26 03:30:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746430571712512[0;39m <==    Updates: 1
2023-01-26 03:30:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273746430571712512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:31:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273746535446089728[0;39m 生成今日电子书快照开始
2023-01-26 03:31:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746535446089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:31:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746535446089728[0;39m ==> Parameters: 
2023-01-26 03:31:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746535446089728[0;39m <==    Updates: 0
2023-01-26 03:31:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273746535446089728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:31:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273746556409221120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:31:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746556409221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:31:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746556409221120[0;39m ==> Parameters: 
2023-01-26 03:31:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746556409221120[0;39m <==    Updates: 1
2023-01-26 03:31:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273746556409221120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:31:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273746682238341120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:31:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746682238341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:31:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746682238341120[0;39m ==> Parameters: 
2023-01-26 03:31:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746682238341120[0;39m <==    Updates: 1
2023-01-26 03:31:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273746682238341120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:32:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273746787100135424[0;39m 生成今日电子书快照开始
2023-01-26 03:32:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746787100135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746787100135424[0;39m ==> Parameters: 
2023-01-26 03:32:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273746787100135424[0;39m <==    Updates: 0
2023-01-26 03:32:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273746787100135424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:32:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273746808059072512[0;39m 更新电子书下的文档数据开始
2023-01-26 03:32:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746808059072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:32:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746808059072512[0;39m ==> Parameters: 
2023-01-26 03:32:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746808059072512[0;39m <==    Updates: 1
2023-01-26 03:32:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273746808059072512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:32:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273746933900775424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:32:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746933900775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:32:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746933900775424[0;39m ==> Parameters: 
2023-01-26 03:32:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273746933900775424[0;39m <==    Updates: 1
2023-01-26 03:32:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273746933900775424[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:33:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273747038708043776[0;39m 生成今日电子书快照开始
2023-01-26 03:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747038708043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747038708043776[0;39m ==> Parameters: 
2023-01-26 03:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747038708043776[0;39m <==    Updates: 0
2023-01-26 03:33:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273747038708043776[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 03:33:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273747059725701120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:33:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747059725701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:33:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747059725701120[0;39m ==> Parameters: 
2023-01-26 03:33:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747059725701120[0;39m <==    Updates: 1
2023-01-26 03:33:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273747059725701120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:33:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273747185538043904[0;39m 更新电子书下的文档数据开始
2023-01-26 03:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747185538043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:33:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747185538043904[0;39m ==> Parameters: 
2023-01-26 03:33:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747185538043904[0;39m <==    Updates: 1
2023-01-26 03:33:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273747185538043904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:34:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273747290412421120[0;39m 生成今日电子书快照开始
2023-01-26 03:34:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747290412421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:34:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747290412421120[0;39m ==> Parameters: 
2023-01-26 03:34:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747290412421120[0;39m <==    Updates: 0
2023-01-26 03:34:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273747290412421120[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 03:34:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273747311383941120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:34:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747311383941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:34:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747311383941120[0;39m ==> Parameters: 
2023-01-26 03:34:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747311383941120[0;39m <==    Updates: 1
2023-01-26 03:34:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273747311383941120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:34:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273747437217255424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:34:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747437217255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:34:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747437217255424[0;39m ==> Parameters: 
2023-01-26 03:34:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747437217255424[0;39m <==    Updates: 1
2023-01-26 03:34:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273747437217255424[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:35:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273747542070661120[0;39m 生成今日电子书快照开始
2023-01-26 03:35:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747542070661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747542070661120[0;39m ==> Parameters: 
2023-01-26 03:35:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747542070661120[0;39m <==    Updates: 0
2023-01-26 03:35:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273747542070661120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:35:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273747563046375424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:35:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747563046375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:35:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747563046375424[0;39m ==> Parameters: 
2023-01-26 03:35:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747563046375424[0;39m <==    Updates: 1
2023-01-26 03:35:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273747563046375424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:35:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273747688871301120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:35:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747688871301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:35:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747688871301120[0;39m ==> Parameters: 
2023-01-26 03:35:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747688871301120[0;39m <==    Updates: 1
2023-01-26 03:35:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273747688871301120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:36:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273747793733095424[0;39m 生成今日电子书快照开始
2023-01-26 03:36:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747793733095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:36:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747793733095424[0;39m ==> Parameters: 
2023-01-26 03:36:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273747793733095424[0;39m <==    Updates: 0
2023-01-26 03:36:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273747793733095424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 03:36:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273747814700421120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:36:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747814700421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:36:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747814700421120[0;39m ==> Parameters: 
2023-01-26 03:36:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747814700421120[0;39m <==    Updates: 1
2023-01-26 03:36:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273747814700421120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:36:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273747940537929728[0;39m 更新电子书下的文档数据开始
2023-01-26 03:36:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747940537929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:36:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747940537929728[0;39m ==> Parameters: 
2023-01-26 03:36:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273747940537929728[0;39m <==    Updates: 1
2023-01-26 03:36:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273747940537929728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:37:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273748045345198080[0;39m 生成今日电子书快照开始
2023-01-26 03:37:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748045345198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748045345198080[0;39m ==> Parameters: 
2023-01-26 03:37:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748045345198080[0;39m <==    Updates: 0
2023-01-26 03:37:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273748045345198080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 03:37:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273748066358661120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:37:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748066358661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:37:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748066358661120[0;39m ==> Parameters: 
2023-01-26 03:37:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748066358661120[0;39m <==    Updates: 1
2023-01-26 03:37:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273748066358661120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:37:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273748192191975424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748192191975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:37:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748192191975424[0;39m ==> Parameters: 
2023-01-26 03:37:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748192191975424[0;39m <==    Updates: 1
2023-01-26 03:37:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273748192191975424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:38:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273748297062158336[0;39m 生成今日电子书快照开始
2023-01-26 03:38:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748297062158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:38:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748297062158336[0;39m ==> Parameters: 
2023-01-26 03:38:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748297062158336[0;39m <==    Updates: 0
2023-01-26 03:38:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273748297062158336[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 03:38:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273748318033678336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:38:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748318033678336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:38:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748318033678336[0;39m ==> Parameters: 
2023-01-26 03:38:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748318033678336[0;39m <==    Updates: 1
2023-01-26 03:38:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273748318033678336[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:38:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273748443854409728[0;39m 更新电子书下的文档数据开始
2023-01-26 03:38:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748443854409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:38:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748443854409728[0;39m ==> Parameters: 
2023-01-26 03:38:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748443854409728[0;39m <==    Updates: 1
2023-01-26 03:38:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273748443854409728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:39:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273748548661678080[0;39m 生成今日电子书快照开始
2023-01-26 03:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748548661678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:39:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748548661678080[0;39m ==> Parameters: 
2023-01-26 03:39:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748548661678080[0;39m <==    Updates: 0
2023-01-26 03:39:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273748548661678080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:39:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273748569675141120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:39:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748569675141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:39:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748569675141120[0;39m ==> Parameters: 
2023-01-26 03:39:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748569675141120[0;39m <==    Updates: 1
2023-01-26 03:39:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273748569675141120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:39:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273748695491678208[0;39m 更新电子书下的文档数据开始
2023-01-26 03:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748695491678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748695491678208[0;39m ==> Parameters: 
2023-01-26 03:39:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748695491678208[0;39m <==    Updates: 1
2023-01-26 03:39:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273748695491678208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:40:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273748800311529472[0;39m 生成今日电子书快照开始
2023-01-26 03:40:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748800311529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:40:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748800311529472[0;39m ==> Parameters: 
2023-01-26 03:40:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273748800311529472[0;39m <==    Updates: 0
2023-01-26 03:40:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273748800311529472[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 03:40:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273748821278855168[0;39m 更新电子书下的文档数据开始
2023-01-26 03:40:05.000 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748821278855168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:40:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748821278855168[0;39m ==> Parameters: 
2023-01-26 03:40:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748821278855168[0;39m <==    Updates: 1
2023-01-26 03:40:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273748821278855168[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:40:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273748947170889728[0;39m 更新电子书下的文档数据开始
2023-01-26 03:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748947170889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748947170889728[0;39m ==> Parameters: 
2023-01-26 03:40:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273748947170889728[0;39m <==    Updates: 1
2023-01-26 03:40:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273748947170889728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:41:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273749051969769472[0;39m 生成今日电子书快照开始
2023-01-26 03:41:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749051969769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:41:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749051969769472[0;39m ==> Parameters: 
2023-01-26 03:41:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749051969769472[0;39m <==    Updates: 0
2023-01-26 03:41:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273749051969769472[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:41:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273749072945483776[0;39m 更新电子书下的文档数据开始
2023-01-26 03:41:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749072945483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:41:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749072945483776[0;39m ==> Parameters: 
2023-01-26 03:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749072945483776[0;39m <==    Updates: 1
2023-01-26 03:41:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273749072945483776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:41:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273749198782992384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:41:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749198782992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:41:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749198782992384[0;39m ==> Parameters: 
2023-01-26 03:41:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749198782992384[0;39m <==    Updates: 1
2023-01-26 03:41:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273749198782992384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:42:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273749303636398080[0;39m 生成今日电子书快照开始
2023-01-26 03:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749303636398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749303636398080[0;39m ==> Parameters: 
2023-01-26 03:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749303636398080[0;39m <==    Updates: 0
2023-01-26 03:42:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273749303636398080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 03:42:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273749324662444032[0;39m 更新电子书下的文档数据开始
2023-01-26 03:42:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749324662444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:42:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749324662444032[0;39m ==> Parameters: 
2023-01-26 03:42:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749324662444032[0;39m <==    Updates: 1
2023-01-26 03:42:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273749324662444032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:42:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273749450449620992[0;39m 更新电子书下的文档数据开始
2023-01-26 03:42:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749450449620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:42:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749450449620992[0;39m ==> Parameters: 
2023-01-26 03:42:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749450449620992[0;39m <==    Updates: 1
2023-01-26 03:42:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273749450449620992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:43:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273749555319803904[0;39m 生成今日电子书快照开始
2023-01-26 03:43:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749555319803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:43:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749555319803904[0;39m ==> Parameters: 
2023-01-26 03:43:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749555319803904[0;39m <==    Updates: 0
2023-01-26 03:43:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273749555319803904[0;39m 生成今日电子书快照结束，耗时：19毫秒
2023-01-26 03:43:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273749576253575168[0;39m 更新电子书下的文档数据开始
2023-01-26 03:43:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749576253575168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:43:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749576253575168[0;39m ==> Parameters: 
2023-01-26 03:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749576253575168[0;39m <==    Updates: 1
2023-01-26 03:43:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273749576253575168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:43:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273749702141415424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:43:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749702141415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:43:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749702141415424[0;39m ==> Parameters: 
2023-01-26 03:43:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749702141415424[0;39m <==    Updates: 1
2023-01-26 03:43:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273749702141415424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:44:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273749806952878080[0;39m 生成今日电子书快照开始
2023-01-26 03:44:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749806952878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749806952878080[0;39m ==> Parameters: 
2023-01-26 03:44:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273749806952878080[0;39m <==    Updates: 0
2023-01-26 03:44:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273749806952878080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:44:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273749827966341120[0;39m 更新电子书下的文档数据开始
2023-01-26 03:44:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749827966341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:44:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749827966341120[0;39m ==> Parameters: 
2023-01-26 03:44:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749827966341120[0;39m <==    Updates: 1
2023-01-26 03:44:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273749827966341120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:44:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273749953808044032[0;39m 更新电子书下的文档数据开始
2023-01-26 03:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749953808044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749953808044032[0;39m ==> Parameters: 
2023-01-26 03:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273749953808044032[0;39m <==    Updates: 1
2023-01-26 03:44:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273749953808044032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:45:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273750058606923776[0;39m 生成今日电子书快照开始
2023-01-26 03:45:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750058606923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:45:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750058606923776[0;39m ==> Parameters: 
2023-01-26 03:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750058606923776[0;39m <==    Updates: 0
2023-01-26 03:45:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273750058606923776[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 03:45:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273750079637164032[0;39m 更新电子书下的文档数据开始
2023-01-26 03:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750079637164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750079637164032[0;39m ==> Parameters: 
2023-01-26 03:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750079637164032[0;39m <==    Updates: 1
2023-01-26 03:45:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273750079637164032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:45:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273750205470478336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:45:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750205470478336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:45:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750205470478336[0;39m ==> Parameters: 
2023-01-26 03:45:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750205470478336[0;39m <==    Updates: 1
2023-01-26 03:45:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273750205470478336[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:46:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273750310269358080[0;39m 生成今日电子书快照开始
2023-01-26 03:46:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750310269358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:46:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750310269358080[0;39m ==> Parameters: 
2023-01-26 03:46:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750310269358080[0;39m <==    Updates: 0
2023-01-26 03:46:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273750310269358080[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 03:46:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273750331232489472[0;39m 更新电子书下的文档数据开始
2023-01-26 03:46:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750331232489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:46:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750331232489472[0;39m ==> Parameters: 
2023-01-26 03:46:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750331232489472[0;39m <==    Updates: 1
2023-01-26 03:46:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273750331232489472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:46:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273750457124524032[0;39m 更新电子书下的文档数据开始
2023-01-26 03:46:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750457124524032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:46:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750457124524032[0;39m ==> Parameters: 
2023-01-26 03:46:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750457124524032[0;39m <==    Updates: 1
2023-01-26 03:46:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273750457124524032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:47:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273750561927598080[0;39m 生成今日电子书快照开始
2023-01-26 03:47:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750561927598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:47:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750561927598080[0;39m ==> Parameters: 
2023-01-26 03:47:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750561927598080[0;39m <==    Updates: 0
2023-01-26 03:47:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273750561927598080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:47:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273750582903312384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:47:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750582903312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:47:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750582903312384[0;39m ==> Parameters: 
2023-01-26 03:47:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750582903312384[0;39m <==    Updates: 1
2023-01-26 03:47:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273750582903312384[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:47:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273750708774375424[0;39m 更新电子书下的文档数据开始
2023-01-26 03:47:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750708774375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750708774375424[0;39m ==> Parameters: 
2023-01-26 03:47:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750708774375424[0;39m <==    Updates: 1
2023-01-26 03:47:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273750708774375424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:48:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273750813581643776[0;39m 生成今日电子书快照开始
2023-01-26 03:48:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750813581643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:48:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750813581643776[0;39m ==> Parameters: 
2023-01-26 03:48:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273750813581643776[0;39m <==    Updates: 0
2023-01-26 03:48:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273750813581643776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:48:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273750834620272640[0;39m 更新电子书下的文档数据开始
2023-01-26 03:48:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750834620272640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:48:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750834620272640[0;39m ==> Parameters: 
2023-01-26 03:48:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750834620272640[0;39m <==    Updates: 1
2023-01-26 03:48:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273750834620272640[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:48:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273750960386478080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:48:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750960386478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750960386478080[0;39m ==> Parameters: 
2023-01-26 03:48:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273750960386478080[0;39m <==    Updates: 1
2023-01-26 03:48:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273750960386478080[0;39m 更新电子书下的文档数据结束，耗时：20毫秒
2023-01-26 03:49:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273751065248272384[0;39m 生成今日电子书快照开始
2023-01-26 03:49:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751065248272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751065248272384[0;39m ==> Parameters: 
2023-01-26 03:49:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751065248272384[0;39m <==    Updates: 0
2023-01-26 03:49:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273751065248272384[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 03:49:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273751086211403776[0;39m 更新电子书下的文档数据开始
2023-01-26 03:49:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751086211403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:49:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751086211403776[0;39m ==> Parameters: 
2023-01-26 03:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751086211403776[0;39m <==    Updates: 1
2023-01-26 03:49:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273751086211403776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:49:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273751212061495296[0;39m 更新电子书下的文档数据开始
2023-01-26 03:49:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751212061495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:49:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751212061495296[0;39m ==> Parameters: 
2023-01-26 03:49:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751212061495296[0;39m <==    Updates: 1
2023-01-26 03:49:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273751212061495296[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 03:50:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273751316914900992[0;39m 生成今日电子书快照开始
2023-01-26 03:50:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751316914900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:50:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751316914900992[0;39m ==> Parameters: 
2023-01-26 03:50:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751316914900992[0;39m <==    Updates: 0
2023-01-26 03:50:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273751316914900992[0;39m 生成今日电子书快照结束，耗时：19毫秒
2023-01-26 03:50:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273751337865449472[0;39m 更新电子书下的文档数据开始
2023-01-26 03:50:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751337865449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:50:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751337865449472[0;39m ==> Parameters: 
2023-01-26 03:50:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751337865449472[0;39m <==    Updates: 1
2023-01-26 03:50:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273751337865449472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:50:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273751463761678336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:50:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751463761678336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:50:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751463761678336[0;39m ==> Parameters: 
2023-01-26 03:50:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751463761678336[0;39m <==    Updates: 1
2023-01-26 03:50:35.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273751463761678336[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:51:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273751568564752384[0;39m 生成今日电子书快照开始
2023-01-26 03:51:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751568564752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:51:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751568564752384[0;39m ==> Parameters: 
2023-01-26 03:51:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751568564752384[0;39m <==    Updates: 0
2023-01-26 03:51:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273751568564752384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:51:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273751589527883776[0;39m 更新电子书下的文档数据开始
2023-01-26 03:51:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751589527883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:51:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751589527883776[0;39m ==> Parameters: 
2023-01-26 03:51:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751589527883776[0;39m <==    Updates: 1
2023-01-26 03:51:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273751589527883776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:51:35.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273751715428306944[0;39m 更新电子书下的文档数据开始
2023-01-26 03:51:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751715428306944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:51:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751715428306944[0;39m ==> Parameters: 
2023-01-26 03:51:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751715428306944[0;39m <==    Updates: 1
2023-01-26 03:51:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273751715428306944[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 03:52:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273751820231380992[0;39m 生成今日电子书快照开始
2023-01-26 03:52:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751820231380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:52:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751820231380992[0;39m ==> Parameters: 
2023-01-26 03:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273751820231380992[0;39m <==    Updates: 0
2023-01-26 03:52:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273751820231380992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:52:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273751841244844032[0;39m 更新电子书下的文档数据开始
2023-01-26 03:52:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751841244844032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:52:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751841244844032[0;39m ==> Parameters: 
2023-01-26 03:52:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751841244844032[0;39m <==    Updates: 1
2023-01-26 03:52:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273751841244844032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:52:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273751967019438080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:52:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751967019438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:52:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751967019438080[0;39m ==> Parameters: 
2023-01-26 03:52:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273751967019438080[0;39m <==    Updates: 1
2023-01-26 03:52:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273751967019438080[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:53:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273752071889620992[0;39m 生成今日电子书快照开始
2023-01-26 03:53:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752071889620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:53:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752071889620992[0;39m ==> Parameters: 
2023-01-26 03:53:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752071889620992[0;39m <==    Updates: 0
2023-01-26 03:53:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273752071889620992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 03:53:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273752092856946688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:53:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752092856946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:53:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752092856946688[0;39m ==> Parameters: 
2023-01-26 03:53:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752092856946688[0;39m <==    Updates: 1
2023-01-26 03:53:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273752092856946688[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 03:53:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273752218736398336[0;39m 更新电子书下的文档数据开始
2023-01-26 03:53:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752218736398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:53:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752218736398336[0;39m ==> Parameters: 
2023-01-26 03:53:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752218736398336[0;39m <==    Updates: 1
2023-01-26 03:53:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273752218736398336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:54:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273752323547860992[0;39m 生成今日电子书快照开始
2023-01-26 03:54:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752323547860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:54:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752323547860992[0;39m ==> Parameters: 
2023-01-26 03:54:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752323547860992[0;39m <==    Updates: 0
2023-01-26 03:54:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273752323547860992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:54:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273752344510992384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:54:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752344510992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:54:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752344510992384[0;39m ==> Parameters: 
2023-01-26 03:54:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752344510992384[0;39m <==    Updates: 1
2023-01-26 03:54:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273752344510992384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:54:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273752470335918080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:54:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752470335918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:54:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752470335918080[0;39m ==> Parameters: 
2023-01-26 03:54:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752470335918080[0;39m <==    Updates: 1
2023-01-26 03:54:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273752470335918080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:55:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273752575206100992[0;39m 生成今日电子书快照开始
2023-01-26 03:55:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752575206100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:55:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752575206100992[0;39m ==> Parameters: 
2023-01-26 03:55:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752575206100992[0;39m <==    Updates: 0
2023-01-26 03:55:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273752575206100992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:55:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273752596165038080[0;39m 更新电子书下的文档数据开始
2023-01-26 03:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752596165038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:55:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752596165038080[0;39m ==> Parameters: 
2023-01-26 03:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752596165038080[0;39m <==    Updates: 1
2023-01-26 03:55:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273752596165038080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:55:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273752721998352384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:55:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752721998352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:55:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752721998352384[0;39m ==> Parameters: 
2023-01-26 03:55:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752721998352384[0;39m <==    Updates: 1
2023-01-26 03:55:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273752721998352384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:56:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273752826864340992[0;39m 生成今日电子书快照开始
2023-01-26 03:56:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752826864340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:56:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752826864340992[0;39m ==> Parameters: 
2023-01-26 03:56:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273752826864340992[0;39m <==    Updates: 0
2023-01-26 03:56:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273752826864340992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 03:56:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273752847831666688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:56:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752847831666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:56:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752847831666688[0;39m ==> Parameters: 
2023-01-26 03:56:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752847831666688[0;39m <==    Updates: 1
2023-01-26 03:56:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273752847831666688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:56:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273752973656592384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752973656592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752973656592384[0;39m ==> Parameters: 
2023-01-26 03:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273752973656592384[0;39m <==    Updates: 1
2023-01-26 03:56:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273752973656592384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:57:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273753078530969600[0;39m 生成今日电子书快照开始
2023-01-26 03:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753078530969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:57:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753078530969600[0;39m ==> Parameters: 
2023-01-26 03:57:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753078530969600[0;39m <==    Updates: 0
2023-01-26 03:57:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273753078530969600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 03:57:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273753099489906688[0;39m 更新电子书下的文档数据开始
2023-01-26 03:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753099489906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753099489906688[0;39m ==> Parameters: 
2023-01-26 03:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753099489906688[0;39m <==    Updates: 1
2023-01-26 03:57:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273753099489906688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:57:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273753225314832384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753225314832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753225314832384[0;39m ==> Parameters: 
2023-01-26 03:57:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753225314832384[0;39m <==    Updates: 1
2023-01-26 03:57:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273753225314832384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 03:58:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273753330189209600[0;39m 生成今日电子书快照开始
2023-01-26 03:58:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753330189209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:58:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753330189209600[0;39m ==> Parameters: 
2023-01-26 03:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753330189209600[0;39m <==    Updates: 0
2023-01-26 03:58:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273753330189209600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 03:58:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273753351152340992[0;39m 更新电子书下的文档数据开始
2023-01-26 03:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753351152340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753351152340992[0;39m ==> Parameters: 
2023-01-26 03:58:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753351152340992[0;39m <==    Updates: 1
2023-01-26 03:58:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273753351152340992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 03:58:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273753476964683776[0;39m 更新电子书下的文档数据开始
2023-01-26 03:58:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753476964683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:58:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753476964683776[0;39m ==> Parameters: 
2023-01-26 03:58:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753476964683776[0;39m <==    Updates: 1
2023-01-26 03:58:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273753476964683776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 03:59:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273753581843255296[0;39m 生成今日电子书快照开始
2023-01-26 03:59:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753581843255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 03:59:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753581843255296[0;39m ==> Parameters: 
2023-01-26 03:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753581843255296[0;39m <==    Updates: 0
2023-01-26 03:59:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273753581843255296[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 03:59:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273753602802192384[0;39m 更新电子书下的文档数据开始
2023-01-26 03:59:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753602802192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:59:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753602802192384[0;39m ==> Parameters: 
2023-01-26 03:59:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753602802192384[0;39m <==    Updates: 1
2023-01-26 03:59:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273753602802192384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 03:59:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273753728639700992[0;39m 更新电子书下的文档数据开始
2023-01-26 03:59:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753728639700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 03:59:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753728639700992[0;39m ==> Parameters: 
2023-01-26 03:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753728639700992[0;39m <==    Updates: 1
2023-01-26 03:59:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273753728639700992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:00:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273753833501495296[0;39m 生成今日电子书快照开始
2023-01-26 04:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753833501495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753833501495296[0;39m ==> Parameters: 
2023-01-26 04:00:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273753833501495296[0;39m <==    Updates: 0
2023-01-26 04:00:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273753833501495296[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:00:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273753854464626688[0;39m 更新电子书下的文档数据开始
2023-01-26 04:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753854464626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753854464626688[0;39m ==> Parameters: 
2023-01-26 04:00:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753854464626688[0;39m <==    Updates: 1
2023-01-26 04:00:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273753854464626688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:00:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273753980297940992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:00:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753980297940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:00:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753980297940992[0;39m ==> Parameters: 
2023-01-26 04:00:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273753980297940992[0;39m <==    Updates: 1
2023-01-26 04:00:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273753980297940992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:01:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273754085172318208[0;39m 生成今日电子书快照开始
2023-01-26 04:01:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754085172318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754085172318208[0;39m ==> Parameters: 
2023-01-26 04:01:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754085172318208[0;39m <==    Updates: 0
2023-01-26 04:01:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273754085172318208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:01:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273754106114478080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:01:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754106114478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:01:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754106114478080[0;39m ==> Parameters: 
2023-01-26 04:01:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754106114478080[0;39m <==    Updates: 1
2023-01-26 04:01:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273754106114478080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:01:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273754231956180992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:01:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754231956180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:01:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754231956180992[0;39m ==> Parameters: 
2023-01-26 04:01:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754231956180992[0;39m <==    Updates: 1
2023-01-26 04:01:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273754231956180992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:02:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273754336838946816[0;39m 生成今日电子书快照开始
2023-01-26 04:02:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754336838946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:02:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754336838946816[0;39m ==> Parameters: 
2023-01-26 04:02:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754336838946816[0;39m <==    Updates: 0
2023-01-26 04:02:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273754336838946816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:02:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273754357772718080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:02:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754357772718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:02:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754357772718080[0;39m ==> Parameters: 
2023-01-26 04:02:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754357772718080[0;39m <==    Updates: 1
2023-01-26 04:02:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273754357772718080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:02:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273754483614420992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:02:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754483614420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:02:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754483614420992[0;39m ==> Parameters: 
2023-01-26 04:02:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754483614420992[0;39m <==    Updates: 1
2023-01-26 04:02:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273754483614420992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 04:03:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273754588492992512[0;39m 生成今日电子书快照开始
2023-01-26 04:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754588492992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:03:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754588492992512[0;39m ==> Parameters: 
2023-01-26 04:03:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754588492992512[0;39m <==    Updates: 0
2023-01-26 04:03:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273754588492992512[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:03:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273754609456123904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754609456123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754609456123904[0;39m ==> Parameters: 
2023-01-26 04:03:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754609456123904[0;39m <==    Updates: 1
2023-01-26 04:03:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273754609456123904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:03:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273754735272660992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:03:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754735272660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754735272660992[0;39m ==> Parameters: 
2023-01-26 04:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754735272660992[0;39m <==    Updates: 1
2023-01-26 04:03:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273754735272660992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:04:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273754840142843904[0;39m 生成今日电子书快照开始
2023-01-26 04:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754840142843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:04:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754840142843904[0;39m ==> Parameters: 
2023-01-26 04:04:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273754840142843904[0;39m <==    Updates: 0
2023-01-26 04:04:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273754840142843904[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 04:04:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273754861101780992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:04:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754861101780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:04:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754861101780992[0;39m ==> Parameters: 
2023-01-26 04:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754861101780992[0;39m <==    Updates: 1
2023-01-26 04:04:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273754861101780992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:04:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273754986935095296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754986935095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754986935095296[0;39m ==> Parameters: 
2023-01-26 04:04:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273754986935095296[0;39m <==    Updates: 1
2023-01-26 04:04:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273754986935095296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:05:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273755091805278208[0;39m 生成今日电子书快照开始
2023-01-26 04:05:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755091805278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:05:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755091805278208[0;39m ==> Parameters: 
2023-01-26 04:05:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755091805278208[0;39m <==    Updates: 0
2023-01-26 04:05:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273755091805278208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:05:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273755112751632384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755112751632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755112751632384[0;39m ==> Parameters: 
2023-01-26 04:05:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755112751632384[0;39m <==    Updates: 1
2023-01-26 04:05:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273755112751632384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:05:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273755238589140992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755238589140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755238589140992[0;39m ==> Parameters: 
2023-01-26 04:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755238589140992[0;39m <==    Updates: 1
2023-01-26 04:05:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273755238589140992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:06:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273755343463518208[0;39m 生成今日电子书快照开始
2023-01-26 04:06:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755343463518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:06:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755343463518208[0;39m ==> Parameters: 
2023-01-26 04:06:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755343463518208[0;39m <==    Updates: 0
2023-01-26 04:06:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273755343463518208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:06:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273755364430843904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755364430843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755364430843904[0;39m ==> Parameters: 
2023-01-26 04:06:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755364430843904[0;39m <==    Updates: 1
2023-01-26 04:06:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273755364430843904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:06:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273755490251575296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755490251575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:06:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755490251575296[0;39m ==> Parameters: 
2023-01-26 04:06:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755490251575296[0;39m <==    Updates: 1
2023-01-26 04:06:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273755490251575296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:07:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273755595121758208[0;39m 生成今日电子书快照开始
2023-01-26 04:07:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755595121758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:07:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755595121758208[0;39m ==> Parameters: 
2023-01-26 04:07:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755595121758208[0;39m <==    Updates: 0
2023-01-26 04:07:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273755595121758208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:07:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273755616080695296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755616080695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755616080695296[0;39m ==> Parameters: 
2023-01-26 04:07:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755616080695296[0;39m <==    Updates: 1
2023-01-26 04:07:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273755616080695296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:07:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273755741914009600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:07:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755741914009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:07:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755741914009600[0;39m ==> Parameters: 
2023-01-26 04:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755741914009600[0;39m <==    Updates: 1
2023-01-26 04:07:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273755741914009600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:08:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273755846784192512[0;39m 生成今日电子书快照开始
2023-01-26 04:08:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755846784192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:08:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755846784192512[0;39m ==> Parameters: 
2023-01-26 04:08:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273755846784192512[0;39m <==    Updates: 0
2023-01-26 04:08:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273755846784192512[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:08:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273755867747323904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:08:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755867747323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:08:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755867747323904[0;39m ==> Parameters: 
2023-01-26 04:08:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755867747323904[0;39m <==    Updates: 1
2023-01-26 04:08:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273755867747323904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:08:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273755993559666688[0;39m 更新电子书下的文档数据开始
2023-01-26 04:08:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755993559666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:08:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755993559666688[0;39m ==> Parameters: 
2023-01-26 04:08:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273755993559666688[0;39m <==    Updates: 1
2023-01-26 04:08:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273755993559666688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:09:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273756098438238208[0;39m 生成今日电子书快照开始
2023-01-26 04:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756098438238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:09:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756098438238208[0;39m ==> Parameters: 
2023-01-26 04:09:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756098438238208[0;39m <==    Updates: 0
2023-01-26 04:09:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273756098438238208[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 04:09:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273756119409758208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:09:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756119409758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:09:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756119409758208[0;39m ==> Parameters: 
2023-01-26 04:09:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756119409758208[0;39m <==    Updates: 1
2023-01-26 04:09:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273756119409758208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:09:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273756245234683904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:09:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756245234683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:09:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756245234683904[0;39m ==> Parameters: 
2023-01-26 04:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756245234683904[0;39m <==    Updates: 1
2023-01-26 04:09:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273756245234683904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:10:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273756350100672512[0;39m 生成今日电子书快照开始
2023-01-26 04:10:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756350100672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:10:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756350100672512[0;39m ==> Parameters: 
2023-01-26 04:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756350100672512[0;39m <==    Updates: 0
2023-01-26 04:10:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273756350100672512[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:10:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273756371063803904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756371063803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:10:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756371063803904[0;39m ==> Parameters: 
2023-01-26 04:10:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756371063803904[0;39m <==    Updates: 1
2023-01-26 04:10:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273756371063803904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:10:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273756496888729600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:10:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756496888729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:10:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756496888729600[0;39m ==> Parameters: 
2023-01-26 04:10:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756496888729600[0;39m <==    Updates: 1
2023-01-26 04:10:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273756496888729600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:11:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273756601758912512[0;39m 生成今日电子书快照开始
2023-01-26 04:11:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756601758912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:11:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756601758912512[0;39m ==> Parameters: 
2023-01-26 04:11:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756601758912512[0;39m <==    Updates: 0
2023-01-26 04:11:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273756601758912512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:11:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273756622717849600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:11:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756622717849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:11:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756622717849600[0;39m ==> Parameters: 
2023-01-26 04:11:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756622717849600[0;39m <==    Updates: 1
2023-01-26 04:11:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273756622717849600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:11:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273756748555358208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:11:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756748555358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:11:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756748555358208[0;39m ==> Parameters: 
2023-01-26 04:11:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756748555358208[0;39m <==    Updates: 1
2023-01-26 04:11:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273756748555358208[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 04:12:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273756853421346816[0;39m 生成今日电子书快照开始
2023-01-26 04:12:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756853421346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:12:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756853421346816[0;39m ==> Parameters: 
2023-01-26 04:12:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273756853421346816[0;39m <==    Updates: 0
2023-01-26 04:12:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273756853421346816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:12:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273756874380283904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:12:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756874380283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:12:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756874380283904[0;39m ==> Parameters: 
2023-01-26 04:12:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273756874380283904[0;39m <==    Updates: 1
2023-01-26 04:12:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273756874380283904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:12:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273757000205209600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:12:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757000205209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:12:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757000205209600[0;39m ==> Parameters: 
2023-01-26 04:12:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757000205209600[0;39m <==    Updates: 1
2023-01-26 04:12:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273757000205209600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:13:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273757105075392512[0;39m 生成今日电子书快照开始
2023-01-26 04:13:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757105075392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:13:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757105075392512[0;39m ==> Parameters: 
2023-01-26 04:13:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757105075392512[0;39m <==    Updates: 0
2023-01-26 04:13:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273757105075392512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:13:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273757126042718208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:13:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757126042718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:13:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757126042718208[0;39m ==> Parameters: 
2023-01-26 04:13:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757126042718208[0;39m <==    Updates: 1
2023-01-26 04:13:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273757126042718208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:13:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273757251871838208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:13:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757251871838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:13:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757251871838208[0;39m ==> Parameters: 
2023-01-26 04:13:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757251871838208[0;39m <==    Updates: 1
2023-01-26 04:13:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273757251871838208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:14:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273757356737826816[0;39m 生成今日电子书快照开始
2023-01-26 04:14:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757356737826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:14:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757356737826816[0;39m ==> Parameters: 
2023-01-26 04:14:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757356737826816[0;39m <==    Updates: 0
2023-01-26 04:14:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273757356737826816[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:14:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273757377696763904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:14:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757377696763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757377696763904[0;39m ==> Parameters: 
2023-01-26 04:14:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757377696763904[0;39m <==    Updates: 1
2023-01-26 04:14:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273757377696763904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:14:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273757503534272512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757503534272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757503534272512[0;39m ==> Parameters: 
2023-01-26 04:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757503534272512[0;39m <==    Updates: 1
2023-01-26 04:14:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273757503534272512[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:15:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273757608400261120[0;39m 生成今日电子书快照开始
2023-01-26 04:15:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757608400261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:15:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757608400261120[0;39m ==> Parameters: 
2023-01-26 04:15:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757608400261120[0;39m <==    Updates: 0
2023-01-26 04:15:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273757608400261120[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:15:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273757629367586816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:15:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757629367586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:15:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757629367586816[0;39m ==> Parameters: 
2023-01-26 04:15:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757629367586816[0;39m <==    Updates: 1
2023-01-26 04:15:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273757629367586816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:15:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273757755196706816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757755196706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:15:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757755196706816[0;39m ==> Parameters: 
2023-01-26 04:15:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757755196706816[0;39m <==    Updates: 1
2023-01-26 04:15:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273757755196706816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:16:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273757860054306816[0;39m 生成今日电子书快照开始
2023-01-26 04:16:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757860054306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:16:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757860054306816[0;39m ==> Parameters: 
2023-01-26 04:16:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273757860054306816[0;39m <==    Updates: 0
2023-01-26 04:16:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273757860054306816[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:16:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273757881013243904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:16:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757881013243904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:16:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757881013243904[0;39m ==> Parameters: 
2023-01-26 04:16:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273757881013243904[0;39m <==    Updates: 1
2023-01-26 04:16:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273757881013243904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:16:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273758006850752512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:16:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758006850752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:16:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758006850752512[0;39m ==> Parameters: 
2023-01-26 04:16:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758006850752512[0;39m <==    Updates: 1
2023-01-26 04:16:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273758006850752512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:17:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273758111670603776[0;39m 生成今日电子书快照开始
2023-01-26 04:17:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758111670603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:17:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758111670603776[0;39m ==> Parameters: 
2023-01-26 04:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758111670603776[0;39m <==    Updates: 0
2023-01-26 04:17:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273758111670603776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:17:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273758132684066816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:17:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758132684066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:17:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758132684066816[0;39m ==> Parameters: 
2023-01-26 04:17:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758132684066816[0;39m <==    Updates: 1
2023-01-26 04:17:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273758132684066816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:17:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273758258508992512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758258508992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758258508992512[0;39m ==> Parameters: 
2023-01-26 04:17:35.031 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758258508992512[0;39m <==    Updates: 1
2023-01-26 04:17:35.031 INFO  com.example.wiki.job.DocJob                       :35   [32m273758258508992512[0;39m 更新电子书下的文档数据结束，耗时：19毫秒
2023-01-26 04:18:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273758363383369728[0;39m 生成今日电子书快照开始
2023-01-26 04:18:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758363383369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:18:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758363383369728[0;39m ==> Parameters: 
2023-01-26 04:18:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758363383369728[0;39m <==    Updates: 0
2023-01-26 04:18:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273758363383369728[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 04:18:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273758384333918208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:18:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758384333918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:18:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758384333918208[0;39m ==> Parameters: 
2023-01-26 04:18:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758384333918208[0;39m <==    Updates: 1
2023-01-26 04:18:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273758384333918208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:18:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273758510175621120[0;39m 更新电子书下的文档数据开始
2023-01-26 04:18:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758510175621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:18:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758510175621120[0;39m ==> Parameters: 
2023-01-26 04:18:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758510175621120[0;39m <==    Updates: 1
2023-01-26 04:18:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273758510175621120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:19:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273758615037415424[0;39m 生成今日电子书快照开始
2023-01-26 04:19:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758615037415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:19:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758615037415424[0;39m ==> Parameters: 
2023-01-26 04:19:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758615037415424[0;39m <==    Updates: 0
2023-01-26 04:19:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273758615037415424[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 04:19:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273758636000546816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758636000546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:19:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758636000546816[0;39m ==> Parameters: 
2023-01-26 04:19:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758636000546816[0;39m <==    Updates: 1
2023-01-26 04:19:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273758636000546816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:19:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273758761821278208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:19:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758761821278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:19:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758761821278208[0;39m ==> Parameters: 
2023-01-26 04:19:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758761821278208[0;39m <==    Updates: 1
2023-01-26 04:19:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273758761821278208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:20:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273758866645323776[0;39m 生成今日电子书快照开始
2023-01-26 04:20:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758866645323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:20:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758866645323776[0;39m ==> Parameters: 
2023-01-26 04:20:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273758866645323776[0;39m <==    Updates: 0
2023-01-26 04:20:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273758866645323776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:20:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273758887667175424[0;39m 更新电子书下的文档数据开始
2023-01-26 04:20:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758887667175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758887667175424[0;39m ==> Parameters: 
2023-01-26 04:20:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273758887667175424[0;39m <==    Updates: 1
2023-01-26 04:20:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273758887667175424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:20:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273759013487906816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:20:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759013487906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:20:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759013487906816[0;39m ==> Parameters: 
2023-01-26 04:20:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759013487906816[0;39m <==    Updates: 1
2023-01-26 04:20:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273759013487906816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:21:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273759118353895424[0;39m 生成今日电子书快照开始
2023-01-26 04:21:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759118353895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:21:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759118353895424[0;39m ==> Parameters: 
2023-01-26 04:21:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759118353895424[0;39m <==    Updates: 0
2023-01-26 04:21:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273759118353895424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:21:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273759139312832512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759139312832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759139312832512[0;39m ==> Parameters: 
2023-01-26 04:21:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759139312832512[0;39m <==    Updates: 1
2023-01-26 04:21:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273759139312832512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:21:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273759265133563904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:21:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759265133563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:21:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759265133563904[0;39m ==> Parameters: 
2023-01-26 04:21:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759265133563904[0;39m <==    Updates: 1
2023-01-26 04:21:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273759265133563904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:22:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273759370007941120[0;39m 生成今日电子书快照开始
2023-01-26 04:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759370007941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:22:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759370007941120[0;39m ==> Parameters: 
2023-01-26 04:22:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759370007941120[0;39m <==    Updates: 0
2023-01-26 04:22:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273759370007941120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:22:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273759390929129472[0;39m 更新电子书下的文档数据开始
2023-01-26 04:22:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759390929129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:22:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759390929129472[0;39m ==> Parameters: 
2023-01-26 04:22:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759390929129472[0;39m <==    Updates: 1
2023-01-26 04:22:05.001 INFO  com.example.wiki.job.DocJob                       :35   [32m273759390929129472[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:22:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273759516804386816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:22:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759516804386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:22:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759516804386816[0;39m ==> Parameters: 
2023-01-26 04:22:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759516804386816[0;39m <==    Updates: 1
2023-01-26 04:22:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273759516804386816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:23:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273759621678764032[0;39m 生成今日电子书快照开始
2023-01-26 04:23:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759621678764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:23:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759621678764032[0;39m ==> Parameters: 
2023-01-26 04:23:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759621678764032[0;39m <==    Updates: 0
2023-01-26 04:23:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273759621678764032[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:23:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273759642633506816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:23:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759642633506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:23:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759642633506816[0;39m ==> Parameters: 
2023-01-26 04:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759642633506816[0;39m <==    Updates: 1
2023-01-26 04:23:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273759642633506816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:23:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273759768475209728[0;39m 更新电子书下的文档数据开始
2023-01-26 04:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759768475209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759768475209728[0;39m ==> Parameters: 
2023-01-26 04:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759768475209728[0;39m <==    Updates: 1
2023-01-26 04:23:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273759768475209728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 04:24:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273759873337004032[0;39m 生成今日电子书快照开始
2023-01-26 04:24:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759873337004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:24:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759873337004032[0;39m ==> Parameters: 
2023-01-26 04:24:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273759873337004032[0;39m <==    Updates: 0
2023-01-26 04:24:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273759873337004032[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:24:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273759894291746816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:24:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759894291746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:24:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759894291746816[0;39m ==> Parameters: 
2023-01-26 04:24:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273759894291746816[0;39m <==    Updates: 1
2023-01-26 04:24:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273759894291746816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:24:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273760020120866816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:24:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760020120866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:24:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760020120866816[0;39m ==> Parameters: 
2023-01-26 04:24:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760020120866816[0;39m <==    Updates: 1
2023-01-26 04:24:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273760020120866816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:25:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273760124999438336[0;39m 生成今日电子书快照开始
2023-01-26 04:25:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760124999438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:25:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760124999438336[0;39m ==> Parameters: 
2023-01-26 04:25:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760124999438336[0;39m <==    Updates: 0
2023-01-26 04:25:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273760124999438336[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:25:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273760145949986816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:25:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760145949986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760145949986816[0;39m ==> Parameters: 
2023-01-26 04:25:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760145949986816[0;39m <==    Updates: 1
2023-01-26 04:25:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273760145949986816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:25:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273760271732969472[0;39m 更新电子书下的文档数据开始
2023-01-26 04:25:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760271732969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:25:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760271732969472[0;39m ==> Parameters: 
2023-01-26 04:25:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760271732969472[0;39m <==    Updates: 1
2023-01-26 04:25:35.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273760271732969472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 04:26:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273760376607346688[0;39m 生成今日电子书快照开始
2023-01-26 04:26:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760376607346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760376607346688[0;39m ==> Parameters: 
2023-01-26 04:26:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760376607346688[0;39m <==    Updates: 0
2023-01-26 04:26:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273760376607346688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:26:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273760397620809728[0;39m 更新电子书下的文档数据开始
2023-01-26 04:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760397620809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760397620809728[0;39m ==> Parameters: 
2023-01-26 04:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760397620809728[0;39m <==    Updates: 1
2023-01-26 04:26:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273760397620809728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:26:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273760523445735424[0;39m 更新电子书下的文档数据开始
2023-01-26 04:26:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760523445735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:26:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760523445735424[0;39m ==> Parameters: 
2023-01-26 04:26:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760523445735424[0;39m <==    Updates: 1
2023-01-26 04:26:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273760523445735424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:27:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273760628315918336[0;39m 生成今日电子书快照开始
2023-01-26 04:27:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760628315918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:27:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760628315918336[0;39m ==> Parameters: 
2023-01-26 04:27:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760628315918336[0;39m <==    Updates: 0
2023-01-26 04:27:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273760628315918336[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:27:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273760649270661120[0;39m 更新电子书下的文档数据开始
2023-01-26 04:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760649270661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760649270661120[0;39m ==> Parameters: 
2023-01-26 04:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760649270661120[0;39m <==    Updates: 1
2023-01-26 04:27:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273760649270661120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:27:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273760775108169728[0;39m 更新电子书下的文档数据开始
2023-01-26 04:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760775108169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:27:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760775108169728[0;39m ==> Parameters: 
2023-01-26 04:27:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760775108169728[0;39m <==    Updates: 1
2023-01-26 04:27:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273760775108169728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:28:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273760879978352640[0;39m 生成今日电子书快照开始
2023-01-26 04:28:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760879978352640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:28:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760879978352640[0;39m ==> Parameters: 
2023-01-26 04:28:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273760879978352640[0;39m <==    Updates: 0
2023-01-26 04:28:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273760879978352640[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:28:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273760900920512512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760900920512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760900920512512[0;39m ==> Parameters: 
2023-01-26 04:28:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273760900920512512[0;39m <==    Updates: 1
2023-01-26 04:28:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273760900920512512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:28:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273761026766409728[0;39m 更新电子书下的文档数据开始
2023-01-26 04:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761026766409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:28:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761026766409728[0;39m ==> Parameters: 
2023-01-26 04:28:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761026766409728[0;39m <==    Updates: 1
2023-01-26 04:28:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273761026766409728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:29:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273761131565289472[0;39m 生成今日电子书快照开始
2023-01-26 04:29:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761131565289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761131565289472[0;39m ==> Parameters: 
2023-01-26 04:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761131565289472[0;39m <==    Updates: 0
2023-01-26 04:29:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273761131565289472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:29:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273761152591335424[0;39m 更新电子书下的文档数据开始
2023-01-26 04:29:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761152591335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:29:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761152591335424[0;39m ==> Parameters: 
2023-01-26 04:29:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761152591335424[0;39m <==    Updates: 1
2023-01-26 04:29:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273761152591335424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:29:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273761278420455424[0;39m 更新电子书下的文档数据开始
2023-01-26 04:29:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761278420455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:29:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761278420455424[0;39m ==> Parameters: 
2023-01-26 04:29:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761278420455424[0;39m <==    Updates: 1
2023-01-26 04:29:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273761278420455424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:30:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273761383223529472[0;39m 生成今日电子书快照开始
2023-01-26 04:30:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761383223529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:30:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761383223529472[0;39m ==> Parameters: 
2023-01-26 04:30:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761383223529472[0;39m <==    Updates: 0
2023-01-26 04:30:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273761383223529472[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 04:30:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273761404257964032[0;39m 更新电子书下的文档数据开始
2023-01-26 04:30:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761404257964032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:30:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761404257964032[0;39m ==> Parameters: 
2023-01-26 04:30:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761404257964032[0;39m <==    Updates: 1
2023-01-26 04:30:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273761404257964032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:30:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273761530091278336[0;39m 更新电子书下的文档数据开始
2023-01-26 04:30:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761530091278336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:30:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761530091278336[0;39m ==> Parameters: 
2023-01-26 04:30:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761530091278336[0;39m <==    Updates: 1
2023-01-26 04:30:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273761530091278336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273761634948878336[0;39m 生成今日电子书快照开始
2023-01-26 04:31:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761634948878336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:31:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761634948878336[0;39m ==> Parameters: 
2023-01-26 04:31:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761634948878336[0;39m <==    Updates: 0
2023-01-26 04:31:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273761634948878336[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:31:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273761655916204032[0;39m 更新电子书下的文档数据开始
2023-01-26 04:31:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761655916204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:31:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761655916204032[0;39m ==> Parameters: 
2023-01-26 04:31:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761655916204032[0;39m <==    Updates: 1
2023-01-26 04:31:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273761655916204032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:31:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273761781745324032[0;39m 更新电子书下的文档数据开始
2023-01-26 04:31:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761781745324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:31:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761781745324032[0;39m ==> Parameters: 
2023-01-26 04:31:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761781745324032[0;39m <==    Updates: 1
2023-01-26 04:31:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273761781745324032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:32:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273761886552592384[0;39m 生成今日电子书快照开始
2023-01-26 04:32:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761886552592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:32:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761886552592384[0;39m ==> Parameters: 
2023-01-26 04:32:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273761886552592384[0;39m <==    Updates: 0
2023-01-26 04:32:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273761886552592384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:32:05.018 INFO  com.example.wiki.job.DocJob                       :32   [32m273761907582832640[0;39m 更新电子书下的文档数据开始
2023-01-26 04:32:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761907582832640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:32:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761907582832640[0;39m ==> Parameters: 
2023-01-26 04:32:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273761907582832640[0;39m <==    Updates: 1
2023-01-26 04:32:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273761907582832640[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:32:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273762033403564032[0;39m 更新电子书下的文档数据开始
2023-01-26 04:32:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762033403564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:32:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762033403564032[0;39m ==> Parameters: 
2023-01-26 04:32:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762033403564032[0;39m <==    Updates: 1
2023-01-26 04:32:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273762033403564032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:33:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273762138269552640[0;39m 生成今日电子书快照开始
2023-01-26 04:33:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762138269552640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:33:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762138269552640[0;39m ==> Parameters: 
2023-01-26 04:33:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762138269552640[0;39m <==    Updates: 0
2023-01-26 04:33:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273762138269552640[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:33:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273762159165575168[0;39m 更新电子书下的文档数据开始
2023-01-26 04:33:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762159165575168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:33:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762159165575168[0;39m ==> Parameters: 
2023-01-26 04:33:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762159165575168[0;39m <==    Updates: 1
2023-01-26 04:33:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273762159165575168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:33:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273762285007278080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762285007278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762285007278080[0;39m ==> Parameters: 
2023-01-26 04:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762285007278080[0;39m <==    Updates: 1
2023-01-26 04:33:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273762285007278080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:34:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273762389936181248[0;39m 生成今日电子书快照开始
2023-01-26 04:34:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762389936181248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:34:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762389936181248[0;39m ==> Parameters: 
2023-01-26 04:34:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762389936181248[0;39m <==    Updates: 0
2023-01-26 04:34:00.036 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273762389936181248[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 04:34:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273762410895118336[0;39m 更新电子书下的文档数据开始
2023-01-26 04:34:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762410895118336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:34:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762410895118336[0;39m ==> Parameters: 
2023-01-26 04:34:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762410895118336[0;39m <==    Updates: 1
2023-01-26 04:34:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273762410895118336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:34:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273762536682295296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762536682295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:34:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762536682295296[0;39m ==> Parameters: 
2023-01-26 04:34:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762536682295296[0;39m <==    Updates: 1
2023-01-26 04:34:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273762536682295296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:35:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273762641544089600[0;39m 生成今日电子书快照开始
2023-01-26 04:35:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762641544089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:35:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762641544089600[0;39m ==> Parameters: 
2023-01-26 04:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762641544089600[0;39m <==    Updates: 0
2023-01-26 04:35:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273762641544089600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:35:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273762662503026688[0;39m 更新电子书下的文档数据开始
2023-01-26 04:35:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762662503026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:35:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762662503026688[0;39m ==> Parameters: 
2023-01-26 04:35:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762662503026688[0;39m <==    Updates: 1
2023-01-26 04:35:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273762662503026688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:35:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273762788323758080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:35:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762788323758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:35:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762788323758080[0;39m ==> Parameters: 
2023-01-26 04:35:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762788323758080[0;39m <==    Updates: 1
2023-01-26 04:35:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273762788323758080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:36:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273762893181358080[0;39m 生成今日电子书快照开始
2023-01-26 04:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762893181358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762893181358080[0;39m ==> Parameters: 
2023-01-26 04:36:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273762893181358080[0;39m <==    Updates: 0
2023-01-26 04:36:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273762893181358080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:36:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273762914203209728[0;39m 更新电子书下的文档数据开始
2023-01-26 04:36:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762914203209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:36:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762914203209728[0;39m ==> Parameters: 
2023-01-26 04:36:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273762914203209728[0;39m <==    Updates: 1
2023-01-26 04:36:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273762914203209728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:36:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273763039986192384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763039986192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:36:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763039986192384[0;39m ==> Parameters: 
2023-01-26 04:36:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763039986192384[0;39m <==    Updates: 1
2023-01-26 04:36:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273763039986192384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:37:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273763144843792384[0;39m 生成今日电子书快照开始
2023-01-26 04:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763144843792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:37:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763144843792384[0;39m ==> Parameters: 
2023-01-26 04:37:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763144843792384[0;39m <==    Updates: 0
2023-01-26 04:37:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273763144843792384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:37:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273763165811118080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763165811118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763165811118080[0;39m ==> Parameters: 
2023-01-26 04:37:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763165811118080[0;39m <==    Updates: 1
2023-01-26 04:37:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273763165811118080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:37:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273763291640238080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:37:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763291640238080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:37:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763291640238080[0;39m ==> Parameters: 
2023-01-26 04:37:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763291640238080[0;39m <==    Updates: 1
2023-01-26 04:37:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273763291640238080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:38:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273763396506226688[0;39m 生成今日电子书快照开始
2023-01-26 04:38:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763396506226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:38:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763396506226688[0;39m ==> Parameters: 
2023-01-26 04:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763396506226688[0;39m <==    Updates: 0
2023-01-26 04:38:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273763396506226688[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 04:38:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273763417469358080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:38:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763417469358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:38:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763417469358080[0;39m ==> Parameters: 
2023-01-26 04:38:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763417469358080[0;39m <==    Updates: 1
2023-01-26 04:38:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273763417469358080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:38:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273763543311060992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763543311060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763543311060992[0;39m ==> Parameters: 
2023-01-26 04:38:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763543311060992[0;39m <==    Updates: 1
2023-01-26 04:38:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273763543311060992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:39:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273763648164466688[0;39m 生成今日电子书快照开始
2023-01-26 04:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763648164466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763648164466688[0;39m ==> Parameters: 
2023-01-26 04:39:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763648164466688[0;39m <==    Updates: 0
2023-01-26 04:39:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273763648164466688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:39:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273763669131792384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:39:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763669131792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:39:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763669131792384[0;39m ==> Parameters: 
2023-01-26 04:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763669131792384[0;39m <==    Updates: 1
2023-01-26 04:39:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273763669131792384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:39:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273763794960912384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:39:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763794960912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:39:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763794960912384[0;39m ==> Parameters: 
2023-01-26 04:39:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763794960912384[0;39m <==    Updates: 1
2023-01-26 04:39:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273763794960912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:40:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273763899814318080[0;39m 生成今日电子书快照开始
2023-01-26 04:40:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763899814318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:40:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763899814318080[0;39m ==> Parameters: 
2023-01-26 04:40:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273763899814318080[0;39m <==    Updates: 0
2023-01-26 04:40:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273763899814318080[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:40:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273763920798420992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:40:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763920798420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:40:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763920798420992[0;39m ==> Parameters: 
2023-01-26 04:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273763920798420992[0;39m <==    Updates: 1
2023-01-26 04:40:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273763920798420992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:40:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273764046606569472[0;39m 更新电子书下的文档数据开始
2023-01-26 04:40:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764046606569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:40:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764046606569472[0;39m ==> Parameters: 
2023-01-26 04:40:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764046606569472[0;39m <==    Updates: 1
2023-01-26 04:40:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273764046606569472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:41:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273764151480946688[0;39m 生成今日电子书快照开始
2023-01-26 04:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764151480946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764151480946688[0;39m ==> Parameters: 
2023-01-26 04:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764151480946688[0;39m <==    Updates: 0
2023-01-26 04:41:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273764151480946688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:41:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273764172448272384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:41:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764172448272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764172448272384[0;39m ==> Parameters: 
2023-01-26 04:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764172448272384[0;39m <==    Updates: 1
2023-01-26 04:41:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273764172448272384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:41:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273764298302558208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:41:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764298302558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:41:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764298302558208[0;39m ==> Parameters: 
2023-01-26 04:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764298302558208[0;39m <==    Updates: 1
2023-01-26 04:41:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273764298302558208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:42:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273764403147575296[0;39m 生成今日电子书快照开始
2023-01-26 04:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764403147575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:42:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764403147575296[0;39m ==> Parameters: 
2023-01-26 04:42:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764403147575296[0;39m <==    Updates: 0
2023-01-26 04:42:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273764403147575296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:42:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273764424114900992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764424114900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764424114900992[0;39m ==> Parameters: 
2023-01-26 04:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764424114900992[0;39m <==    Updates: 1
2023-01-26 04:42:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273764424114900992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:42:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273764549931438080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:42:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764549931438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:42:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764549931438080[0;39m ==> Parameters: 
2023-01-26 04:42:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764549931438080[0;39m <==    Updates: 1
2023-01-26 04:42:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273764549931438080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:43:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273764654805815296[0;39m 生成今日电子书快照开始
2023-01-26 04:43:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764654805815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:43:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764654805815296[0;39m ==> Parameters: 
2023-01-26 04:43:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764654805815296[0;39m <==    Updates: 0
2023-01-26 04:43:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273764654805815296[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 04:43:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273764675773140992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:43:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764675773140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764675773140992[0;39m ==> Parameters: 
2023-01-26 04:43:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764675773140992[0;39m <==    Updates: 1
2023-01-26 04:43:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273764675773140992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:43:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273764801598066688[0;39m 更新电子书下的文档数据开始
2023-01-26 04:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764801598066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764801598066688[0;39m ==> Parameters: 
2023-01-26 04:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764801598066688[0;39m <==    Updates: 1
2023-01-26 04:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273764801598066688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:44:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273764906464055296[0;39m 生成今日电子书快照开始
2023-01-26 04:44:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764906464055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:44:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764906464055296[0;39m ==> Parameters: 
2023-01-26 04:44:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273764906464055296[0;39m <==    Updates: 0
2023-01-26 04:44:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273764906464055296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:44:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273764927435575296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:44:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764927435575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:44:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764927435575296[0;39m ==> Parameters: 
2023-01-26 04:44:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273764927435575296[0;39m <==    Updates: 1
2023-01-26 04:44:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273764927435575296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:44:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273765053260500992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:44:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765053260500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:44:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765053260500992[0;39m ==> Parameters: 
2023-01-26 04:44:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765053260500992[0;39m <==    Updates: 1
2023-01-26 04:44:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273765053260500992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:45:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273765158126489600[0;39m 生成今日电子书快照开始
2023-01-26 04:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765158126489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765158126489600[0;39m ==> Parameters: 
2023-01-26 04:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765158126489600[0;39m <==    Updates: 0
2023-01-26 04:45:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273765158126489600[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 04:45:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273765179081232384[0;39m 更新电子书下的文档数据开始
2023-01-26 04:45:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765179081232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:45:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765179081232384[0;39m ==> Parameters: 
2023-01-26 04:45:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765179081232384[0;39m <==    Updates: 1
2023-01-26 04:45:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273765179081232384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:45:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273765304901963776[0;39m 更新电子书下的文档数据开始
2023-01-26 04:45:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765304901963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:45:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765304901963776[0;39m ==> Parameters: 
2023-01-26 04:45:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765304901963776[0;39m <==    Updates: 1
2023-01-26 04:45:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273765304901963776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:46:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273765409776340992[0;39m 生成今日电子书快照开始
2023-01-26 04:46:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765409776340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765409776340992[0;39m ==> Parameters: 
2023-01-26 04:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765409776340992[0;39m <==    Updates: 0
2023-01-26 04:46:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273765409776340992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:46:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273765430735278080[0;39m 更新电子书下的文档数据开始
2023-01-26 04:46:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765430735278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:46:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765430735278080[0;39m ==> Parameters: 
2023-01-26 04:46:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765430735278080[0;39m <==    Updates: 1
2023-01-26 04:46:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273765430735278080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:46:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273765556576980992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:46:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765556576980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:46:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765556576980992[0;39m ==> Parameters: 
2023-01-26 04:46:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765556576980992[0;39m <==    Updates: 1
2023-01-26 04:46:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273765556576980992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:47:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273765661447163904[0;39m 生成今日电子书快照开始
2023-01-26 04:47:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765661447163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:47:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765661447163904[0;39m ==> Parameters: 
2023-01-26 04:47:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765661447163904[0;39m <==    Updates: 0
2023-01-26 04:47:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273765661447163904[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 04:47:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273765682389323776[0;39m 更新电子书下的文档数据开始
2023-01-26 04:47:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765682389323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:47:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765682389323776[0;39m ==> Parameters: 
2023-01-26 04:47:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765682389323776[0;39m <==    Updates: 1
2023-01-26 04:47:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273765682389323776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:47:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273765808235220992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:47:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765808235220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765808235220992[0;39m ==> Parameters: 
2023-01-26 04:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765808235220992[0;39m <==    Updates: 1
2023-01-26 04:47:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273765808235220992[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 04:48:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273765913097015296[0;39m 生成今日电子书快照开始
2023-01-26 04:48:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765913097015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:48:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765913097015296[0;39m ==> Parameters: 
2023-01-26 04:48:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273765913097015296[0;39m <==    Updates: 0
2023-01-26 04:48:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273765913097015296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:48:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273765934064340992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:48:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765934064340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765934064340992[0;39m ==> Parameters: 
2023-01-26 04:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273765934064340992[0;39m <==    Updates: 1
2023-01-26 04:48:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273765934064340992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 04:48:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273766059897655296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:48:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766059897655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:48:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766059897655296[0;39m ==> Parameters: 
2023-01-26 04:48:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766059897655296[0;39m <==    Updates: 1
2023-01-26 04:48:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273766059897655296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:49:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273766164759449600[0;39m 生成今日电子书快照开始
2023-01-26 04:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766164759449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:49:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766164759449600[0;39m ==> Parameters: 
2023-01-26 04:49:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766164759449600[0;39m <==    Updates: 0
2023-01-26 04:49:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273766164759449600[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:49:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273766185722580992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766185722580992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766185722580992[0;39m ==> Parameters: 
2023-01-26 04:49:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766185722580992[0;39m <==    Updates: 1
2023-01-26 04:49:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273766185722580992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:49:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273766311564283904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766311564283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:49:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766311564283904[0;39m ==> Parameters: 
2023-01-26 04:49:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766311564283904[0;39m <==    Updates: 1
2023-01-26 04:49:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273766311564283904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:50:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273766416413495296[0;39m 生成今日电子书快照开始
2023-01-26 04:50:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766416413495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:50:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766416413495296[0;39m ==> Parameters: 
2023-01-26 04:50:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766416413495296[0;39m <==    Updates: 0
2023-01-26 04:50:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273766416413495296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:50:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273766437376626688[0;39m 更新电子书下的文档数据开始
2023-01-26 04:50:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766437376626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:50:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766437376626688[0;39m ==> Parameters: 
2023-01-26 04:50:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766437376626688[0;39m <==    Updates: 1
2023-01-26 04:50:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273766437376626688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:50:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273766563214135296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:50:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766563214135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:50:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766563214135296[0;39m ==> Parameters: 
2023-01-26 04:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766563214135296[0;39m <==    Updates: 1
2023-01-26 04:50:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273766563214135296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:51:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273766668084318208[0;39m 生成今日电子书快照开始
2023-01-26 04:51:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766668084318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:51:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766668084318208[0;39m ==> Parameters: 
2023-01-26 04:51:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766668084318208[0;39m <==    Updates: 0
2023-01-26 04:51:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273766668084318208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 04:51:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273766689043255296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:51:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766689043255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:51:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766689043255296[0;39m ==> Parameters: 
2023-01-26 04:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766689043255296[0;39m <==    Updates: 1
2023-01-26 04:51:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273766689043255296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 04:51:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273766814847209472[0;39m 更新电子书下的文档数据开始
2023-01-26 04:51:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766814847209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:51:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766814847209472[0;39m ==> Parameters: 
2023-01-26 04:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766814847209472[0;39m <==    Updates: 1
2023-01-26 04:51:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273766814847209472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:52:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273766919742558208[0;39m 生成今日电子书快照开始
2023-01-26 04:52:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766919742558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766919742558208[0;39m ==> Parameters: 
2023-01-26 04:52:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273766919742558208[0;39m <==    Updates: 0
2023-01-26 04:52:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273766919742558208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:52:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273766940705689600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:52:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766940705689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:52:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766940705689600[0;39m ==> Parameters: 
2023-01-26 04:52:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273766940705689600[0;39m <==    Updates: 1
2023-01-26 04:52:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273766940705689600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:52:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273767066530615296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767066530615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767066530615296[0;39m ==> Parameters: 
2023-01-26 04:52:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767066530615296[0;39m <==    Updates: 1
2023-01-26 04:52:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273767066530615296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:53:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273767171396603904[0;39m 生成今日电子书快照开始
2023-01-26 04:53:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767171396603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:53:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767171396603904[0;39m ==> Parameters: 
2023-01-26 04:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767171396603904[0;39m <==    Updates: 0
2023-01-26 04:53:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273767171396603904[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:53:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273767192359735296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767192359735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767192359735296[0;39m ==> Parameters: 
2023-01-26 04:53:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767192359735296[0;39m <==    Updates: 1
2023-01-26 04:53:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273767192359735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:53:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273767318201438208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:53:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767318201438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:53:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767318201438208[0;39m ==> Parameters: 
2023-01-26 04:53:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767318201438208[0;39m <==    Updates: 1
2023-01-26 04:53:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273767318201438208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:54:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273767423046455296[0;39m 生成今日电子书快照开始
2023-01-26 04:54:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767423046455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:54:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767423046455296[0;39m ==> Parameters: 
2023-01-26 04:54:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767423046455296[0;39m <==    Updates: 0
2023-01-26 04:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273767423046455296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 04:54:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273767444026363904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:54:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767444026363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:54:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767444026363904[0;39m ==> Parameters: 
2023-01-26 04:54:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767444026363904[0;39m <==    Updates: 1
2023-01-26 04:54:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273767444026363904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:54:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273767569851289600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767569851289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767569851289600[0;39m ==> Parameters: 
2023-01-26 04:54:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767569851289600[0;39m <==    Updates: 1
2023-01-26 04:54:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273767569851289600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:55:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273767674713083904[0;39m 生成今日电子书快照开始
2023-01-26 04:55:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767674713083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:55:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767674713083904[0;39m ==> Parameters: 
2023-01-26 04:55:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767674713083904[0;39m <==    Updates: 0
2023-01-26 04:55:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273767674713083904[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 04:55:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273767695684603904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767695684603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767695684603904[0;39m ==> Parameters: 
2023-01-26 04:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767695684603904[0;39m <==    Updates: 1
2023-01-26 04:55:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273767695684603904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:55:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273767821509529600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:55:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767821509529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:55:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767821509529600[0;39m ==> Parameters: 
2023-01-26 04:55:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767821509529600[0;39m <==    Updates: 1
2023-01-26 04:55:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273767821509529600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:56:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273767926379712512[0;39m 生成今日电子书快照开始
2023-01-26 04:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767926379712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:56:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767926379712512[0;39m ==> Parameters: 
2023-01-26 04:56:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273767926379712512[0;39m <==    Updates: 0
2023-01-26 04:56:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273767926379712512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:56:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273767947334455296[0;39m 更新电子书下的文档数据开始
2023-01-26 04:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767947334455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:56:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767947334455296[0;39m ==> Parameters: 
2023-01-26 04:56:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273767947334455296[0;39m <==    Updates: 1
2023-01-26 04:56:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273767947334455296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:56:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273768073167769600[0;39m 更新电子书下的文档数据开始
2023-01-26 04:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768073167769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768073167769600[0;39m ==> Parameters: 
2023-01-26 04:56:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768073167769600[0;39m <==    Updates: 1
2023-01-26 04:56:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273768073167769600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 04:57:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273768178037952512[0;39m 生成今日电子书快照开始
2023-01-26 04:57:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768178037952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:57:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768178037952512[0;39m ==> Parameters: 
2023-01-26 04:57:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768178037952512[0;39m <==    Updates: 0
2023-01-26 04:57:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273768178037952512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 04:57:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273768199005278208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768199005278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768199005278208[0;39m ==> Parameters: 
2023-01-26 04:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768199005278208[0;39m <==    Updates: 1
2023-01-26 04:57:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273768199005278208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:57:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273768324838592512[0;39m 更新电子书下的文档数据开始
2023-01-26 04:57:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768324838592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:57:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768324838592512[0;39m ==> Parameters: 
2023-01-26 04:57:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768324838592512[0;39m <==    Updates: 1
2023-01-26 04:57:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273768324838592512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:58:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273768429708775424[0;39m 生成今日电子书快照开始
2023-01-26 04:58:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768429708775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:58:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768429708775424[0;39m ==> Parameters: 
2023-01-26 04:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768429708775424[0;39m <==    Updates: 0
2023-01-26 04:58:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273768429708775424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 04:58:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273768450659323904[0;39m 更新电子书下的文档数据开始
2023-01-26 04:58:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768450659323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:58:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768450659323904[0;39m ==> Parameters: 
2023-01-26 04:58:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768450659323904[0;39m <==    Updates: 1
2023-01-26 04:58:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273768450659323904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 04:58:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273768576475860992[0;39m 更新电子书下的文档数据开始
2023-01-26 04:58:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768576475860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:58:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768576475860992[0;39m ==> Parameters: 
2023-01-26 04:58:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768576475860992[0;39m <==    Updates: 1
2023-01-26 04:58:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273768576475860992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 04:59:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273768681346043904[0;39m 生成今日电子书快照开始
2023-01-26 04:59:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768681346043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 04:59:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768681346043904[0;39m ==> Parameters: 
2023-01-26 04:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768681346043904[0;39m <==    Updates: 0
2023-01-26 04:59:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273768681346043904[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 04:59:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273768702330146816[0;39m 更新电子书下的文档数据开始
2023-01-26 04:59:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768702330146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:59:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768702330146816[0;39m ==> Parameters: 
2023-01-26 04:59:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768702330146816[0;39m <==    Updates: 1
2023-01-26 04:59:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273768702330146816[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 04:59:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273768828150878208[0;39m 更新电子书下的文档数据开始
2023-01-26 04:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768828150878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 04:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768828150878208[0;39m ==> Parameters: 
2023-01-26 04:59:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768828150878208[0;39m <==    Updates: 1
2023-01-26 04:59:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273768828150878208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:00:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273768933021061120[0;39m 生成今日电子书快照开始
2023-01-26 05:00:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768933021061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:00:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768933021061120[0;39m ==> Parameters: 
2023-01-26 05:00:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273768933021061120[0;39m <==    Updates: 0
2023-01-26 05:00:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273768933021061120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:00:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273768953967415296[0;39m 更新电子书下的文档数据开始
2023-01-26 05:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768953967415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:00:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768953967415296[0;39m ==> Parameters: 
2023-01-26 05:00:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273768953967415296[0;39m <==    Updates: 1
2023-01-26 05:00:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273768953967415296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:00:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273769079813312512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:00:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769079813312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:00:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769079813312512[0;39m ==> Parameters: 
2023-01-26 05:00:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769079813312512[0;39m <==    Updates: 1
2023-01-26 05:00:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273769079813312512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273769184675106816[0;39m 生成今日电子书快照开始
2023-01-26 05:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769184675106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:01:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769184675106816[0;39m ==> Parameters: 
2023-01-26 05:01:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769184675106816[0;39m <==    Updates: 0
2023-01-26 05:01:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273769184675106816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:01:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273769205638238208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:01:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769205638238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:01:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769205638238208[0;39m ==> Parameters: 
2023-01-26 05:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769205638238208[0;39m <==    Updates: 1
2023-01-26 05:01:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273769205638238208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:01:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273769331471552512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769331471552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:01:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769331471552512[0;39m ==> Parameters: 
2023-01-26 05:01:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769331471552512[0;39m <==    Updates: 1
2023-01-26 05:01:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273769331471552512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:02:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273769436341735424[0;39m 生成今日电子书快照开始
2023-01-26 05:02:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769436341735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:02:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769436341735424[0;39m ==> Parameters: 
2023-01-26 05:02:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769436341735424[0;39m <==    Updates: 0
2023-01-26 05:02:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273769436341735424[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:02:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273769457300672512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:02:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769457300672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769457300672512[0;39m ==> Parameters: 
2023-01-26 05:02:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769457300672512[0;39m <==    Updates: 1
2023-01-26 05:02:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273769457300672512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:02:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273769583133986816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769583133986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769583133986816[0;39m ==> Parameters: 
2023-01-26 05:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769583133986816[0;39m <==    Updates: 1
2023-01-26 05:02:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273769583133986816[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 05:03:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273769687979003904[0;39m 生成今日电子书快照开始
2023-01-26 05:03:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769687979003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:03:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769687979003904[0;39m ==> Parameters: 
2023-01-26 05:03:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769687979003904[0;39m <==    Updates: 0
2023-01-26 05:03:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273769687979003904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:03:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273769708967301120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:03:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769708967301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:03:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769708967301120[0;39m ==> Parameters: 
2023-01-26 05:03:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769708967301120[0;39m <==    Updates: 1
2023-01-26 05:03:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273769708967301120[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 05:03:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273769834788032512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769834788032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769834788032512[0;39m ==> Parameters: 
2023-01-26 05:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769834788032512[0;39m <==    Updates: 1
2023-01-26 05:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273769834788032512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:04:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273769939662409728[0;39m 生成今日电子书快照开始
2023-01-26 05:04:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769939662409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:04:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769939662409728[0;39m ==> Parameters: 
2023-01-26 05:04:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273769939662409728[0;39m <==    Updates: 0
2023-01-26 05:04:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273769939662409728[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 05:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273769960617152512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769960617152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769960617152512[0;39m ==> Parameters: 
2023-01-26 05:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273769960617152512[0;39m <==    Updates: 1
2023-01-26 05:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273769960617152512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:04:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273770086458855424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:04:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770086458855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:04:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770086458855424[0;39m ==> Parameters: 
2023-01-26 05:04:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770086458855424[0;39m <==    Updates: 1
2023-01-26 05:04:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273770086458855424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:05:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273770191324844032[0;39m 生成今日电子书快照开始
2023-01-26 05:05:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770191324844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:05:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770191324844032[0;39m ==> Parameters: 
2023-01-26 05:05:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770191324844032[0;39m <==    Updates: 0
2023-01-26 05:05:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273770191324844032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 05:05:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273770212279586816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:05:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770212279586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770212279586816[0;39m ==> Parameters: 
2023-01-26 05:05:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770212279586816[0;39m <==    Updates: 1
2023-01-26 05:05:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273770212279586816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:05:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273770338096123904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770338096123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770338096123904[0;39m ==> Parameters: 
2023-01-26 05:05:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770338096123904[0;39m <==    Updates: 1
2023-01-26 05:05:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273770338096123904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:06:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273770442920169472[0;39m 生成今日电子书快照开始
2023-01-26 05:06:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770442920169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:06:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770442920169472[0;39m ==> Parameters: 
2023-01-26 05:06:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770442920169472[0;39m <==    Updates: 0
2023-01-26 05:06:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273770442920169472[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 05:06:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273770463933632512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:06:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770463933632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:06:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770463933632512[0;39m ==> Parameters: 
2023-01-26 05:06:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770463933632512[0;39m <==    Updates: 1
2023-01-26 05:06:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273770463933632512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:06:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273770589766946816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:06:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770589766946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:06:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770589766946816[0;39m ==> Parameters: 
2023-01-26 05:06:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770589766946816[0;39m <==    Updates: 1
2023-01-26 05:06:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273770589766946816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:07:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273770694632935424[0;39m 生成今日电子书快照开始
2023-01-26 05:07:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770694632935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:07:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770694632935424[0;39m ==> Parameters: 
2023-01-26 05:07:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770694632935424[0;39m <==    Updates: 0
2023-01-26 05:07:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273770694632935424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:07:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273770715596066816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:07:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770715596066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:07:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770715596066816[0;39m ==> Parameters: 
2023-01-26 05:07:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770715596066816[0;39m <==    Updates: 1
2023-01-26 05:07:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273770715596066816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:07:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273770841425186816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770841425186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:07:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770841425186816[0;39m ==> Parameters: 
2023-01-26 05:07:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770841425186816[0;39m <==    Updates: 1
2023-01-26 05:07:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273770841425186816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:08:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273770946295369728[0;39m 生成今日电子书快照开始
2023-01-26 05:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770946295369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:08:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770946295369728[0;39m ==> Parameters: 
2023-01-26 05:08:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273770946295369728[0;39m <==    Updates: 0
2023-01-26 05:08:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273770946295369728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:08:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273770967254306816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770967254306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770967254306816[0;39m ==> Parameters: 
2023-01-26 05:08:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273770967254306816[0;39m <==    Updates: 1
2023-01-26 05:08:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273770967254306816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:08:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273771093087621120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:08:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771093087621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:08:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771093087621120[0;39m ==> Parameters: 
2023-01-26 05:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771093087621120[0;39m <==    Updates: 1
2023-01-26 05:08:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273771093087621120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:09:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273771197949415424[0;39m 生成今日电子书快照开始
2023-01-26 05:09:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771197949415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771197949415424[0;39m ==> Parameters: 
2023-01-26 05:09:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771197949415424[0;39m <==    Updates: 0
2023-01-26 05:09:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273771197949415424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:09:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273771218899963904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:09:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771218899963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:09:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771218899963904[0;39m ==> Parameters: 
2023-01-26 05:09:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771218899963904[0;39m <==    Updates: 1
2023-01-26 05:09:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273771218899963904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:09:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273771344750055424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771344750055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771344750055424[0;39m ==> Parameters: 
2023-01-26 05:09:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771344750055424[0;39m <==    Updates: 1
2023-01-26 05:09:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273771344750055424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:10:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273771449616044032[0;39m 生成今日电子书快照开始
2023-01-26 05:10:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771449616044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:10:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771449616044032[0;39m ==> Parameters: 
2023-01-26 05:10:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771449616044032[0;39m <==    Updates: 0
2023-01-26 05:10:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273771449616044032[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 05:10:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273771470587564032[0;39m 更新电子书下的文档数据开始
2023-01-26 05:10:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771470587564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:10:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771470587564032[0;39m ==> Parameters: 
2023-01-26 05:10:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771470587564032[0;39m <==    Updates: 1
2023-01-26 05:10:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273771470587564032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:10:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273771596383129600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771596383129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771596383129600[0;39m ==> Parameters: 
2023-01-26 05:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771596383129600[0;39m <==    Updates: 1
2023-01-26 05:10:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273771596383129600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 05:11:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273771701211369472[0;39m 生成今日电子书快照开始
2023-01-26 05:11:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771701211369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771701211369472[0;39m ==> Parameters: 
2023-01-26 05:11:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771701211369472[0;39m <==    Updates: 0
2023-01-26 05:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273771701211369472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:11:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273771722220638208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:11:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771722220638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:11:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771722220638208[0;39m ==> Parameters: 
2023-01-26 05:11:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771722220638208[0;39m <==    Updates: 1
2023-01-26 05:11:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273771722220638208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:11:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273771848066535424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:11:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771848066535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:11:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771848066535424[0;39m ==> Parameters: 
2023-01-26 05:11:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771848066535424[0;39m <==    Updates: 1
2023-01-26 05:11:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273771848066535424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:12:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273771952924135424[0;39m 生成今日电子书快照开始
2023-01-26 05:12:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771952924135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:12:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771952924135424[0;39m ==> Parameters: 
2023-01-26 05:12:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273771952924135424[0;39m <==    Updates: 0
2023-01-26 05:12:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273771952924135424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:12:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273771973845323776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:12:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771973845323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:12:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771973845323776[0;39m ==> Parameters: 
2023-01-26 05:12:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273771973845323776[0;39m <==    Updates: 1
2023-01-26 05:12:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273771973845323776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:12:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273772099724775424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:12:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772099724775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:12:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772099724775424[0;39m ==> Parameters: 
2023-01-26 05:12:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772099724775424[0;39m <==    Updates: 1
2023-01-26 05:12:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273772099724775424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:13:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273772204557209600[0;39m 生成今日电子书快照开始
2023-01-26 05:13:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772204557209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:13:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772204557209600[0;39m ==> Parameters: 
2023-01-26 05:13:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772204557209600[0;39m <==    Updates: 0
2023-01-26 05:13:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273772204557209600[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 05:13:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273772225553895424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:13:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772225553895424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:13:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772225553895424[0;39m ==> Parameters: 
2023-01-26 05:13:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772225553895424[0;39m <==    Updates: 1
2023-01-26 05:13:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273772225553895424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:13:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273772351387209728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:13:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772351387209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:13:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772351387209728[0;39m ==> Parameters: 
2023-01-26 05:13:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772351387209728[0;39m <==    Updates: 1
2023-01-26 05:13:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273772351387209728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:14:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273772456181895168[0;39m 生成今日电子书快照开始
2023-01-26 05:14:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772456181895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:14:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772456181895168[0;39m ==> Parameters: 
2023-01-26 05:14:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772456181895168[0;39m <==    Updates: 0
2023-01-26 05:14:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273772456181895168[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:14:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273772477212135424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:14:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772477212135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:14:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772477212135424[0;39m ==> Parameters: 
2023-01-26 05:14:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772477212135424[0;39m <==    Updates: 1
2023-01-26 05:14:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273772477212135424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:14:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273772603045449728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:14:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772603045449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:14:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772603045449728[0;39m ==> Parameters: 
2023-01-26 05:14:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772603045449728[0;39m <==    Updates: 1
2023-01-26 05:14:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273772603045449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:15:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273772707903049728[0;39m 生成今日电子书快照开始
2023-01-26 05:15:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772707903049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:15:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772707903049728[0;39m ==> Parameters: 
2023-01-26 05:15:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772707903049728[0;39m <==    Updates: 0
2023-01-26 05:15:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273772707903049728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:15:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273772728874569728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:15:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772728874569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:15:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772728874569728[0;39m ==> Parameters: 
2023-01-26 05:15:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772728874569728[0;39m <==    Updates: 1
2023-01-26 05:15:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273772728874569728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:15:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273772854703689728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:15:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772854703689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:15:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772854703689728[0;39m ==> Parameters: 
2023-01-26 05:15:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772854703689728[0;39m <==    Updates: 1
2023-01-26 05:15:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273772854703689728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:16:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273772959565484032[0;39m 生成今日电子书快照开始
2023-01-26 05:16:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772959565484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:16:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772959565484032[0;39m ==> Parameters: 
2023-01-26 05:16:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273772959565484032[0;39m <==    Updates: 0
2023-01-26 05:16:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273772959565484032[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:16:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273772980482478080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:16:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772980482478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:16:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772980482478080[0;39m ==> Parameters: 
2023-01-26 05:16:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273772980482478080[0;39m <==    Updates: 1
2023-01-26 05:16:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273772980482478080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:16:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273773106361929728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:16:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773106361929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:16:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773106361929728[0;39m ==> Parameters: 
2023-01-26 05:16:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773106361929728[0;39m <==    Updates: 1
2023-01-26 05:16:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273773106361929728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:17:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273773211190169600[0;39m 生成今日电子书快照开始
2023-01-26 05:17:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773211190169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:17:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773211190169600[0;39m ==> Parameters: 
2023-01-26 05:17:00.032 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773211190169600[0;39m <==    Updates: 0
2023-01-26 05:17:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273773211190169600[0;39m 生成今日电子书快照结束，耗时：26毫秒
2023-01-26 05:17:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273773232199438336[0;39m 更新电子书下的文档数据开始
2023-01-26 05:17:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773232199438336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:17:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773232199438336[0;39m ==> Parameters: 
2023-01-26 05:17:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773232199438336[0;39m <==    Updates: 1
2023-01-26 05:17:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273773232199438336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:17:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273773358007586816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773358007586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773358007586816[0;39m ==> Parameters: 
2023-01-26 05:17:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773358007586816[0;39m <==    Updates: 1
2023-01-26 05:17:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273773358007586816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:18:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273773462819049472[0;39m 生成今日电子书快照开始
2023-01-26 05:18:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773462819049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:18:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773462819049472[0;39m ==> Parameters: 
2023-01-26 05:18:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773462819049472[0;39m <==    Updates: 0
2023-01-26 05:18:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273773462819049472[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:18:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273773483840901120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:18:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773483840901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:18:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773483840901120[0;39m ==> Parameters: 
2023-01-26 05:18:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773483840901120[0;39m <==    Updates: 1
2023-01-26 05:18:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273773483840901120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:18:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273773609623883776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:18:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773609623883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:18:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773609623883776[0;39m ==> Parameters: 
2023-01-26 05:18:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773609623883776[0;39m <==    Updates: 1
2023-01-26 05:18:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273773609623883776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:19:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273773714498260992[0;39m 生成今日电子书快照开始
2023-01-26 05:19:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773714498260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:19:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773714498260992[0;39m ==> Parameters: 
2023-01-26 05:19:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773714498260992[0;39m <==    Updates: 0
2023-01-26 05:19:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273773714498260992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:19:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273773735457198080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:19:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773735457198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:19:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773735457198080[0;39m ==> Parameters: 
2023-01-26 05:19:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773735457198080[0;39m <==    Updates: 1
2023-01-26 05:19:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273773735457198080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:19:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273773861277929472[0;39m 更新电子书下的文档数据开始
2023-01-26 05:19:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773861277929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:19:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773861277929472[0;39m ==> Parameters: 
2023-01-26 05:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773861277929472[0;39m <==    Updates: 1
2023-01-26 05:19:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273773861277929472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:20:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273773966148112384[0;39m 生成今日电子书快照开始
2023-01-26 05:20:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773966148112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:20:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773966148112384[0;39m ==> Parameters: 
2023-01-26 05:20:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273773966148112384[0;39m <==    Updates: 0
2023-01-26 05:20:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273773966148112384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:20:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273773987111243776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:20:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773987111243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:20:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773987111243776[0;39m ==> Parameters: 
2023-01-26 05:20:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273773987111243776[0;39m <==    Updates: 1
2023-01-26 05:20:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273773987111243776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 05:20:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273774112940363776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:20:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774112940363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:20:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774112940363776[0;39m ==> Parameters: 
2023-01-26 05:20:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774112940363776[0;39m <==    Updates: 1
2023-01-26 05:20:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273774112940363776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:21:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273774217806352384[0;39m 生成今日电子书快照开始
2023-01-26 05:21:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774217806352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774217806352384[0;39m ==> Parameters: 
2023-01-26 05:21:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774217806352384[0;39m <==    Updates: 0
2023-01-26 05:21:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273774217806352384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:21:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273774238807232512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774238807232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774238807232512[0;39m ==> Parameters: 
2023-01-26 05:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774238807232512[0;39m <==    Updates: 1
2023-01-26 05:21:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273774238807232512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:21:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273774364602798080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:21:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774364602798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:21:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774364602798080[0;39m ==> Parameters: 
2023-01-26 05:21:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774364602798080[0;39m <==    Updates: 1
2023-01-26 05:21:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273774364602798080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:22:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273774469464592384[0;39m 生成今日电子书快照开始
2023-01-26 05:22:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774469464592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:22:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774469464592384[0;39m ==> Parameters: 
2023-01-26 05:22:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774469464592384[0;39m <==    Updates: 0
2023-01-26 05:22:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273774469464592384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 05:22:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273774490431918080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774490431918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774490431918080[0;39m ==> Parameters: 
2023-01-26 05:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774490431918080[0;39m <==    Updates: 1
2023-01-26 05:22:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273774490431918080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 05:22:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273774616311369728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:22:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774616311369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:22:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774616311369728[0;39m ==> Parameters: 
2023-01-26 05:22:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774616311369728[0;39m <==    Updates: 1
2023-01-26 05:22:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273774616311369728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:23:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273774721118638080[0;39m 生成今日电子书快照开始
2023-01-26 05:23:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774721118638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:23:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774721118638080[0;39m ==> Parameters: 
2023-01-26 05:23:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774721118638080[0;39m <==    Updates: 0
2023-01-26 05:23:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273774721118638080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:23:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273774742090158080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:23:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774742090158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:23:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774742090158080[0;39m ==> Parameters: 
2023-01-26 05:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774742090158080[0;39m <==    Updates: 1
2023-01-26 05:23:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273774742090158080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:23:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273774867915083776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:23:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774867915083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:23:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774867915083776[0;39m ==> Parameters: 
2023-01-26 05:23:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774867915083776[0;39m <==    Updates: 1
2023-01-26 05:23:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273774867915083776[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:24:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273774972776878080[0;39m 生成今日电子书快照开始
2023-01-26 05:24:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774972776878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:24:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774972776878080[0;39m ==> Parameters: 
2023-01-26 05:24:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273774972776878080[0;39m <==    Updates: 0
2023-01-26 05:24:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273774972776878080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:24:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273774993802924032[0;39m 更新电子书下的文档数据开始
2023-01-26 05:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774993802924032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774993802924032[0;39m ==> Parameters: 
2023-01-26 05:24:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273774993802924032[0;39m <==    Updates: 1
2023-01-26 05:24:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273774993802924032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:24:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273775119573323776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:24:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775119573323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:24:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775119573323776[0;39m ==> Parameters: 
2023-01-26 05:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775119573323776[0;39m <==    Updates: 1
2023-01-26 05:24:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273775119573323776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:25:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273775224443506688[0;39m 生成今日电子书快照开始
2023-01-26 05:25:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775224443506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775224443506688[0;39m ==> Parameters: 
2023-01-26 05:25:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775224443506688[0;39m <==    Updates: 0
2023-01-26 05:25:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273775224443506688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:25:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273775245406638080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:25:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775245406638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:25:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775245406638080[0;39m ==> Parameters: 
2023-01-26 05:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775245406638080[0;39m <==    Updates: 1
2023-01-26 05:25:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273775245406638080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:25:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273775371235758080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:25:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775371235758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:25:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775371235758080[0;39m ==> Parameters: 
2023-01-26 05:25:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775371235758080[0;39m <==    Updates: 1
2023-01-26 05:25:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273775371235758080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:26:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273775476097552384[0;39m 生成今日电子书快照开始
2023-01-26 05:26:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775476097552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775476097552384[0;39m ==> Parameters: 
2023-01-26 05:26:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775476097552384[0;39m <==    Updates: 0
2023-01-26 05:26:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273775476097552384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:26:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273775497060683776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:26:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775497060683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:26:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775497060683776[0;39m ==> Parameters: 
2023-01-26 05:26:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775497060683776[0;39m <==    Updates: 1
2023-01-26 05:26:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273775497060683776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:26:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273775622889803776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:26:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775622889803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:26:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775622889803776[0;39m ==> Parameters: 
2023-01-26 05:26:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775622889803776[0;39m <==    Updates: 1
2023-01-26 05:26:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273775622889803776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:27:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273775727827095552[0;39m 生成今日电子书快照开始
2023-01-26 05:27:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775727827095552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:27:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775727827095552[0;39m ==> Parameters: 
2023-01-26 05:27:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775727827095552[0;39m <==    Updates: 0
2023-01-26 05:27:00.031 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273775727827095552[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 05:27:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273775748723118080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:27:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775748723118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:27:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775748723118080[0;39m ==> Parameters: 
2023-01-26 05:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775748723118080[0;39m <==    Updates: 1
2023-01-26 05:27:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273775748723118080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:27:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273775874556432384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:27:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775874556432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:27:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775874556432384[0;39m ==> Parameters: 
2023-01-26 05:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273775874556432384[0;39m <==    Updates: 1
2023-01-26 05:27:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273775874556432384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:28:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273775979418226688[0;39m 生成今日电子书快照开始
2023-01-26 05:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775979418226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:28:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775979418226688[0;39m ==> Parameters: 
2023-01-26 05:28:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273775979418226688[0;39m <==    Updates: 0
2023-01-26 05:28:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273775979418226688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:28:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273776000377163776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:28:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776000377163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:28:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776000377163776[0;39m ==> Parameters: 
2023-01-26 05:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776000377163776[0;39m <==    Updates: 1
2023-01-26 05:28:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273776000377163776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:28:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273776126214672384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776126214672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776126214672384[0;39m ==> Parameters: 
2023-01-26 05:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776126214672384[0;39m <==    Updates: 1
2023-01-26 05:28:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273776126214672384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 05:29:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273776231076466688[0;39m 生成今日电子书快照开始
2023-01-26 05:29:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776231076466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776231076466688[0;39m ==> Parameters: 
2023-01-26 05:29:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776231076466688[0;39m <==    Updates: 0
2023-01-26 05:29:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273776231076466688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:29:05.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273776252106706944[0;39m 更新电子书下的文档数据开始
2023-01-26 05:29:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776252106706944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:29:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776252106706944[0;39m ==> Parameters: 
2023-01-26 05:29:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776252106706944[0;39m <==    Updates: 1
2023-01-26 05:29:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273776252106706944[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:29:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273776377923244032[0;39m 更新电子书下的文档数据开始
2023-01-26 05:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776377923244032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776377923244032[0;39m ==> Parameters: 
2023-01-26 05:29:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776377923244032[0;39m <==    Updates: 1
2023-01-26 05:29:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273776377923244032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:30:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273776482734706688[0;39m 生成今日电子书快照开始
2023-01-26 05:30:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776482734706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776482734706688[0;39m ==> Parameters: 
2023-01-26 05:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776482734706688[0;39m <==    Updates: 0
2023-01-26 05:30:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273776482734706688[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 05:30:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273776503693643776[0;39m 更新电子书下的文档数据开始
2023-01-26 05:30:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776503693643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:30:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776503693643776[0;39m ==> Parameters: 
2023-01-26 05:30:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776503693643776[0;39m <==    Updates: 1
2023-01-26 05:30:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273776503693643776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:30:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273776629539540992[0;39m 更新电子书下的文档数据开始
2023-01-26 05:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776629539540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:30:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776629539540992[0;39m ==> Parameters: 
2023-01-26 05:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776629539540992[0;39m <==    Updates: 1
2023-01-26 05:30:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273776629539540992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:31:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273776734401335296[0;39m 生成今日电子书快照开始
2023-01-26 05:31:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776734401335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:31:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776734401335296[0;39m ==> Parameters: 
2023-01-26 05:31:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776734401335296[0;39m <==    Updates: 0
2023-01-26 05:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273776734401335296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 05:31:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273776755360272384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:31:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776755360272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:31:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776755360272384[0;39m ==> Parameters: 
2023-01-26 05:31:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776755360272384[0;39m <==    Updates: 1
2023-01-26 05:31:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273776755360272384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273776881189392384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776881189392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776881189392384[0;39m ==> Parameters: 
2023-01-26 05:31:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273776881189392384[0;39m <==    Updates: 1
2023-01-26 05:31:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273776881189392384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:32:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273776986067963904[0;39m 生成今日电子书快照开始
2023-01-26 05:32:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776986067963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:32:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776986067963904[0;39m ==> Parameters: 
2023-01-26 05:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273776986067963904[0;39m <==    Updates: 0
2023-01-26 05:32:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273776986067963904[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:32:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273777007018512384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:32:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777007018512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:32:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777007018512384[0;39m ==> Parameters: 
2023-01-26 05:32:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777007018512384[0;39m <==    Updates: 1
2023-01-26 05:32:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273777007018512384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:32:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273777132851826688[0;39m 更新电子书下的文档数据开始
2023-01-26 05:32:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777132851826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777132851826688[0;39m ==> Parameters: 
2023-01-26 05:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777132851826688[0;39m <==    Updates: 1
2023-01-26 05:32:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273777132851826688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 05:33:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273777237709426688[0;39m 生成今日电子书快照开始
2023-01-26 05:33:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777237709426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:33:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777237709426688[0;39m ==> Parameters: 
2023-01-26 05:33:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777237709426688[0;39m <==    Updates: 0
2023-01-26 05:33:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273777237709426688[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 05:33:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273777258676752384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:33:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777258676752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:33:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777258676752384[0;39m ==> Parameters: 
2023-01-26 05:33:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777258676752384[0;39m <==    Updates: 1
2023-01-26 05:33:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273777258676752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:33:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273777384501678080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:33:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777384501678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:33:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777384501678080[0;39m ==> Parameters: 
2023-01-26 05:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777384501678080[0;39m <==    Updates: 1
2023-01-26 05:33:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273777384501678080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:34:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273777489371860992[0;39m 生成今日电子书快照开始
2023-01-26 05:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777489371860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777489371860992[0;39m ==> Parameters: 
2023-01-26 05:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777489371860992[0;39m <==    Updates: 0
2023-01-26 05:34:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273777489371860992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:34:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273777510339186688[0;39m 更新电子书下的文档数据开始
2023-01-26 05:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777510339186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777510339186688[0;39m ==> Parameters: 
2023-01-26 05:34:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777510339186688[0;39m <==    Updates: 1
2023-01-26 05:34:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273777510339186688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:34:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273777636168306688[0;39m 更新电子书下的文档数据开始
2023-01-26 05:34:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777636168306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:34:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777636168306688[0;39m ==> Parameters: 
2023-01-26 05:34:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777636168306688[0;39m <==    Updates: 1
2023-01-26 05:34:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273777636168306688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:35:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273777741030100992[0;39m 生成今日电子书快照开始
2023-01-26 05:35:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777741030100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:35:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777741030100992[0;39m ==> Parameters: 
2023-01-26 05:35:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777741030100992[0;39m <==    Updates: 0
2023-01-26 05:35:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273777741030100992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:35:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273777761997426688[0;39m 更新电子书下的文档数据开始
2023-01-26 05:35:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777761997426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:35:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777761997426688[0;39m ==> Parameters: 
2023-01-26 05:35:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777761997426688[0;39m <==    Updates: 1
2023-01-26 05:35:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273777761997426688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:35:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273777887830740992[0;39m 更新电子书下的文档数据开始
2023-01-26 05:35:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777887830740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:35:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777887830740992[0;39m ==> Parameters: 
2023-01-26 05:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273777887830740992[0;39m <==    Updates: 1
2023-01-26 05:35:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273777887830740992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:36:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273777992696729600[0;39m 生成今日电子书快照开始
2023-01-26 05:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777992696729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777992696729600[0;39m ==> Parameters: 
2023-01-26 05:36:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273777992696729600[0;39m <==    Updates: 0
2023-01-26 05:36:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273777992696729600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 05:36:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273778013655666688[0;39m 更新电子书下的文档数据开始
2023-01-26 05:36:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778013655666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:36:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778013655666688[0;39m ==> Parameters: 
2023-01-26 05:36:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778013655666688[0;39m <==    Updates: 1
2023-01-26 05:36:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273778013655666688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:36:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273778139480592384[0;39m 更新电子书下的文档数据开始
2023-01-26 05:36:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778139480592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:36:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778139480592384[0;39m ==> Parameters: 
2023-01-26 05:36:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778139480592384[0;39m <==    Updates: 1
2023-01-26 05:36:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273778139480592384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:37:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273778244354969600[0;39m 生成今日电子书快照开始
2023-01-26 05:37:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778244354969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:37:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778244354969600[0;39m ==> Parameters: 
2023-01-26 05:37:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778244354969600[0;39m <==    Updates: 0
2023-01-26 05:37:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273778244354969600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:37:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273778265326489600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:37:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778265326489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:37:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778265326489600[0;39m ==> Parameters: 
2023-01-26 05:37:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778265326489600[0;39m <==    Updates: 1
2023-01-26 05:37:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273778265326489600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:37:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273778391155609600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778391155609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778391155609600[0;39m ==> Parameters: 
2023-01-26 05:37:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778391155609600[0;39m <==    Updates: 1
2023-01-26 05:37:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273778391155609600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:38:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273778496017403904[0;39m 生成今日电子书快照开始
2023-01-26 05:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778496017403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:38:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778496017403904[0;39m ==> Parameters: 
2023-01-26 05:38:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778496017403904[0;39m <==    Updates: 0
2023-01-26 05:38:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273778496017403904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:38:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273778516980535296[0;39m 更新电子书下的文档数据开始
2023-01-26 05:38:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778516980535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:38:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778516980535296[0;39m ==> Parameters: 
2023-01-26 05:38:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778516980535296[0;39m <==    Updates: 1
2023-01-26 05:38:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273778516980535296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 05:38:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273778642792878080[0;39m 更新电子书下的文档数据开始
2023-01-26 05:38:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778642792878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:38:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778642792878080[0;39m ==> Parameters: 
2023-01-26 05:38:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778642792878080[0;39m <==    Updates: 1
2023-01-26 05:38:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273778642792878080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:39:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273778747675643904[0;39m 生成今日电子书快照开始
2023-01-26 05:39:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778747675643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:39:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778747675643904[0;39m ==> Parameters: 
2023-01-26 05:39:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778747675643904[0;39m <==    Updates: 0
2023-01-26 05:39:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273778747675643904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:39:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273778768642969600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:39:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778768642969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:39:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778768642969600[0;39m ==> Parameters: 
2023-01-26 05:39:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778768642969600[0;39m <==    Updates: 1
2023-01-26 05:39:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273778768642969600[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 05:39:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273778894505644032[0;39m 更新电子书下的文档数据开始
2023-01-26 05:39:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778894505644032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:39:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778894505644032[0;39m ==> Parameters: 
2023-01-26 05:39:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273778894505644032[0;39m <==    Updates: 1
2023-01-26 05:39:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273778894505644032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:40:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273778999333883904[0;39m 生成今日电子书快照开始
2023-01-26 05:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778999333883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:40:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778999333883904[0;39m ==> Parameters: 
2023-01-26 05:40:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273778999333883904[0;39m <==    Updates: 0
2023-01-26 05:40:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273778999333883904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:40:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273779020305403904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779020305403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779020305403904[0;39m ==> Parameters: 
2023-01-26 05:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779020305403904[0;39m <==    Updates: 1
2023-01-26 05:40:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273779020305403904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 05:40:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273779146138718208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:40:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779146138718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:40:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779146138718208[0;39m ==> Parameters: 
2023-01-26 05:40:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779146138718208[0;39m <==    Updates: 1
2023-01-26 05:40:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273779146138718208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:41:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273779250992123904[0;39m 生成今日电子书快照开始
2023-01-26 05:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779250992123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:41:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779250992123904[0;39m ==> Parameters: 
2023-01-26 05:41:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779250992123904[0;39m <==    Updates: 0
2023-01-26 05:41:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273779250992123904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:41:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273779271951060992[0;39m 更新电子书下的文档数据开始
2023-01-26 05:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779271951060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:41:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779271951060992[0;39m ==> Parameters: 
2023-01-26 05:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779271951060992[0;39m <==    Updates: 1
2023-01-26 05:41:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273779271951060992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:41:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273779397788569600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779397788569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779397788569600[0;39m ==> Parameters: 
2023-01-26 05:41:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779397788569600[0;39m <==    Updates: 1
2023-01-26 05:41:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273779397788569600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:42:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273779502650363904[0;39m 生成今日电子书快照开始
2023-01-26 05:42:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779502650363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:42:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779502650363904[0;39m ==> Parameters: 
2023-01-26 05:42:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779502650363904[0;39m <==    Updates: 0
2023-01-26 05:42:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273779502650363904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:42:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273779523617689600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:42:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779523617689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:42:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779523617689600[0;39m ==> Parameters: 
2023-01-26 05:42:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779523617689600[0;39m <==    Updates: 1
2023-01-26 05:42:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273779523617689600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:42:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273779649459392512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779649459392512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779649459392512[0;39m ==> Parameters: 
2023-01-26 05:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779649459392512[0;39m <==    Updates: 1
2023-01-26 05:42:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273779649459392512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:43:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273779754308603904[0;39m 生成今日电子书快照开始
2023-01-26 05:43:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779754308603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:43:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779754308603904[0;39m ==> Parameters: 
2023-01-26 05:43:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273779754308603904[0;39m <==    Updates: 0
2023-01-26 05:43:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273779754308603904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:43:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273779775280123904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:43:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779775280123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:43:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779775280123904[0;39m ==> Parameters: 
2023-01-26 05:43:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779775280123904[0;39m <==    Updates: 1
2023-01-26 05:43:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273779775280123904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:43:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273779901105049600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779901105049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779901105049600[0;39m ==> Parameters: 
2023-01-26 05:43:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273779901105049600[0;39m <==    Updates: 1
2023-01-26 05:43:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273779901105049600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:44:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273780005962649600[0;39m 生成今日电子书快照开始
2023-01-26 05:44:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780005962649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:44:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780005962649600[0;39m ==> Parameters: 
2023-01-26 05:44:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780005962649600[0;39m <==    Updates: 0
2023-01-26 05:44:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273780005962649600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:44:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273780026929975296[0;39m 更新电子书下的文档数据开始
2023-01-26 05:44:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780026929975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:44:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780026929975296[0;39m ==> Parameters: 
2023-01-26 05:44:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780026929975296[0;39m <==    Updates: 1
2023-01-26 05:44:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273780026929975296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:44:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273780152775872512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780152775872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:44:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780152775872512[0;39m ==> Parameters: 
2023-01-26 05:44:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780152775872512[0;39m <==    Updates: 1
2023-01-26 05:44:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273780152775872512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:45:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273780257633472512[0;39m 生成今日电子书快照开始
2023-01-26 05:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780257633472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:45:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780257633472512[0;39m ==> Parameters: 
2023-01-26 05:45:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780257633472512[0;39m <==    Updates: 0
2023-01-26 05:45:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273780257633472512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:45:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273780278600798208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:45:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780278600798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:45:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780278600798208[0;39m ==> Parameters: 
2023-01-26 05:45:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780278600798208[0;39m <==    Updates: 1
2023-01-26 05:45:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273780278600798208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:45:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273780404429918208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:45:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780404429918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:45:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780404429918208[0;39m ==> Parameters: 
2023-01-26 05:45:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780404429918208[0;39m <==    Updates: 1
2023-01-26 05:45:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273780404429918208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:46:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273780509304295424[0;39m 生成今日电子书快照开始
2023-01-26 05:46:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780509304295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:46:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780509304295424[0;39m ==> Parameters: 
2023-01-26 05:46:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780509304295424[0;39m <==    Updates: 0
2023-01-26 05:46:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273780509304295424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:46:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273780530259038208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:46:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780530259038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:46:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780530259038208[0;39m ==> Parameters: 
2023-01-26 05:46:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780530259038208[0;39m <==    Updates: 1
2023-01-26 05:46:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273780530259038208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:46:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273780656088158208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:46:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780656088158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:46:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780656088158208[0;39m ==> Parameters: 
2023-01-26 05:46:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780656088158208[0;39m <==    Updates: 1
2023-01-26 05:46:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273780656088158208[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-26 05:47:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273780760949952512[0;39m 生成今日电子书快照开始
2023-01-26 05:47:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780760949952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:47:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780760949952512[0;39m ==> Parameters: 
2023-01-26 05:47:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273780760949952512[0;39m <==    Updates: 0
2023-01-26 05:47:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273780760949952512[0;39m 生成今日电子书快照结束，耗时：19毫秒
2023-01-26 05:47:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273780781913083904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:47:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780781913083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:47:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780781913083904[0;39m ==> Parameters: 
2023-01-26 05:47:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780781913083904[0;39m <==    Updates: 1
2023-01-26 05:47:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273780781913083904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:47:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273780907742203904[0;39m 更新电子书下的文档数据开始
2023-01-26 05:47:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780907742203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:47:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780907742203904[0;39m ==> Parameters: 
2023-01-26 05:47:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273780907742203904[0;39m <==    Updates: 1
2023-01-26 05:47:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273780907742203904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:48:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273781012616581120[0;39m 生成今日电子书快照开始
2023-01-26 05:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781012616581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:48:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781012616581120[0;39m ==> Parameters: 
2023-01-26 05:48:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781012616581120[0;39m <==    Updates: 0
2023-01-26 05:48:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273781012616581120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:48:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273781033579712512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:48:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781033579712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:48:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781033579712512[0;39m ==> Parameters: 
2023-01-26 05:48:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781033579712512[0;39m <==    Updates: 1
2023-01-26 05:48:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273781033579712512[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 05:48:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273781159417221120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781159417221120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:48:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781159417221120[0;39m ==> Parameters: 
2023-01-26 05:48:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781159417221120[0;39m <==    Updates: 1
2023-01-26 05:48:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273781159417221120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:49:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273781264266432512[0;39m 生成今日电子书快照开始
2023-01-26 05:49:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781264266432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:49:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781264266432512[0;39m ==> Parameters: 
2023-01-26 05:49:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781264266432512[0;39m <==    Updates: 0
2023-01-26 05:49:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273781264266432512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 05:49:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273781285242146816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:49:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781285242146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:49:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781285242146816[0;39m ==> Parameters: 
2023-01-26 05:49:05.025 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781285242146816[0;39m <==    Updates: 1
2023-01-26 05:49:05.025 INFO  com.example.wiki.job.DocJob                       :35   [32m273781285242146816[0;39m 更新电子书下的文档数据结束，耗时：10毫秒
2023-01-26 05:49:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273781411062878208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781411062878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:49:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781411062878208[0;39m ==> Parameters: 
2023-01-26 05:49:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781411062878208[0;39m <==    Updates: 1
2023-01-26 05:49:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273781411062878208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:50:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273781515933061120[0;39m 生成今日电子书快照开始
2023-01-26 05:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781515933061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781515933061120[0;39m ==> Parameters: 
2023-01-26 05:50:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781515933061120[0;39m <==    Updates: 0
2023-01-26 05:50:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273781515933061120[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 05:50:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273781536900386816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781536900386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781536900386816[0;39m ==> Parameters: 
2023-01-26 05:50:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781536900386816[0;39m <==    Updates: 1
2023-01-26 05:50:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273781536900386816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:50:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273781662725312512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:50:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781662725312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:50:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781662725312512[0;39m ==> Parameters: 
2023-01-26 05:50:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781662725312512[0;39m <==    Updates: 1
2023-01-26 05:50:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273781662725312512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:51:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273781767587106816[0;39m 生成今日电子书快照开始
2023-01-26 05:51:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781767587106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:51:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781767587106816[0;39m ==> Parameters: 
2023-01-26 05:51:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273781767587106816[0;39m <==    Updates: 0
2023-01-26 05:51:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273781767587106816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:51:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273781788550238208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781788550238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781788550238208[0;39m ==> Parameters: 
2023-01-26 05:51:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781788550238208[0;39m <==    Updates: 1
2023-01-26 05:51:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273781788550238208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:51:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273781914387746816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:51:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781914387746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:51:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781914387746816[0;39m ==> Parameters: 
2023-01-26 05:51:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273781914387746816[0;39m <==    Updates: 1
2023-01-26 05:51:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273781914387746816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:52:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273782019249541120[0;39m 生成今日电子书快照开始
2023-01-26 05:52:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782019249541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:52:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782019249541120[0;39m ==> Parameters: 
2023-01-26 05:52:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782019249541120[0;39m <==    Updates: 0
2023-01-26 05:52:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273782019249541120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 05:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273782040229449728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:52:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782040229449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:52:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782040229449728[0;39m ==> Parameters: 
2023-01-26 05:52:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782040229449728[0;39m <==    Updates: 1
2023-01-26 05:52:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m273782040229449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:52:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273782166050181120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782166050181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782166050181120[0;39m ==> Parameters: 
2023-01-26 05:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782166050181120[0;39m <==    Updates: 1
2023-01-26 05:52:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273782166050181120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 05:53:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273782270916169728[0;39m 生成今日电子书快照开始
2023-01-26 05:53:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782270916169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782270916169728[0;39m ==> Parameters: 
2023-01-26 05:53:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782270916169728[0;39m <==    Updates: 0
2023-01-26 05:53:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273782270916169728[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:53:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273782291866718208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:53:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782291866718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:53:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782291866718208[0;39m ==> Parameters: 
2023-01-26 05:53:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782291866718208[0;39m <==    Updates: 1
2023-01-26 05:53:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273782291866718208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:53:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273782417695838208[0;39m 更新电子书下的文档数据开始
2023-01-26 05:53:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782417695838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:53:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782417695838208[0;39m ==> Parameters: 
2023-01-26 05:53:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782417695838208[0;39m <==    Updates: 1
2023-01-26 05:53:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273782417695838208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273782522570215424[0;39m 生成今日电子书快照开始
2023-01-26 05:54:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782522570215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:54:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782522570215424[0;39m ==> Parameters: 
2023-01-26 05:54:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782522570215424[0;39m <==    Updates: 0
2023-01-26 05:54:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273782522570215424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 05:54:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273782543529152512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:54:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782543529152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782543529152512[0;39m ==> Parameters: 
2023-01-26 05:54:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782543529152512[0;39m <==    Updates: 1
2023-01-26 05:54:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273782543529152512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:54:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273782669366661120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:54:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782669366661120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:54:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782669366661120[0;39m ==> Parameters: 
2023-01-26 05:54:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782669366661120[0;39m <==    Updates: 1
2023-01-26 05:54:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273782669366661120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:55:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273782774232649728[0;39m 生成今日电子书快照开始
2023-01-26 05:55:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782774232649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:55:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782774232649728[0;39m ==> Parameters: 
2023-01-26 05:55:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273782774232649728[0;39m <==    Updates: 0
2023-01-26 05:55:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273782774232649728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 05:55:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273782795195781120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:55:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782795195781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:55:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782795195781120[0;39m ==> Parameters: 
2023-01-26 05:55:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782795195781120[0;39m <==    Updates: 1
2023-01-26 05:55:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273782795195781120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 05:55:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273782921020706816[0;39m 更新电子书下的文档数据开始
2023-01-26 05:55:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782921020706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:55:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782921020706816[0;39m ==> Parameters: 
2023-01-26 05:55:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273782921020706816[0;39m <==    Updates: 1
2023-01-26 05:55:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273782921020706816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:56:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273783025878306816[0;39m 生成今日电子书快照开始
2023-01-26 05:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783025878306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:56:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783025878306816[0;39m ==> Parameters: 
2023-01-26 05:56:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783025878306816[0;39m <==    Updates: 0
2023-01-26 05:56:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273783025878306816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 05:56:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273783046845632512[0;39m 更新电子书下的文档数据开始
2023-01-26 05:56:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783046845632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:56:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783046845632512[0;39m ==> Parameters: 
2023-01-26 05:56:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783046845632512[0;39m <==    Updates: 1
2023-01-26 05:56:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273783046845632512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:56:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273783172662169600[0;39m 更新电子书下的文档数据开始
2023-01-26 05:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783172662169600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783172662169600[0;39m ==> Parameters: 
2023-01-26 05:56:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783172662169600[0;39m <==    Updates: 1
2023-01-26 05:56:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273783172662169600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:57:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273783277549129728[0;39m 生成今日电子书快照开始
2023-01-26 05:57:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783277549129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:57:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783277549129728[0;39m ==> Parameters: 
2023-01-26 05:57:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783277549129728[0;39m <==    Updates: 0
2023-01-26 05:57:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273783277549129728[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 05:57:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273783298512261120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:57:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783298512261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:57:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783298512261120[0;39m ==> Parameters: 
2023-01-26 05:57:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783298512261120[0;39m <==    Updates: 1
2023-01-26 05:57:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273783298512261120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:57:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273783424349769728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:57:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783424349769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:57:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783424349769728[0;39m ==> Parameters: 
2023-01-26 05:57:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783424349769728[0;39m <==    Updates: 1
2023-01-26 05:57:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273783424349769728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 05:58:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273783529207369728[0;39m 生成今日电子书快照开始
2023-01-26 05:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783529207369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783529207369728[0;39m ==> Parameters: 
2023-01-26 05:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783529207369728[0;39m <==    Updates: 0
2023-01-26 05:58:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273783529207369728[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 05:58:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273783550174695424[0;39m 更新电子书下的文档数据开始
2023-01-26 05:58:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783550174695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:58:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783550174695424[0;39m ==> Parameters: 
2023-01-26 05:58:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783550174695424[0;39m <==    Updates: 1
2023-01-26 05:58:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273783550174695424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 05:58:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273783675970260992[0;39m 更新电子书下的文档数据开始
2023-01-26 05:58:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783675970260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:58:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783675970260992[0;39m ==> Parameters: 
2023-01-26 05:58:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783675970260992[0;39m <==    Updates: 1
2023-01-26 05:58:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273783675970260992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:59:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273783780873998336[0;39m 生成今日电子书快照开始
2023-01-26 05:59:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783780873998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 05:59:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783780873998336[0;39m ==> Parameters: 
2023-01-26 05:59:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273783780873998336[0;39m <==    Updates: 0
2023-01-26 05:59:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273783780873998336[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 05:59:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273783801837129728[0;39m 更新电子书下的文档数据开始
2023-01-26 05:59:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783801837129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:59:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783801837129728[0;39m ==> Parameters: 
2023-01-26 05:59:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783801837129728[0;39m <==    Updates: 1
2023-01-26 05:59:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273783801837129728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 05:59:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273783927657861120[0;39m 更新电子书下的文档数据开始
2023-01-26 05:59:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783927657861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 05:59:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783927657861120[0;39m ==> Parameters: 
2023-01-26 05:59:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273783927657861120[0;39m <==    Updates: 1
2023-01-26 05:59:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273783927657861120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:00:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273784032465129472[0;39m 生成今日电子书快照开始
2023-01-26 06:00:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784032465129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:00:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784032465129472[0;39m ==> Parameters: 
2023-01-26 06:00:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784032465129472[0;39m <==    Updates: 0
2023-01-26 06:00:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273784032465129472[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 06:00:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273784053499564032[0;39m 更新电子书下的文档数据开始
2023-01-26 06:00:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784053499564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:00:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784053499564032[0;39m ==> Parameters: 
2023-01-26 06:00:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784053499564032[0;39m <==    Updates: 1
2023-01-26 06:00:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273784053499564032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 06:00:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273784179324489728[0;39m 更新电子书下的文档数据开始
2023-01-26 06:00:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784179324489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:00:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784179324489728[0;39m ==> Parameters: 
2023-01-26 06:00:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784179324489728[0;39m <==    Updates: 1
2023-01-26 06:00:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273784179324489728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:01:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273784284203061248[0;39m 生成今日电子书快照开始
2023-01-26 06:01:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784284203061248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:01:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784284203061248[0;39m ==> Parameters: 
2023-01-26 06:01:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784284203061248[0;39m <==    Updates: 0
2023-01-26 06:01:00.037 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273784284203061248[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 06:01:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273784305141026816[0;39m 更新电子书下的文档数据开始
2023-01-26 06:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784305141026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784305141026816[0;39m ==> Parameters: 
2023-01-26 06:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784305141026816[0;39m <==    Updates: 1
2023-01-26 06:01:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273784305141026816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 06:01:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273784430928203776[0;39m 更新电子书下的文档数据开始
2023-01-26 06:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784430928203776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784430928203776[0;39m ==> Parameters: 
2023-01-26 06:01:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784430928203776[0;39m <==    Updates: 1
2023-01-26 06:01:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273784430928203776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:02:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273784535785803776[0;39m 生成今日电子书快照开始
2023-01-26 06:02:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784535785803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:02:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784535785803776[0;39m ==> Parameters: 
2023-01-26 06:02:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784535785803776[0;39m <==    Updates: 0
2023-01-26 06:02:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273784535785803776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 06:02:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273784556811849728[0;39m 更新电子书下的文档数据开始
2023-01-26 06:02:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784556811849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:02:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784556811849728[0;39m ==> Parameters: 
2023-01-26 06:02:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784556811849728[0;39m <==    Updates: 1
2023-01-26 06:02:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273784556811849728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 06:02:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273784682582249472[0;39m 更新电子书下的文档数据开始
2023-01-26 06:02:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784682582249472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:02:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784682582249472[0;39m ==> Parameters: 
2023-01-26 06:02:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784682582249472[0;39m <==    Updates: 1
2023-01-26 06:02:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273784682582249472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:03:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273784787506958336[0;39m 生成今日电子书快照开始
2023-01-26 06:03:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784787506958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:03:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784787506958336[0;39m ==> Parameters: 
2023-01-26 06:03:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273784787506958336[0;39m <==    Updates: 0
2023-01-26 06:03:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273784787506958336[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 06:03:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273784808470089728[0;39m 更新电子书下的文档数据开始
2023-01-26 06:03:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784808470089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:03:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784808470089728[0;39m ==> Parameters: 
2023-01-26 06:03:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784808470089728[0;39m <==    Updates: 1
2023-01-26 06:03:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273784808470089728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:03:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273784934290821120[0;39m 更新电子书下的文档数据开始
2023-01-26 06:03:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784934290821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:03:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784934290821120[0;39m ==> Parameters: 
2023-01-26 06:03:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273784934290821120[0;39m <==    Updates: 1
2023-01-26 06:03:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273784934290821120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 06:04:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273785039106478080[0;39m 生成今日电子书快照开始
2023-01-26 06:04:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785039106478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:04:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785039106478080[0;39m ==> Parameters: 
2023-01-26 06:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785039106478080[0;39m <==    Updates: 0
2023-01-26 06:04:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273785039106478080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 06:04:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273785060069609472[0;39m 更新电子书下的文档数据开始
2023-01-26 06:04:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785060069609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:04:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785060069609472[0;39m ==> Parameters: 
2023-01-26 06:04:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785060069609472[0;39m <==    Updates: 1
2023-01-26 06:04:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273785060069609472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:04:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273785185957449728[0;39m 更新电子书下的文档数据开始
2023-01-26 06:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785185957449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785185957449728[0;39m ==> Parameters: 
2023-01-26 06:04:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785185957449728[0;39m <==    Updates: 1
2023-01-26 06:04:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273785185957449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:05:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273785290827632640[0;39m 生成今日电子书快照开始
2023-01-26 06:05:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785290827632640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:05:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785290827632640[0;39m ==> Parameters: 
2023-01-26 06:05:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785290827632640[0;39m <==    Updates: 0
2023-01-26 06:05:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273785290827632640[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 06:05:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273785311790764032[0;39m 更新电子书下的文档数据开始
2023-01-26 06:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785311790764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:05:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785311790764032[0;39m ==> Parameters: 
2023-01-26 06:05:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785311790764032[0;39m <==    Updates: 1
2023-01-26 06:05:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273785311790764032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 06:05:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273785437619884032[0;39m 更新电子书下的文档数据开始
2023-01-26 06:05:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785437619884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:05:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785437619884032[0;39m ==> Parameters: 
2023-01-26 06:05:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785437619884032[0;39m <==    Updates: 1
2023-01-26 06:05:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273785437619884032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 06:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273785542431346688[0;39m 生成今日电子书快照开始
2023-01-26 06:06:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785542431346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:06:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785542431346688[0;39m ==> Parameters: 
2023-01-26 06:06:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785542431346688[0;39m <==    Updates: 0
2023-01-26 06:06:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273785542431346688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 06:06:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273785563444809728[0;39m 更新电子书下的文档数据开始
2023-01-26 06:06:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785563444809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:06:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785563444809728[0;39m ==> Parameters: 
2023-01-26 06:06:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785563444809728[0;39m <==    Updates: 1
2023-01-26 06:06:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273785563444809728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 06:06:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273785689278124032[0;39m 更新电子书下的文档数据开始
2023-01-26 06:06:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785689278124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:06:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785689278124032[0;39m ==> Parameters: 
2023-01-26 06:06:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785689278124032[0;39m <==    Updates: 1
2023-01-26 06:06:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273785689278124032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:07:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273785794068615168[0;39m 生成今日电子书快照开始
2023-01-26 06:07:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785794068615168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785794068615168[0;39m ==> Parameters: 
2023-01-26 06:07:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273785794068615168[0;39m <==    Updates: 0
2023-01-26 06:07:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273785794068615168[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 06:07:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273785815052718080[0;39m 更新电子书下的文档数据开始
2023-01-26 06:07:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785815052718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:07:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785815052718080[0;39m ==> Parameters: 
2023-01-26 06:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785815052718080[0;39m <==    Updates: 1
2023-01-26 06:07:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273785815052718080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 06:07:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273785940936364032[0;39m 更新电子书下的文档数据开始
2023-01-26 06:07:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785940936364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:07:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785940936364032[0;39m ==> Parameters: 
2023-01-26 06:07:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273785940936364032[0;39m <==    Updates: 1
2023-01-26 06:07:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273785940936364032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 06:08:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273786045743632384[0;39m 生成今日电子书快照开始
2023-01-26 06:08:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786045743632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786045743632384[0;39m ==> Parameters: 
2023-01-26 06:08:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786045743632384[0;39m <==    Updates: 0
2023-01-26 06:08:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273786045743632384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 06:08:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273786066769678336[0;39m 更新电子书下的文档数据开始
2023-01-26 06:08:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786066769678336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:08:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786066769678336[0;39m ==> Parameters: 
2023-01-26 06:08:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786066769678336[0;39m <==    Updates: 1
2023-01-26 06:08:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273786066769678336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:08:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273786192531689472[0;39m 更新电子书下的文档数据开始
2023-01-26 06:08:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786192531689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:08:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786192531689472[0;39m ==> Parameters: 
2023-01-26 06:08:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786192531689472[0;39m <==    Updates: 1
2023-01-26 06:08:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273786192531689472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 06:09:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273786297397678080[0;39m 生成今日电子书快照开始
2023-01-26 06:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786297397678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786297397678080[0;39m ==> Parameters: 
2023-01-26 06:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786297397678080[0;39m <==    Updates: 0
2023-01-26 06:09:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273786297397678080[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 06:09:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273786318373392384[0;39m 更新电子书下的文档数据开始
2023-01-26 06:09:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786318373392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:09:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786318373392384[0;39m ==> Parameters: 
2023-01-26 06:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786318373392384[0;39m <==    Updates: 1
2023-01-26 06:09:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273786318373392384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 06:09:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273786444198318080[0;39m 更新电子书下的文档数据开始
2023-01-26 06:09:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786444198318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:09:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786444198318080[0;39m ==> Parameters: 
2023-01-26 06:09:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786444198318080[0;39m <==    Updates: 1
2023-01-26 06:09:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273786444198318080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 06:10:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273786549106249728[0;39m 生成今日电子书快照开始
2023-01-26 06:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786549106249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786549106249728[0;39m ==> Parameters: 
2023-01-26 06:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786549106249728[0;39m <==    Updates: 0
2023-01-26 06:10:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273786549106249728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 06:10:05.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273786570094546944[0;39m 更新电子书下的文档数据开始
2023-01-26 06:10:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786570094546944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:10:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786570094546944[0;39m ==> Parameters: 
2023-01-26 06:10:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786570094546944[0;39m <==    Updates: 1
2023-01-26 06:10:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273786570094546944[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 06:10:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273786695860752384[0;39m 更新电子书下的文档数据开始
2023-01-26 06:10:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786695860752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:10:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786695860752384[0;39m ==> Parameters: 
2023-01-26 06:10:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786695860752384[0;39m <==    Updates: 1
2023-01-26 06:10:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273786695860752384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 06:11:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273786800714158080[0;39m 生成今日电子书快照开始
2023-01-26 06:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786800714158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786800714158080[0;39m ==> Parameters: 
2023-01-26 06:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273786800714158080[0;39m <==    Updates: 0
2023-01-26 06:11:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273786800714158080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 06:11:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273786821694066688[0;39m 更新电子书下的文档数据开始
2023-01-26 06:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786821694066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786821694066688[0;39m ==> Parameters: 
2023-01-26 06:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786821694066688[0;39m <==    Updates: 1
2023-01-26 06:11:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273786821694066688[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 06:11:35.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273786947581906944[0;39m 更新电子书下的文档数据开始
2023-01-26 06:11:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786947581906944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:11:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786947581906944[0;39m ==> Parameters: 
2023-01-26 06:11:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273786947581906944[0;39m <==    Updates: 1
2023-01-26 06:11:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273786947581906944[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 06:12:00.985 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273787056491204608[0;39m 生成今日电子书快照开始
2023-01-26 06:12:00.985 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787056491204608[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:12:00.985 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787056491204608[0;39m ==> Parameters: 
2023-01-26 06:12:00.985 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787056491204608[0;39m <==    Updates: 0
2023-01-26 06:12:00.985 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273787056491204608[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 06:12:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273787073348112384[0;39m 更新电子书下的文档数据开始
2023-01-26 06:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787073348112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787073348112384[0;39m ==> Parameters: 
2023-01-26 06:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787073348112384[0;39m <==    Updates: 1
2023-01-26 06:12:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273787073348112384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 06:12:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273787199202398208[0;39m 更新电子书下的文档数据开始
2023-01-26 06:12:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787199202398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:12:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787199202398208[0;39m ==> Parameters: 
2023-01-26 06:12:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787199202398208[0;39m <==    Updates: 1
2023-01-26 06:12:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273787199202398208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 06:13:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273787304085164032[0;39m 生成今日电子书快照开始
2023-01-26 06:13:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787304085164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 06:13:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787304085164032[0;39m ==> Parameters: 
2023-01-26 06:13:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273787304085164032[0;39m <==    Updates: 0
2023-01-26 06:13:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273787304085164032[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 06:13:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273787325006352384[0;39m 更新电子书下的文档数据开始
2023-01-26 06:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787325006352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 06:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787325006352384[0;39m ==> Parameters: 
2023-01-26 06:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273787325006352384[0;39m <==    Updates: 1
2023-01-26 06:13:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273787325006352384[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:51:41.885 INFO  com.example.wiki.job.DocJob                       :32   [32m273932938159198208[0;39m 更新电子书下的文档数据开始
2023-01-26 15:51:41.885 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273932938159198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:51:41.887 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273932938159198208[0;39m ==> Parameters: 
2023-01-26 15:51:41.887 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273932938159198208[0;39m <==    Updates: 1
2023-01-26 15:51:41.888 INFO  com.example.wiki.job.DocJob                       :35   [32m273932938159198208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 15:51:41.888 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273932938171781120[0;39m 生成今日电子书快照开始
2023-01-26 15:51:41.888 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273932938171781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:51:41.888 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273932938171781120[0;39m ==> Parameters: 
2023-01-26 15:51:41.888 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273932938171781120[0;39m <==    Updates: 0
2023-01-26 15:51:41.888 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273932938171781120[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:51:50.326 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9h38m36s887ms358µs400ns).
2023-01-26 15:52:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273933014155792384[0;39m 生成今日电子书快照开始
2023-01-26 15:52:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933014155792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:52:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933014155792384[0;39m ==> Parameters: 
2023-01-26 15:52:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933014155792384[0;39m <==    Updates: 0
2023-01-26 15:52:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273933014155792384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 15:52:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273933035152478208[0;39m 更新电子书下的文档数据开始
2023-01-26 15:52:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933035152478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:52:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933035152478208[0;39m ==> Parameters: 
2023-01-26 15:52:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933035152478208[0;39m <==    Updates: 1
2023-01-26 15:52:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273933035152478208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:52:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273933160964820992[0;39m 更新电子书下的文档数据开始
2023-01-26 15:52:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933160964820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:52:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933160964820992[0;39m ==> Parameters: 
2023-01-26 15:52:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933160964820992[0;39m <==    Updates: 1
2023-01-26 15:52:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273933160964820992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:53:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273933265818226688[0;39m 生成今日电子书快照开始
2023-01-26 15:53:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933265818226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:53:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933265818226688[0;39m ==> Parameters: 
2023-01-26 15:53:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933265818226688[0;39m <==    Updates: 0
2023-01-26 15:53:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273933265818226688[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:53:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273933286798135296[0;39m 更新电子书下的文档数据开始
2023-01-26 15:53:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933286798135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:53:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933286798135296[0;39m ==> Parameters: 
2023-01-26 15:53:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933286798135296[0;39m <==    Updates: 1
2023-01-26 15:53:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273933286798135296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:53:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273933412627255296[0;39m 更新电子书下的文档数据开始
2023-01-26 15:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933412627255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933412627255296[0;39m ==> Parameters: 
2023-01-26 15:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933412627255296[0;39m <==    Updates: 1
2023-01-26 15:53:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273933412627255296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:54:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273933517501632512[0;39m 生成今日电子书快照开始
2023-01-26 15:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933517501632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933517501632512[0;39m ==> Parameters: 
2023-01-26 15:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933517501632512[0;39m <==    Updates: 0
2023-01-26 15:54:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273933517501632512[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:54:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273933538485735424[0;39m 更新电子书下的文档数据开始
2023-01-26 15:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933538485735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933538485735424[0;39m ==> Parameters: 
2023-01-26 15:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933538485735424[0;39m <==    Updates: 1
2023-01-26 15:54:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273933538485735424[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:54:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273933664298078208[0;39m 更新电子书下的文档数据开始
2023-01-26 15:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933664298078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933664298078208[0;39m ==> Parameters: 
2023-01-26 15:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933664298078208[0;39m <==    Updates: 1
2023-01-26 15:54:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273933664298078208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:55:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273933769210204160[0;39m 生成今日电子书快照开始
2023-01-26 15:55:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933769210204160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:55:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933769210204160[0;39m ==> Parameters: 
2023-01-26 15:55:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273933769210204160[0;39m <==    Updates: 0
2023-01-26 15:55:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273933769210204160[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:55:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273933790127198208[0;39m 更新电子书下的文档数据开始
2023-01-26 15:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933790127198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933790127198208[0;39m ==> Parameters: 
2023-01-26 15:55:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933790127198208[0;39m <==    Updates: 1
2023-01-26 15:55:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273933790127198208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:55:35.021 INFO  com.example.wiki.job.DocJob                       :32   [32m273933916002455552[0;39m 更新电子书下的文档数据开始
2023-01-26 15:55:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933916002455552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:55:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933916002455552[0;39m ==> Parameters: 
2023-01-26 15:55:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273933916002455552[0;39m <==    Updates: 1
2023-01-26 15:55:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273933916002455552[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:56:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273934020830695424[0;39m 生成今日电子书快照开始
2023-01-26 15:56:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934020830695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:56:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934020830695424[0;39m ==> Parameters: 
2023-01-26 15:56:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934020830695424[0;39m <==    Updates: 0
2023-01-26 15:56:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273934020830695424[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:56:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273934041810604032[0;39m 更新电子书下的文档数据开始
2023-01-26 15:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934041810604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934041810604032[0;39m ==> Parameters: 
2023-01-26 15:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934041810604032[0;39m <==    Updates: 1
2023-01-26 15:56:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273934041810604032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:56:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273934167622946816[0;39m 更新电子书下的文档数据开始
2023-01-26 15:56:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934167622946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:56:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934167622946816[0;39m ==> Parameters: 
2023-01-26 15:56:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934167622946816[0;39m <==    Updates: 1
2023-01-26 15:56:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273934167622946816[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:57:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273934272480546816[0;39m 生成今日电子书快照开始
2023-01-26 15:57:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934272480546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:57:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934272480546816[0;39m ==> Parameters: 
2023-01-26 15:57:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934272480546816[0;39m <==    Updates: 0
2023-01-26 15:57:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273934272480546816[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:57:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273934293460455424[0;39m 更新电子书下的文档数据开始
2023-01-26 15:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934293460455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934293460455424[0;39m ==> Parameters: 
2023-01-26 15:57:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934293460455424[0;39m <==    Updates: 1
2023-01-26 15:57:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273934293460455424[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:57:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273934419272798208[0;39m 更新电子书下的文档数据开始
2023-01-26 15:57:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934419272798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:57:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934419272798208[0;39m ==> Parameters: 
2023-01-26 15:57:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934419272798208[0;39m <==    Updates: 1
2023-01-26 15:57:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273934419272798208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:58:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273934524130398208[0;39m 生成今日电子书快照开始
2023-01-26 15:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934524130398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934524130398208[0;39m ==> Parameters: 
2023-01-26 15:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934524130398208[0;39m <==    Updates: 0
2023-01-26 15:58:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273934524130398208[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 15:58:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273934545110306816[0;39m 更新电子书下的文档数据开始
2023-01-26 15:58:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934545110306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:58:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934545110306816[0;39m ==> Parameters: 
2023-01-26 15:58:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934545110306816[0;39m <==    Updates: 1
2023-01-26 15:58:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273934545110306816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 15:58:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273934670918455296[0;39m 更新电子书下的文档数据开始
2023-01-26 15:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934670918455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934670918455296[0;39m ==> Parameters: 
2023-01-26 15:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934670918455296[0;39m <==    Updates: 1
2023-01-26 15:58:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273934670918455296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:59:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273934775838969856[0;39m 生成今日电子书快照开始
2023-01-26 15:59:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934775838969856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 15:59:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934775838969856[0;39m ==> Parameters: 
2023-01-26 15:59:00.031 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273934775838969856[0;39m <==    Updates: 0
2023-01-26 15:59:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273934775838969856[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 15:59:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273934796755963904[0;39m 更新电子书下的文档数据开始
2023-01-26 15:59:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934796755963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:59:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934796755963904[0;39m ==> Parameters: 
2023-01-26 15:59:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934796755963904[0;39m <==    Updates: 1
2023-01-26 15:59:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273934796755963904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 15:59:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273934922572500992[0;39m 更新电子书下的文档数据开始
2023-01-26 15:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934922572500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 15:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934922572500992[0;39m ==> Parameters: 
2023-01-26 15:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273934922572500992[0;39m <==    Updates: 1
2023-01-26 15:59:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273934922572500992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 16:00:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273935027421712384[0;39m 生成今日电子书快照开始
2023-01-26 16:00:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935027421712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:00:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935027421712384[0;39m ==> Parameters: 
2023-01-26 16:00:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935027421712384[0;39m <==    Updates: 0
2023-01-26 16:00:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273935027421712384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:00:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273935048405815296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935048405815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935048405815296[0;39m ==> Parameters: 
2023-01-26 16:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935048405815296[0;39m <==    Updates: 1
2023-01-26 16:00:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273935048405815296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 16:00:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273935174260101120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:00:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935174260101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:00:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935174260101120[0;39m ==> Parameters: 
2023-01-26 16:00:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935174260101120[0;39m <==    Updates: 1
2023-01-26 16:00:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273935174260101120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 16:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273935279113506816[0;39m 生成今日电子书快照开始
2023-01-26 16:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935279113506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935279113506816[0;39m ==> Parameters: 
2023-01-26 16:01:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935279113506816[0;39m <==    Updates: 0
2023-01-26 16:01:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273935279113506816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:01:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273935300101804032[0;39m 更新电子书下的文档数据开始
2023-01-26 16:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935300101804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935300101804032[0;39m ==> Parameters: 
2023-01-26 16:01:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935300101804032[0;39m <==    Updates: 1
2023-01-26 16:01:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273935300101804032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 16:01:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273935425918341120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:01:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935425918341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935425918341120[0;39m ==> Parameters: 
2023-01-26 16:01:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935425918341120[0;39m <==    Updates: 1
2023-01-26 16:01:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273935425918341120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:02:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273935530738192384[0;39m 生成今日电子书快照开始
2023-01-26 16:02:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935530738192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:02:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935530738192384[0;39m ==> Parameters: 
2023-01-26 16:02:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935530738192384[0;39m <==    Updates: 0
2023-01-26 16:02:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273935530738192384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:02:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273935551722295296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935551722295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935551722295296[0;39m ==> Parameters: 
2023-01-26 16:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935551722295296[0;39m <==    Updates: 1
2023-01-26 16:02:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273935551722295296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:02:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273935677568192512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935677568192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:02:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935677568192512[0;39m ==> Parameters: 
2023-01-26 16:02:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935677568192512[0;39m <==    Updates: 1
2023-01-26 16:02:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273935677568192512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:03:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273935782442569728[0;39m 生成今日电子书快照开始
2023-01-26 16:03:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935782442569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:03:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935782442569728[0;39m ==> Parameters: 
2023-01-26 16:03:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273935782442569728[0;39m <==    Updates: 0
2023-01-26 16:03:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273935782442569728[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 16:03:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273935803393118208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:03:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935803393118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:03:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935803393118208[0;39m ==> Parameters: 
2023-01-26 16:03:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935803393118208[0;39m <==    Updates: 1
2023-01-26 16:03:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273935803393118208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:03:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273935929197072384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:03:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935929197072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:03:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935929197072384[0;39m ==> Parameters: 
2023-01-26 16:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273935929197072384[0;39m <==    Updates: 1
2023-01-26 16:03:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273935929197072384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 16:04:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273936034054672384[0;39m 生成今日电子书快照开始
2023-01-26 16:04:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936034054672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:04:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936034054672384[0;39m ==> Parameters: 
2023-01-26 16:04:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936034054672384[0;39m <==    Updates: 0
2023-01-26 16:04:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273936034054672384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:04:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273936055013609472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:04:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936055013609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:04:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936055013609472[0;39m ==> Parameters: 
2023-01-26 16:04:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936055013609472[0;39m <==    Updates: 1
2023-01-26 16:04:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273936055013609472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:04:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273936180888866816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:04:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936180888866816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:04:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936180888866816[0;39m ==> Parameters: 
2023-01-26 16:04:35.025 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936180888866816[0;39m <==    Updates: 1
2023-01-26 16:04:35.025 INFO  com.example.wiki.job.DocJob                       :35   [32m273936180888866816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:05:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273936285754855424[0;39m 生成今日电子书快照开始
2023-01-26 16:05:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936285754855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:05:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936285754855424[0;39m ==> Parameters: 
2023-01-26 16:05:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936285754855424[0;39m <==    Updates: 0
2023-01-26 16:05:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273936285754855424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:05:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273936306688626688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936306688626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936306688626688[0;39m ==> Parameters: 
2023-01-26 16:05:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936306688626688[0;39m <==    Updates: 1
2023-01-26 16:05:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273936306688626688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:05:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273936432538718208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936432538718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936432538718208[0;39m ==> Parameters: 
2023-01-26 16:05:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936432538718208[0;39m <==    Updates: 1
2023-01-26 16:05:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273936432538718208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:06:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273936537417289728[0;39m 生成今日电子书快照开始
2023-01-26 16:06:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936537417289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:06:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936537417289728[0;39m ==> Parameters: 
2023-01-26 16:06:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936537417289728[0;39m <==    Updates: 0
2023-01-26 16:06:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273936537417289728[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 16:06:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273936558380421120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:06:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936558380421120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:06:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936558380421120[0;39m ==> Parameters: 
2023-01-26 16:06:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936558380421120[0;39m <==    Updates: 1
2023-01-26 16:06:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273936558380421120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:06:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273936684213735424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:06:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936684213735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:06:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936684213735424[0;39m ==> Parameters: 
2023-01-26 16:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936684213735424[0;39m <==    Updates: 1
2023-01-26 16:06:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273936684213735424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:07:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273936789037780992[0;39m 生成今日电子书快照开始
2023-01-26 16:07:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936789037780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:07:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936789037780992[0;39m ==> Parameters: 
2023-01-26 16:07:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273936789037780992[0;39m <==    Updates: 0
2023-01-26 16:07:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273936789037780992[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 16:07:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273936810017689600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:07:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936810017689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:07:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936810017689600[0;39m ==> Parameters: 
2023-01-26 16:07:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936810017689600[0;39m <==    Updates: 1
2023-01-26 16:07:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273936810017689600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:07:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273936935821643776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:07:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936935821643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:07:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936935821643776[0;39m ==> Parameters: 
2023-01-26 16:07:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273936935821643776[0;39m <==    Updates: 1
2023-01-26 16:07:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273936935821643776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:08:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273937040704409600[0;39m 生成今日电子书快照开始
2023-01-26 16:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937040704409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:08:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937040704409600[0;39m ==> Parameters: 
2023-01-26 16:08:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937040704409600[0;39m <==    Updates: 0
2023-01-26 16:08:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273937040704409600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:08:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273937061654958080[0;39m 更新电子书下的文档数据开始
2023-01-26 16:08:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937061654958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:08:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937061654958080[0;39m ==> Parameters: 
2023-01-26 16:08:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937061654958080[0;39m <==    Updates: 1
2023-01-26 16:08:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273937061654958080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:08:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273937187505049600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937187505049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:08:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937187505049600[0;39m ==> Parameters: 
2023-01-26 16:08:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937187505049600[0;39m <==    Updates: 1
2023-01-26 16:08:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273937187505049600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:09:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273937292354260992[0;39m 生成今日电子书快照开始
2023-01-26 16:09:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937292354260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:09:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937292354260992[0;39m ==> Parameters: 
2023-01-26 16:09:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937292354260992[0;39m <==    Updates: 0
2023-01-26 16:09:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273937292354260992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:09:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273937313325780992[0;39m 更新电子书下的文档数据开始
2023-01-26 16:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937313325780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937313325780992[0;39m ==> Parameters: 
2023-01-26 16:09:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937313325780992[0;39m <==    Updates: 1
2023-01-26 16:09:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273937313325780992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:09:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273937439146512384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:09:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937439146512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937439146512384[0;39m ==> Parameters: 
2023-01-26 16:09:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937439146512384[0;39m <==    Updates: 1
2023-01-26 16:09:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273937439146512384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:10:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273937544029278208[0;39m 生成今日电子书快照开始
2023-01-26 16:10:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937544029278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:10:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937544029278208[0;39m ==> Parameters: 
2023-01-26 16:10:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937544029278208[0;39m <==    Updates: 0
2023-01-26 16:10:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273937544029278208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:10:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273937564996603904[0;39m 更新电子书下的文档数据开始
2023-01-26 16:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937564996603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937564996603904[0;39m ==> Parameters: 
2023-01-26 16:10:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937564996603904[0;39m <==    Updates: 1
2023-01-26 16:10:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273937564996603904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:10:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273937690804752384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:10:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937690804752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:10:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937690804752384[0;39m ==> Parameters: 
2023-01-26 16:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937690804752384[0;39m <==    Updates: 1
2023-01-26 16:10:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273937690804752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:11:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273937795695906816[0;39m 生成今日电子书快照开始
2023-01-26 16:11:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937795695906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:11:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937795695906816[0;39m ==> Parameters: 
2023-01-26 16:11:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273937795695906816[0;39m <==    Updates: 0
2023-01-26 16:11:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273937795695906816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:11:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273937816667426816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:11:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937816667426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:11:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937816667426816[0;39m ==> Parameters: 
2023-01-26 16:11:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937816667426816[0;39m <==    Updates: 1
2023-01-26 16:11:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273937816667426816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:11:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273937942483963904[0;39m 更新电子书下的文档数据开始
2023-01-26 16:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937942483963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:11:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937942483963904[0;39m ==> Parameters: 
2023-01-26 16:11:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273937942483963904[0;39m <==    Updates: 1
2023-01-26 16:11:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273937942483963904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:12:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273938047312203776[0;39m 生成今日电子书快照开始
2023-01-26 16:12:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938047312203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:12:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938047312203776[0;39m ==> Parameters: 
2023-01-26 16:12:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938047312203776[0;39m <==    Updates: 0
2023-01-26 16:12:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273938047312203776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:12:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273938068308889600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:12:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938068308889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:12:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938068308889600[0;39m ==> Parameters: 
2023-01-26 16:12:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938068308889600[0;39m <==    Updates: 1
2023-01-26 16:12:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273938068308889600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:12:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273938194171564032[0;39m 更新电子书下的文档数据开始
2023-01-26 16:12:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938194171564032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:12:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938194171564032[0;39m ==> Parameters: 
2023-01-26 16:12:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938194171564032[0;39m <==    Updates: 1
2023-01-26 16:12:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273938194171564032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:13:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273938299020775424[0;39m 生成今日电子书快照开始
2023-01-26 16:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938299020775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938299020775424[0;39m ==> Parameters: 
2023-01-26 16:13:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938299020775424[0;39m <==    Updates: 0
2023-01-26 16:13:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273938299020775424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:13:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273938319946158080[0;39m 更新电子书下的文档数据开始
2023-01-26 16:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938319946158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938319946158080[0;39m ==> Parameters: 
2023-01-26 16:13:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938319946158080[0;39m <==    Updates: 1
2023-01-26 16:13:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273938319946158080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:13:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273938445825609728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:13:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938445825609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:13:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938445825609728[0;39m ==> Parameters: 
2023-01-26 16:13:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938445825609728[0;39m <==    Updates: 1
2023-01-26 16:13:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273938445825609728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:14:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273938550649655296[0;39m 生成今日电子书快照开始
2023-01-26 16:14:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938550649655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:14:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938550649655296[0;39m ==> Parameters: 
2023-01-26 16:14:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938550649655296[0;39m <==    Updates: 0
2023-01-26 16:14:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273938550649655296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:14:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273938571621175296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:14:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938571621175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:14:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938571621175296[0;39m ==> Parameters: 
2023-01-26 16:14:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938571621175296[0;39m <==    Updates: 1
2023-01-26 16:14:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273938571621175296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:14:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273938697450295296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938697450295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938697450295296[0;39m ==> Parameters: 
2023-01-26 16:14:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938697450295296[0;39m <==    Updates: 1
2023-01-26 16:14:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273938697450295296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:15:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273938802291118080[0;39m 生成今日电子书快照开始
2023-01-26 16:15:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938802291118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:15:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938802291118080[0;39m ==> Parameters: 
2023-01-26 16:15:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273938802291118080[0;39m <==    Updates: 0
2023-01-26 16:15:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273938802291118080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:15:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273938823296192512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:15:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938823296192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:15:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938823296192512[0;39m ==> Parameters: 
2023-01-26 16:15:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938823296192512[0;39m <==    Updates: 1
2023-01-26 16:15:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273938823296192512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:15:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273938949100146688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:15:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938949100146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:15:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938949100146688[0;39m ==> Parameters: 
2023-01-26 16:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273938949100146688[0;39m <==    Updates: 1
2023-01-26 16:15:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273938949100146688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:16:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273939053978718208[0;39m 生成今日电子书快照开始
2023-01-26 16:16:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939053978718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:16:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939053978718208[0;39m ==> Parameters: 
2023-01-26 16:16:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939053978718208[0;39m <==    Updates: 0
2023-01-26 16:16:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273939053978718208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:16:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273939074950238208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:16:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939074950238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:16:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939074950238208[0;39m ==> Parameters: 
2023-01-26 16:16:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939074950238208[0;39m <==    Updates: 1
2023-01-26 16:16:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273939074950238208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:16:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273939200741609472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:16:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939200741609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:16:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939200741609472[0;39m ==> Parameters: 
2023-01-26 16:16:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939200741609472[0;39m <==    Updates: 1
2023-01-26 16:16:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273939200741609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:17:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273939305620180992[0;39m 生成今日电子书快照开始
2023-01-26 16:17:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939305620180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:17:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939305620180992[0;39m ==> Parameters: 
2023-01-26 16:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939305620180992[0;39m <==    Updates: 0
2023-01-26 16:17:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273939305620180992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:17:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273939326629449728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:17:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939326629449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:17:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939326629449728[0;39m ==> Parameters: 
2023-01-26 16:17:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939326629449728[0;39m <==    Updates: 1
2023-01-26 16:17:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273939326629449728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:17:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273939452441792512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:17:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939452441792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:17:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939452441792512[0;39m ==> Parameters: 
2023-01-26 16:17:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939452441792512[0;39m <==    Updates: 1
2023-01-26 16:17:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273939452441792512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:18:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273939557311975424[0;39m 生成今日电子书快照开始
2023-01-26 16:18:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939557311975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:18:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939557311975424[0;39m ==> Parameters: 
2023-01-26 16:18:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939557311975424[0;39m <==    Updates: 0
2023-01-26 16:18:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273939557311975424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:18:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273939578241552384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939578241552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939578241552384[0;39m ==> Parameters: 
2023-01-26 16:18:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939578241552384[0;39m <==    Updates: 1
2023-01-26 16:18:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273939578241552384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:18:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273939704104226816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939704104226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939704104226816[0;39m ==> Parameters: 
2023-01-26 16:18:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939704104226816[0;39m <==    Updates: 1
2023-01-26 16:18:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273939704104226816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:19:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273939808953438208[0;39m 生成今日电子书快照开始
2023-01-26 16:19:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939808953438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:19:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939808953438208[0;39m ==> Parameters: 
2023-01-26 16:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273939808953438208[0;39m <==    Updates: 0
2023-01-26 16:19:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273939808953438208[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:19:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273939829899792384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:19:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939829899792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:19:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939829899792384[0;39m ==> Parameters: 
2023-01-26 16:19:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939829899792384[0;39m <==    Updates: 1
2023-01-26 16:19:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273939829899792384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:19:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273939955716329472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:19:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939955716329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:19:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939955716329472[0;39m ==> Parameters: 
2023-01-26 16:19:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273939955716329472[0;39m <==    Updates: 1
2023-01-26 16:19:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273939955716329472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:20:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273940060586512384[0;39m 生成今日电子书快照开始
2023-01-26 16:20:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940060586512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:20:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940060586512384[0;39m ==> Parameters: 
2023-01-26 16:20:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940060586512384[0;39m <==    Updates: 0
2023-01-26 16:20:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273940060586512384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:20:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273940081591586816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940081591586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940081591586816[0;39m ==> Parameters: 
2023-01-26 16:20:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940081591586816[0;39m <==    Updates: 1
2023-01-26 16:20:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273940081591586816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:20:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273940207395540992[0;39m 更新电子书下的文档数据开始
2023-01-26 16:20:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940207395540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940207395540992[0;39m ==> Parameters: 
2023-01-26 16:20:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940207395540992[0;39m <==    Updates: 1
2023-01-26 16:20:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273940207395540992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:21:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273940312248946688[0;39m 生成今日电子书快照开始
2023-01-26 16:21:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940312248946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940312248946688[0;39m ==> Parameters: 
2023-01-26 16:21:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940312248946688[0;39m <==    Updates: 0
2023-01-26 16:21:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273940312248946688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:21:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273940333245632512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940333245632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:21:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940333245632512[0;39m ==> Parameters: 
2023-01-26 16:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940333245632512[0;39m <==    Updates: 1
2023-01-26 16:21:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273940333245632512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:21:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273940459091529728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940459091529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:21:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940459091529728[0;39m ==> Parameters: 
2023-01-26 16:21:35.032 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940459091529728[0;39m <==    Updates: 1
2023-01-26 16:21:35.032 INFO  com.example.wiki.job.DocJob                       :35   [32m273940459091529728[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 16:22:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273940563894603776[0;39m 生成今日电子书快照开始
2023-01-26 16:22:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940563894603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:22:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940563894603776[0;39m ==> Parameters: 
2023-01-26 16:22:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940563894603776[0;39m <==    Updates: 0
2023-01-26 16:22:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273940563894603776[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 16:22:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273940584878706688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:22:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940584878706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:22:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940584878706688[0;39m ==> Parameters: 
2023-01-26 16:22:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940584878706688[0;39m <==    Updates: 1
2023-01-26 16:22:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273940584878706688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:22:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273940710728798208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:22:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940710728798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:22:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940710728798208[0;39m ==> Parameters: 
2023-01-26 16:22:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940710728798208[0;39m <==    Updates: 1
2023-01-26 16:22:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273940710728798208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:23:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273940815557038080[0;39m 生成今日电子书快照开始
2023-01-26 16:23:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940815557038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:23:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940815557038080[0;39m ==> Parameters: 
2023-01-26 16:23:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273940815557038080[0;39m <==    Updates: 0
2023-01-26 16:23:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273940815557038080[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:23:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273940836541140992[0;39m 更新电子书下的文档数据开始
2023-01-26 16:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940836541140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940836541140992[0;39m ==> Parameters: 
2023-01-26 16:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940836541140992[0;39m <==    Updates: 1
2023-01-26 16:23:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273940836541140992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:23:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273940962387038208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940962387038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940962387038208[0;39m ==> Parameters: 
2023-01-26 16:23:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273940962387038208[0;39m <==    Updates: 1
2023-01-26 16:23:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273940962387038208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:24:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273941067253026816[0;39m 生成今日电子书快照开始
2023-01-26 16:24:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941067253026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:24:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941067253026816[0;39m ==> Parameters: 
2023-01-26 16:24:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941067253026816[0;39m <==    Updates: 0
2023-01-26 16:24:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273941067253026816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:24:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273941088190992384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:24:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941088190992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941088190992384[0;39m ==> Parameters: 
2023-01-26 16:24:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941088190992384[0;39m <==    Updates: 1
2023-01-26 16:24:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273941088190992384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:24:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273941214053666816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:24:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941214053666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:24:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941214053666816[0;39m ==> Parameters: 
2023-01-26 16:24:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941214053666816[0;39m <==    Updates: 1
2023-01-26 16:24:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273941214053666816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:25:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273941318869323776[0;39m 生成今日电子书快照开始
2023-01-26 16:25:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941318869323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:25:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941318869323776[0;39m ==> Parameters: 
2023-01-26 16:25:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941318869323776[0;39m <==    Updates: 0
2023-01-26 16:25:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273941318869323776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:25:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273941339861815296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:25:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941339861815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:25:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941339861815296[0;39m ==> Parameters: 
2023-01-26 16:25:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941339861815296[0;39m <==    Updates: 1
2023-01-26 16:25:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273941339861815296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:25:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273941465669963776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:25:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941465669963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:25:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941465669963776[0;39m ==> Parameters: 
2023-01-26 16:25:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941465669963776[0;39m <==    Updates: 1
2023-01-26 16:25:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273941465669963776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:26:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273941570540146688[0;39m 生成今日电子书快照开始
2023-01-26 16:26:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941570540146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941570540146688[0;39m ==> Parameters: 
2023-01-26 16:26:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941570540146688[0;39m <==    Updates: 0
2023-01-26 16:26:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273941570540146688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:26:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273941591553609728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941591553609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941591553609728[0;39m ==> Parameters: 
2023-01-26 16:26:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941591553609728[0;39m <==    Updates: 1
2023-01-26 16:26:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273941591553609728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:26:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273941717386924032[0;39m 更新电子书下的文档数据开始
2023-01-26 16:26:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941717386924032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:26:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941717386924032[0;39m ==> Parameters: 
2023-01-26 16:26:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941717386924032[0;39m <==    Updates: 1
2023-01-26 16:26:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273941717386924032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:27:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273941822198386688[0;39m 生成今日电子书快照开始
2023-01-26 16:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941822198386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941822198386688[0;39m ==> Parameters: 
2023-01-26 16:27:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273941822198386688[0;39m <==    Updates: 0
2023-01-26 16:27:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273941822198386688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:27:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273941843153129472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:27:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941843153129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:27:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941843153129472[0;39m ==> Parameters: 
2023-01-26 16:27:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941843153129472[0;39m <==    Updates: 1
2023-01-26 16:27:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273941843153129472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:27:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273941968999026688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:27:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941968999026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:27:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941968999026688[0;39m ==> Parameters: 
2023-01-26 16:27:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273941968999026688[0;39m <==    Updates: 1
2023-01-26 16:27:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273941968999026688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:28:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273942073856626688[0;39m 生成今日电子书快照开始
2023-01-26 16:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942073856626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:28:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942073856626688[0;39m ==> Parameters: 
2023-01-26 16:28:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942073856626688[0;39m <==    Updates: 0
2023-01-26 16:28:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273942073856626688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:28:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273942094870089728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:28:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942094870089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:28:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942094870089728[0;39m ==> Parameters: 
2023-01-26 16:28:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942094870089728[0;39m <==    Updates: 1
2023-01-26 16:28:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273942094870089728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:28:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273942220686626816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942220686626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942220686626816[0;39m ==> Parameters: 
2023-01-26 16:28:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942220686626816[0;39m <==    Updates: 1
2023-01-26 16:28:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273942220686626816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:29:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273942325548421120[0;39m 生成今日电子书快照开始
2023-01-26 16:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942325548421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:29:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942325548421120[0;39m ==> Parameters: 
2023-01-26 16:29:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942325548421120[0;39m <==    Updates: 0
2023-01-26 16:29:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273942325548421120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:29:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273942346494775296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942346494775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:29:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942346494775296[0;39m ==> Parameters: 
2023-01-26 16:29:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942346494775296[0;39m <==    Updates: 1
2023-01-26 16:29:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273942346494775296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:29:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273942472311312384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:29:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942472311312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:29:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942472311312384[0;39m ==> Parameters: 
2023-01-26 16:29:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942472311312384[0;39m <==    Updates: 1
2023-01-26 16:29:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273942472311312384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:30:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273942577189883904[0;39m 生成今日电子书快照开始
2023-01-26 16:30:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942577189883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:30:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942577189883904[0;39m ==> Parameters: 
2023-01-26 16:30:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942577189883904[0;39m <==    Updates: 0
2023-01-26 16:30:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273942577189883904[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:30:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273942598144626688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942598144626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942598144626688[0;39m ==> Parameters: 
2023-01-26 16:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942598144626688[0;39m <==    Updates: 1
2023-01-26 16:30:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273942598144626688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:30:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273942723990523904[0;39m 更新电子书下的文档数据开始
2023-01-26 16:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942723990523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942723990523904[0;39m ==> Parameters: 
2023-01-26 16:30:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942723990523904[0;39m <==    Updates: 1
2023-01-26 16:30:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273942723990523904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:31:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273942828822958080[0;39m 生成今日电子书快照开始
2023-01-26 16:31:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942828822958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942828822958080[0;39m ==> Parameters: 
2023-01-26 16:31:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273942828822958080[0;39m <==    Updates: 0
2023-01-26 16:31:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273942828822958080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:31:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273942849798672384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:31:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942849798672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:31:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942849798672384[0;39m ==> Parameters: 
2023-01-26 16:31:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942849798672384[0;39m <==    Updates: 1
2023-01-26 16:31:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273942849798672384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:31:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273942975661346816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:31:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942975661346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:31:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942975661346816[0;39m ==> Parameters: 
2023-01-26 16:31:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273942975661346816[0;39m <==    Updates: 1
2023-01-26 16:31:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273942975661346816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:32:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273943080497975296[0;39m 生成今日电子书快照开始
2023-01-26 16:32:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943080497975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:32:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943080497975296[0;39m ==> Parameters: 
2023-01-26 16:32:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943080497975296[0;39m <==    Updates: 0
2023-01-26 16:32:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273943080497975296[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:32:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273943101444329472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:32:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943101444329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:32:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943101444329472[0;39m ==> Parameters: 
2023-01-26 16:32:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943101444329472[0;39m <==    Updates: 1
2023-01-26 16:32:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273943101444329472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:32:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273943227323781120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:32:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943227323781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:32:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943227323781120[0;39m ==> Parameters: 
2023-01-26 16:32:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943227323781120[0;39m <==    Updates: 1
2023-01-26 16:32:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273943227323781120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:33:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273943332156215296[0;39m 生成今日电子书快照开始
2023-01-26 16:33:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943332156215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:33:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943332156215296[0;39m ==> Parameters: 
2023-01-26 16:33:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943332156215296[0;39m <==    Updates: 0
2023-01-26 16:33:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273943332156215296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 16:33:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273943353131929600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:33:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943353131929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:33:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943353131929600[0;39m ==> Parameters: 
2023-01-26 16:33:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943353131929600[0;39m <==    Updates: 1
2023-01-26 16:33:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273943353131929600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:33:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273943478948466688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943478948466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943478948466688[0;39m ==> Parameters: 
2023-01-26 16:33:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943478948466688[0;39m <==    Updates: 1
2023-01-26 16:33:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273943478948466688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:34:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273943583843815424[0;39m 生成今日电子书快照开始
2023-01-26 16:34:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943583843815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:34:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943583843815424[0;39m ==> Parameters: 
2023-01-26 16:34:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943583843815424[0;39m <==    Updates: 0
2023-01-26 16:34:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273943583843815424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:34:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273943604794363904[0;39m 更新电子书下的文档数据开始
2023-01-26 16:34:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943604794363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:34:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943604794363904[0;39m ==> Parameters: 
2023-01-26 16:34:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943604794363904[0;39m <==    Updates: 1
2023-01-26 16:34:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273943604794363904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:34:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273943730589929472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:34:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943730589929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:34:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943730589929472[0;39m ==> Parameters: 
2023-01-26 16:34:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943730589929472[0;39m <==    Updates: 1
2023-01-26 16:34:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273943730589929472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:35:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273943835502055424[0;39m 生成今日电子书快照开始
2023-01-26 16:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943835502055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:35:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943835502055424[0;39m ==> Parameters: 
2023-01-26 16:35:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273943835502055424[0;39m <==    Updates: 0
2023-01-26 16:35:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273943835502055424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:35:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273943856456798208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943856456798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943856456798208[0;39m ==> Parameters: 
2023-01-26 16:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943856456798208[0;39m <==    Updates: 1
2023-01-26 16:35:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273943856456798208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:35:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273943982294306816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943982294306816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943982294306816[0;39m ==> Parameters: 
2023-01-26 16:35:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273943982294306816[0;39m <==    Updates: 1
2023-01-26 16:35:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273943982294306816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:36:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273944087160295424[0;39m 生成今日电子书快照开始
2023-01-26 16:36:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944087160295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:36:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944087160295424[0;39m ==> Parameters: 
2023-01-26 16:36:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944087160295424[0;39m <==    Updates: 0
2023-01-26 16:36:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273944087160295424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:36:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273944108081483776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:36:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944108081483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:36:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944108081483776[0;39m ==> Parameters: 
2023-01-26 16:36:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944108081483776[0;39m <==    Updates: 1
2023-01-26 16:36:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273944108081483776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:36:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273944233906409472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:36:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944233906409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:36:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944233906409472[0;39m ==> Parameters: 
2023-01-26 16:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944233906409472[0;39m <==    Updates: 1
2023-01-26 16:36:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273944233906409472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:37:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273944338772398080[0;39m 生成今日电子书快照开始
2023-01-26 16:37:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944338772398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944338772398080[0;39m ==> Parameters: 
2023-01-26 16:37:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944338772398080[0;39m <==    Updates: 0
2023-01-26 16:37:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273944338772398080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:37:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273944359756500992[0;39m 更新电子书下的文档数据开始
2023-01-26 16:37:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944359756500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:37:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944359756500992[0;39m ==> Parameters: 
2023-01-26 16:37:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944359756500992[0;39m <==    Updates: 1
2023-01-26 16:37:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273944359756500992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:37:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273944485623369728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944485623369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:37:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944485623369728[0;39m ==> Parameters: 
2023-01-26 16:37:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944485623369728[0;39m <==    Updates: 1
2023-01-26 16:37:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273944485623369728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:38:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273944590434832384[0;39m 生成今日电子书快照开始
2023-01-26 16:38:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944590434832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:38:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944590434832384[0;39m ==> Parameters: 
2023-01-26 16:38:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944590434832384[0;39m <==    Updates: 0
2023-01-26 16:38:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273944590434832384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:38:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273944611444101120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:38:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944611444101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944611444101120[0;39m ==> Parameters: 
2023-01-26 16:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944611444101120[0;39m <==    Updates: 1
2023-01-26 16:38:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273944611444101120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:38:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273944737227083776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:38:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944737227083776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:38:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944737227083776[0;39m ==> Parameters: 
2023-01-26 16:38:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944737227083776[0;39m <==    Updates: 1
2023-01-26 16:38:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273944737227083776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:39:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273944842084683776[0;39m 生成今日电子书快照开始
2023-01-26 16:39:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944842084683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944842084683776[0;39m ==> Parameters: 
2023-01-26 16:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273944842084683776[0;39m <==    Updates: 0
2023-01-26 16:39:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273944842084683776[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 16:39:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273944863106535424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:39:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944863106535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:39:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944863106535424[0;39m ==> Parameters: 
2023-01-26 16:39:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944863106535424[0;39m <==    Updates: 1
2023-01-26 16:39:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273944863106535424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:39:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273944988918878208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944988918878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944988918878208[0;39m ==> Parameters: 
2023-01-26 16:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273944988918878208[0;39m <==    Updates: 1
2023-01-26 16:39:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273944988918878208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:40:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273945093776478208[0;39m 生成今日电子书快照开始
2023-01-26 16:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945093776478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:40:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945093776478208[0;39m ==> Parameters: 
2023-01-26 16:40:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945093776478208[0;39m <==    Updates: 0
2023-01-26 16:40:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273945093776478208[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:40:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273945114760581120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:40:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945114760581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:40:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945114760581120[0;39m ==> Parameters: 
2023-01-26 16:40:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945114760581120[0;39m <==    Updates: 1
2023-01-26 16:40:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273945114760581120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:40:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273945240589701120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:40:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945240589701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:40:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945240589701120[0;39m ==> Parameters: 
2023-01-26 16:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945240589701120[0;39m <==    Updates: 1
2023-01-26 16:40:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273945240589701120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:41:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273945345447301120[0;39m 生成今日电子书快照开始
2023-01-26 16:41:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945345447301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:41:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945345447301120[0;39m ==> Parameters: 
2023-01-26 16:41:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945345447301120[0;39m <==    Updates: 0
2023-01-26 16:41:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273945345447301120[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:41:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273945366393655296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945366393655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945366393655296[0;39m ==> Parameters: 
2023-01-26 16:41:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945366393655296[0;39m <==    Updates: 1
2023-01-26 16:41:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273945366393655296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:41:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273945492197609472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:41:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945492197609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:41:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945492197609472[0;39m ==> Parameters: 
2023-01-26 16:41:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945492197609472[0;39m <==    Updates: 1
2023-01-26 16:41:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273945492197609472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:42:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273945597071986688[0;39m 生成今日电子书快照开始
2023-01-26 16:42:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945597071986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945597071986688[0;39m ==> Parameters: 
2023-01-26 16:42:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945597071986688[0;39m <==    Updates: 0
2023-01-26 16:42:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273945597071986688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:42:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273945618081255424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:42:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945618081255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:42:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945618081255424[0;39m ==> Parameters: 
2023-01-26 16:42:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945618081255424[0;39m <==    Updates: 1
2023-01-26 16:42:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273945618081255424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:42:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273945743855849472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:42:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945743855849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:42:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945743855849472[0;39m ==> Parameters: 
2023-01-26 16:42:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945743855849472[0;39m <==    Updates: 1
2023-01-26 16:42:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273945743855849472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:43:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273945848751198208[0;39m 生成今日电子书快照开始
2023-01-26 16:43:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945848751198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:43:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945848751198208[0;39m ==> Parameters: 
2023-01-26 16:43:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273945848751198208[0;39m <==    Updates: 0
2023-01-26 16:43:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273945848751198208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:43:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273945869722718208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:43:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945869722718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:43:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945869722718208[0;39m ==> Parameters: 
2023-01-26 16:43:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945869722718208[0;39m <==    Updates: 1
2023-01-26 16:43:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273945869722718208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:43:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273945995535060992[0;39m 更新电子书下的文档数据开始
2023-01-26 16:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945995535060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945995535060992[0;39m ==> Parameters: 
2023-01-26 16:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273945995535060992[0;39m <==    Updates: 1
2023-01-26 16:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273945995535060992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:44:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273946100426215424[0;39m 生成今日电子书快照开始
2023-01-26 16:44:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946100426215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:44:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946100426215424[0;39m ==> Parameters: 
2023-01-26 16:44:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946100426215424[0;39m <==    Updates: 0
2023-01-26 16:44:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273946100426215424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:44:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273946121368375296[0;39m 更新电子书下的文档数据开始
2023-01-26 16:44:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946121368375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:44:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946121368375296[0;39m ==> Parameters: 
2023-01-26 16:44:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946121368375296[0;39m <==    Updates: 1
2023-01-26 16:44:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273946121368375296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 16:44:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273946247201689600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:44:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946247201689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:44:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946247201689600[0;39m ==> Parameters: 
2023-01-26 16:44:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946247201689600[0;39m <==    Updates: 1
2023-01-26 16:44:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273946247201689600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:45:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273946352055095296[0;39m 生成今日电子书快照开始
2023-01-26 16:45:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946352055095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:45:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946352055095296[0;39m ==> Parameters: 
2023-01-26 16:45:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946352055095296[0;39m <==    Updates: 0
2023-01-26 16:45:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273946352055095296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:45:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273946373055975424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:45:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946373055975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:45:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946373055975424[0;39m ==> Parameters: 
2023-01-26 16:45:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946373055975424[0;39m <==    Updates: 1
2023-01-26 16:45:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273946373055975424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:45:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273946498885095424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:45:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946498885095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:45:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946498885095424[0;39m ==> Parameters: 
2023-01-26 16:45:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946498885095424[0;39m <==    Updates: 1
2023-01-26 16:45:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273946498885095424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:46:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273946603730112512[0;39m 生成今日电子书快照开始
2023-01-26 16:46:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946603730112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946603730112512[0;39m ==> Parameters: 
2023-01-26 16:46:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946603730112512[0;39m <==    Updates: 0
2023-01-26 16:46:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273946603730112512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:46:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273946624714215424[0;39m 更新电子书下的文档数据开始
2023-01-26 16:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946624714215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:46:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946624714215424[0;39m ==> Parameters: 
2023-01-26 16:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946624714215424[0;39m <==    Updates: 1
2023-01-26 16:46:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273946624714215424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:46:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273946750497198080[0;39m 更新电子书下的文档数据开始
2023-01-26 16:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946750497198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:46:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946750497198080[0;39m ==> Parameters: 
2023-01-26 16:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946750497198080[0;39m <==    Updates: 1
2023-01-26 16:46:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273946750497198080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:47:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273946855400935424[0;39m 生成今日电子书快照开始
2023-01-26 16:47:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946855400935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:47:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946855400935424[0;39m ==> Parameters: 
2023-01-26 16:47:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273946855400935424[0;39m <==    Updates: 0
2023-01-26 16:47:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273946855400935424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:47:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273946876330512384[0;39m 更新电子书下的文档数据开始
2023-01-26 16:47:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946876330512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:47:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946876330512384[0;39m ==> Parameters: 
2023-01-26 16:47:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273946876330512384[0;39m <==    Updates: 1
2023-01-26 16:47:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273946876330512384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:47:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273947002193186816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947002193186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947002193186816[0;39m ==> Parameters: 
2023-01-26 16:47:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947002193186816[0;39m <==    Updates: 1
2023-01-26 16:47:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273947002193186816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:48:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273947107008843776[0;39m 生成今日电子书快照开始
2023-01-26 16:48:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947107008843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:48:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947107008843776[0;39m ==> Parameters: 
2023-01-26 16:48:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947107008843776[0;39m <==    Updates: 0
2023-01-26 16:48:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273947107008843776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:48:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273947127980363776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:48:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947127980363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:48:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947127980363776[0;39m ==> Parameters: 
2023-01-26 16:48:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947127980363776[0;39m <==    Updates: 1
2023-01-26 16:48:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273947127980363776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:48:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273947253855621120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947253855621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947253855621120[0;39m ==> Parameters: 
2023-01-26 16:48:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947253855621120[0;39m <==    Updates: 1
2023-01-26 16:48:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273947253855621120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:49:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273947358692249600[0;39m 生成今日电子书快照开始
2023-01-26 16:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947358692249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947358692249600[0;39m ==> Parameters: 
2023-01-26 16:49:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947358692249600[0;39m <==    Updates: 0
2023-01-26 16:49:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273947358692249600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:49:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273947379651186688[0;39m 更新电子书下的文档数据开始
2023-01-26 16:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947379651186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947379651186688[0;39m ==> Parameters: 
2023-01-26 16:49:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947379651186688[0;39m <==    Updates: 1
2023-01-26 16:49:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273947379651186688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 16:49:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273947505463529472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:49:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947505463529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:49:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947505463529472[0;39m ==> Parameters: 
2023-01-26 16:49:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947505463529472[0;39m <==    Updates: 1
2023-01-26 16:49:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273947505463529472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:50:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273947610329518080[0;39m 生成今日电子书快照开始
2023-01-26 16:50:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947610329518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:50:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947610329518080[0;39m ==> Parameters: 
2023-01-26 16:50:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947610329518080[0;39m <==    Updates: 0
2023-01-26 16:50:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273947610329518080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 16:50:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273947631342981120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947631342981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:50:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947631342981120[0;39m ==> Parameters: 
2023-01-26 16:50:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947631342981120[0;39m <==    Updates: 1
2023-01-26 16:50:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273947631342981120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:50:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273947757180489728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947757180489728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947757180489728[0;39m ==> Parameters: 
2023-01-26 16:50:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947757180489728[0;39m <==    Updates: 1
2023-01-26 16:50:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273947757180489728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:51:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273947862033895424[0;39m 生成今日电子书快照开始
2023-01-26 16:51:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947862033895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:51:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947862033895424[0;39m ==> Parameters: 
2023-01-26 16:51:00.041 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273947862033895424[0;39m <==    Updates: 0
2023-01-26 16:51:00.042 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273947862033895424[0;39m 生成今日电子书快照结束，耗时：27毫秒
2023-01-26 16:51:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273947882992832512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:51:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947882992832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:51:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947882992832512[0;39m ==> Parameters: 
2023-01-26 16:51:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273947882992832512[0;39m <==    Updates: 1
2023-01-26 16:51:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273947882992832512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:51:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273948008817758208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:51:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948008817758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:51:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948008817758208[0;39m ==> Parameters: 
2023-01-26 16:51:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948008817758208[0;39m <==    Updates: 1
2023-01-26 16:51:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273948008817758208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:52:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273948113687941120[0;39m 生成今日电子书快照开始
2023-01-26 16:52:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948113687941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:52:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948113687941120[0;39m ==> Parameters: 
2023-01-26 16:52:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948113687941120[0;39m <==    Updates: 0
2023-01-26 16:52:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273948113687941120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 16:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273948134667849728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:52:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948134667849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948134667849728[0;39m ==> Parameters: 
2023-01-26 16:52:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948134667849728[0;39m <==    Updates: 1
2023-01-26 16:52:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273948134667849728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:52:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273948260496969728[0;39m 更新电子书下的文档数据开始
2023-01-26 16:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948260496969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:52:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948260496969728[0;39m ==> Parameters: 
2023-01-26 16:52:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948260496969728[0;39m <==    Updates: 1
2023-01-26 16:52:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273948260496969728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:53:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273948365341986816[0;39m 生成今日电子书快照开始
2023-01-26 16:53:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948365341986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:53:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948365341986816[0;39m ==> Parameters: 
2023-01-26 16:53:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948365341986816[0;39m <==    Updates: 0
2023-01-26 16:53:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273948365341986816[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 16:53:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273948386296729600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948386296729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948386296729600[0;39m ==> Parameters: 
2023-01-26 16:53:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948386296729600[0;39m <==    Updates: 1
2023-01-26 16:53:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273948386296729600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:53:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273948512142626816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:53:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948512142626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:53:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948512142626816[0;39m ==> Parameters: 
2023-01-26 16:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948512142626816[0;39m <==    Updates: 1
2023-01-26 16:53:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273948512142626816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:54:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273948616975060992[0;39m 生成今日电子书快照开始
2023-01-26 16:54:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948616975060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:54:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948616975060992[0;39m ==> Parameters: 
2023-01-26 16:54:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948616975060992[0;39m <==    Updates: 0
2023-01-26 16:54:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273948616975060992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:54:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273948637954969600[0;39m 更新电子书下的文档数据开始
2023-01-26 16:54:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948637954969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:54:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948637954969600[0;39m ==> Parameters: 
2023-01-26 16:54:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948637954969600[0;39m <==    Updates: 1
2023-01-26 16:54:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273948637954969600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:54:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273948763758923776[0;39m 更新电子书下的文档数据开始
2023-01-26 16:54:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948763758923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:54:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948763758923776[0;39m ==> Parameters: 
2023-01-26 16:54:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948763758923776[0;39m <==    Updates: 1
2023-01-26 16:54:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273948763758923776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:55:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273948868629106688[0;39m 生成今日电子书快照开始
2023-01-26 16:55:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948868629106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:55:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948868629106688[0;39m ==> Parameters: 
2023-01-26 16:55:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273948868629106688[0;39m <==    Updates: 0
2023-01-26 16:55:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273948868629106688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 16:55:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273948889629986816[0;39m 更新电子书下的文档数据开始
2023-01-26 16:55:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948889629986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:55:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948889629986816[0;39m ==> Parameters: 
2023-01-26 16:55:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273948889629986816[0;39m <==    Updates: 1
2023-01-26 16:55:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273948889629986816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:55:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273949015450718208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:55:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949015450718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:55:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949015450718208[0;39m ==> Parameters: 
2023-01-26 16:55:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949015450718208[0;39m <==    Updates: 1
2023-01-26 16:55:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273949015450718208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 16:56:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273949120295735296[0;39m 生成今日电子书快照开始
2023-01-26 16:56:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949120295735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:56:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949120295735296[0;39m ==> Parameters: 
2023-01-26 16:56:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949120295735296[0;39m <==    Updates: 0
2023-01-26 16:56:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273949120295735296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 16:56:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273949141284032512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:56:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949141284032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:56:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949141284032512[0;39m ==> Parameters: 
2023-01-26 16:56:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949141284032512[0;39m <==    Updates: 1
2023-01-26 16:56:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273949141284032512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:56:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273949267108958208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949267108958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:56:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949267108958208[0;39m ==> Parameters: 
2023-01-26 16:56:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949267108958208[0;39m <==    Updates: 1
2023-01-26 16:56:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273949267108958208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:57:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273949371974946816[0;39m 生成今日电子书快照开始
2023-01-26 16:57:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949371974946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:57:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949371974946816[0;39m ==> Parameters: 
2023-01-26 16:57:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949371974946816[0;39m <==    Updates: 0
2023-01-26 16:57:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273949371974946816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:57:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273949392900329472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:57:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949392900329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:57:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949392900329472[0;39m ==> Parameters: 
2023-01-26 16:57:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949392900329472[0;39m <==    Updates: 1
2023-01-26 16:57:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273949392900329472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:57:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273949518779781120[0;39m 更新电子书下的文档数据开始
2023-01-26 16:57:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949518779781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:57:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949518779781120[0;39m ==> Parameters: 
2023-01-26 16:57:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949518779781120[0;39m <==    Updates: 1
2023-01-26 16:57:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273949518779781120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:58:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273949623616409600[0;39m 生成今日电子书快照开始
2023-01-26 16:58:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949623616409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949623616409600[0;39m ==> Parameters: 
2023-01-26 16:58:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949623616409600[0;39m <==    Updates: 0
2023-01-26 16:58:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273949623616409600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 16:58:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273949644600512512[0;39m 更新电子书下的文档数据开始
2023-01-26 16:58:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949644600512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:58:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949644600512512[0;39m ==> Parameters: 
2023-01-26 16:58:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949644600512512[0;39m <==    Updates: 1
2023-01-26 16:58:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273949644600512512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:58:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273949770387689472[0;39m 更新电子书下的文档数据开始
2023-01-26 16:58:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949770387689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:58:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949770387689472[0;39m ==> Parameters: 
2023-01-26 16:58:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949770387689472[0;39m <==    Updates: 1
2023-01-26 16:58:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273949770387689472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 16:59:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273949875270455296[0;39m 生成今日电子书快照开始
2023-01-26 16:59:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949875270455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 16:59:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949875270455296[0;39m ==> Parameters: 
2023-01-26 16:59:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273949875270455296[0;39m <==    Updates: 0
2023-01-26 16:59:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273949875270455296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 16:59:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273949896254558208[0;39m 更新电子书下的文档数据开始
2023-01-26 16:59:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949896254558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:59:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949896254558208[0;39m ==> Parameters: 
2023-01-26 16:59:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273949896254558208[0;39m <==    Updates: 1
2023-01-26 16:59:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273949896254558208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 16:59:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273950022079483904[0;39m 更新电子书下的文档数据开始
2023-01-26 16:59:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950022079483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 16:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950022079483904[0;39m ==> Parameters: 
2023-01-26 16:59:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950022079483904[0;39m <==    Updates: 1
2023-01-26 16:59:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273950022079483904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:00:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273950126920306688[0;39m 生成今日电子书快照开始
2023-01-26 17:00:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950126920306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:00:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950126920306688[0;39m ==> Parameters: 
2023-01-26 17:00:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950126920306688[0;39m <==    Updates: 0
2023-01-26 17:00:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273950126920306688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:00:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273950147875049472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:00:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950147875049472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:00:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950147875049472[0;39m ==> Parameters: 
2023-01-26 17:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950147875049472[0;39m <==    Updates: 1
2023-01-26 17:00:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273950147875049472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:00:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273950273729335296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950273729335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950273729335296[0;39m ==> Parameters: 
2023-01-26 17:00:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950273729335296[0;39m <==    Updates: 1
2023-01-26 17:00:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273950273729335296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273950378607906816[0;39m 生成今日电子书快照开始
2023-01-26 17:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950378607906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:01:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950378607906816[0;39m ==> Parameters: 
2023-01-26 17:01:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950378607906816[0;39m <==    Updates: 0
2023-01-26 17:01:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273950378607906816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:01:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273950399587815424[0;39m 更新电子书下的文档数据开始
2023-01-26 17:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950399587815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950399587815424[0;39m ==> Parameters: 
2023-01-26 17:01:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950399587815424[0;39m <==    Updates: 1
2023-01-26 17:01:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273950399587815424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:01:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273950525408546816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:01:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950525408546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:01:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950525408546816[0;39m ==> Parameters: 
2023-01-26 17:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950525408546816[0;39m <==    Updates: 1
2023-01-26 17:01:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273950525408546816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:02:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273950630278729728[0;39m 生成今日电子书快照开始
2023-01-26 17:02:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950630278729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:02:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950630278729728[0;39m ==> Parameters: 
2023-01-26 17:02:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950630278729728[0;39m <==    Updates: 0
2023-01-26 17:02:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273950630278729728[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 17:02:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273950651216695296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950651216695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950651216695296[0;39m ==> Parameters: 
2023-01-26 17:02:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950651216695296[0;39m <==    Updates: 1
2023-01-26 17:02:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273950651216695296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:02:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273950777058398208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:02:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950777058398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950777058398208[0;39m ==> Parameters: 
2023-01-26 17:02:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950777058398208[0;39m <==    Updates: 1
2023-01-26 17:02:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273950777058398208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:03:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273950881886638080[0;39m 生成今日电子书快照开始
2023-01-26 17:03:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950881886638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:03:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950881886638080[0;39m ==> Parameters: 
2023-01-26 17:03:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273950881886638080[0;39m <==    Updates: 0
2023-01-26 17:03:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273950881886638080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:03:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273950902870740992[0;39m 更新电子书下的文档数据开始
2023-01-26 17:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950902870740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950902870740992[0;39m ==> Parameters: 
2023-01-26 17:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273950902870740992[0;39m <==    Updates: 1
2023-01-26 17:03:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273950902870740992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273951028712443904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951028712443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951028712443904[0;39m ==> Parameters: 
2023-01-26 17:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951028712443904[0;39m <==    Updates: 1
2023-01-26 17:03:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273951028712443904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:04:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273951133591015424[0;39m 生成今日电子书快照开始
2023-01-26 17:04:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951133591015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:04:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951133591015424[0;39m ==> Parameters: 
2023-01-26 17:04:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951133591015424[0;39m <==    Updates: 0
2023-01-26 17:04:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273951133591015424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:04:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273951154537369600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:04:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951154537369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:04:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951154537369600[0;39m ==> Parameters: 
2023-01-26 17:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951154537369600[0;39m <==    Updates: 1
2023-01-26 17:04:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273951154537369600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:04:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273951280349712384[0;39m 更新电子书下的文档数据开始
2023-01-26 17:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951280349712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951280349712384[0;39m ==> Parameters: 
2023-01-26 17:04:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951280349712384[0;39m <==    Updates: 1
2023-01-26 17:04:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273951280349712384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273951385203118080[0;39m 生成今日电子书快照开始
2023-01-26 17:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951385203118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951385203118080[0;39m ==> Parameters: 
2023-01-26 17:05:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951385203118080[0;39m <==    Updates: 0
2023-01-26 17:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273951385203118080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:05:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273951406216581120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951406216581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951406216581120[0;39m ==> Parameters: 
2023-01-26 17:05:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951406216581120[0;39m <==    Updates: 1
2023-01-26 17:05:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273951406216581120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:05:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273951532020535296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951532020535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:05:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951532020535296[0;39m ==> Parameters: 
2023-01-26 17:05:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951532020535296[0;39m <==    Updates: 1
2023-01-26 17:05:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273951532020535296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273951636869746688[0;39m 生成今日电子书快照开始
2023-01-26 17:06:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951636869746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951636869746688[0;39m ==> Parameters: 
2023-01-26 17:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951636869746688[0;39m <==    Updates: 0
2023-01-26 17:06:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273951636869746688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:06:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273951657828683776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:06:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951657828683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:06:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951657828683776[0;39m ==> Parameters: 
2023-01-26 17:06:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951657828683776[0;39m <==    Updates: 1
2023-01-26 17:06:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273951657828683776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:06:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273951783695552512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951783695552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:06:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951783695552512[0;39m ==> Parameters: 
2023-01-26 17:06:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951783695552512[0;39m <==    Updates: 1
2023-01-26 17:06:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273951783695552512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:07:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273951888561541120[0;39m 生成今日电子书快照开始
2023-01-26 17:07:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951888561541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:07:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951888561541120[0;39m ==> Parameters: 
2023-01-26 17:07:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273951888561541120[0;39m <==    Updates: 0
2023-01-26 17:07:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273951888561541120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:07:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273951909516283904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:07:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951909516283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:07:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951909516283904[0;39m ==> Parameters: 
2023-01-26 17:07:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273951909516283904[0;39m <==    Updates: 1
2023-01-26 17:07:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273951909516283904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:07:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273952035311849472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:07:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952035311849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:07:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952035311849472[0;39m ==> Parameters: 
2023-01-26 17:07:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952035311849472[0;39m <==    Updates: 1
2023-01-26 17:07:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273952035311849472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:08:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273952140186226688[0;39m 生成今日电子书快照开始
2023-01-26 17:08:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952140186226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952140186226688[0;39m ==> Parameters: 
2023-01-26 17:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952140186226688[0;39m <==    Updates: 0
2023-01-26 17:08:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273952140186226688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:08:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273952161203884032[0;39m 更新电子书下的文档数据开始
2023-01-26 17:08:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952161203884032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:08:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952161203884032[0;39m ==> Parameters: 
2023-01-26 17:08:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952161203884032[0;39m <==    Updates: 1
2023-01-26 17:08:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273952161203884032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:08:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273952286986866688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:08:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952286986866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:08:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952286986866688[0;39m ==> Parameters: 
2023-01-26 17:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952286986866688[0;39m <==    Updates: 1
2023-01-26 17:08:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273952286986866688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:09:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273952391861243904[0;39m 生成今日电子书快照开始
2023-01-26 17:09:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952391861243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952391861243904[0;39m ==> Parameters: 
2023-01-26 17:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952391861243904[0;39m <==    Updates: 0
2023-01-26 17:09:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273952391861243904[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:09:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273952412845346816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:09:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952412845346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:09:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952412845346816[0;39m ==> Parameters: 
2023-01-26 17:09:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952412845346816[0;39m <==    Updates: 1
2023-01-26 17:09:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273952412845346816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:09:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273952538624135168[0;39m 更新电子书下的文档数据开始
2023-01-26 17:09:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952538624135168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:09:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952538624135168[0;39m ==> Parameters: 
2023-01-26 17:09:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952538624135168[0;39m <==    Updates: 1
2023-01-26 17:09:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273952538624135168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:10:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273952643532066816[0;39m 生成今日电子书快照开始
2023-01-26 17:10:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952643532066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:10:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952643532066816[0;39m ==> Parameters: 
2023-01-26 17:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952643532066816[0;39m <==    Updates: 0
2023-01-26 17:10:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273952643532066816[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 17:10:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273952664457449472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:10:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952664457449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:10:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952664457449472[0;39m ==> Parameters: 
2023-01-26 17:10:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952664457449472[0;39m <==    Updates: 1
2023-01-26 17:10:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273952664457449472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:10:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273952790328512512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952790328512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952790328512512[0;39m ==> Parameters: 
2023-01-26 17:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952790328512512[0;39m <==    Updates: 1
2023-01-26 17:10:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273952790328512512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:11:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273952895186112512[0;39m 生成今日电子书快照开始
2023-01-26 17:11:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952895186112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:11:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952895186112512[0;39m ==> Parameters: 
2023-01-26 17:11:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273952895186112512[0;39m <==    Updates: 0
2023-01-26 17:11:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273952895186112512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:11:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273952916170215424[0;39m 更新电子书下的文档数据开始
2023-01-26 17:11:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952916170215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:11:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952916170215424[0;39m ==> Parameters: 
2023-01-26 17:11:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273952916170215424[0;39m <==    Updates: 1
2023-01-26 17:11:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273952916170215424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:11:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273953041953198080[0;39m 更新电子书下的文档数据开始
2023-01-26 17:11:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953041953198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:11:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953041953198080[0;39m ==> Parameters: 
2023-01-26 17:11:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953041953198080[0;39m <==    Updates: 1
2023-01-26 17:11:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273953041953198080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:12:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273953146848546816[0;39m 生成今日电子书快照开始
2023-01-26 17:12:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953146848546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:12:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953146848546816[0;39m ==> Parameters: 
2023-01-26 17:12:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953146848546816[0;39m <==    Updates: 0
2023-01-26 17:12:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273953146848546816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:12:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273953167824261120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:12:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953167824261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:12:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953167824261120[0;39m ==> Parameters: 
2023-01-26 17:12:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953167824261120[0;39m <==    Updates: 1
2023-01-26 17:12:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273953167824261120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:12:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273953293632409600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:12:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953293632409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:12:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953293632409600[0;39m ==> Parameters: 
2023-01-26 17:12:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953293632409600[0;39m <==    Updates: 1
2023-01-26 17:12:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273953293632409600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:13:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273953398481620992[0;39m 生成今日电子书快照开始
2023-01-26 17:13:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953398481620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:13:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953398481620992[0;39m ==> Parameters: 
2023-01-26 17:13:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953398481620992[0;39m <==    Updates: 0
2023-01-26 17:13:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273953398481620992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:13:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273953419465723904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:13:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953419465723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:13:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953419465723904[0;39m ==> Parameters: 
2023-01-26 17:13:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953419465723904[0;39m <==    Updates: 1
2023-01-26 17:13:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273953419465723904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:13:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273953545265483776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:13:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953545265483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:13:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953545265483776[0;39m ==> Parameters: 
2023-01-26 17:13:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953545265483776[0;39m <==    Updates: 1
2023-01-26 17:13:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273953545265483776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:14:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273953650160832512[0;39m 生成今日电子书快照开始
2023-01-26 17:14:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953650160832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:14:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953650160832512[0;39m ==> Parameters: 
2023-01-26 17:14:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953650160832512[0;39m <==    Updates: 0
2023-01-26 17:14:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273953650160832512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:14:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273953671153324032[0;39m 更新电子书下的文档数据开始
2023-01-26 17:14:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953671153324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:14:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953671153324032[0;39m ==> Parameters: 
2023-01-26 17:14:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953671153324032[0;39m <==    Updates: 1
2023-01-26 17:14:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273953671153324032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:14:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273953796936306688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:14:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953796936306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:14:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953796936306688[0;39m ==> Parameters: 
2023-01-26 17:14:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953796936306688[0;39m <==    Updates: 1
2023-01-26 17:14:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273953796936306688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:15:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273953901789712384[0;39m 生成今日电子书快照开始
2023-01-26 17:15:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953901789712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:15:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953901789712384[0;39m ==> Parameters: 
2023-01-26 17:15:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273953901789712384[0;39m <==    Updates: 0
2023-01-26 17:15:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273953901789712384[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 17:15:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273953922778009600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:15:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953922778009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:15:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953922778009600[0;39m ==> Parameters: 
2023-01-26 17:15:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273953922778009600[0;39m <==    Updates: 1
2023-01-26 17:15:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273953922778009600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:15:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273954048602935296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:15:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954048602935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954048602935296[0;39m ==> Parameters: 
2023-01-26 17:15:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954048602935296[0;39m <==    Updates: 1
2023-01-26 17:15:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273954048602935296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:16:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273954153460535296[0;39m 生成今日电子书快照开始
2023-01-26 17:16:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954153460535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:16:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954153460535296[0;39m ==> Parameters: 
2023-01-26 17:16:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954153460535296[0;39m <==    Updates: 0
2023-01-26 17:16:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273954153460535296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:16:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273954174461415424[0;39m 更新电子书下的文档数据开始
2023-01-26 17:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954174461415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954174461415424[0;39m ==> Parameters: 
2023-01-26 17:16:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954174461415424[0;39m <==    Updates: 1
2023-01-26 17:16:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273954174461415424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:16:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273954300286341120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:16:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954300286341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:16:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954300286341120[0;39m ==> Parameters: 
2023-01-26 17:16:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954300286341120[0;39m <==    Updates: 1
2023-01-26 17:16:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273954300286341120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:17:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273954405156524032[0;39m 生成今日电子书快照开始
2023-01-26 17:17:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954405156524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:17:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954405156524032[0;39m ==> Parameters: 
2023-01-26 17:17:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954405156524032[0;39m <==    Updates: 0
2023-01-26 17:17:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273954405156524032[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:17:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273954426111266816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:17:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954426111266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:17:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954426111266816[0;39m ==> Parameters: 
2023-01-26 17:17:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954426111266816[0;39m <==    Updates: 1
2023-01-26 17:17:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273954426111266816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:17:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273954551940386816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:17:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954551940386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:17:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954551940386816[0;39m ==> Parameters: 
2023-01-26 17:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954551940386816[0;39m <==    Updates: 1
2023-01-26 17:17:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273954551940386816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:18:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273954656785403904[0;39m 生成今日电子书快照开始
2023-01-26 17:18:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954656785403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:18:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954656785403904[0;39m ==> Parameters: 
2023-01-26 17:18:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954656785403904[0;39m <==    Updates: 0
2023-01-26 17:18:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273954656785403904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:18:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273954677765312512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:18:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954677765312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:18:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954677765312512[0;39m ==> Parameters: 
2023-01-26 17:18:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954677765312512[0;39m <==    Updates: 1
2023-01-26 17:18:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273954677765312512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:18:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273954803590238208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:18:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954803590238208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:18:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954803590238208[0;39m ==> Parameters: 
2023-01-26 17:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954803590238208[0;39m <==    Updates: 1
2023-01-26 17:18:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273954803590238208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:19:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273954908431060992[0;39m 生成今日电子书快照开始
2023-01-26 17:19:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954908431060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:19:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954908431060992[0;39m ==> Parameters: 
2023-01-26 17:19:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273954908431060992[0;39m <==    Updates: 0
2023-01-26 17:19:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273954908431060992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:19:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273954929423552512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954929423552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954929423552512[0;39m ==> Parameters: 
2023-01-26 17:19:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273954929423552512[0;39m <==    Updates: 1
2023-01-26 17:19:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273954929423552512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:19:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273955055214923776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:19:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955055214923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:19:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955055214923776[0;39m ==> Parameters: 
2023-01-26 17:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955055214923776[0;39m <==    Updates: 1
2023-01-26 17:19:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273955055214923776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:20:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273955160089300992[0;39m 生成今日电子书快照开始
2023-01-26 17:20:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955160089300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:20:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955160089300992[0;39m ==> Parameters: 
2023-01-26 17:20:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955160089300992[0;39m <==    Updates: 0
2023-01-26 17:20:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273955160089300992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:20:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273955181085986816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:20:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955181085986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:20:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955181085986816[0;39m ==> Parameters: 
2023-01-26 17:20:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955181085986816[0;39m <==    Updates: 1
2023-01-26 17:20:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273955181085986816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:20:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273955306877358080[0;39m 更新电子书下的文档数据开始
2023-01-26 17:20:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955306877358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:20:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955306877358080[0;39m ==> Parameters: 
2023-01-26 17:20:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955306877358080[0;39m <==    Updates: 1
2023-01-26 17:20:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273955306877358080[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 17:21:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273955411760123904[0;39m 生成今日电子书快照开始
2023-01-26 17:21:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955411760123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:21:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955411760123904[0;39m ==> Parameters: 
2023-01-26 17:21:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955411760123904[0;39m <==    Updates: 0
2023-01-26 17:21:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273955411760123904[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-26 17:21:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273955432698089472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:21:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955432698089472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:21:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955432698089472[0;39m ==> Parameters: 
2023-01-26 17:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955432698089472[0;39m <==    Updates: 1
2023-01-26 17:21:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273955432698089472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:21:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273955558531403776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:21:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955558531403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:21:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955558531403776[0;39m ==> Parameters: 
2023-01-26 17:21:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955558531403776[0;39m <==    Updates: 1
2023-01-26 17:21:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273955558531403776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:22:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273955663443529728[0;39m 生成今日电子书快照开始
2023-01-26 17:22:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955663443529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:22:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955663443529728[0;39m ==> Parameters: 
2023-01-26 17:22:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955663443529728[0;39m <==    Updates: 0
2023-01-26 17:22:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273955663443529728[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:22:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273955684389883904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:22:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955684389883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:22:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955684389883904[0;39m ==> Parameters: 
2023-01-26 17:22:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955684389883904[0;39m <==    Updates: 1
2023-01-26 17:22:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273955684389883904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:22:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273955810219003904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:22:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955810219003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:22:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955810219003904[0;39m ==> Parameters: 
2023-01-26 17:22:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955810219003904[0;39m <==    Updates: 1
2023-01-26 17:22:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273955810219003904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:23:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273955915101769728[0;39m 生成今日电子书快照开始
2023-01-26 17:23:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955915101769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:23:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955915101769728[0;39m ==> Parameters: 
2023-01-26 17:23:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273955915101769728[0;39m <==    Updates: 0
2023-01-26 17:23:00.031 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273955915101769728[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 17:23:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273955936064901120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:23:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955936064901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:23:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955936064901120[0;39m ==> Parameters: 
2023-01-26 17:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273955936064901120[0;39m <==    Updates: 1
2023-01-26 17:23:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273955936064901120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:23:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273956061906604032[0;39m 更新电子书下的文档数据开始
2023-01-26 17:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956061906604032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956061906604032[0;39m ==> Parameters: 
2023-01-26 17:23:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956061906604032[0;39m <==    Updates: 1
2023-01-26 17:23:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273956061906604032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:24:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273956166730649600[0;39m 生成今日电子书快照开始
2023-01-26 17:24:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956166730649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:24:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956166730649600[0;39m ==> Parameters: 
2023-01-26 17:24:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956166730649600[0;39m <==    Updates: 0
2023-01-26 17:24:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273956166730649600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:24:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273956187677003776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:24:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956187677003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:24:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956187677003776[0;39m ==> Parameters: 
2023-01-26 17:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956187677003776[0;39m <==    Updates: 1
2023-01-26 17:24:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273956187677003776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:24:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273956313556455424[0;39m 更新电子书下的文档数据开始
2023-01-26 17:24:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956313556455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:24:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956313556455424[0;39m ==> Parameters: 
2023-01-26 17:24:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956313556455424[0;39m <==    Updates: 1
2023-01-26 17:24:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273956313556455424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:25:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273956418367918080[0;39m 生成今日电子书快照开始
2023-01-26 17:25:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956418367918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:25:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956418367918080[0;39m ==> Parameters: 
2023-01-26 17:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956418367918080[0;39m <==    Updates: 0
2023-01-26 17:25:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273956418367918080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:25:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273956439368798208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:25:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956439368798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:25:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956439368798208[0;39m ==> Parameters: 
2023-01-26 17:25:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956439368798208[0;39m <==    Updates: 1
2023-01-26 17:25:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273956439368798208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:25:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273956565189529600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956565189529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956565189529600[0;39m ==> Parameters: 
2023-01-26 17:25:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956565189529600[0;39m <==    Updates: 1
2023-01-26 17:25:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273956565189529600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:26:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273956670076489728[0;39m 生成今日电子书快照开始
2023-01-26 17:26:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956670076489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:26:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956670076489728[0;39m ==> Parameters: 
2023-01-26 17:26:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956670076489728[0;39m <==    Updates: 0
2023-01-26 17:26:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273956670076489728[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 17:26:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273956691039621120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:26:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956691039621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:26:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956691039621120[0;39m ==> Parameters: 
2023-01-26 17:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956691039621120[0;39m <==    Updates: 1
2023-01-26 17:26:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273956691039621120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:26:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273956816847769600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:26:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956816847769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:26:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956816847769600[0;39m ==> Parameters: 
2023-01-26 17:26:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956816847769600[0;39m <==    Updates: 1
2023-01-26 17:26:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273956816847769600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:27:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273956921692786688[0;39m 生成今日电子书快照开始
2023-01-26 17:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956921692786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956921692786688[0;39m ==> Parameters: 
2023-01-26 17:27:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273956921692786688[0;39m <==    Updates: 0
2023-01-26 17:27:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273956921692786688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:27:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273956942681083904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:27:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956942681083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:27:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956942681083904[0;39m ==> Parameters: 
2023-01-26 17:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273956942681083904[0;39m <==    Updates: 1
2023-01-26 17:27:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273956942681083904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:27:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273957068506009600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:27:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957068506009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:27:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957068506009600[0;39m ==> Parameters: 
2023-01-26 17:27:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957068506009600[0;39m <==    Updates: 1
2023-01-26 17:27:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273957068506009600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:28:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273957173355220992[0;39m 生成今日电子书快照开始
2023-01-26 17:28:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957173355220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:28:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957173355220992[0;39m ==> Parameters: 
2023-01-26 17:28:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957173355220992[0;39m <==    Updates: 0
2023-01-26 17:28:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273957173355220992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:28:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273957194351906816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957194351906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957194351906816[0;39m ==> Parameters: 
2023-01-26 17:28:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957194351906816[0;39m <==    Updates: 1
2023-01-26 17:28:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273957194351906816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:28:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273957320193609728[0;39m 更新电子书下的文档数据开始
2023-01-26 17:28:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957320193609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:28:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957320193609728[0;39m ==> Parameters: 
2023-01-26 17:28:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957320193609728[0;39m <==    Updates: 1
2023-01-26 17:28:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273957320193609728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:29:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273957425042821120[0;39m 生成今日电子书快照开始
2023-01-26 17:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957425042821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:29:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957425042821120[0;39m ==> Parameters: 
2023-01-26 17:29:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957425042821120[0;39m <==    Updates: 0
2023-01-26 17:29:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273957425042821120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:29:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273957445993369600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:29:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957445993369600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:29:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957445993369600[0;39m ==> Parameters: 
2023-01-26 17:29:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957445993369600[0;39m <==    Updates: 1
2023-01-26 17:29:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273957445993369600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:29:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273957571851849728[0;39m 更新电子书下的文档数据开始
2023-01-26 17:29:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957571851849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:29:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957571851849728[0;39m ==> Parameters: 
2023-01-26 17:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957571851849728[0;39m <==    Updates: 1
2023-01-26 17:29:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273957571851849728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:30:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273957676667506688[0;39m 生成今日电子书快照开始
2023-01-26 17:30:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957676667506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957676667506688[0;39m ==> Parameters: 
2023-01-26 17:30:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957676667506688[0;39m <==    Updates: 0
2023-01-26 17:30:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273957676667506688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:30:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273957697626443776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:30:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957697626443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:30:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957697626443776[0;39m ==> Parameters: 
2023-01-26 17:30:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957697626443776[0;39m <==    Updates: 1
2023-01-26 17:30:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273957697626443776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:30:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273957823489118208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:30:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957823489118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:30:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957823489118208[0;39m ==> Parameters: 
2023-01-26 17:30:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957823489118208[0;39m <==    Updates: 1
2023-01-26 17:30:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273957823489118208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:31:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273957928334135296[0;39m 生成今日电子书快照开始
2023-01-26 17:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957928334135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957928334135296[0;39m ==> Parameters: 
2023-01-26 17:31:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273957928334135296[0;39m <==    Updates: 0
2023-01-26 17:31:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273957928334135296[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:31:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273957949330821120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:31:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957949330821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:31:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957949330821120[0;39m ==> Parameters: 
2023-01-26 17:31:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273957949330821120[0;39m <==    Updates: 1
2023-01-26 17:31:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273957949330821120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:31:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273958075126386688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958075126386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958075126386688[0;39m ==> Parameters: 
2023-01-26 17:31:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958075126386688[0;39m <==    Updates: 1
2023-01-26 17:31:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273958075126386688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:32:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273958179971403776[0;39m 生成今日电子书快照开始
2023-01-26 17:32:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958179971403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:32:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958179971403776[0;39m ==> Parameters: 
2023-01-26 17:32:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958179971403776[0;39m <==    Updates: 0
2023-01-26 17:32:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273958179971403776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:32:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273958200934535168[0;39m 更新电子书下的文档数据开始
2023-01-26 17:32:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958200934535168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:32:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958200934535168[0;39m ==> Parameters: 
2023-01-26 17:32:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958200934535168[0;39m <==    Updates: 1
2023-01-26 17:32:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273958200934535168[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:32:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273958326805598208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:32:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958326805598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:32:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958326805598208[0;39m ==> Parameters: 
2023-01-26 17:32:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958326805598208[0;39m <==    Updates: 1
2023-01-26 17:32:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273958326805598208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:33:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273958431663198208[0;39m 生成今日电子书快照开始
2023-01-26 17:33:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958431663198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:33:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958431663198208[0;39m ==> Parameters: 
2023-01-26 17:33:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958431663198208[0;39m <==    Updates: 0
2023-01-26 17:33:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273958431663198208[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 17:33:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273958452596969472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:33:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958452596969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:33:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958452596969472[0;39m ==> Parameters: 
2023-01-26 17:33:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958452596969472[0;39m <==    Updates: 1
2023-01-26 17:33:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273958452596969472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:33:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273958578455449600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958578455449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958578455449600[0;39m ==> Parameters: 
2023-01-26 17:33:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958578455449600[0;39m <==    Updates: 1
2023-01-26 17:33:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273958578455449600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:34:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273958683304660992[0;39m 生成今日电子书快照开始
2023-01-26 17:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958683304660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:34:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958683304660992[0;39m ==> Parameters: 
2023-01-26 17:34:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958683304660992[0;39m <==    Updates: 0
2023-01-26 17:34:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273958683304660992[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:34:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273958704259403776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:34:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958704259403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:34:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958704259403776[0;39m ==> Parameters: 
2023-01-26 17:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958704259403776[0;39m <==    Updates: 1
2023-01-26 17:34:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273958704259403776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:34:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273958830105300992[0;39m 更新电子书下的文档数据开始
2023-01-26 17:34:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958830105300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:34:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958830105300992[0;39m ==> Parameters: 
2023-01-26 17:34:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958830105300992[0;39m <==    Updates: 1
2023-01-26 17:34:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273958830105300992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:35:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273958934946123776[0;39m 生成今日电子书快照开始
2023-01-26 17:35:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958934946123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:35:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958934946123776[0;39m ==> Parameters: 
2023-01-26 17:35:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273958934946123776[0;39m <==    Updates: 0
2023-01-26 17:35:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273958934946123776[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 17:35:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273958955963781120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958955963781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958955963781120[0;39m ==> Parameters: 
2023-01-26 17:35:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273958955963781120[0;39m <==    Updates: 1
2023-01-26 17:35:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273958955963781120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:35:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273959081742569472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:35:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959081742569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:35:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959081742569472[0;39m ==> Parameters: 
2023-01-26 17:35:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959081742569472[0;39m <==    Updates: 1
2023-01-26 17:35:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273959081742569472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:36:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273959186650501120[0;39m 生成今日电子书快照开始
2023-01-26 17:36:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959186650501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:36:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959186650501120[0;39m ==> Parameters: 
2023-01-26 17:36:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959186650501120[0;39m <==    Updates: 0
2023-01-26 17:36:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273959186650501120[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:36:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273959207622021120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:36:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959207622021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:36:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959207622021120[0;39m ==> Parameters: 
2023-01-26 17:36:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959207622021120[0;39m <==    Updates: 1
2023-01-26 17:36:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273959207622021120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:36:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273959333434363904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959333434363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959333434363904[0;39m ==> Parameters: 
2023-01-26 17:36:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959333434363904[0;39m <==    Updates: 1
2023-01-26 17:36:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273959333434363904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:37:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273959438312935424[0;39m 生成今日电子书快照开始
2023-01-26 17:37:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959438312935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:37:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959438312935424[0;39m ==> Parameters: 
2023-01-26 17:37:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959438312935424[0;39m <==    Updates: 0
2023-01-26 17:37:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273959438312935424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:37:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273959459242512384[0;39m 更新电子书下的文档数据开始
2023-01-26 17:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959459242512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959459242512384[0;39m ==> Parameters: 
2023-01-26 17:37:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959459242512384[0;39m <==    Updates: 1
2023-01-26 17:37:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273959459242512384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:37:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273959585075826688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:37:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959585075826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:37:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959585075826688[0;39m ==> Parameters: 
2023-01-26 17:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959585075826688[0;39m <==    Updates: 1
2023-01-26 17:37:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273959585075826688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:38:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273959689971175424[0;39m 生成今日电子书快照开始
2023-01-26 17:38:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959689971175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:38:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959689971175424[0;39m ==> Parameters: 
2023-01-26 17:38:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959689971175424[0;39m <==    Updates: 0
2023-01-26 17:38:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273959689971175424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:38:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273959710942695424[0;39m 更新电子书下的文档数据开始
2023-01-26 17:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959710942695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959710942695424[0;39m ==> Parameters: 
2023-01-26 17:38:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959710942695424[0;39m <==    Updates: 1
2023-01-26 17:38:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273959710942695424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:38:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273959836734066688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959836734066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959836734066688[0;39m ==> Parameters: 
2023-01-26 17:38:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959836734066688[0;39m <==    Updates: 1
2023-01-26 17:38:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273959836734066688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:39:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273959941621026816[0;39m 生成今日电子书快照开始
2023-01-26 17:39:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959941621026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:39:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959941621026816[0;39m ==> Parameters: 
2023-01-26 17:39:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273959941621026816[0;39m <==    Updates: 0
2023-01-26 17:39:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273959941621026816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:39:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273959962567380992[0;39m 更新电子书下的文档数据开始
2023-01-26 17:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959962567380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959962567380992[0;39m ==> Parameters: 
2023-01-26 17:39:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273959962567380992[0;39m <==    Updates: 1
2023-01-26 17:39:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273959962567380992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:39:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273960088404889600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:39:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960088404889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:39:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960088404889600[0;39m ==> Parameters: 
2023-01-26 17:39:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960088404889600[0;39m <==    Updates: 1
2023-01-26 17:39:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273960088404889600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:40:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273960193287655424[0;39m 生成今日电子书快照开始
2023-01-26 17:40:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960193287655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:40:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960193287655424[0;39m ==> Parameters: 
2023-01-26 17:40:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960193287655424[0;39m <==    Updates: 0
2023-01-26 17:40:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273960193287655424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:40:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273960214250786816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:40:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960214250786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:40:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960214250786816[0;39m ==> Parameters: 
2023-01-26 17:40:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960214250786816[0;39m <==    Updates: 1
2023-01-26 17:40:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273960214250786816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:40:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273960340075712512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:40:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960340075712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:40:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960340075712512[0;39m ==> Parameters: 
2023-01-26 17:40:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960340075712512[0;39m <==    Updates: 1
2023-01-26 17:40:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273960340075712512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:41:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273960444899758080[0;39m 生成今日电子书快照开始
2023-01-26 17:41:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960444899758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:41:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960444899758080[0;39m ==> Parameters: 
2023-01-26 17:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960444899758080[0;39m <==    Updates: 0
2023-01-26 17:41:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273960444899758080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:41:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273960465888055296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960465888055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:41:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960465888055296[0;39m ==> Parameters: 
2023-01-26 17:41:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960465888055296[0;39m <==    Updates: 1
2023-01-26 17:41:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273960465888055296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:41:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273960591759118336[0;39m 更新电子书下的文档数据开始
2023-01-26 17:41:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960591759118336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:41:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960591759118336[0;39m ==> Parameters: 
2023-01-26 17:41:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960591759118336[0;39m <==    Updates: 1
2023-01-26 17:41:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273960591759118336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:42:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273960696604135424[0;39m 生成今日电子书快照开始
2023-01-26 17:42:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960696604135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:42:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960696604135424[0;39m ==> Parameters: 
2023-01-26 17:42:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960696604135424[0;39m <==    Updates: 0
2023-01-26 17:42:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273960696604135424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:42:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273960717525323776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:42:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960717525323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:42:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960717525323776[0;39m ==> Parameters: 
2023-01-26 17:42:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960717525323776[0;39m <==    Updates: 1
2023-01-26 17:42:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273960717525323776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:42:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273960843354443776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:42:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960843354443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:42:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960843354443776[0;39m ==> Parameters: 
2023-01-26 17:42:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960843354443776[0;39m <==    Updates: 1
2023-01-26 17:42:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273960843354443776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:43:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273960948216238080[0;39m 生成今日电子书快照开始
2023-01-26 17:43:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960948216238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:43:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960948216238080[0;39m ==> Parameters: 
2023-01-26 17:43:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273960948216238080[0;39m <==    Updates: 0
2023-01-26 17:43:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273960948216238080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 17:43:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273960969196146688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:43:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960969196146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:43:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960969196146688[0;39m ==> Parameters: 
2023-01-26 17:43:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273960969196146688[0;39m <==    Updates: 1
2023-01-26 17:43:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273960969196146688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:43:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273961095037849600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961095037849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:43:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961095037849600[0;39m ==> Parameters: 
2023-01-26 17:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961095037849600[0;39m <==    Updates: 1
2023-01-26 17:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273961095037849600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:44:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273961199870283776[0;39m 生成今日电子书快照开始
2023-01-26 17:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961199870283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961199870283776[0;39m ==> Parameters: 
2023-01-26 17:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961199870283776[0;39m <==    Updates: 0
2023-01-26 17:44:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273961199870283776[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 17:44:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273961220854386688[0;39m 更新电子书下的文档数据开始
2023-01-26 17:44:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961220854386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:44:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961220854386688[0;39m ==> Parameters: 
2023-01-26 17:44:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961220854386688[0;39m <==    Updates: 1
2023-01-26 17:44:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273961220854386688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:44:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273961346708672512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:44:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961346708672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:44:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961346708672512[0;39m ==> Parameters: 
2023-01-26 17:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961346708672512[0;39m <==    Updates: 1
2023-01-26 17:44:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273961346708672512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:45:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273961451545300992[0;39m 生成今日电子书快照开始
2023-01-26 17:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961451545300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961451545300992[0;39m ==> Parameters: 
2023-01-26 17:45:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961451545300992[0;39m <==    Updates: 0
2023-01-26 17:45:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273961451545300992[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 17:45:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273961472537792512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:45:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961472537792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:45:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961472537792512[0;39m ==> Parameters: 
2023-01-26 17:45:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961472537792512[0;39m <==    Updates: 1
2023-01-26 17:45:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273961472537792512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:45:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273961598320775168[0;39m 更新电子书下的文档数据开始
2023-01-26 17:45:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961598320775168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:45:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961598320775168[0;39m ==> Parameters: 
2023-01-26 17:45:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961598320775168[0;39m <==    Updates: 1
2023-01-26 17:45:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273961598320775168[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:46:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273961703207735296[0;39m 生成今日电子书快照开始
2023-01-26 17:46:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961703207735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961703207735296[0;39m ==> Parameters: 
2023-01-26 17:46:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961703207735296[0;39m <==    Updates: 0
2023-01-26 17:46:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273961703207735296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 17:46:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273961724212809728[0;39m 更新电子书下的文档数据开始
2023-01-26 17:46:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961724212809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:46:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961724212809728[0;39m ==> Parameters: 
2023-01-26 17:46:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961724212809728[0;39m <==    Updates: 1
2023-01-26 17:46:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273961724212809728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:46:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273961850025152512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:46:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961850025152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:46:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961850025152512[0;39m ==> Parameters: 
2023-01-26 17:46:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961850025152512[0;39m <==    Updates: 1
2023-01-26 17:46:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273961850025152512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:47:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273961954853392384[0;39m 生成今日电子书快照开始
2023-01-26 17:47:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961954853392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:47:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961954853392384[0;39m ==> Parameters: 
2023-01-26 17:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273961954853392384[0;39m <==    Updates: 0
2023-01-26 17:47:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273961954853392384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:47:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273961975845883904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:47:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961975845883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:47:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961975845883904[0;39m ==> Parameters: 
2023-01-26 17:47:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273961975845883904[0;39m <==    Updates: 1
2023-01-26 17:47:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273961975845883904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:47:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273962101700169728[0;39m 更新电子书下的文档数据开始
2023-01-26 17:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962101700169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:47:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962101700169728[0;39m ==> Parameters: 
2023-01-26 17:47:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962101700169728[0;39m <==    Updates: 1
2023-01-26 17:47:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273962101700169728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:48:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273962206503243776[0;39m 生成今日电子书快照开始
2023-01-26 17:48:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962206503243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:48:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962206503243776[0;39m ==> Parameters: 
2023-01-26 17:48:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962206503243776[0;39m <==    Updates: 0
2023-01-26 17:48:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273962206503243776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:48:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273962227504123904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962227504123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:48:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962227504123904[0;39m ==> Parameters: 
2023-01-26 17:48:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962227504123904[0;39m <==    Updates: 1
2023-01-26 17:48:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273962227504123904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:48:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273962353337438208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:48:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962353337438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:48:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962353337438208[0;39m ==> Parameters: 
2023-01-26 17:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962353337438208[0;39m <==    Updates: 1
2023-01-26 17:48:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273962353337438208[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 17:49:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273962458186649600[0;39m 生成今日电子书快照开始
2023-01-26 17:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962458186649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:49:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962458186649600[0;39m ==> Parameters: 
2023-01-26 17:49:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962458186649600[0;39m <==    Updates: 0
2023-01-26 17:49:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273962458186649600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:49:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273962479149780992[0;39m 更新电子书下的文档数据开始
2023-01-26 17:49:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962479149780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:49:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962479149780992[0;39m ==> Parameters: 
2023-01-26 17:49:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962479149780992[0;39m <==    Updates: 1
2023-01-26 17:49:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273962479149780992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:49:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273962604966318080[0;39m 更新电子书下的文档数据开始
2023-01-26 17:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962604966318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962604966318080[0;39m ==> Parameters: 
2023-01-26 17:49:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962604966318080[0;39m <==    Updates: 1
2023-01-26 17:49:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273962604966318080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:50:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273962709870055424[0;39m 生成今日电子书快照开始
2023-01-26 17:50:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962709870055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:50:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962709870055424[0;39m ==> Parameters: 
2023-01-26 17:50:00.033 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962709870055424[0;39m <==    Updates: 0
2023-01-26 17:50:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273962709870055424[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-26 17:50:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273962730833186816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962730833186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962730833186816[0;39m ==> Parameters: 
2023-01-26 17:50:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962730833186816[0;39m <==    Updates: 1
2023-01-26 17:50:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273962730833186816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:50:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273962856645529600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:50:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962856645529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:50:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962856645529600[0;39m ==> Parameters: 
2023-01-26 17:50:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962856645529600[0;39m <==    Updates: 1
2023-01-26 17:50:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273962856645529600[0;39m 更新电子书下的文档数据结束，耗时：14毫秒
2023-01-26 17:51:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273962961503129600[0;39m 生成今日电子书快照开始
2023-01-26 17:51:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962961503129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:51:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962961503129600[0;39m ==> Parameters: 
2023-01-26 17:51:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273962961503129600[0;39m <==    Updates: 0
2023-01-26 17:51:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273962961503129600[0;39m 生成今日电子书快照结束，耗时：27毫秒
2023-01-26 17:51:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273962982495621120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962982495621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:51:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962982495621120[0;39m ==> Parameters: 
2023-01-26 17:51:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273962982495621120[0;39m <==    Updates: 1
2023-01-26 17:51:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273962982495621120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:51:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273963108286992384[0;39m 更新电子书下的文档数据开始
2023-01-26 17:51:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963108286992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:51:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963108286992384[0;39m ==> Parameters: 
2023-01-26 17:51:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963108286992384[0;39m <==    Updates: 1
2023-01-26 17:51:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273963108286992384[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 17:52:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273963213157175296[0;39m 生成今日电子书快照开始
2023-01-26 17:52:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963213157175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:52:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963213157175296[0;39m ==> Parameters: 
2023-01-26 17:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963213157175296[0;39m <==    Updates: 0
2023-01-26 17:52:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273963213157175296[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:52:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273963234145472512[0;39m 更新电子书下的文档数据开始
2023-01-26 17:52:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963234145472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:52:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963234145472512[0;39m ==> Parameters: 
2023-01-26 17:52:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963234145472512[0;39m <==    Updates: 1
2023-01-26 17:52:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273963234145472512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 17:52:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273963359970398208[0;39m 更新电子书下的文档数据开始
2023-01-26 17:52:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963359970398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:52:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963359970398208[0;39m ==> Parameters: 
2023-01-26 17:52:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963359970398208[0;39m <==    Updates: 1
2023-01-26 17:52:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273963359970398208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:53:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273963464790249472[0;39m 生成今日电子书快照开始
2023-01-26 17:53:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963464790249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:53:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963464790249472[0;39m ==> Parameters: 
2023-01-26 17:53:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963464790249472[0;39m <==    Updates: 0
2023-01-26 17:53:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273963464790249472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:53:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273963485812101120[0;39m 更新电子书下的文档数据开始
2023-01-26 17:53:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963485812101120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:53:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963485812101120[0;39m ==> Parameters: 
2023-01-26 17:53:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963485812101120[0;39m <==    Updates: 1
2023-01-26 17:53:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273963485812101120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:53:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273963611620249600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:53:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963611620249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:53:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963611620249600[0;39m ==> Parameters: 
2023-01-26 17:53:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963611620249600[0;39m <==    Updates: 1
2023-01-26 17:53:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273963611620249600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273963716503015424[0;39m 生成今日电子书快照开始
2023-01-26 17:54:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963716503015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:54:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963716503015424[0;39m ==> Parameters: 
2023-01-26 17:54:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963716503015424[0;39m <==    Updates: 0
2023-01-26 17:54:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273963716503015424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:54:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273963737453563904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:54:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963737453563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:54:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963737453563904[0;39m ==> Parameters: 
2023-01-26 17:54:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963737453563904[0;39m <==    Updates: 1
2023-01-26 17:54:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273963737453563904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:54:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273963863274295296[0;39m 更新电子书下的文档数据开始
2023-01-26 17:54:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963863274295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:54:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963863274295296[0;39m ==> Parameters: 
2023-01-26 17:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963863274295296[0;39m <==    Updates: 1
2023-01-26 17:54:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273963863274295296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:55:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273963968136089600[0;39m 生成今日电子书快照开始
2023-01-26 17:55:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963968136089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:55:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963968136089600[0;39m ==> Parameters: 
2023-01-26 17:55:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273963968136089600[0;39m <==    Updates: 0
2023-01-26 17:55:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273963968136089600[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 17:55:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273963989082443776[0;39m 更新电子书下的文档数据开始
2023-01-26 17:55:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963989082443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:55:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963989082443776[0;39m ==> Parameters: 
2023-01-26 17:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273963989082443776[0;39m <==    Updates: 1
2023-01-26 17:55:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273963989082443776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:55:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273964114907369472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:55:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964114907369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:55:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964114907369472[0;39m ==> Parameters: 
2023-01-26 17:55:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964114907369472[0;39m <==    Updates: 1
2023-01-26 17:55:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273964114907369472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:56:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273964219781746688[0;39m 生成今日电子书快照开始
2023-01-26 17:56:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964219781746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:56:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964219781746688[0;39m ==> Parameters: 
2023-01-26 17:56:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964219781746688[0;39m <==    Updates: 0
2023-01-26 17:56:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273964219781746688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:56:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273964240765849600[0;39m 更新电子书下的文档数据开始
2023-01-26 17:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964240765849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:56:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964240765849600[0;39m ==> Parameters: 
2023-01-26 17:56:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964240765849600[0;39m <==    Updates: 1
2023-01-26 17:56:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273964240765849600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:56:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273964366565609472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:56:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964366565609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:56:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964366565609472[0;39m ==> Parameters: 
2023-01-26 17:56:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964366565609472[0;39m <==    Updates: 1
2023-01-26 17:56:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273964366565609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:57:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273964471444180992[0;39m 生成今日电子书快照开始
2023-01-26 17:57:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964471444180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:57:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964471444180992[0;39m ==> Parameters: 
2023-01-26 17:57:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964471444180992[0;39m <==    Updates: 0
2023-01-26 17:57:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273964471444180992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 17:57:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273964492428283904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:57:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964492428283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964492428283904[0;39m ==> Parameters: 
2023-01-26 17:57:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964492428283904[0;39m <==    Updates: 1
2023-01-26 17:57:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273964492428283904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 17:57:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273964618257403904[0;39m 更新电子书下的文档数据开始
2023-01-26 17:57:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964618257403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:57:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964618257403904[0;39m ==> Parameters: 
2023-01-26 17:57:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964618257403904[0;39m <==    Updates: 1
2023-01-26 17:57:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273964618257403904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 17:58:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273964723140169728[0;39m 生成今日电子书快照开始
2023-01-26 17:58:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964723140169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964723140169728[0;39m ==> Parameters: 
2023-01-26 17:58:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964723140169728[0;39m <==    Updates: 0
2023-01-26 17:58:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273964723140169728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 17:58:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273964744099106816[0;39m 更新电子书下的文档数据开始
2023-01-26 17:58:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964744099106816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:58:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964744099106816[0;39m ==> Parameters: 
2023-01-26 17:58:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964744099106816[0;39m <==    Updates: 1
2023-01-26 17:58:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273964744099106816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 17:58:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273964869949198336[0;39m 更新电子书下的文档数据开始
2023-01-26 17:58:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964869949198336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:58:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964869949198336[0;39m ==> Parameters: 
2023-01-26 17:58:35.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964869949198336[0;39m <==    Updates: 1
2023-01-26 17:58:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m273964869949198336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:59:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273964974781632512[0;39m 生成今日电子书快照开始
2023-01-26 17:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964974781632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 17:59:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964974781632512[0;39m ==> Parameters: 
2023-01-26 17:59:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273964974781632512[0;39m <==    Updates: 0
2023-01-26 17:59:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273964974781632512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 17:59:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273964995711209472[0;39m 更新电子书下的文档数据开始
2023-01-26 17:59:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964995711209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:59:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964995711209472[0;39m ==> Parameters: 
2023-01-26 17:59:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273964995711209472[0;39m <==    Updates: 1
2023-01-26 17:59:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273964995711209472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 17:59:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273965121561300992[0;39m 更新电子书下的文档数据开始
2023-01-26 17:59:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965121561300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 17:59:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965121561300992[0;39m ==> Parameters: 
2023-01-26 17:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965121561300992[0;39m <==    Updates: 1
2023-01-26 17:59:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273965121561300992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:00:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273965226439872512[0;39m 生成今日电子书快照开始
2023-01-26 18:00:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965226439872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:00:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965226439872512[0;39m ==> Parameters: 
2023-01-26 18:00:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965226439872512[0;39m <==    Updates: 0
2023-01-26 18:00:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273965226439872512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:00:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273965247373643776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:00:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965247373643776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:00:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965247373643776[0;39m ==> Parameters: 
2023-01-26 18:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965247373643776[0;39m <==    Updates: 1
2023-01-26 18:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273965247373643776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 18:00:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273965373202763776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:00:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965373202763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:00:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965373202763776[0;39m ==> Parameters: 
2023-01-26 18:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965373202763776[0;39m <==    Updates: 1
2023-01-26 18:00:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273965373202763776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:01:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273965478068752384[0;39m 生成今日电子书快照开始
2023-01-26 18:01:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965478068752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:01:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965478068752384[0;39m ==> Parameters: 
2023-01-26 18:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965478068752384[0;39m <==    Updates: 0
2023-01-26 18:01:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273965478068752384[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:01:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273965499086409728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965499086409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965499086409728[0;39m ==> Parameters: 
2023-01-26 18:01:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965499086409728[0;39m <==    Updates: 1
2023-01-26 18:01:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273965499086409728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:01:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273965624856809472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965624856809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:01:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965624856809472[0;39m ==> Parameters: 
2023-01-26 18:01:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965624856809472[0;39m <==    Updates: 1
2023-01-26 18:01:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273965624856809472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:02:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273965729726992384[0;39m 生成今日电子书快照开始
2023-01-26 18:02:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965729726992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:02:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965729726992384[0;39m ==> Parameters: 
2023-01-26 18:02:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965729726992384[0;39m <==    Updates: 0
2023-01-26 18:02:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273965729726992384[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:02:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273965750711095296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965750711095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965750711095296[0;39m ==> Parameters: 
2023-01-26 18:02:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965750711095296[0;39m <==    Updates: 1
2023-01-26 18:02:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273965750711095296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:02:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273965876556992512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:02:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965876556992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:02:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965876556992512[0;39m ==> Parameters: 
2023-01-26 18:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273965876556992512[0;39m <==    Updates: 1
2023-01-26 18:02:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273965876556992512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:03:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273965981372649472[0;39m 生成今日电子书快照开始
2023-01-26 18:03:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965981372649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:03:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965981372649472[0;39m ==> Parameters: 
2023-01-26 18:03:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273965981372649472[0;39m <==    Updates: 0
2023-01-26 18:03:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273965981372649472[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 18:03:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273966002365140992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966002365140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966002365140992[0;39m ==> Parameters: 
2023-01-26 18:03:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966002365140992[0;39m <==    Updates: 1
2023-01-26 18:03:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273966002365140992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273966128206843904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966128206843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966128206843904[0;39m ==> Parameters: 
2023-01-26 18:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966128206843904[0;39m <==    Updates: 1
2023-01-26 18:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273966128206843904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:04:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273966233064443904[0;39m 生成今日电子书快照开始
2023-01-26 18:04:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966233064443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:04:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966233064443904[0;39m ==> Parameters: 
2023-01-26 18:04:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966233064443904[0;39m <==    Updates: 0
2023-01-26 18:04:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273966233064443904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:04:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273966254031769600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:04:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966254031769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:04:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966254031769600[0;39m ==> Parameters: 
2023-01-26 18:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966254031769600[0;39m <==    Updates: 1
2023-01-26 18:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273966254031769600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:04:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273966379844112384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966379844112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966379844112384[0;39m ==> Parameters: 
2023-01-26 18:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966379844112384[0;39m <==    Updates: 1
2023-01-26 18:04:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273966379844112384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273966484714295296[0;39m 生成今日电子书快照开始
2023-01-26 18:05:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966484714295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:05:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966484714295296[0;39m ==> Parameters: 
2023-01-26 18:05:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966484714295296[0;39m <==    Updates: 0
2023-01-26 18:05:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273966484714295296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:05:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273966505673232384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:05:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966505673232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966505673232384[0;39m ==> Parameters: 
2023-01-26 18:05:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966505673232384[0;39m <==    Updates: 1
2023-01-26 18:05:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273966505673232384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:05:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273966631544295424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:05:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966631544295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:05:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966631544295424[0;39m ==> Parameters: 
2023-01-26 18:05:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966631544295424[0;39m <==    Updates: 1
2023-01-26 18:05:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273966631544295424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:06:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273966736347369472[0;39m 生成今日电子书快照开始
2023-01-26 18:06:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966736347369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:06:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966736347369472[0;39m ==> Parameters: 
2023-01-26 18:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966736347369472[0;39m <==    Updates: 0
2023-01-26 18:06:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273966736347369472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:06:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273966757348249600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:06:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966757348249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:06:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966757348249600[0;39m ==> Parameters: 
2023-01-26 18:06:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966757348249600[0;39m <==    Updates: 1
2023-01-26 18:06:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273966757348249600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:06:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273966883168980992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966883168980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:06:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966883168980992[0;39m ==> Parameters: 
2023-01-26 18:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273966883168980992[0;39m <==    Updates: 1
2023-01-26 18:06:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273966883168980992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:07:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273966988030775296[0;39m 生成今日电子书快照开始
2023-01-26 18:07:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966988030775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:07:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966988030775296[0;39m ==> Parameters: 
2023-01-26 18:07:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273966988030775296[0;39m <==    Updates: 0
2023-01-26 18:07:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273966988030775296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 18:07:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273967009006489600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967009006489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967009006489600[0;39m ==> Parameters: 
2023-01-26 18:07:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967009006489600[0;39m <==    Updates: 1
2023-01-26 18:07:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273967009006489600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:07:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273967134848192512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:07:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967134848192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967134848192512[0;39m ==> Parameters: 
2023-01-26 18:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967134848192512[0;39m <==    Updates: 1
2023-01-26 18:07:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273967134848192512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 18:08:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273967239676432384[0;39m 生成今日电子书快照开始
2023-01-26 18:08:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967239676432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:08:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967239676432384[0;39m ==> Parameters: 
2023-01-26 18:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967239676432384[0;39m <==    Updates: 0
2023-01-26 18:08:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273967239676432384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:08:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273967260694089728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:08:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967260694089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:08:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967260694089728[0;39m ==> Parameters: 
2023-01-26 18:08:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967260694089728[0;39m <==    Updates: 1
2023-01-26 18:08:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273967260694089728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:08:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273967386506432512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967386506432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967386506432512[0;39m ==> Parameters: 
2023-01-26 18:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967386506432512[0;39m <==    Updates: 1
2023-01-26 18:08:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273967386506432512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:09:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273967491355643904[0;39m 生成今日电子书快照开始
2023-01-26 18:09:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967491355643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:09:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967491355643904[0;39m ==> Parameters: 
2023-01-26 18:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967491355643904[0;39m <==    Updates: 0
2023-01-26 18:09:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273967491355643904[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:09:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273967512293609472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967512293609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967512293609472[0;39m ==> Parameters: 
2023-01-26 18:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967512293609472[0;39m <==    Updates: 1
2023-01-26 18:09:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273967512293609472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:09:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273967638177255424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:09:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967638177255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:09:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967638177255424[0;39m ==> Parameters: 
2023-01-26 18:09:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967638177255424[0;39m <==    Updates: 1
2023-01-26 18:09:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273967638177255424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:10:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273967743005495296[0;39m 生成今日电子书快照开始
2023-01-26 18:10:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967743005495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:10:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967743005495296[0;39m ==> Parameters: 
2023-01-26 18:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967743005495296[0;39m <==    Updates: 0
2023-01-26 18:10:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273967743005495296[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:10:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273967763993792512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:10:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967763993792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:10:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967763993792512[0;39m ==> Parameters: 
2023-01-26 18:10:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967763993792512[0;39m <==    Updates: 1
2023-01-26 18:10:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273967763993792512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:10:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273967889818718208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967889818718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967889818718208[0;39m ==> Parameters: 
2023-01-26 18:10:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273967889818718208[0;39m <==    Updates: 1
2023-01-26 18:10:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273967889818718208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:11:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273967994688901120[0;39m 生成今日电子书快照开始
2023-01-26 18:11:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967994688901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:11:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967994688901120[0;39m ==> Parameters: 
2023-01-26 18:11:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273967994688901120[0;39m <==    Updates: 0
2023-01-26 18:11:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273967994688901120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:11:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273968015673004032[0;39m 更新电子书下的文档数据开始
2023-01-26 18:11:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968015673004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:11:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968015673004032[0;39m ==> Parameters: 
2023-01-26 18:11:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968015673004032[0;39m <==    Updates: 1
2023-01-26 18:11:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273968015673004032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:11:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273968141439209472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:11:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968141439209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:11:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968141439209472[0;39m ==> Parameters: 
2023-01-26 18:11:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968141439209472[0;39m <==    Updates: 1
2023-01-26 18:11:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273968141439209472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:12:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273968246342946816[0;39m 生成今日电子书快照开始
2023-01-26 18:12:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968246342946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:12:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968246342946816[0;39m ==> Parameters: 
2023-01-26 18:12:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968246342946816[0;39m <==    Updates: 0
2023-01-26 18:12:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273968246342946816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:12:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273968267289300992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:12:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968267289300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:12:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968267289300992[0;39m ==> Parameters: 
2023-01-26 18:12:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968267289300992[0;39m <==    Updates: 1
2023-01-26 18:12:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273968267289300992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:12:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273968393122615296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:12:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968393122615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:12:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968393122615296[0;39m ==> Parameters: 
2023-01-26 18:12:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968393122615296[0;39m <==    Updates: 1
2023-01-26 18:12:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273968393122615296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:13:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273968497976020992[0;39m 生成今日电子书快照开始
2023-01-26 18:13:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968497976020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:13:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968497976020992[0;39m ==> Parameters: 
2023-01-26 18:13:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968497976020992[0;39m <==    Updates: 0
2023-01-26 18:13:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273968497976020992[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 18:13:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273968518981095424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:13:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968518981095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:13:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968518981095424[0;39m ==> Parameters: 
2023-01-26 18:13:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968518981095424[0;39m <==    Updates: 1
2023-01-26 18:13:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273968518981095424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:13:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273968644806021120[0;39m 更新电子书下的文档数据开始
2023-01-26 18:13:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968644806021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:13:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968644806021120[0;39m ==> Parameters: 
2023-01-26 18:13:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968644806021120[0;39m <==    Updates: 1
2023-01-26 18:13:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273968644806021120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:14:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273968749617483776[0;39m 生成今日电子书快照开始
2023-01-26 18:14:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968749617483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:14:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968749617483776[0;39m ==> Parameters: 
2023-01-26 18:14:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273968749617483776[0;39m <==    Updates: 0
2023-01-26 18:14:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273968749617483776[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:14:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273968770618363904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:14:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968770618363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968770618363904[0;39m ==> Parameters: 
2023-01-26 18:14:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968770618363904[0;39m <==    Updates: 1
2023-01-26 18:14:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273968770618363904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:14:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273968896451678208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968896451678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968896451678208[0;39m ==> Parameters: 
2023-01-26 18:14:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273968896451678208[0;39m <==    Updates: 1
2023-01-26 18:14:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273968896451678208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:15:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273969001275723776[0;39m 生成今日电子书快照开始
2023-01-26 18:15:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969001275723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:15:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969001275723776[0;39m ==> Parameters: 
2023-01-26 18:15:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969001275723776[0;39m <==    Updates: 0
2023-01-26 18:15:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273969001275723776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:15:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273969022264020992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969022264020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969022264020992[0;39m ==> Parameters: 
2023-01-26 18:15:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969022264020992[0;39m <==    Updates: 1
2023-01-26 18:15:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273969022264020992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:15:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273969148088946688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:15:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969148088946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:15:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969148088946688[0;39m ==> Parameters: 
2023-01-26 18:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969148088946688[0;39m <==    Updates: 1
2023-01-26 18:15:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273969148088946688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:16:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273969252925575168[0;39m 生成今日电子书快照开始
2023-01-26 18:16:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969252925575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:16:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969252925575168[0;39m ==> Parameters: 
2023-01-26 18:16:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969252925575168[0;39m <==    Updates: 0
2023-01-26 18:16:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273969252925575168[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:16:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273969273947426816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:16:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969273947426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:16:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969273947426816[0;39m ==> Parameters: 
2023-01-26 18:16:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969273947426816[0;39m <==    Updates: 1
2023-01-26 18:16:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273969273947426816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:16:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273969399738798080[0;39m 更新电子书下的文档数据开始
2023-01-26 18:16:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969399738798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:16:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969399738798080[0;39m ==> Parameters: 
2023-01-26 18:16:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969399738798080[0;39m <==    Updates: 1
2023-01-26 18:16:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273969399738798080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:17:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273969504617369600[0;39m 生成今日电子书快照开始
2023-01-26 18:17:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969504617369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:17:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969504617369600[0;39m ==> Parameters: 
2023-01-26 18:17:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969504617369600[0;39m <==    Updates: 0
2023-01-26 18:17:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273969504617369600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:17:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273969525563723776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:17:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969525563723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:17:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969525563723776[0;39m ==> Parameters: 
2023-01-26 18:17:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969525563723776[0;39m <==    Updates: 1
2023-01-26 18:17:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273969525563723776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:17:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273969651405426688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:17:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969651405426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:17:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969651405426688[0;39m ==> Parameters: 
2023-01-26 18:17:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969651405426688[0;39m <==    Updates: 1
2023-01-26 18:17:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273969651405426688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:18:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273969756250443776[0;39m 生成今日电子书快照开始
2023-01-26 18:18:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969756250443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:18:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969756250443776[0;39m ==> Parameters: 
2023-01-26 18:18:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273969756250443776[0;39m <==    Updates: 0
2023-01-26 18:18:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273969756250443776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:18:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273969777234546688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:18:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969777234546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:18:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969777234546688[0;39m ==> Parameters: 
2023-01-26 18:18:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969777234546688[0;39m <==    Updates: 1
2023-01-26 18:18:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273969777234546688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 18:18:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273969903063666688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:18:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969903063666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:18:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969903063666688[0;39m ==> Parameters: 
2023-01-26 18:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273969903063666688[0;39m <==    Updates: 1
2023-01-26 18:18:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273969903063666688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:19:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273970007904489472[0;39m 生成今日电子书快照开始
2023-01-26 18:19:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970007904489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:19:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970007904489472[0;39m ==> Parameters: 
2023-01-26 18:19:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970007904489472[0;39m <==    Updates: 0
2023-01-26 18:19:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273970007904489472[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:19:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273970028884398080[0;39m 更新电子书下的文档数据开始
2023-01-26 18:19:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970028884398080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:19:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970028884398080[0;39m ==> Parameters: 
2023-01-26 18:19:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970028884398080[0;39m <==    Updates: 1
2023-01-26 18:19:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273970028884398080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:19:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273970154709323776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:19:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970154709323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970154709323776[0;39m ==> Parameters: 
2023-01-26 18:19:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970154709323776[0;39m <==    Updates: 1
2023-01-26 18:19:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273970154709323776[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 18:20:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273970259613061120[0;39m 生成今日电子书快照开始
2023-01-26 18:20:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970259613061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:20:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970259613061120[0;39m ==> Parameters: 
2023-01-26 18:20:00.037 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970259613061120[0;39m <==    Updates: 0
2023-01-26 18:20:00.039 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273970259613061120[0;39m 生成今日电子书快照结束，耗时：25毫秒
2023-01-26 18:20:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273970280588775424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970280588775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970280588775424[0;39m ==> Parameters: 
2023-01-26 18:20:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970280588775424[0;39m <==    Updates: 1
2023-01-26 18:20:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273970280588775424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:20:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273970406367563776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:20:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970406367563776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:20:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970406367563776[0;39m ==> Parameters: 
2023-01-26 18:20:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970406367563776[0;39m <==    Updates: 1
2023-01-26 18:20:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273970406367563776[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-26 18:21:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273970511275495424[0;39m 生成今日电子书快照开始
2023-01-26 18:21:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970511275495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:21:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970511275495424[0;39m ==> Parameters: 
2023-01-26 18:21:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970511275495424[0;39m <==    Updates: 0
2023-01-26 18:21:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273970511275495424[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-26 18:21:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273970532238626816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:21:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970532238626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:21:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970532238626816[0;39m ==> Parameters: 
2023-01-26 18:21:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970532238626816[0;39m <==    Updates: 1
2023-01-26 18:21:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273970532238626816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:21:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273970658025803776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:21:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970658025803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:21:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970658025803776[0;39m ==> Parameters: 
2023-01-26 18:21:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970658025803776[0;39m <==    Updates: 1
2023-01-26 18:21:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273970658025803776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273970762925346816[0;39m 生成今日电子书快照开始
2023-01-26 18:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970762925346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:22:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970762925346816[0;39m ==> Parameters: 
2023-01-26 18:22:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273970762925346816[0;39m <==    Updates: 0
2023-01-26 18:22:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273970762925346816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 18:22:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273970783884283904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:22:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970783884283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:22:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970783884283904[0;39m ==> Parameters: 
2023-01-26 18:22:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970783884283904[0;39m <==    Updates: 1
2023-01-26 18:22:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273970783884283904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:22:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273970909709209600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:22:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970909709209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:22:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970909709209600[0;39m ==> Parameters: 
2023-01-26 18:22:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273970909709209600[0;39m <==    Updates: 1
2023-01-26 18:22:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273970909709209600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:23:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273971014575198208[0;39m 生成今日电子书快照开始
2023-01-26 18:23:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971014575198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:23:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971014575198208[0;39m ==> Parameters: 
2023-01-26 18:23:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971014575198208[0;39m <==    Updates: 0
2023-01-26 18:23:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273971014575198208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:23:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273971035563495424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:23:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971035563495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:23:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971035563495424[0;39m ==> Parameters: 
2023-01-26 18:23:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971035563495424[0;39m <==    Updates: 1
2023-01-26 18:23:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273971035563495424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:23:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273971161354866688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:23:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971161354866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:23:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971161354866688[0;39m ==> Parameters: 
2023-01-26 18:23:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971161354866688[0;39m <==    Updates: 1
2023-01-26 18:23:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273971161354866688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:24:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273971266212466688[0;39m 生成今日电子书快照开始
2023-01-26 18:24:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971266212466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:24:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971266212466688[0;39m ==> Parameters: 
2023-01-26 18:24:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971266212466688[0;39m <==    Updates: 0
2023-01-26 18:24:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273971266212466688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:24:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273971287179792384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:24:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971287179792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971287179792384[0;39m ==> Parameters: 
2023-01-26 18:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971287179792384[0;39m <==    Updates: 1
2023-01-26 18:24:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273971287179792384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:24:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273971413042466816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:24:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971413042466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:24:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971413042466816[0;39m ==> Parameters: 
2023-01-26 18:24:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971413042466816[0;39m <==    Updates: 1
2023-01-26 18:24:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273971413042466816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273971517879095296[0;39m 生成今日电子书快照开始
2023-01-26 18:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971517879095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:25:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971517879095296[0;39m ==> Parameters: 
2023-01-26 18:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971517879095296[0;39m <==    Updates: 0
2023-01-26 18:25:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273971517879095296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:25:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273971538850615296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:25:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971538850615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:25:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971538850615296[0;39m ==> Parameters: 
2023-01-26 18:25:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971538850615296[0;39m <==    Updates: 1
2023-01-26 18:25:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273971538850615296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:25:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273971664683929600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:25:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971664683929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:25:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971664683929600[0;39m ==> Parameters: 
2023-01-26 18:25:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971664683929600[0;39m <==    Updates: 1
2023-01-26 18:25:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273971664683929600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:26:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273971769570889728[0;39m 生成今日电子书快照开始
2023-01-26 18:26:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971769570889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:26:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971769570889728[0;39m ==> Parameters: 
2023-01-26 18:26:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273971769570889728[0;39m <==    Updates: 0
2023-01-26 18:26:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273971769570889728[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 18:26:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273971790508855296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:26:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971790508855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:26:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971790508855296[0;39m ==> Parameters: 
2023-01-26 18:26:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971790508855296[0;39m <==    Updates: 1
2023-01-26 18:26:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273971790508855296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:26:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273971916367335424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:26:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971916367335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:26:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971916367335424[0;39m ==> Parameters: 
2023-01-26 18:26:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273971916367335424[0;39m <==    Updates: 1
2023-01-26 18:26:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273971916367335424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:27:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273972021178798080[0;39m 生成今日电子书快照开始
2023-01-26 18:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972021178798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972021178798080[0;39m ==> Parameters: 
2023-01-26 18:27:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972021178798080[0;39m <==    Updates: 0
2023-01-26 18:27:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273972021178798080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:27:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273972042171289600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:27:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972042171289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:27:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972042171289600[0;39m ==> Parameters: 
2023-01-26 18:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972042171289600[0;39m <==    Updates: 1
2023-01-26 18:27:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273972042171289600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:27:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273972167983632384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:27:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972167983632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:27:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972167983632384[0;39m ==> Parameters: 
2023-01-26 18:27:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972167983632384[0;39m <==    Updates: 1
2023-01-26 18:27:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273972167983632384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:28:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273972272866398208[0;39m 生成今日电子书快照开始
2023-01-26 18:28:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972272866398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:28:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972272866398208[0;39m ==> Parameters: 
2023-01-26 18:28:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972272866398208[0;39m <==    Updates: 0
2023-01-26 18:28:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273972272866398208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:28:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273972293833723904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:28:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972293833723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972293833723904[0;39m ==> Parameters: 
2023-01-26 18:28:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972293833723904[0;39m <==    Updates: 1
2023-01-26 18:28:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273972293833723904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:28:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273972419683815424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:28:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972419683815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:28:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972419683815424[0;39m ==> Parameters: 
2023-01-26 18:28:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972419683815424[0;39m <==    Updates: 1
2023-01-26 18:28:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273972419683815424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:29:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273972524528832512[0;39m 生成今日电子书快照开始
2023-01-26 18:29:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972524528832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:29:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972524528832512[0;39m ==> Parameters: 
2023-01-26 18:29:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972524528832512[0;39m <==    Updates: 0
2023-01-26 18:29:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273972524528832512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:29:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273972545479380992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:29:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972545479380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:29:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972545479380992[0;39m ==> Parameters: 
2023-01-26 18:29:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972545479380992[0;39m <==    Updates: 1
2023-01-26 18:29:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273972545479380992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:29:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273972671346249728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:29:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972671346249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972671346249728[0;39m ==> Parameters: 
2023-01-26 18:29:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972671346249728[0;39m <==    Updates: 1
2023-01-26 18:29:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273972671346249728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:30:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273972776157712384[0;39m 生成今日电子书快照开始
2023-01-26 18:30:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972776157712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:30:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972776157712384[0;39m ==> Parameters: 
2023-01-26 18:30:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273972776157712384[0;39m <==    Updates: 0
2023-01-26 18:30:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273972776157712384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:30:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273972797129232384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972797129232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972797129232384[0;39m ==> Parameters: 
2023-01-26 18:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972797129232384[0;39m <==    Updates: 1
2023-01-26 18:30:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273972797129232384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:30:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273972922949963776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:30:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972922949963776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:30:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972922949963776[0;39m ==> Parameters: 
2023-01-26 18:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273972922949963776[0;39m <==    Updates: 1
2023-01-26 18:30:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273972922949963776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:31:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273973027807563776[0;39m 生成今日电子书快照开始
2023-01-26 18:31:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973027807563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:31:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973027807563776[0;39m ==> Parameters: 
2023-01-26 18:31:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973027807563776[0;39m <==    Updates: 0
2023-01-26 18:31:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273973027807563776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:31:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273973048812638208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:31:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973048812638208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973048812638208[0;39m ==> Parameters: 
2023-01-26 18:31:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973048812638208[0;39m <==    Updates: 1
2023-01-26 18:31:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273973048812638208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:31:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273973174654341120[0;39m 更新电子书下的文档数据开始
2023-01-26 18:31:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973174654341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:31:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973174654341120[0;39m ==> Parameters: 
2023-01-26 18:31:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973174654341120[0;39m <==    Updates: 1
2023-01-26 18:31:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273973174654341120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:32:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273973279511941120[0;39m 生成今日电子书快照开始
2023-01-26 18:32:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973279511941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973279511941120[0;39m ==> Parameters: 
2023-01-26 18:32:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973279511941120[0;39m <==    Updates: 0
2023-01-26 18:32:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273973279511941120[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:32:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273973300462489600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:32:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973300462489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:32:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973300462489600[0;39m ==> Parameters: 
2023-01-26 18:32:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973300462489600[0;39m <==    Updates: 1
2023-01-26 18:32:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273973300462489600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:32:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273973426283220992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:32:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973426283220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973426283220992[0;39m ==> Parameters: 
2023-01-26 18:32:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973426283220992[0;39m <==    Updates: 1
2023-01-26 18:32:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273973426283220992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:33:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273973531161792512[0;39m 生成今日电子书快照开始
2023-01-26 18:33:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973531161792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:33:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973531161792512[0;39m ==> Parameters: 
2023-01-26 18:33:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973531161792512[0;39m <==    Updates: 0
2023-01-26 18:33:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273973531161792512[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:33:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273973552150089728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:33:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973552150089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:33:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973552150089728[0;39m ==> Parameters: 
2023-01-26 18:33:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973552150089728[0;39m <==    Updates: 1
2023-01-26 18:33:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273973552150089728[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 18:33:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273973677937266688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973677937266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:33:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973677937266688[0;39m ==> Parameters: 
2023-01-26 18:33:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973677937266688[0;39m <==    Updates: 1
2023-01-26 18:33:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273973677937266688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:34:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273973782832615424[0;39m 生成今日电子书快照开始
2023-01-26 18:34:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973782832615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:34:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973782832615424[0;39m ==> Parameters: 
2023-01-26 18:34:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273973782832615424[0;39m <==    Updates: 0
2023-01-26 18:34:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273973782832615424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:34:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273973803783163904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:34:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973803783163904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:34:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973803783163904[0;39m ==> Parameters: 
2023-01-26 18:34:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973803783163904[0;39m <==    Updates: 1
2023-01-26 18:34:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273973803783163904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:34:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273973929637449728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:34:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973929637449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:34:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973929637449728[0;39m ==> Parameters: 
2023-01-26 18:34:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273973929637449728[0;39m <==    Updates: 1
2023-01-26 18:34:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273973929637449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:35:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273974034478272512[0;39m 生成今日电子书快照开始
2023-01-26 18:35:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974034478272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:35:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974034478272512[0;39m ==> Parameters: 
2023-01-26 18:35:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974034478272512[0;39m <==    Updates: 0
2023-01-26 18:35:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273974034478272512[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:35:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273974055424626688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:35:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974055424626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:35:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974055424626688[0;39m ==> Parameters: 
2023-01-26 18:35:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974055424626688[0;39m <==    Updates: 1
2023-01-26 18:35:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273974055424626688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:35:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273974181295689728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974181295689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:35:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974181295689728[0;39m ==> Parameters: 
2023-01-26 18:35:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974181295689728[0;39m <==    Updates: 1
2023-01-26 18:35:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273974181295689728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:36:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273974286115540992[0;39m 生成今日电子书快照开始
2023-01-26 18:36:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974286115540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974286115540992[0;39m ==> Parameters: 
2023-01-26 18:36:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974286115540992[0;39m <==    Updates: 0
2023-01-26 18:36:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273974286115540992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:36:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273974307095449600[0;39m 更新电子书下的文档数据开始
2023-01-26 18:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974307095449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974307095449600[0;39m ==> Parameters: 
2023-01-26 18:36:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974307095449600[0;39m <==    Updates: 1
2023-01-26 18:36:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273974307095449600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:36:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273974432895209472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:36:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974432895209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:36:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974432895209472[0;39m ==> Parameters: 
2023-01-26 18:36:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974432895209472[0;39m <==    Updates: 1
2023-01-26 18:36:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273974432895209472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:37:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273974537807335424[0;39m 生成今日电子书快照开始
2023-01-26 18:37:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974537807335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:37:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974537807335424[0;39m ==> Parameters: 
2023-01-26 18:37:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974537807335424[0;39m <==    Updates: 0
2023-01-26 18:37:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273974537807335424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:37:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273974558766272512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:37:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974558766272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:37:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974558766272512[0;39m ==> Parameters: 
2023-01-26 18:37:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974558766272512[0;39m <==    Updates: 1
2023-01-26 18:37:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273974558766272512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:37:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273974684574420992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:37:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974684574420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:37:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974684574420992[0;39m ==> Parameters: 
2023-01-26 18:37:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974684574420992[0;39m <==    Updates: 1
2023-01-26 18:37:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273974684574420992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:38:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273974789444603904[0;39m 生成今日电子书快照开始
2023-01-26 18:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974789444603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:38:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974789444603904[0;39m ==> Parameters: 
2023-01-26 18:38:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273974789444603904[0;39m <==    Updates: 0
2023-01-26 18:38:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273974789444603904[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:38:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273974810407735296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:38:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974810407735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:38:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974810407735296[0;39m ==> Parameters: 
2023-01-26 18:38:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974810407735296[0;39m <==    Updates: 1
2023-01-26 18:38:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273974810407735296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:38:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273974936232660992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974936232660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:38:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974936232660992[0;39m ==> Parameters: 
2023-01-26 18:38:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273974936232660992[0;39m <==    Updates: 1
2023-01-26 18:38:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273974936232660992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:39:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273975041077678080[0;39m 生成今日电子书快照开始
2023-01-26 18:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975041077678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:39:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975041077678080[0;39m ==> Parameters: 
2023-01-26 18:39:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975041077678080[0;39m <==    Updates: 0
2023-01-26 18:39:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273975041077678080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:39:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273975062082752512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:39:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975062082752512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:39:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975062082752512[0;39m ==> Parameters: 
2023-01-26 18:39:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975062082752512[0;39m <==    Updates: 1
2023-01-26 18:39:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273975062082752512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:39:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273975187916066816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:39:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975187916066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:39:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975187916066816[0;39m ==> Parameters: 
2023-01-26 18:39:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975187916066816[0;39m <==    Updates: 1
2023-01-26 18:39:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273975187916066816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:40:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273975292761083904[0;39m 生成今日电子书快照开始
2023-01-26 18:40:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975292761083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975292761083904[0;39m ==> Parameters: 
2023-01-26 18:40:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975292761083904[0;39m <==    Updates: 0
2023-01-26 18:40:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273975292761083904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:40:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273975313715826688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:40:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975313715826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:40:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975313715826688[0;39m ==> Parameters: 
2023-01-26 18:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975313715826688[0;39m <==    Updates: 1
2023-01-26 18:40:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273975313715826688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:40:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273975439544946688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:40:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975439544946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:40:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975439544946688[0;39m ==> Parameters: 
2023-01-26 18:40:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975439544946688[0;39m <==    Updates: 1
2023-01-26 18:40:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273975439544946688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:41:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273975544385769472[0;39m 生成今日电子书快照开始
2023-01-26 18:41:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975544385769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:41:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975544385769472[0;39m ==> Parameters: 
2023-01-26 18:41:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975544385769472[0;39m <==    Updates: 0
2023-01-26 18:41:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273975544385769472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:41:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273975565361483776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:41:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975565361483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:41:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975565361483776[0;39m ==> Parameters: 
2023-01-26 18:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975565361483776[0;39m <==    Updates: 1
2023-01-26 18:41:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273975565361483776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:41:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273975691203186688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:41:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975691203186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:41:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975691203186688[0;39m ==> Parameters: 
2023-01-26 18:41:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975691203186688[0;39m <==    Updates: 1
2023-01-26 18:41:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273975691203186688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:42:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273975796039815168[0;39m 生成今日电子书快照开始
2023-01-26 18:42:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975796039815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975796039815168[0;39m ==> Parameters: 
2023-01-26 18:42:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273975796039815168[0;39m <==    Updates: 0
2023-01-26 18:42:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273975796039815168[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:42:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273975817032306688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:42:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975817032306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:42:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975817032306688[0;39m ==> Parameters: 
2023-01-26 18:42:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975817032306688[0;39m <==    Updates: 1
2023-01-26 18:42:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273975817032306688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:42:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273975942886592512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975942886592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:42:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975942886592512[0;39m ==> Parameters: 
2023-01-26 18:42:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273975942886592512[0;39m <==    Updates: 1
2023-01-26 18:42:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273975942886592512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:43:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273976047748386816[0;39m 生成今日电子书快照开始
2023-01-26 18:43:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976047748386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:43:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976047748386816[0;39m ==> Parameters: 
2023-01-26 18:43:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976047748386816[0;39m <==    Updates: 0
2023-01-26 18:43:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273976047748386816[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:43:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273976068707323904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:43:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976068707323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:43:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976068707323904[0;39m ==> Parameters: 
2023-01-26 18:43:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976068707323904[0;39m <==    Updates: 1
2023-01-26 18:43:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273976068707323904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:43:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273976194519666688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:43:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976194519666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976194519666688[0;39m ==> Parameters: 
2023-01-26 18:43:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976194519666688[0;39m <==    Updates: 1
2023-01-26 18:43:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273976194519666688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:44:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273976299410821120[0;39m 生成今日电子书快照开始
2023-01-26 18:44:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976299410821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:44:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976299410821120[0;39m ==> Parameters: 
2023-01-26 18:44:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976299410821120[0;39m <==    Updates: 0
2023-01-26 18:44:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273976299410821120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 18:44:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273976320332009472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:44:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976320332009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:44:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976320332009472[0;39m ==> Parameters: 
2023-01-26 18:44:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976320332009472[0;39m <==    Updates: 1
2023-01-26 18:44:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273976320332009472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:44:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273976446182100992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:44:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976446182100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:44:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976446182100992[0;39m ==> Parameters: 
2023-01-26 18:44:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976446182100992[0;39m <==    Updates: 1
2023-01-26 18:44:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273976446182100992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:45:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273976551018729472[0;39m 生成今日电子书快照开始
2023-01-26 18:45:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976551018729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:45:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976551018729472[0;39m ==> Parameters: 
2023-01-26 18:45:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976551018729472[0;39m <==    Updates: 0
2023-01-26 18:45:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273976551018729472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:45:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273976572002832384[0;39m 更新电子书下的文档数据开始
2023-01-26 18:45:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976572002832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:45:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976572002832384[0;39m ==> Parameters: 
2023-01-26 18:45:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976572002832384[0;39m <==    Updates: 1
2023-01-26 18:45:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273976572002832384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:45:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273976697869701120[0;39m 更新电子书下的文档数据开始
2023-01-26 18:45:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976697869701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:45:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976697869701120[0;39m ==> Parameters: 
2023-01-26 18:45:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976697869701120[0;39m <==    Updates: 1
2023-01-26 18:45:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273976697869701120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:46:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273976802723106816[0;39m 生成今日电子书快照开始
2023-01-26 18:46:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976802723106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:46:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976802723106816[0;39m ==> Parameters: 
2023-01-26 18:46:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273976802723106816[0;39m <==    Updates: 0
2023-01-26 18:46:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273976802723106816[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:46:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273976823711404032[0;39m 更新电子书下的文档数据开始
2023-01-26 18:46:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976823711404032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:46:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976823711404032[0;39m ==> Parameters: 
2023-01-26 18:46:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976823711404032[0;39m <==    Updates: 1
2023-01-26 18:46:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m273976823711404032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:46:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273976949536329728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:46:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976949536329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:46:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976949536329728[0;39m ==> Parameters: 
2023-01-26 18:46:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273976949536329728[0;39m <==    Updates: 1
2023-01-26 18:46:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273976949536329728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:47:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273977054360375296[0;39m 生成今日电子书快照开始
2023-01-26 18:47:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977054360375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977054360375296[0;39m ==> Parameters: 
2023-01-26 18:47:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977054360375296[0;39m <==    Updates: 0
2023-01-26 18:47:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273977054360375296[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:47:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273977075306729472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:47:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977075306729472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:47:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977075306729472[0;39m ==> Parameters: 
2023-01-26 18:47:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977075306729472[0;39m <==    Updates: 1
2023-01-26 18:47:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273977075306729472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:47:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273977201177792512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:47:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977201177792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:47:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977201177792512[0;39m ==> Parameters: 
2023-01-26 18:47:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977201177792512[0;39m <==    Updates: 1
2023-01-26 18:47:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273977201177792512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:48:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273977306027003904[0;39m 生成今日电子书快照开始
2023-01-26 18:48:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977306027003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:48:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977306027003904[0;39m ==> Parameters: 
2023-01-26 18:48:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977306027003904[0;39m <==    Updates: 0
2023-01-26 18:48:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273977306027003904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:48:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273977327019495424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:48:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977327019495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:48:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977327019495424[0;39m ==> Parameters: 
2023-01-26 18:48:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977327019495424[0;39m <==    Updates: 1
2023-01-26 18:48:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273977327019495424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:48:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273977452848615424[0;39m 更新电子书下的文档数据开始
2023-01-26 18:48:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977452848615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:48:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977452848615424[0;39m ==> Parameters: 
2023-01-26 18:48:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977452848615424[0;39m <==    Updates: 1
2023-01-26 18:48:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273977452848615424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:49:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273977557672660992[0;39m 生成今日电子书快照开始
2023-01-26 18:49:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977557672660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977557672660992[0;39m ==> Parameters: 
2023-01-26 18:49:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977557672660992[0;39m <==    Updates: 0
2023-01-26 18:49:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273977557672660992[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-26 18:49:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273977578623209472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:49:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977578623209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:49:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977578623209472[0;39m ==> Parameters: 
2023-01-26 18:49:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977578623209472[0;39m <==    Updates: 1
2023-01-26 18:49:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273977578623209472[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 18:49:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273977704498466816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:49:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977704498466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:49:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977704498466816[0;39m ==> Parameters: 
2023-01-26 18:49:35.029 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977704498466816[0;39m <==    Updates: 1
2023-01-26 18:49:35.030 INFO  com.example.wiki.job.DocJob                       :35   [32m273977704498466816[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 18:50:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273977809326706688[0;39m 生成今日电子书快照开始
2023-01-26 18:50:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977809326706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:50:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977809326706688[0;39m ==> Parameters: 
2023-01-26 18:50:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273977809326706688[0;39m <==    Updates: 0
2023-01-26 18:50:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273977809326706688[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 18:50:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273977830281449472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:50:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977830281449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:50:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977830281449472[0;39m ==> Parameters: 
2023-01-26 18:50:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977830281449472[0;39m <==    Updates: 1
2023-01-26 18:50:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273977830281449472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:50:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273977956135735296[0;39m 更新电子书下的文档数据开始
2023-01-26 18:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977956135735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:50:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977956135735296[0;39m ==> Parameters: 
2023-01-26 18:50:35.028 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273977956135735296[0;39m <==    Updates: 1
2023-01-26 18:50:35.028 INFO  com.example.wiki.job.DocJob                       :35   [32m273977956135735296[0;39m 更新电子书下的文档数据结束，耗时：20毫秒
2023-01-26 18:51:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273978061031084032[0;39m 生成今日电子书快照开始
2023-01-26 18:51:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978061031084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:51:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978061031084032[0;39m ==> Parameters: 
2023-01-26 18:51:00.033 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978061031084032[0;39m <==    Updates: 0
2023-01-26 18:51:00.034 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273978061031084032[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 18:51:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273978081935495168[0;39m 更新电子书下的文档数据开始
2023-01-26 18:51:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978081935495168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:51:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978081935495168[0;39m ==> Parameters: 
2023-01-26 18:51:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978081935495168[0;39m <==    Updates: 1
2023-01-26 18:51:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273978081935495168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:51:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273978207773003776[0;39m 更新电子书下的文档数据开始
2023-01-26 18:51:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978207773003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:51:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978207773003776[0;39m ==> Parameters: 
2023-01-26 18:51:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978207773003776[0;39m <==    Updates: 1
2023-01-26 18:51:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273978207773003776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:52:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273978312630603776[0;39m 生成今日电子书快照开始
2023-01-26 18:52:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978312630603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:52:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978312630603776[0;39m ==> Parameters: 
2023-01-26 18:52:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978312630603776[0;39m <==    Updates: 0
2023-01-26 18:52:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273978312630603776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:52:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273978333597929472[0;39m 更新电子书下的文档数据开始
2023-01-26 18:52:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978333597929472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:52:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978333597929472[0;39m ==> Parameters: 
2023-01-26 18:52:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978333597929472[0;39m <==    Updates: 1
2023-01-26 18:52:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273978333597929472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:52:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273978459468992512[0;39m 更新电子书下的文档数据开始
2023-01-26 18:52:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978459468992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:52:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978459468992512[0;39m ==> Parameters: 
2023-01-26 18:52:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978459468992512[0;39m <==    Updates: 1
2023-01-26 18:52:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273978459468992512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:53:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273978564309815296[0;39m 生成今日电子书快照开始
2023-01-26 18:53:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978564309815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:53:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978564309815296[0;39m ==> Parameters: 
2023-01-26 18:53:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978564309815296[0;39m <==    Updates: 0
2023-01-26 18:53:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273978564309815296[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:53:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273978585272946688[0;39m 更新电子书下的文档数据开始
2023-01-26 18:53:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978585272946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:53:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978585272946688[0;39m ==> Parameters: 
2023-01-26 18:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978585272946688[0;39m <==    Updates: 1
2023-01-26 18:53:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273978585272946688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:53:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273978711144009728[0;39m 更新电子书下的文档数据开始
2023-01-26 18:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978711144009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978711144009728[0;39m ==> Parameters: 
2023-01-26 18:53:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978711144009728[0;39m <==    Updates: 1
2023-01-26 18:53:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273978711144009728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273978815997415424[0;39m 生成今日电子书快照开始
2023-01-26 18:54:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978815997415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:54:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978815997415424[0;39m ==> Parameters: 
2023-01-26 18:54:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273978815997415424[0;39m <==    Updates: 0
2023-01-26 18:54:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273978815997415424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 18:54:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273978836960546816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978836960546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:54:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978836960546816[0;39m ==> Parameters: 
2023-01-26 18:54:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978836960546816[0;39m <==    Updates: 1
2023-01-26 18:54:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273978836960546816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:54:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273978962739335168[0;39m 更新电子书下的文档数据开始
2023-01-26 18:54:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978962739335168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:54:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978962739335168[0;39m ==> Parameters: 
2023-01-26 18:54:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273978962739335168[0;39m <==    Updates: 1
2023-01-26 18:54:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273978962739335168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:55:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273979067659849728[0;39m 生成今日电子书快照开始
2023-01-26 18:55:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979067659849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:55:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979067659849728[0;39m ==> Parameters: 
2023-01-26 18:55:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979067659849728[0;39m <==    Updates: 0
2023-01-26 18:55:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273979067659849728[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:55:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273979088606203904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:55:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979088606203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:55:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979088606203904[0;39m ==> Parameters: 
2023-01-26 18:55:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979088606203904[0;39m <==    Updates: 1
2023-01-26 18:55:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273979088606203904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:55:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273979214439518208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:55:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979214439518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:55:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979214439518208[0;39m ==> Parameters: 
2023-01-26 18:55:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979214439518208[0;39m <==    Updates: 1
2023-01-26 18:55:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273979214439518208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 18:56:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273979319292923904[0;39m 生成今日电子书快照开始
2023-01-26 18:56:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979319292923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:56:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979319292923904[0;39m ==> Parameters: 
2023-01-26 18:56:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979319292923904[0;39m <==    Updates: 0
2023-01-26 18:56:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273979319292923904[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 18:56:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273979340251860992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:56:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979340251860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:56:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979340251860992[0;39m ==> Parameters: 
2023-01-26 18:56:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979340251860992[0;39m <==    Updates: 1
2023-01-26 18:56:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273979340251860992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:56:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273979466093563904[0;39m 更新电子书下的文档数据开始
2023-01-26 18:56:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979466093563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:56:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979466093563904[0;39m ==> Parameters: 
2023-01-26 18:56:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979466093563904[0;39m <==    Updates: 1
2023-01-26 18:56:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273979466093563904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:57:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273979570972135424[0;39m 生成今日电子书快照开始
2023-01-26 18:57:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979570972135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:57:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979570972135424[0;39m ==> Parameters: 
2023-01-26 18:57:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979570972135424[0;39m <==    Updates: 0
2023-01-26 18:57:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273979570972135424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:57:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273979591910100992[0;39m 更新电子书下的文档数据开始
2023-01-26 18:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979591910100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979591910100992[0;39m ==> Parameters: 
2023-01-26 18:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979591910100992[0;39m <==    Updates: 1
2023-01-26 18:57:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273979591910100992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:57:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273979717768581120[0;39m 更新电子书下的文档数据开始
2023-01-26 18:57:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979717768581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:57:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979717768581120[0;39m ==> Parameters: 
2023-01-26 18:57:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979717768581120[0;39m <==    Updates: 1
2023-01-26 18:57:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273979717768581120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:58:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273979822605209600[0;39m 生成今日电子书快照开始
2023-01-26 18:58:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979822605209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:58:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979822605209600[0;39m ==> Parameters: 
2023-01-26 18:58:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273979822605209600[0;39m <==    Updates: 0
2023-01-26 18:58:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273979822605209600[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 18:58:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273979843593506816[0;39m 更新电子书下的文档数据开始
2023-01-26 18:58:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979843593506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:58:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979843593506816[0;39m ==> Parameters: 
2023-01-26 18:58:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979843593506816[0;39m <==    Updates: 1
2023-01-26 18:58:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273979843593506816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 18:58:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273979969426821120[0;39m 更新电子书下的文档数据开始
2023-01-26 18:58:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979969426821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:58:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979969426821120[0;39m ==> Parameters: 
2023-01-26 18:58:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273979969426821120[0;39m <==    Updates: 1
2023-01-26 18:58:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273979969426821120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:59:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273980074280226816[0;39m 生成今日电子书快照开始
2023-01-26 18:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980074280226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 18:59:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980074280226816[0;39m ==> Parameters: 
2023-01-26 18:59:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980074280226816[0;39m <==    Updates: 0
2023-01-26 18:59:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273980074280226816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 18:59:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273980095243358208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:59:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980095243358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:59:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980095243358208[0;39m ==> Parameters: 
2023-01-26 18:59:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980095243358208[0;39m <==    Updates: 1
2023-01-26 18:59:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273980095243358208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 18:59:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273980221072478208[0;39m 更新电子书下的文档数据开始
2023-01-26 18:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980221072478208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 18:59:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980221072478208[0;39m ==> Parameters: 
2023-01-26 18:59:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980221072478208[0;39m <==    Updates: 1
2023-01-26 18:59:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273980221072478208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:00:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273980325917495296[0;39m 生成今日电子书快照开始
2023-01-26 19:00:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980325917495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:00:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980325917495296[0;39m ==> Parameters: 
2023-01-26 19:00:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980325917495296[0;39m <==    Updates: 0
2023-01-26 19:00:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273980325917495296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:00:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273980346889015296[0;39m 更新电子书下的文档数据开始
2023-01-26 19:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980346889015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:00:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980346889015296[0;39m ==> Parameters: 
2023-01-26 19:00:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980346889015296[0;39m <==    Updates: 1
2023-01-26 19:00:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273980346889015296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:00:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273980472705552384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980472705552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980472705552384[0;39m ==> Parameters: 
2023-01-26 19:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980472705552384[0;39m <==    Updates: 1
2023-01-26 19:00:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273980472705552384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:01:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273980577567346688[0;39m 生成今日电子书快照开始
2023-01-26 19:01:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980577567346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:01:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980577567346688[0;39m ==> Parameters: 
2023-01-26 19:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980577567346688[0;39m <==    Updates: 0
2023-01-26 19:01:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273980577567346688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:01:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273980598534672384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980598534672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980598534672384[0;39m ==> Parameters: 
2023-01-26 19:01:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980598534672384[0;39m <==    Updates: 1
2023-01-26 19:01:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273980598534672384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:01:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273980724397346816[0;39m 更新电子书下的文档数据开始
2023-01-26 19:01:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980724397346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:01:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980724397346816[0;39m ==> Parameters: 
2023-01-26 19:01:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980724397346816[0;39m <==    Updates: 1
2023-01-26 19:01:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273980724397346816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:02:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273980829263335424[0;39m 生成今日电子书快照开始
2023-01-26 19:02:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980829263335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:02:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980829263335424[0;39m ==> Parameters: 
2023-01-26 19:02:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273980829263335424[0;39m <==    Updates: 0
2023-01-26 19:02:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273980829263335424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 19:02:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273980850209689600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:02:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980850209689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980850209689600[0;39m ==> Parameters: 
2023-01-26 19:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980850209689600[0;39m <==    Updates: 1
2023-01-26 19:02:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273980850209689600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:02:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273980976009449472[0;39m 更新电子书下的文档数据开始
2023-01-26 19:02:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980976009449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:02:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980976009449472[0;39m ==> Parameters: 
2023-01-26 19:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273980976009449472[0;39m <==    Updates: 1
2023-01-26 19:02:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273980976009449472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:03:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273981080883826688[0;39m 生成今日电子书快照开始
2023-01-26 19:03:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981080883826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:03:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981080883826688[0;39m ==> Parameters: 
2023-01-26 19:03:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981080883826688[0;39m <==    Updates: 0
2023-01-26 19:03:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273981080883826688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 19:03:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273981101846958080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981101846958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981101846958080[0;39m ==> Parameters: 
2023-01-26 19:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981101846958080[0;39m <==    Updates: 1
2023-01-26 19:03:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273981101846958080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:03:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273981227705438208[0;39m 更新电子书下的文档数据开始
2023-01-26 19:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981227705438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981227705438208[0;39m ==> Parameters: 
2023-01-26 19:03:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981227705438208[0;39m <==    Updates: 1
2023-01-26 19:03:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273981227705438208[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:04:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273981332521095168[0;39m 生成今日电子书快照开始
2023-01-26 19:04:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981332521095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981332521095168[0;39m ==> Parameters: 
2023-01-26 19:04:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981332521095168[0;39m <==    Updates: 0
2023-01-26 19:04:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273981332521095168[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 19:04:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273981353496809472[0;39m 更新电子书下的文档数据开始
2023-01-26 19:04:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981353496809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:04:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981353496809472[0;39m ==> Parameters: 
2023-01-26 19:04:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981353496809472[0;39m <==    Updates: 1
2023-01-26 19:04:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273981353496809472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:04:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273981479334318080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981479334318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:04:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981479334318080[0;39m ==> Parameters: 
2023-01-26 19:04:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981479334318080[0;39m <==    Updates: 1
2023-01-26 19:04:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273981479334318080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:05:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273981584183529472[0;39m 生成今日电子书快照开始
2023-01-26 19:05:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981584183529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981584183529472[0;39m ==> Parameters: 
2023-01-26 19:05:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981584183529472[0;39m <==    Updates: 0
2023-01-26 19:05:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273981584183529472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:05:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273981605171826688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981605171826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:05:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981605171826688[0;39m ==> Parameters: 
2023-01-26 19:05:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981605171826688[0;39m <==    Updates: 1
2023-01-26 19:05:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273981605171826688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:05:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273981730996752384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:05:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981730996752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981730996752384[0;39m ==> Parameters: 
2023-01-26 19:05:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981730996752384[0;39m <==    Updates: 1
2023-01-26 19:05:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273981730996752384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:06:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273981835862740992[0;39m 生成今日电子书快照开始
2023-01-26 19:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981835862740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:06:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981835862740992[0;39m ==> Parameters: 
2023-01-26 19:06:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273981835862740992[0;39m <==    Updates: 0
2023-01-26 19:06:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273981835862740992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 19:06:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273981856842649600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981856842649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981856842649600[0;39m ==> Parameters: 
2023-01-26 19:06:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981856842649600[0;39m <==    Updates: 1
2023-01-26 19:06:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273981856842649600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:06:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273981982696935424[0;39m 更新电子书下的文档数据开始
2023-01-26 19:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981982696935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981982696935424[0;39m ==> Parameters: 
2023-01-26 19:06:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273981982696935424[0;39m <==    Updates: 1
2023-01-26 19:06:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273981982696935424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:07:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273982087504203776[0;39m 生成今日电子书快照开始
2023-01-26 19:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982087504203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982087504203776[0;39m ==> Parameters: 
2023-01-26 19:07:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982087504203776[0;39m <==    Updates: 0
2023-01-26 19:07:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273982087504203776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 19:07:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273982108530249728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:07:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982108530249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:07:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982108530249728[0;39m ==> Parameters: 
2023-01-26 19:07:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982108530249728[0;39m <==    Updates: 1
2023-01-26 19:07:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273982108530249728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:07:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273982234334203904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:07:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982234334203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:07:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982234334203904[0;39m ==> Parameters: 
2023-01-26 19:07:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982234334203904[0;39m <==    Updates: 1
2023-01-26 19:07:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273982234334203904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:08:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273982339216969728[0;39m 生成今日电子书快照开始
2023-01-26 19:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982339216969728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:08:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982339216969728[0;39m ==> Parameters: 
2023-01-26 19:08:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982339216969728[0;39m <==    Updates: 0
2023-01-26 19:08:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273982339216969728[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 19:08:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273982360167518208[0;39m 更新电子书下的文档数据开始
2023-01-26 19:08:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982360167518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:08:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982360167518208[0;39m ==> Parameters: 
2023-01-26 19:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982360167518208[0;39m <==    Updates: 1
2023-01-26 19:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273982360167518208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:08:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273982485988249600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:08:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982485988249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:08:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982485988249600[0;39m ==> Parameters: 
2023-01-26 19:08:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982485988249600[0;39m <==    Updates: 1
2023-01-26 19:08:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273982485988249600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:09:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273982590837460992[0;39m 生成今日电子书快照开始
2023-01-26 19:09:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982590837460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:09:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982590837460992[0;39m ==> Parameters: 
2023-01-26 19:09:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982590837460992[0;39m <==    Updates: 0
2023-01-26 19:09:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273982590837460992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 19:09:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273982611800592384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982611800592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:09:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982611800592384[0;39m ==> Parameters: 
2023-01-26 19:09:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982611800592384[0;39m <==    Updates: 1
2023-01-26 19:09:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273982611800592384[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 19:09:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273982737659072512[0;39m 更新电子书下的文档数据开始
2023-01-26 19:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982737659072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982737659072512[0;39m ==> Parameters: 
2023-01-26 19:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982737659072512[0;39m <==    Updates: 1
2023-01-26 19:09:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273982737659072512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:10:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273982842512478208[0;39m 生成今日电子书快照开始
2023-01-26 19:10:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982842512478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:10:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982842512478208[0;39m ==> Parameters: 
2023-01-26 19:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273982842512478208[0;39m <==    Updates: 0
2023-01-26 19:10:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273982842512478208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:10:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273982863463026688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:10:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982863463026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:10:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982863463026688[0;39m ==> Parameters: 
2023-01-26 19:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982863463026688[0;39m <==    Updates: 1
2023-01-26 19:10:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273982863463026688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:10:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273982989317312512[0;39m 更新电子书下的文档数据开始
2023-01-26 19:10:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982989317312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:10:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982989317312512[0;39m ==> Parameters: 
2023-01-26 19:10:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273982989317312512[0;39m <==    Updates: 1
2023-01-26 19:10:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273982989317312512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:11:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273983094170718208[0;39m 生成今日电子书快照开始
2023-01-26 19:11:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983094170718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:11:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983094170718208[0;39m ==> Parameters: 
2023-01-26 19:11:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983094170718208[0;39m <==    Updates: 0
2023-01-26 19:11:00.041 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273983094170718208[0;39m 生成今日电子书快照结束，耗时：31毫秒
2023-01-26 19:11:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273983115138043904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:11:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983115138043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:11:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983115138043904[0;39m ==> Parameters: 
2023-01-26 19:11:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983115138043904[0;39m <==    Updates: 1
2023-01-26 19:11:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273983115138043904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:11:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273983240962969600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983240962969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:11:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983240962969600[0;39m ==> Parameters: 
2023-01-26 19:11:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983240962969600[0;39m <==    Updates: 1
2023-01-26 19:11:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273983240962969600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:12:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273983345795403776[0;39m 生成今日电子书快照开始
2023-01-26 19:12:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983345795403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:12:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983345795403776[0;39m ==> Parameters: 
2023-01-26 19:12:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983345795403776[0;39m <==    Updates: 0
2023-01-26 19:12:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273983345795403776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 19:12:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273983366792089600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:12:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983366792089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:12:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983366792089600[0;39m ==> Parameters: 
2023-01-26 19:12:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983366792089600[0;39m <==    Updates: 1
2023-01-26 19:12:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273983366792089600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:12:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273983492587655168[0;39m 更新电子书下的文档数据开始
2023-01-26 19:12:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983492587655168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:12:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983492587655168[0;39m ==> Parameters: 
2023-01-26 19:12:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983492587655168[0;39m <==    Updates: 1
2023-01-26 19:12:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273983492587655168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:13:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273983597483003904[0;39m 生成今日电子书快照开始
2023-01-26 19:13:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983597483003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:13:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983597483003904[0;39m ==> Parameters: 
2023-01-26 19:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983597483003904[0;39m <==    Updates: 0
2023-01-26 19:13:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273983597483003904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:13:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273983618441940992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:13:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983618441940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:13:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983618441940992[0;39m ==> Parameters: 
2023-01-26 19:13:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983618441940992[0;39m <==    Updates: 1
2023-01-26 19:13:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273983618441940992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:13:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273983744308809728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:13:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983744308809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:13:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983744308809728[0;39m ==> Parameters: 
2023-01-26 19:13:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983744308809728[0;39m <==    Updates: 1
2023-01-26 19:13:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273983744308809728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:14:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273983849141243904[0;39m 生成今日电子书快照开始
2023-01-26 19:14:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983849141243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:14:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983849141243904[0;39m ==> Parameters: 
2023-01-26 19:14:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273983849141243904[0;39m <==    Updates: 0
2023-01-26 19:14:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273983849141243904[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:14:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273983870091792384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:14:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983870091792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983870091792384[0;39m ==> Parameters: 
2023-01-26 19:14:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983870091792384[0;39m <==    Updates: 1
2023-01-26 19:14:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273983870091792384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:14:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273983995908329472[0;39m 更新电子书下的文档数据开始
2023-01-26 19:14:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983995908329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:14:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983995908329472[0;39m ==> Parameters: 
2023-01-26 19:14:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273983995908329472[0;39m <==    Updates: 1
2023-01-26 19:14:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273983995908329472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:15:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273984100774318080[0;39m 生成今日电子书快照开始
2023-01-26 19:15:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984100774318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:15:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984100774318080[0;39m ==> Parameters: 
2023-01-26 19:15:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984100774318080[0;39m <==    Updates: 0
2023-01-26 19:15:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273984100774318080[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 19:15:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273984121766809600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:15:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984121766809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:15:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984121766809600[0;39m ==> Parameters: 
2023-01-26 19:15:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984121766809600[0;39m <==    Updates: 1
2023-01-26 19:15:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273984121766809600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:15:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273984247591735296[0;39m 更新电子书下的文档数据开始
2023-01-26 19:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984247591735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:15:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984247591735296[0;39m ==> Parameters: 
2023-01-26 19:15:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984247591735296[0;39m <==    Updates: 1
2023-01-26 19:15:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273984247591735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:16:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273984352453529600[0;39m 生成今日电子书快照开始
2023-01-26 19:16:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984352453529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:16:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984352453529600[0;39m ==> Parameters: 
2023-01-26 19:16:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984352453529600[0;39m <==    Updates: 0
2023-01-26 19:16:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273984352453529600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:16:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273984373425049600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:16:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984373425049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:16:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984373425049600[0;39m ==> Parameters: 
2023-01-26 19:16:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984373425049600[0;39m <==    Updates: 1
2023-01-26 19:16:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273984373425049600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:16:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273984499249975296[0;39m 更新电子书下的文档数据开始
2023-01-26 19:16:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984499249975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:16:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984499249975296[0;39m ==> Parameters: 
2023-01-26 19:16:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984499249975296[0;39m <==    Updates: 1
2023-01-26 19:16:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273984499249975296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:17:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273984604120158208[0;39m 生成今日电子书快照开始
2023-01-26 19:17:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984604120158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984604120158208[0;39m ==> Parameters: 
2023-01-26 19:17:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984604120158208[0;39m <==    Updates: 0
2023-01-26 19:17:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273984604120158208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:17:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273984625104261120[0;39m 更新电子书下的文档数据开始
2023-01-26 19:17:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984625104261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:17:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984625104261120[0;39m ==> Parameters: 
2023-01-26 19:17:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984625104261120[0;39m <==    Updates: 1
2023-01-26 19:17:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273984625104261120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:17:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273984750887243776[0;39m 更新电子书下的文档数据开始
2023-01-26 19:17:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984750887243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:17:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984750887243776[0;39m ==> Parameters: 
2023-01-26 19:17:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984750887243776[0;39m <==    Updates: 1
2023-01-26 19:17:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273984750887243776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:18:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273984855790981120[0;39m 生成今日电子书快照开始
2023-01-26 19:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984855790981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:18:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984855790981120[0;39m ==> Parameters: 
2023-01-26 19:18:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273984855790981120[0;39m <==    Updates: 0
2023-01-26 19:18:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273984855790981120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:18:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273984876716363776[0;39m 更新电子书下的文档数据开始
2023-01-26 19:18:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984876716363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:18:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984876716363776[0;39m ==> Parameters: 
2023-01-26 19:18:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273984876716363776[0;39m <==    Updates: 1
2023-01-26 19:18:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273984876716363776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:18:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273985002574843904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:18:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985002574843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:18:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985002574843904[0;39m ==> Parameters: 
2023-01-26 19:18:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985002574843904[0;39m <==    Updates: 1
2023-01-26 19:18:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273985002574843904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 19:19:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273985107449221120[0;39m 生成今日电子书快照开始
2023-01-26 19:19:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985107449221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:19:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985107449221120[0;39m ==> Parameters: 
2023-01-26 19:19:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985107449221120[0;39m <==    Updates: 0
2023-01-26 19:19:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273985107449221120[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-26 19:19:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273985128424935424[0;39m 更新电子书下的文档数据开始
2023-01-26 19:19:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985128424935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:19:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985128424935424[0;39m ==> Parameters: 
2023-01-26 19:19:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985128424935424[0;39m <==    Updates: 1
2023-01-26 19:19:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273985128424935424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:19:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273985254245666816[0;39m 更新电子书下的文档数据开始
2023-01-26 19:19:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985254245666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:19:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985254245666816[0;39m ==> Parameters: 
2023-01-26 19:19:35.034 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985254245666816[0;39m <==    Updates: 1
2023-01-26 19:19:35.035 INFO  com.example.wiki.job.DocJob                       :35   [32m273985254245666816[0;39m 更新电子书下的文档数据结束，耗时：22毫秒
2023-01-26 19:20:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273985359057129472[0;39m 生成今日电子书快照开始
2023-01-26 19:20:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985359057129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:20:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985359057129472[0;39m ==> Parameters: 
2023-01-26 19:20:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985359057129472[0;39m <==    Updates: 0
2023-01-26 19:20:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273985359057129472[0;39m 生成今日电子书快照结束，耗时：17毫秒
2023-01-26 19:20:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273985380066398208[0;39m 更新电子书下的文档数据开始
2023-01-26 19:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985380066398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985380066398208[0;39m ==> Parameters: 
2023-01-26 19:20:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985380066398208[0;39m <==    Updates: 1
2023-01-26 19:20:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273985380066398208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:20:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273985505866158080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:20:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985505866158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:20:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985505866158080[0;39m ==> Parameters: 
2023-01-26 19:20:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985505866158080[0;39m <==    Updates: 1
2023-01-26 19:20:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273985505866158080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:21:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273985610719563776[0;39m 生成今日电子书快照开始
2023-01-26 19:21:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985610719563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:21:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985610719563776[0;39m ==> Parameters: 
2023-01-26 19:21:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985610719563776[0;39m <==    Updates: 0
2023-01-26 19:21:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273985610719563776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:21:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273985631712055296[0;39m 更新电子书下的文档数据开始
2023-01-26 19:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985631712055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985631712055296[0;39m ==> Parameters: 
2023-01-26 19:21:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985631712055296[0;39m <==    Updates: 1
2023-01-26 19:21:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273985631712055296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:21:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273985757541175296[0;39m 更新电子书下的文档数据开始
2023-01-26 19:21:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985757541175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:21:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985757541175296[0;39m ==> Parameters: 
2023-01-26 19:21:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985757541175296[0;39m <==    Updates: 1
2023-01-26 19:21:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273985757541175296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:22:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273985862415552512[0;39m 生成今日电子书快照开始
2023-01-26 19:22:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985862415552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:22:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985862415552512[0;39m ==> Parameters: 
2023-01-26 19:22:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273985862415552512[0;39m <==    Updates: 0
2023-01-26 19:22:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273985862415552512[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 19:22:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273985883345129472[0;39m 更新电子书下的文档数据开始
2023-01-26 19:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985883345129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985883345129472[0;39m ==> Parameters: 
2023-01-26 19:22:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273985883345129472[0;39m <==    Updates: 1
2023-01-26 19:22:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273985883345129472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:22:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273986009232969728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:22:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986009232969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:22:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986009232969728[0;39m ==> Parameters: 
2023-01-26 19:22:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986009232969728[0;39m <==    Updates: 1
2023-01-26 19:22:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273986009232969728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:23:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273986114086375424[0;39m 生成今日电子书快照开始
2023-01-26 19:23:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986114086375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:23:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986114086375424[0;39m ==> Parameters: 
2023-01-26 19:23:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986114086375424[0;39m <==    Updates: 0
2023-01-26 19:23:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273986114086375424[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 19:23:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273986135020146688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986135020146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986135020146688[0;39m ==> Parameters: 
2023-01-26 19:23:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986135020146688[0;39m <==    Updates: 1
2023-01-26 19:23:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273986135020146688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:23:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273986260861849600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:23:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986260861849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:23:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986260861849600[0;39m ==> Parameters: 
2023-01-26 19:23:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986260861849600[0;39m <==    Updates: 1
2023-01-26 19:23:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273986260861849600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:24:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273986365732032512[0;39m 生成今日电子书快照开始
2023-01-26 19:24:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986365732032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:24:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986365732032512[0;39m ==> Parameters: 
2023-01-26 19:24:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986365732032512[0;39m <==    Updates: 0
2023-01-26 19:24:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273986365732032512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 19:24:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273986386690969600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:24:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986386690969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:24:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986386690969600[0;39m ==> Parameters: 
2023-01-26 19:24:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986386690969600[0;39m <==    Updates: 1
2023-01-26 19:24:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273986386690969600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:24:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273986512499118080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:24:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986512499118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:24:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986512499118080[0;39m ==> Parameters: 
2023-01-26 19:24:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986512499118080[0;39m <==    Updates: 1
2023-01-26 19:24:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273986512499118080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:25:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273986617394466816[0;39m 生成今日电子书快照开始
2023-01-26 19:25:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986617394466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986617394466816[0;39m ==> Parameters: 
2023-01-26 19:25:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986617394466816[0;39m <==    Updates: 0
2023-01-26 19:25:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273986617394466816[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 19:25:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273986638382764032[0;39m 更新电子书下的文档数据开始
2023-01-26 19:25:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986638382764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:25:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986638382764032[0;39m ==> Parameters: 
2023-01-26 19:25:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986638382764032[0;39m <==    Updates: 1
2023-01-26 19:25:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273986638382764032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:25:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273986764182523904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986764182523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986764182523904[0;39m ==> Parameters: 
2023-01-26 19:25:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986764182523904[0;39m <==    Updates: 1
2023-01-26 19:25:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273986764182523904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:26:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273986869010763776[0;39m 生成今日电子书快照开始
2023-01-26 19:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986869010763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986869010763776[0;39m ==> Parameters: 
2023-01-26 19:26:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273986869010763776[0;39m <==    Updates: 0
2023-01-26 19:26:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273986869010763776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 19:26:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273986889986478080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:26:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986889986478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:26:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986889986478080[0;39m ==> Parameters: 
2023-01-26 19:26:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273986889986478080[0;39m <==    Updates: 1
2023-01-26 19:26:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273986889986478080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:26:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273987015828180992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:26:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987015828180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:26:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987015828180992[0;39m ==> Parameters: 
2023-01-26 19:26:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987015828180992[0;39m <==    Updates: 1
2023-01-26 19:26:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273987015828180992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 19:27:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273987120685780992[0;39m 生成今日电子书快照开始
2023-01-26 19:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987120685780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987120685780992[0;39m ==> Parameters: 
2023-01-26 19:27:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987120685780992[0;39m <==    Updates: 0
2023-01-26 19:27:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273987120685780992[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 19:27:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273987141648912384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987141648912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987141648912384[0;39m ==> Parameters: 
2023-01-26 19:27:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987141648912384[0;39m <==    Updates: 1
2023-01-26 19:27:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273987141648912384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:27:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273987267528364032[0;39m 更新电子书下的文档数据开始
2023-01-26 19:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987267528364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987267528364032[0;39m ==> Parameters: 
2023-01-26 19:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987267528364032[0;39m <==    Updates: 1
2023-01-26 19:27:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273987267528364032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:28:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273987372335632384[0;39m 生成今日电子书快照开始
2023-01-26 19:28:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987372335632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987372335632384[0;39m ==> Parameters: 
2023-01-26 19:28:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987372335632384[0;39m <==    Updates: 0
2023-01-26 19:28:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273987372335632384[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 19:28:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273987393315540992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987393315540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:28:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987393315540992[0;39m ==> Parameters: 
2023-01-26 19:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987393315540992[0;39m <==    Updates: 1
2023-01-26 19:28:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273987393315540992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:28:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273987519161438208[0;39m 更新电子书下的文档数据开始
2023-01-26 19:28:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987519161438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987519161438208[0;39m ==> Parameters: 
2023-01-26 19:28:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987519161438208[0;39m <==    Updates: 1
2023-01-26 19:28:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273987519161438208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:29:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273987624035815424[0;39m 生成今日电子书快照开始
2023-01-26 19:29:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987624035815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:29:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987624035815424[0;39m ==> Parameters: 
2023-01-26 19:29:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987624035815424[0;39m <==    Updates: 0
2023-01-26 19:29:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273987624035815424[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 19:29:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273987644965392384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:29:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987644965392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:29:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987644965392384[0;39m ==> Parameters: 
2023-01-26 19:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987644965392384[0;39m <==    Updates: 1
2023-01-26 19:29:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273987644965392384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:29:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273987770823872512[0;39m 更新电子书下的文档数据开始
2023-01-26 19:29:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987770823872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:29:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987770823872512[0;39m ==> Parameters: 
2023-01-26 19:29:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987770823872512[0;39m <==    Updates: 1
2023-01-26 19:29:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273987770823872512[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:30:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273987875689861120[0;39m 生成今日电子书快照开始
2023-01-26 19:30:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987875689861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987875689861120[0;39m ==> Parameters: 
2023-01-26 19:30:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273987875689861120[0;39m <==    Updates: 0
2023-01-26 19:30:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273987875689861120[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 19:30:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273987896623632384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:30:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987896623632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987896623632384[0;39m ==> Parameters: 
2023-01-26 19:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273987896623632384[0;39m <==    Updates: 1
2023-01-26 19:30:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273987896623632384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:30:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273988022448558080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:30:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988022448558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:30:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988022448558080[0;39m ==> Parameters: 
2023-01-26 19:30:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988022448558080[0;39m <==    Updates: 1
2023-01-26 19:30:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273988022448558080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:31:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273988127318740992[0;39m 生成今日电子书快照开始
2023-01-26 19:31:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988127318740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:31:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988127318740992[0;39m ==> Parameters: 
2023-01-26 19:31:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988127318740992[0;39m <==    Updates: 0
2023-01-26 19:31:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273988127318740992[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 19:31:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273988148302843904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988148302843904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988148302843904[0;39m ==> Parameters: 
2023-01-26 19:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988148302843904[0;39m <==    Updates: 1
2023-01-26 19:31:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273988148302843904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273988274110992384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:31:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988274110992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:31:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988274110992384[0;39m ==> Parameters: 
2023-01-26 19:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988274110992384[0;39m <==    Updates: 1
2023-01-26 19:31:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273988274110992384[0;39m 更新电子书下的文档数据结束，耗时：12毫秒
2023-01-26 19:32:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273988378993758208[0;39m 生成今日电子书快照开始
2023-01-26 19:32:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988378993758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:32:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988378993758208[0;39m ==> Parameters: 
2023-01-26 19:32:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988378993758208[0;39m <==    Updates: 0
2023-01-26 19:32:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273988378993758208[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 19:32:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273988399948500992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:32:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988399948500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:32:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988399948500992[0;39m ==> Parameters: 
2023-01-26 19:32:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988399948500992[0;39m <==    Updates: 1
2023-01-26 19:32:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273988399948500992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:32:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273988525777620992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:32:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988525777620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:32:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988525777620992[0;39m ==> Parameters: 
2023-01-26 19:32:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988525777620992[0;39m <==    Updates: 1
2023-01-26 19:32:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273988525777620992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:33:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273988630668775424[0;39m 生成今日电子书快照开始
2023-01-26 19:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988630668775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988630668775424[0;39m ==> Parameters: 
2023-01-26 19:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988630668775424[0;39m <==    Updates: 0
2023-01-26 19:33:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273988630668775424[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 19:33:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273988651598352384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:33:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988651598352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:33:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988651598352384[0;39m ==> Parameters: 
2023-01-26 19:33:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988651598352384[0;39m <==    Updates: 1
2023-01-26 19:33:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273988651598352384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:33:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273988777435860992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988777435860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988777435860992[0;39m ==> Parameters: 
2023-01-26 19:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988777435860992[0;39m <==    Updates: 1
2023-01-26 19:33:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273988777435860992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:34:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273988882310238208[0;39m 生成今日电子书快照开始
2023-01-26 19:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988882310238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988882310238208[0;39m ==> Parameters: 
2023-01-26 19:34:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273988882310238208[0;39m <==    Updates: 0
2023-01-26 19:34:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273988882310238208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 19:34:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273988903260786688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988903260786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988903260786688[0;39m ==> Parameters: 
2023-01-26 19:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273988903260786688[0;39m <==    Updates: 1
2023-01-26 19:34:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273988903260786688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:34:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273989029094100992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:34:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989029094100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:34:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989029094100992[0;39m ==> Parameters: 
2023-01-26 19:34:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989029094100992[0;39m <==    Updates: 1
2023-01-26 19:34:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273989029094100992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:35:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273989133951700992[0;39m 生成今日电子书快照开始
2023-01-26 19:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989133951700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989133951700992[0;39m ==> Parameters: 
2023-01-26 19:35:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989133951700992[0;39m <==    Updates: 0
2023-01-26 19:35:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273989133951700992[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 19:35:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273989154948386816[0;39m 更新电子书下的文档数据开始
2023-01-26 19:35:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989154948386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:35:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989154948386816[0;39m ==> Parameters: 
2023-01-26 19:35:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989154948386816[0;39m <==    Updates: 1
2023-01-26 19:35:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273989154948386816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:35:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273989280752340992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:35:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989280752340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:35:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989280752340992[0;39m ==> Parameters: 
2023-01-26 19:35:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989280752340992[0;39m <==    Updates: 1
2023-01-26 19:35:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273989280752340992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:36:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273989385609940992[0;39m 生成今日电子书快照开始
2023-01-26 19:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989385609940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989385609940992[0;39m ==> Parameters: 
2023-01-26 19:36:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989385609940992[0;39m <==    Updates: 0
2023-01-26 19:36:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273989385609940992[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 19:36:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273989406589849600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989406589849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989406589849600[0;39m ==> Parameters: 
2023-01-26 19:36:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989406589849600[0;39m <==    Updates: 1
2023-01-26 19:36:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273989406589849600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:36:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273989532406386688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:36:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989532406386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:36:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989532406386688[0;39m ==> Parameters: 
2023-01-26 19:36:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989532406386688[0;39m <==    Updates: 1
2023-01-26 19:36:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273989532406386688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:37:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273989637310124032[0;39m 生成今日电子书快照开始
2023-01-26 19:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989637310124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989637310124032[0;39m ==> Parameters: 
2023-01-26 19:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989637310124032[0;39m <==    Updates: 0
2023-01-26 19:37:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273989637310124032[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:37:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273989658235506688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:37:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989658235506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:37:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989658235506688[0;39m ==> Parameters: 
2023-01-26 19:37:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989658235506688[0;39m <==    Updates: 1
2023-01-26 19:37:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273989658235506688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:37:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273989784093986816[0;39m 更新电子书下的文档数据开始
2023-01-26 19:37:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989784093986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:37:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989784093986816[0;39m ==> Parameters: 
2023-01-26 19:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989784093986816[0;39m <==    Updates: 1
2023-01-26 19:37:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273989784093986816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 19:38:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273989888968364032[0;39m 生成今日电子书快照开始
2023-01-26 19:38:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989888968364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:38:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989888968364032[0;39m ==> Parameters: 
2023-01-26 19:38:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273989888968364032[0;39m <==    Updates: 0
2023-01-26 19:38:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273989888968364032[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 19:38:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273989909885358080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:38:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989909885358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:38:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989909885358080[0;39m ==> Parameters: 
2023-01-26 19:38:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273989909885358080[0;39m <==    Updates: 1
2023-01-26 19:38:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273989909885358080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:38:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273990035727060992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:38:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990035727060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990035727060992[0;39m ==> Parameters: 
2023-01-26 19:38:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990035727060992[0;39m <==    Updates: 1
2023-01-26 19:38:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273990035727060992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:39:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273990140622409728[0;39m 生成今日电子书快照开始
2023-01-26 19:39:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990140622409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:39:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990140622409728[0;39m ==> Parameters: 
2023-01-26 19:39:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990140622409728[0;39m <==    Updates: 0
2023-01-26 19:39:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273990140622409728[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 19:39:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273990161551986688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:39:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990161551986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:39:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990161551986688[0;39m ==> Parameters: 
2023-01-26 19:39:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990161551986688[0;39m <==    Updates: 1
2023-01-26 19:39:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273990161551986688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:39:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273990287385300992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:39:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990287385300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:39:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990287385300992[0;39m ==> Parameters: 
2023-01-26 19:39:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990287385300992[0;39m <==    Updates: 1
2023-01-26 19:39:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273990287385300992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:40:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273990392251289600[0;39m 生成今日电子书快照开始
2023-01-26 19:40:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990392251289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:40:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990392251289600[0;39m ==> Parameters: 
2023-01-26 19:40:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990392251289600[0;39m <==    Updates: 0
2023-01-26 19:40:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273990392251289600[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 19:40:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273990413206032384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:40:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990413206032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:40:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990413206032384[0;39m ==> Parameters: 
2023-01-26 19:40:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990413206032384[0;39m <==    Updates: 1
2023-01-26 19:40:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273990413206032384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:40:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273990539077095424[0;39m 更新电子书下的文档数据开始
2023-01-26 19:40:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990539077095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990539077095424[0;39m ==> Parameters: 
2023-01-26 19:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990539077095424[0;39m <==    Updates: 1
2023-01-26 19:40:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273990539077095424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:41:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273990643938889728[0;39m 生成今日电子书快照开始
2023-01-26 19:41:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990643938889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:41:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990643938889728[0;39m ==> Parameters: 
2023-01-26 19:41:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990643938889728[0;39m <==    Updates: 0
2023-01-26 19:41:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273990643938889728[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 19:41:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273990664868466688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:41:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990664868466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:41:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990664868466688[0;39m ==> Parameters: 
2023-01-26 19:41:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990664868466688[0;39m <==    Updates: 1
2023-01-26 19:41:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273990664868466688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:41:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273990790739529728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:41:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990790739529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:41:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990790739529728[0;39m ==> Parameters: 
2023-01-26 19:41:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990790739529728[0;39m <==    Updates: 1
2023-01-26 19:41:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273990790739529728[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:42:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273990895559380992[0;39m 生成今日电子书快照开始
2023-01-26 19:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990895559380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990895559380992[0;39m ==> Parameters: 
2023-01-26 19:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273990895559380992[0;39m <==    Updates: 0
2023-01-26 19:42:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273990895559380992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:42:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273990916539289600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990916539289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990916539289600[0;39m ==> Parameters: 
2023-01-26 19:42:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273990916539289600[0;39m <==    Updates: 1
2023-01-26 19:42:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273990916539289600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:42:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273991042397769728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:42:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991042397769728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:42:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991042397769728[0;39m ==> Parameters: 
2023-01-26 19:42:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991042397769728[0;39m <==    Updates: 1
2023-01-26 19:42:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273991042397769728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:43:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273991147259564032[0;39m 生成今日电子书快照开始
2023-01-26 19:43:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991147259564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:43:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991147259564032[0;39m ==> Parameters: 
2023-01-26 19:43:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991147259564032[0;39m <==    Updates: 0
2023-01-26 19:43:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273991147259564032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 19:43:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273991168189140992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:43:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991168189140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:43:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991168189140992[0;39m ==> Parameters: 
2023-01-26 19:43:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991168189140992[0;39m <==    Updates: 1
2023-01-26 19:43:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273991168189140992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:43:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273991294018260992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:43:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991294018260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:43:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991294018260992[0;39m ==> Parameters: 
2023-01-26 19:43:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991294018260992[0;39m <==    Updates: 1
2023-01-26 19:43:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273991294018260992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:44:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273991398863278080[0;39m 生成今日电子书快照开始
2023-01-26 19:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991398863278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991398863278080[0;39m ==> Parameters: 
2023-01-26 19:44:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991398863278080[0;39m <==    Updates: 0
2023-01-26 19:44:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273991398863278080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 19:44:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273991419885129728[0;39m 更新电子书下的文档数据开始
2023-01-26 19:44:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991419885129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:44:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991419885129728[0;39m ==> Parameters: 
2023-01-26 19:44:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991419885129728[0;39m <==    Updates: 1
2023-01-26 19:44:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273991419885129728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:44:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273991545718444032[0;39m 更新电子书下的文档数据开始
2023-01-26 19:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991545718444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991545718444032[0;39m ==> Parameters: 
2023-01-26 19:44:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991545718444032[0;39m <==    Updates: 1
2023-01-26 19:44:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273991545718444032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:45:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273991650534100992[0;39m 生成今日电子书快照开始
2023-01-26 19:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991650534100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991650534100992[0;39m ==> Parameters: 
2023-01-26 19:45:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991650534100992[0;39m <==    Updates: 0
2023-01-26 19:45:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273991650534100992[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 19:45:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273991671488843776[0;39m 更新电子书下的文档数据开始
2023-01-26 19:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991671488843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991671488843776[0;39m ==> Parameters: 
2023-01-26 19:45:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991671488843776[0;39m <==    Updates: 1
2023-01-26 19:45:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273991671488843776[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:45:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273991797351518208[0;39m 更新电子书下的文档数据开始
2023-01-26 19:45:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991797351518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:45:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991797351518208[0;39m ==> Parameters: 
2023-01-26 19:45:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991797351518208[0;39m <==    Updates: 1
2023-01-26 19:45:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273991797351518208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:46:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273991902175563776[0;39m 生成今日电子书快照开始
2023-01-26 19:46:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991902175563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:46:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991902175563776[0;39m ==> Parameters: 
2023-01-26 19:46:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273991902175563776[0;39m <==    Updates: 0
2023-01-26 19:46:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273991902175563776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 19:46:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273991923163860992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:46:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991923163860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:46:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991923163860992[0;39m ==> Parameters: 
2023-01-26 19:46:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273991923163860992[0;39m <==    Updates: 1
2023-01-26 19:46:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273991923163860992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:46:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273992048992980992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992048992980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992048992980992[0;39m ==> Parameters: 
2023-01-26 19:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992048992980992[0;39m <==    Updates: 1
2023-01-26 19:46:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273992048992980992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:47:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273992153842192384[0;39m 生成今日电子书快照开始
2023-01-26 19:47:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992153842192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:47:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992153842192384[0;39m ==> Parameters: 
2023-01-26 19:47:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992153842192384[0;39m <==    Updates: 0
2023-01-26 19:47:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273992153842192384[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 19:47:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273992174864044032[0;39m 更新电子书下的文档数据开始
2023-01-26 19:47:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992174864044032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:47:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992174864044032[0;39m ==> Parameters: 
2023-01-26 19:47:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992174864044032[0;39m <==    Updates: 1
2023-01-26 19:47:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273992174864044032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:47:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273992300663803904[0;39m 更新电子书下的文档数据开始
2023-01-26 19:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992300663803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:47:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992300663803904[0;39m ==> Parameters: 
2023-01-26 19:47:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992300663803904[0;39m <==    Updates: 1
2023-01-26 19:47:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273992300663803904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:48:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273992405550764032[0;39m 生成今日电子书快照开始
2023-01-26 19:48:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992405550764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:48:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992405550764032[0;39m ==> Parameters: 
2023-01-26 19:48:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992405550764032[0;39m <==    Updates: 0
2023-01-26 19:48:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273992405550764032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 19:48:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273992426480340992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:48:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992426480340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:48:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992426480340992[0;39m ==> Parameters: 
2023-01-26 19:48:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992426480340992[0;39m <==    Updates: 1
2023-01-26 19:48:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273992426480340992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:48:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273992552296878080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:48:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992552296878080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:48:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992552296878080[0;39m ==> Parameters: 
2023-01-26 19:48:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992552296878080[0;39m <==    Updates: 1
2023-01-26 19:48:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273992552296878080[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 19:49:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273992657158672384[0;39m 生成今日电子书快照开始
2023-01-26 19:49:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992657158672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:49:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992657158672384[0;39m ==> Parameters: 
2023-01-26 19:49:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992657158672384[0;39m <==    Updates: 0
2023-01-26 19:49:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273992657158672384[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 19:49:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273992678146969600[0;39m 更新电子书下的文档数据开始
2023-01-26 19:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992678146969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992678146969600[0;39m ==> Parameters: 
2023-01-26 19:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992678146969600[0;39m <==    Updates: 1
2023-01-26 19:49:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273992678146969600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:49:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273992803967700992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:49:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992803967700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:49:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992803967700992[0;39m ==> Parameters: 
2023-01-26 19:49:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992803967700992[0;39m <==    Updates: 1
2023-01-26 19:49:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273992803967700992[0;39m 更新电子书下的文档数据结束，耗时：13毫秒
2023-01-26 19:50:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273992908842078208[0;39m 生成今日电子书快照开始
2023-01-26 19:50:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992908842078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:50:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992908842078208[0;39m ==> Parameters: 
2023-01-26 19:50:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273992908842078208[0;39m <==    Updates: 0
2023-01-26 19:50:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273992908842078208[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 19:50:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273992929826181120[0;39m 更新电子书下的文档数据开始
2023-01-26 19:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992929826181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:50:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992929826181120[0;39m ==> Parameters: 
2023-01-26 19:50:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273992929826181120[0;39m <==    Updates: 1
2023-01-26 19:50:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273992929826181120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:50:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273993055604969472[0;39m 更新电子书下的文档数据开始
2023-01-26 19:50:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993055604969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:50:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993055604969472[0;39m ==> Parameters: 
2023-01-26 19:50:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993055604969472[0;39m <==    Updates: 1
2023-01-26 19:50:35.001 INFO  com.example.wiki.job.DocJob                       :35   [32m273993055604969472[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:51:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273993160483540992[0;39m 生成今日电子书快照开始
2023-01-26 19:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993160483540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:51:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993160483540992[0;39m ==> Parameters: 
2023-01-26 19:51:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993160483540992[0;39m <==    Updates: 0
2023-01-26 19:51:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273993160483540992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:51:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273993181438283776[0;39m 更新电子书下的文档数据开始
2023-01-26 19:51:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993181438283776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:51:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993181438283776[0;39m ==> Parameters: 
2023-01-26 19:51:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993181438283776[0;39m <==    Updates: 1
2023-01-26 19:51:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273993181438283776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:51:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273993307279986688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993307279986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:51:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993307279986688[0;39m ==> Parameters: 
2023-01-26 19:51:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993307279986688[0;39m <==    Updates: 1
2023-01-26 19:51:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273993307279986688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:52:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273993412141780992[0;39m 生成今日电子书快照开始
2023-01-26 19:52:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993412141780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:52:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993412141780992[0;39m ==> Parameters: 
2023-01-26 19:52:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993412141780992[0;39m <==    Updates: 0
2023-01-26 19:52:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273993412141780992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:52:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273993433109106688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:52:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993433109106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:52:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993433109106688[0;39m ==> Parameters: 
2023-01-26 19:52:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993433109106688[0;39m <==    Updates: 1
2023-01-26 19:52:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273993433109106688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:52:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273993558929838080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:52:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993558929838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:52:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993558929838080[0;39m ==> Parameters: 
2023-01-26 19:52:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993558929838080[0;39m <==    Updates: 1
2023-01-26 19:52:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273993558929838080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:53:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273993663800020992[0;39m 生成今日电子书快照开始
2023-01-26 19:53:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993663800020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:53:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993663800020992[0;39m ==> Parameters: 
2023-01-26 19:53:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993663800020992[0;39m <==    Updates: 0
2023-01-26 19:53:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273993663800020992[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 19:53:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273993684754763776[0;39m 更新电子书下的文档数据开始
2023-01-26 19:53:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993684754763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:53:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993684754763776[0;39m ==> Parameters: 
2023-01-26 19:53:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993684754763776[0;39m <==    Updates: 1
2023-01-26 19:53:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273993684754763776[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:53:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273993810634215424[0;39m 更新电子书下的文档数据开始
2023-01-26 19:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993810634215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993810634215424[0;39m ==> Parameters: 
2023-01-26 19:53:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993810634215424[0;39m <==    Updates: 1
2023-01-26 19:53:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273993810634215424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:54:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273993915458260992[0;39m 生成今日电子书快照开始
2023-01-26 19:54:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993915458260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:54:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993915458260992[0;39m ==> Parameters: 
2023-01-26 19:54:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273993915458260992[0;39m <==    Updates: 0
2023-01-26 19:54:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273993915458260992[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 19:54:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273993936417198080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:54:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993936417198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:54:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993936417198080[0;39m ==> Parameters: 
2023-01-26 19:54:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273993936417198080[0;39m <==    Updates: 1
2023-01-26 19:54:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273993936417198080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:54:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273994062258900992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:54:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994062258900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:54:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994062258900992[0;39m ==> Parameters: 
2023-01-26 19:54:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994062258900992[0;39m <==    Updates: 1
2023-01-26 19:54:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994062258900992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 19:55:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273994167103918080[0;39m 生成今日电子书快照开始
2023-01-26 19:55:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994167103918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:55:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994167103918080[0;39m ==> Parameters: 
2023-01-26 19:55:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994167103918080[0;39m <==    Updates: 0
2023-01-26 19:55:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273994167103918080[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:55:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273994188079632384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994188079632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994188079632384[0;39m ==> Parameters: 
2023-01-26 19:55:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994188079632384[0;39m <==    Updates: 1
2023-01-26 19:55:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994188079632384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:55:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273994313908752384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:55:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994313908752384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:55:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994313908752384[0;39m ==> Parameters: 
2023-01-26 19:55:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994313908752384[0;39m <==    Updates: 1
2023-01-26 19:55:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994313908752384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:56:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273994418804101120[0;39m 生成今日电子书快照开始
2023-01-26 19:56:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994418804101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:56:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994418804101120[0;39m ==> Parameters: 
2023-01-26 19:56:00.042 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994418804101120[0;39m <==    Updates: 0
2023-01-26 19:56:00.046 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273994418804101120[0;39m 生成今日电子书快照结束，耗时：30毫秒
2023-01-26 19:56:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273994439733678080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:56:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994439733678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:56:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994439733678080[0;39m ==> Parameters: 
2023-01-26 19:56:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994439733678080[0;39m <==    Updates: 1
2023-01-26 19:56:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994439733678080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:56:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273994565566992384[0;39m 更新电子书下的文档数据开始
2023-01-26 19:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994565566992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994565566992384[0;39m ==> Parameters: 
2023-01-26 19:56:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994565566992384[0;39m <==    Updates: 1
2023-01-26 19:56:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994565566992384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:57:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273994670474924032[0;39m 生成今日电子书快照开始
2023-01-26 19:57:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994670474924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:57:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994670474924032[0;39m ==> Parameters: 
2023-01-26 19:57:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994670474924032[0;39m <==    Updates: 0
2023-01-26 19:57:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273994670474924032[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 19:57:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273994691391918080[0;39m 更新电子书下的文档数据开始
2023-01-26 19:57:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994691391918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:57:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994691391918080[0;39m ==> Parameters: 
2023-01-26 19:57:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994691391918080[0;39m <==    Updates: 1
2023-01-26 19:57:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273994691391918080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 19:57:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273994817254592512[0;39m 更新电子书下的文档数据开始
2023-01-26 19:57:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994817254592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:57:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994817254592512[0;39m ==> Parameters: 
2023-01-26 19:57:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994817254592512[0;39m <==    Updates: 1
2023-01-26 19:57:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273994817254592512[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 19:58:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273994922091220992[0;39m 生成今日电子书快照开始
2023-01-26 19:58:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994922091220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:58:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994922091220992[0;39m ==> Parameters: 
2023-01-26 19:58:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273994922091220992[0;39m <==    Updates: 0
2023-01-26 19:58:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273994922091220992[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 19:58:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273994943096295424[0;39m 更新电子书下的文档数据开始
2023-01-26 19:58:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994943096295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:58:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994943096295424[0;39m ==> Parameters: 
2023-01-26 19:58:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273994943096295424[0;39m <==    Updates: 1
2023-01-26 19:58:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273994943096295424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:58:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273995068887666688[0;39m 更新电子书下的文档数据开始
2023-01-26 19:58:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995068887666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:58:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995068887666688[0;39m ==> Parameters: 
2023-01-26 19:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995068887666688[0;39m <==    Updates: 1
2023-01-26 19:58:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273995068887666688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:59:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273995173749460992[0;39m 生成今日电子书快照开始
2023-01-26 19:59:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995173749460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 19:59:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995173749460992[0;39m ==> Parameters: 
2023-01-26 19:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995173749460992[0;39m <==    Updates: 0
2023-01-26 19:59:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273995173749460992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 19:59:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273995194720980992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:59:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995194720980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:59:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995194720980992[0;39m ==> Parameters: 
2023-01-26 19:59:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995194720980992[0;39m <==    Updates: 1
2023-01-26 19:59:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273995194720980992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 19:59:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273995320550100992[0;39m 更新电子书下的文档数据开始
2023-01-26 19:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995320550100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 19:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995320550100992[0;39m ==> Parameters: 
2023-01-26 19:59:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995320550100992[0;39m <==    Updates: 1
2023-01-26 19:59:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273995320550100992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:00:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273995425441255424[0;39m 生成今日电子书快照开始
2023-01-26 20:00:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995425441255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:00:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995425441255424[0;39m ==> Parameters: 
2023-01-26 20:00:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995425441255424[0;39m <==    Updates: 0
2023-01-26 20:00:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273995425441255424[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 20:00:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273995446370832384[0;39m 更新电子书下的文档数据开始
2023-01-26 20:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995446370832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995446370832384[0;39m ==> Parameters: 
2023-01-26 20:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995446370832384[0;39m <==    Updates: 1
2023-01-26 20:00:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273995446370832384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:00:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273995572204146688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995572204146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995572204146688[0;39m ==> Parameters: 
2023-01-26 20:00:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995572204146688[0;39m <==    Updates: 1
2023-01-26 20:00:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273995572204146688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:01:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273995677044969472[0;39m 生成今日电子书快照开始
2023-01-26 20:01:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995677044969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:01:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995677044969472[0;39m ==> Parameters: 
2023-01-26 20:01:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995677044969472[0;39m <==    Updates: 0
2023-01-26 20:01:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273995677044969472[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 20:01:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273995698033266688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995698033266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995698033266688[0;39m ==> Parameters: 
2023-01-26 20:01:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995698033266688[0;39m <==    Updates: 1
2023-01-26 20:01:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273995698033266688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:01:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273995823900135424[0;39m 更新电子书下的文档数据开始
2023-01-26 20:01:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995823900135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995823900135424[0;39m ==> Parameters: 
2023-01-26 20:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995823900135424[0;39m <==    Updates: 1
2023-01-26 20:01:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273995823900135424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:02:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273995928728375296[0;39m 生成今日电子书快照开始
2023-01-26 20:02:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995928728375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:02:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995928728375296[0;39m ==> Parameters: 
2023-01-26 20:02:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273995928728375296[0;39m <==    Updates: 0
2023-01-26 20:02:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273995928728375296[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:02:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273995949691506688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:02:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995949691506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:02:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995949691506688[0;39m ==> Parameters: 
2023-01-26 20:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273995949691506688[0;39m <==    Updates: 1
2023-01-26 20:02:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273995949691506688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:02:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273996075516432384[0;39m 更新电子书下的文档数据开始
2023-01-26 20:02:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996075516432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:02:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996075516432384[0;39m ==> Parameters: 
2023-01-26 20:02:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996075516432384[0;39m <==    Updates: 1
2023-01-26 20:02:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273996075516432384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:03:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273996180382420992[0;39m 生成今日电子书快照开始
2023-01-26 20:03:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996180382420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:03:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996180382420992[0;39m ==> Parameters: 
2023-01-26 20:03:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996180382420992[0;39m <==    Updates: 0
2023-01-26 20:03:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273996180382420992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:03:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273996201345552384[0;39m 更新电子书下的文档数据开始
2023-01-26 20:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996201345552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:03:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996201345552384[0;39m ==> Parameters: 
2023-01-26 20:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996201345552384[0;39m <==    Updates: 1
2023-01-26 20:03:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273996201345552384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:03:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273996327183060992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996327183060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996327183060992[0;39m ==> Parameters: 
2023-01-26 20:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996327183060992[0;39m <==    Updates: 1
2023-01-26 20:03:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273996327183060992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:04:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273996432049049600[0;39m 生成今日电子书快照开始
2023-01-26 20:04:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996432049049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996432049049600[0;39m ==> Parameters: 
2023-01-26 20:04:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996432049049600[0;39m <==    Updates: 0
2023-01-26 20:04:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273996432049049600[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:04:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273996453012180992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:04:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996453012180992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:04:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996453012180992[0;39m ==> Parameters: 
2023-01-26 20:04:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996453012180992[0;39m <==    Updates: 1
2023-01-26 20:04:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273996453012180992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:04:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273996578841300992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996578841300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996578841300992[0;39m ==> Parameters: 
2023-01-26 20:04:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996578841300992[0;39m <==    Updates: 1
2023-01-26 20:04:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273996578841300992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:05:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273996683690512384[0;39m 生成今日电子书快照开始
2023-01-26 20:05:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996683690512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:05:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996683690512384[0;39m ==> Parameters: 
2023-01-26 20:05:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996683690512384[0;39m <==    Updates: 0
2023-01-26 20:05:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273996683690512384[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:05:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273996704695586816[0;39m 更新电子书下的文档数据开始
2023-01-26 20:05:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996704695586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:05:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996704695586816[0;39m ==> Parameters: 
2023-01-26 20:05:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996704695586816[0;39m <==    Updates: 1
2023-01-26 20:05:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273996704695586816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:05:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273996830507929600[0;39m 更新电子书下的文档数据开始
2023-01-26 20:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996830507929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996830507929600[0;39m ==> Parameters: 
2023-01-26 20:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996830507929600[0;39m <==    Updates: 1
2023-01-26 20:05:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273996830507929600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:06:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273996935373918208[0;39m 生成今日电子书快照开始
2023-01-26 20:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996935373918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996935373918208[0;39m ==> Parameters: 
2023-01-26 20:06:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273996935373918208[0;39m <==    Updates: 0
2023-01-26 20:06:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273996935373918208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:06:05.019 INFO  com.example.wiki.job.DocJob                       :32   [32m273996956383186944[0;39m 更新电子书下的文档数据开始
2023-01-26 20:06:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996956383186944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:06:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996956383186944[0;39m ==> Parameters: 
2023-01-26 20:06:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273996956383186944[0;39m <==    Updates: 1
2023-01-26 20:06:05.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273996956383186944[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:06:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997082157780992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997082157780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997082157780992[0;39m ==> Parameters: 
2023-01-26 20:06:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997082157780992[0;39m <==    Updates: 1
2023-01-26 20:06:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273997082157780992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:07:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273997187006992384[0;39m 生成今日电子书快照开始
2023-01-26 20:07:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997187006992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:07:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997187006992384[0;39m ==> Parameters: 
2023-01-26 20:07:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997187006992384[0;39m <==    Updates: 0
2023-01-26 20:07:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273997187006992384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 20:07:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997207986900992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997207986900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997207986900992[0;39m ==> Parameters: 
2023-01-26 20:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997207986900992[0;39m <==    Updates: 1
2023-01-26 20:07:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273997207986900992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:07:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997333816020992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:07:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997333816020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:07:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997333816020992[0;39m ==> Parameters: 
2023-01-26 20:07:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997333816020992[0;39m <==    Updates: 1
2023-01-26 20:07:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273997333816020992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:08:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273997438690398208[0;39m 生成今日电子书快照开始
2023-01-26 20:08:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997438690398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:08:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997438690398208[0;39m ==> Parameters: 
2023-01-26 20:08:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997438690398208[0;39m <==    Updates: 0
2023-01-26 20:08:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273997438690398208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 20:08:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273997459640946688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:08:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997459640946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:08:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997459640946688[0;39m ==> Parameters: 
2023-01-26 20:08:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997459640946688[0;39m <==    Updates: 1
2023-01-26 20:08:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273997459640946688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:08:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273997585503621120[0;39m 更新电子书下的文档数据开始
2023-01-26 20:08:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997585503621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:08:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997585503621120[0;39m ==> Parameters: 
2023-01-26 20:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997585503621120[0;39m <==    Updates: 1
2023-01-26 20:08:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273997585503621120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:09:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273997690323472384[0;39m 生成今日电子书快照开始
2023-01-26 20:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997690323472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997690323472384[0;39m ==> Parameters: 
2023-01-26 20:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997690323472384[0;39m <==    Updates: 0
2023-01-26 20:09:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273997690323472384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 20:09:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997711303380992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997711303380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997711303380992[0;39m ==> Parameters: 
2023-01-26 20:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997711303380992[0;39m <==    Updates: 1
2023-01-26 20:09:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273997711303380992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:09:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997837132500992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997837132500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997837132500992[0;39m ==> Parameters: 
2023-01-26 20:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997837132500992[0;39m <==    Updates: 1
2023-01-26 20:09:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273997837132500992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:10:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273997941977518080[0;39m 生成今日电子书快照开始
2023-01-26 20:10:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997941977518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:10:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997941977518080[0;39m ==> Parameters: 
2023-01-26 20:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273997941977518080[0;39m <==    Updates: 0
2023-01-26 20:10:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273997941977518080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:10:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273997962961620992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:10:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997962961620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997962961620992[0;39m ==> Parameters: 
2023-01-26 20:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273997962961620992[0;39m <==    Updates: 1
2023-01-26 20:10:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273997962961620992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:10:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273998088794935296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:10:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998088794935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:10:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998088794935296[0;39m ==> Parameters: 
2023-01-26 20:10:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998088794935296[0;39m <==    Updates: 1
2023-01-26 20:10:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273998088794935296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:11:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273998193648340992[0;39m 生成今日电子书快照开始
2023-01-26 20:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998193648340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998193648340992[0;39m ==> Parameters: 
2023-01-26 20:11:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998193648340992[0;39m <==    Updates: 0
2023-01-26 20:11:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273998193648340992[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 20:11:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273998214653415424[0;39m 更新电子书下的文档数据开始
2023-01-26 20:11:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998214653415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:11:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998214653415424[0;39m ==> Parameters: 
2023-01-26 20:11:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998214653415424[0;39m <==    Updates: 1
2023-01-26 20:11:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273998214653415424[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:11:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273998340448980992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998340448980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998340448980992[0;39m ==> Parameters: 
2023-01-26 20:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998340448980992[0;39m <==    Updates: 1
2023-01-26 20:11:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273998340448980992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:12:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273998445306580992[0;39m 生成今日电子书快照开始
2023-01-26 20:12:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998445306580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:12:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998445306580992[0;39m ==> Parameters: 
2023-01-26 20:12:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998445306580992[0;39m <==    Updates: 0
2023-01-26 20:12:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273998445306580992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:12:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273998466269712384[0;39m 更新电子书下的文档数据开始
2023-01-26 20:12:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998466269712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:12:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998466269712384[0;39m ==> Parameters: 
2023-01-26 20:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998466269712384[0;39m <==    Updates: 1
2023-01-26 20:12:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273998466269712384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:12:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273998592111415296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:12:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998592111415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:12:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998592111415296[0;39m ==> Parameters: 
2023-01-26 20:12:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998592111415296[0;39m <==    Updates: 1
2023-01-26 20:12:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273998592111415296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:13:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273998696989986816[0;39m 生成今日电子书快照开始
2023-01-26 20:13:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998696989986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998696989986816[0;39m ==> Parameters: 
2023-01-26 20:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998696989986816[0;39m <==    Updates: 0
2023-01-26 20:13:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273998696989986816[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:13:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273998717923758080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998717923758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998717923758080[0;39m ==> Parameters: 
2023-01-26 20:13:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998717923758080[0;39m <==    Updates: 1
2023-01-26 20:13:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m273998717923758080[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:13:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273998843778043904[0;39m 更新电子书下的文档数据开始
2023-01-26 20:13:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998843778043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:13:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998843778043904[0;39m ==> Parameters: 
2023-01-26 20:13:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998843778043904[0;39m <==    Updates: 1
2023-01-26 20:13:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273998843778043904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:14:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273998948618866688[0;39m 生成今日电子书快照开始
2023-01-26 20:14:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998948618866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:14:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998948618866688[0;39m ==> Parameters: 
2023-01-26 20:14:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273998948618866688[0;39m <==    Updates: 0
2023-01-26 20:14:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273998948618866688[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 20:14:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273998969611358208[0;39m 更新电子书下的文档数据开始
2023-01-26 20:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998969611358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998969611358208[0;39m ==> Parameters: 
2023-01-26 20:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273998969611358208[0;39m <==    Updates: 1
2023-01-26 20:14:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273998969611358208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:14:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273999095427895296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:14:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999095427895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:14:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999095427895296[0;39m ==> Parameters: 
2023-01-26 20:14:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999095427895296[0;39m <==    Updates: 1
2023-01-26 20:14:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273999095427895296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:15:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273999200302272512[0;39m 生成今日电子书快照开始
2023-01-26 20:15:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999200302272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:15:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999200302272512[0;39m ==> Parameters: 
2023-01-26 20:15:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999200302272512[0;39m <==    Updates: 0
2023-01-26 20:15:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273999200302272512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 20:15:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273999221257015296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999221257015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999221257015296[0;39m ==> Parameters: 
2023-01-26 20:15:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999221257015296[0;39m <==    Updates: 1
2023-01-26 20:15:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m273999221257015296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:15:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273999347065163776[0;39m 更新电子书下的文档数据开始
2023-01-26 20:15:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999347065163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:15:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999347065163776[0;39m ==> Parameters: 
2023-01-26 20:15:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999347065163776[0;39m <==    Updates: 1
2023-01-26 20:15:35.002 INFO  com.example.wiki.job.DocJob                       :35   [32m273999347065163776[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:16:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273999451943735296[0;39m 生成今日电子书快照开始
2023-01-26 20:16:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999451943735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:16:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999451943735296[0;39m ==> Parameters: 
2023-01-26 20:16:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999451943735296[0;39m <==    Updates: 0
2023-01-26 20:16:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273999451943735296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:16:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273999472902672384[0;39m 更新电子书下的文档数据开始
2023-01-26 20:16:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999472902672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:16:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999472902672384[0;39m ==> Parameters: 
2023-01-26 20:16:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999472902672384[0;39m <==    Updates: 1
2023-01-26 20:16:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273999472902672384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:16:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273999598735986688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:16:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999598735986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:16:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999598735986688[0;39m ==> Parameters: 
2023-01-26 20:16:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999598735986688[0;39m <==    Updates: 1
2023-01-26 20:16:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273999598735986688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:17:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273999703593586688[0;39m 生成今日电子书快照开始
2023-01-26 20:17:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999703593586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:17:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999703593586688[0;39m ==> Parameters: 
2023-01-26 20:17:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999703593586688[0;39m <==    Updates: 0
2023-01-26 20:17:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273999703593586688[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:17:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273999724569300992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:17:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999724569300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:17:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999724569300992[0;39m ==> Parameters: 
2023-01-26 20:17:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999724569300992[0;39m <==    Updates: 1
2023-01-26 20:17:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273999724569300992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:17:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273999850394226688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:17:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999850394226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:17:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999850394226688[0;39m ==> Parameters: 
2023-01-26 20:17:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999850394226688[0;39m <==    Updates: 1
2023-01-26 20:17:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273999850394226688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:18:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273999955256020992[0;39m 生成今日电子书快照开始
2023-01-26 20:18:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999955256020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:18:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999955256020992[0;39m ==> Parameters: 
2023-01-26 20:18:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273999955256020992[0;39m <==    Updates: 0
2023-01-26 20:18:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273999955256020992[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 20:18:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273999976231735296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:18:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999976231735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999976231735296[0;39m ==> Parameters: 
2023-01-26 20:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273999976231735296[0;39m <==    Updates: 1
2023-01-26 20:18:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273999976231735296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:18:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274000102060855296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000102060855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:18:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000102060855296[0;39m ==> Parameters: 
2023-01-26 20:18:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000102060855296[0;39m <==    Updates: 1
2023-01-26 20:18:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274000102060855296[0;39m 更新电子书下的文档数据结束，耗时：9毫秒
2023-01-26 20:19:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274000206952009728[0;39m 生成今日电子书快照开始
2023-01-26 20:19:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000206952009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:19:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000206952009728[0;39m ==> Parameters: 
2023-01-26 20:19:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000206952009728[0;39m <==    Updates: 0
2023-01-26 20:19:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274000206952009728[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 20:19:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274000227898363904[0;39m 更新电子书下的文档数据开始
2023-01-26 20:19:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000227898363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000227898363904[0;39m ==> Parameters: 
2023-01-26 20:19:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000227898363904[0;39m <==    Updates: 1
2023-01-26 20:19:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274000227898363904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:19:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274000353735872512[0;39m 更新电子书下的文档数据开始
2023-01-26 20:19:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000353735872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:19:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000353735872512[0;39m ==> Parameters: 
2023-01-26 20:19:35.029 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000353735872512[0;39m <==    Updates: 1
2023-01-26 20:19:35.029 INFO  com.example.wiki.job.DocJob                       :35   [32m274000353735872512[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 20:20:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274000458576695296[0;39m 生成今日电子书快照开始
2023-01-26 20:20:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000458576695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:20:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000458576695296[0;39m ==> Parameters: 
2023-01-26 20:20:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000458576695296[0;39m <==    Updates: 0
2023-01-26 20:20:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274000458576695296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:20:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274000479556603904[0;39m 更新电子书下的文档数据开始
2023-01-26 20:20:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000479556603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:20:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000479556603904[0;39m ==> Parameters: 
2023-01-26 20:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000479556603904[0;39m <==    Updates: 1
2023-01-26 20:20:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274000479556603904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:20:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274000605368946688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000605368946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:20:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000605368946688[0;39m ==> Parameters: 
2023-01-26 20:20:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000605368946688[0;39m <==    Updates: 1
2023-01-26 20:20:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274000605368946688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:21:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274000710247518208[0;39m 生成今日电子书快照开始
2023-01-26 20:21:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000710247518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:21:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000710247518208[0;39m ==> Parameters: 
2023-01-26 20:21:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000710247518208[0;39m <==    Updates: 0
2023-01-26 20:21:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274000710247518208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:21:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274000731198066688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:21:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000731198066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:21:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000731198066688[0;39m ==> Parameters: 
2023-01-26 20:21:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000731198066688[0;39m <==    Updates: 1
2023-01-26 20:21:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274000731198066688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:21:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274000857035575296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:21:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000857035575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:21:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000857035575296[0;39m ==> Parameters: 
2023-01-26 20:21:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000857035575296[0;39m <==    Updates: 1
2023-01-26 20:21:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274000857035575296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:22:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274000961926729728[0;39m 生成今日电子书快照开始
2023-01-26 20:22:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000961926729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:22:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000961926729728[0;39m ==> Parameters: 
2023-01-26 20:22:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274000961926729728[0;39m <==    Updates: 0
2023-01-26 20:22:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274000961926729728[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:22:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274000982856306688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:22:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000982856306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:22:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000982856306688[0;39m ==> Parameters: 
2023-01-26 20:22:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274000982856306688[0;39m <==    Updates: 1
2023-01-26 20:22:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274000982856306688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:22:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274001108685426688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001108685426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001108685426688[0;39m ==> Parameters: 
2023-01-26 20:22:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001108685426688[0;39m <==    Updates: 1
2023-01-26 20:22:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274001108685426688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:23:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274001213576581120[0;39m 生成今日电子书快照开始
2023-01-26 20:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001213576581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:23:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001213576581120[0;39m ==> Parameters: 
2023-01-26 20:23:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001213576581120[0;39m <==    Updates: 0
2023-01-26 20:23:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274001213576581120[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:23:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274001234522935296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001234522935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001234522935296[0;39m ==> Parameters: 
2023-01-26 20:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001234522935296[0;39m <==    Updates: 1
2023-01-26 20:23:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274001234522935296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:23:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274001360373026816[0;39m 更新电子书下的文档数据开始
2023-01-26 20:23:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001360373026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:23:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001360373026816[0;39m ==> Parameters: 
2023-01-26 20:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001360373026816[0;39m <==    Updates: 1
2023-01-26 20:23:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274001360373026816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:24:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274001465243209728[0;39m 生成今日电子书快照开始
2023-01-26 20:24:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001465243209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:24:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001465243209728[0;39m ==> Parameters: 
2023-01-26 20:24:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001465243209728[0;39m <==    Updates: 0
2023-01-26 20:24:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274001465243209728[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 20:24:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274001486214729728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001486214729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001486214729728[0;39m ==> Parameters: 
2023-01-26 20:24:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001486214729728[0;39m <==    Updates: 1
2023-01-26 20:24:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274001486214729728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:24:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274001612035461120[0;39m 更新电子书下的文档数据开始
2023-01-26 20:24:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001612035461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:24:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001612035461120[0;39m ==> Parameters: 
2023-01-26 20:24:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001612035461120[0;39m <==    Updates: 1
2023-01-26 20:24:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274001612035461120[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:25:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274001716905644032[0;39m 生成今日电子书快照开始
2023-01-26 20:25:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001716905644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:25:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001716905644032[0;39m ==> Parameters: 
2023-01-26 20:25:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001716905644032[0;39m <==    Updates: 0
2023-01-26 20:25:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274001716905644032[0;39m 生成今日电子书快照结束，耗时：14毫秒
2023-01-26 20:25:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274001737839415296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001737839415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001737839415296[0;39m ==> Parameters: 
2023-01-26 20:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001737839415296[0;39m <==    Updates: 1
2023-01-26 20:25:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274001737839415296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:25:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274001863668535296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001863668535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001863668535296[0;39m ==> Parameters: 
2023-01-26 20:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001863668535296[0;39m <==    Updates: 1
2023-01-26 20:25:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274001863668535296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:26:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274001968526135296[0;39m 生成今日电子书快照开始
2023-01-26 20:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001968526135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001968526135296[0;39m ==> Parameters: 
2023-01-26 20:26:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274001968526135296[0;39m <==    Updates: 0
2023-01-26 20:26:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274001968526135296[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 20:26:05.021 INFO  com.example.wiki.job.DocJob                       :32   [32m274001989556375552[0;39m 更新电子书下的文档数据开始
2023-01-26 20:26:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001989556375552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:26:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001989556375552[0;39m ==> Parameters: 
2023-01-26 20:26:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274001989556375552[0;39m <==    Updates: 1
2023-01-26 20:26:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m274001989556375552[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:26:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274002115326775296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:26:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002115326775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:26:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002115326775296[0;39m ==> Parameters: 
2023-01-26 20:26:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002115326775296[0;39m <==    Updates: 1
2023-01-26 20:26:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274002115326775296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:27:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274002220192763904[0;39m 生成今日电子书快照开始
2023-01-26 20:27:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002220192763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:27:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002220192763904[0;39m ==> Parameters: 
2023-01-26 20:27:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002220192763904[0;39m <==    Updates: 0
2023-01-26 20:27:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274002220192763904[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 20:27:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274002241189449728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002241189449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002241189449728[0;39m ==> Parameters: 
2023-01-26 20:27:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002241189449728[0;39m <==    Updates: 1
2023-01-26 20:27:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274002241189449728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:27:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274002366985015296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002366985015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002366985015296[0;39m ==> Parameters: 
2023-01-26 20:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002366985015296[0;39m <==    Updates: 1
2023-01-26 20:27:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274002366985015296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:28:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274002471830032384[0;39m 生成今日电子书快照开始
2023-01-26 20:28:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002471830032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:28:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002471830032384[0;39m ==> Parameters: 
2023-01-26 20:28:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002471830032384[0;39m <==    Updates: 0
2023-01-26 20:28:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274002471830032384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:28:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274002492814135296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002492814135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002492814135296[0;39m ==> Parameters: 
2023-01-26 20:28:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002492814135296[0;39m <==    Updates: 1
2023-01-26 20:28:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274002492814135296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:28:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274002618676809728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002618676809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002618676809728[0;39m ==> Parameters: 
2023-01-26 20:28:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002618676809728[0;39m <==    Updates: 1
2023-01-26 20:28:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274002618676809728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:29:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274002723521826816[0;39m 生成今日电子书快照开始
2023-01-26 20:29:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002723521826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:29:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002723521826816[0;39m ==> Parameters: 
2023-01-26 20:29:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002723521826816[0;39m <==    Updates: 0
2023-01-26 20:29:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274002723521826816[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 20:29:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274002744505929728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:29:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002744505929728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:29:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002744505929728[0;39m ==> Parameters: 
2023-01-26 20:29:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002744505929728[0;39m <==    Updates: 1
2023-01-26 20:29:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274002744505929728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:29:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274002870343438336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002870343438336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002870343438336[0;39m ==> Parameters: 
2023-01-26 20:29:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002870343438336[0;39m <==    Updates: 1
2023-01-26 20:29:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274002870343438336[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:30:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274002975205232640[0;39m 生成今日电子书快照开始
2023-01-26 20:30:00.047 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002975205232640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:30:00.051 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002975205232640[0;39m ==> Parameters: 
2023-01-26 20:30:00.062 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274002975205232640[0;39m <==    Updates: 0
2023-01-26 20:30:00.062 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274002975205232640[0;39m 生成今日电子书快照结束，耗时：43毫秒
2023-01-26 20:30:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274002996122226688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002996122226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002996122226688[0;39m ==> Parameters: 
2023-01-26 20:30:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274002996122226688[0;39m <==    Updates: 1
2023-01-26 20:30:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274002996122226688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:30:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274003121959735296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003121959735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:30:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003121959735296[0;39m ==> Parameters: 
2023-01-26 20:30:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003121959735296[0;39m <==    Updates: 1
2023-01-26 20:30:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274003121959735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:31:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274003226821529600[0;39m 生成今日电子书快照开始
2023-01-26 20:31:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003226821529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:31:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003226821529600[0;39m ==> Parameters: 
2023-01-26 20:31:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003226821529600[0;39m <==    Updates: 0
2023-01-26 20:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274003226821529600[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:31:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274003247788855296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:31:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003247788855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:31:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003247788855296[0;39m ==> Parameters: 
2023-01-26 20:31:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003247788855296[0;39m <==    Updates: 1
2023-01-26 20:31:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274003247788855296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:31:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274003373651529728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:31:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003373651529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:31:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003373651529728[0;39m ==> Parameters: 
2023-01-26 20:31:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003373651529728[0;39m <==    Updates: 1
2023-01-26 20:31:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274003373651529728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:32:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274003478492352512[0;39m 生成今日电子书快照开始
2023-01-26 20:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003478492352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:32:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003478492352512[0;39m ==> Parameters: 
2023-01-26 20:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003478492352512[0;39m <==    Updates: 0
2023-01-26 20:32:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274003478492352512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 20:32:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274003499447095296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:32:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003499447095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:32:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003499447095296[0;39m ==> Parameters: 
2023-01-26 20:32:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003499447095296[0;39m <==    Updates: 1
2023-01-26 20:32:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274003499447095296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:32:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274003625297186816[0;39m 更新电子书下的文档数据开始
2023-01-26 20:32:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003625297186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:32:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003625297186816[0;39m ==> Parameters: 
2023-01-26 20:32:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003625297186816[0;39m <==    Updates: 1
2023-01-26 20:32:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274003625297186816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:33:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274003730133815296[0;39m 生成今日电子书快照开始
2023-01-26 20:33:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003730133815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:33:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003730133815296[0;39m ==> Parameters: 
2023-01-26 20:33:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003730133815296[0;39m <==    Updates: 0
2023-01-26 20:33:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274003730133815296[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 20:33:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274003751105335296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:33:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003751105335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:33:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003751105335296[0;39m ==> Parameters: 
2023-01-26 20:33:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003751105335296[0;39m <==    Updates: 1
2023-01-26 20:33:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274003751105335296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:33:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274003876917678080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003876917678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003876917678080[0;39m ==> Parameters: 
2023-01-26 20:33:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274003876917678080[0;39m <==    Updates: 1
2023-01-26 20:33:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274003876917678080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:34:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274003981775278080[0;39m 生成今日电子书快照开始
2023-01-26 20:34:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003981775278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:34:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003981775278080[0;39m ==> Parameters: 
2023-01-26 20:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274003981775278080[0;39m <==    Updates: 0
2023-01-26 20:34:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274003981775278080[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:34:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274004002746798080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:34:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004002746798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:34:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004002746798080[0;39m ==> Parameters: 
2023-01-26 20:34:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004002746798080[0;39m <==    Updates: 1
2023-01-26 20:34:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274004002746798080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 20:34:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274004128634638336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:34:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004128634638336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:34:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004128634638336[0;39m ==> Parameters: 
2023-01-26 20:34:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004128634638336[0;39m <==    Updates: 1
2023-01-26 20:34:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274004128634638336[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:35:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274004233504821248[0;39m 生成今日电子书快照开始
2023-01-26 20:35:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004233504821248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:35:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004233504821248[0;39m ==> Parameters: 
2023-01-26 20:35:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004233504821248[0;39m <==    Updates: 0
2023-01-26 20:35:00.033 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274004233504821248[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 20:35:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274004254421815296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:35:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004254421815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:35:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004254421815296[0;39m ==> Parameters: 
2023-01-26 20:35:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004254421815296[0;39m <==    Updates: 1
2023-01-26 20:35:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274004254421815296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:35:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274004380246740992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:35:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004380246740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:35:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004380246740992[0;39m ==> Parameters: 
2023-01-26 20:35:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004380246740992[0;39m <==    Updates: 1
2023-01-26 20:35:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274004380246740992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:36:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274004485108535296[0;39m 生成今日电子书快照开始
2023-01-26 20:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004485108535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004485108535296[0;39m ==> Parameters: 
2023-01-26 20:36:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004485108535296[0;39m <==    Updates: 0
2023-01-26 20:36:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274004485108535296[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 20:36:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274004506054889472[0;39m 更新电子书下的文档数据开始
2023-01-26 20:36:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004506054889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:36:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004506054889472[0;39m ==> Parameters: 
2023-01-26 20:36:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004506054889472[0;39m <==    Updates: 1
2023-01-26 20:36:05.002 INFO  com.example.wiki.job.DocJob                       :35   [32m274004506054889472[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:36:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274004631921758208[0;39m 更新电子书下的文档数据开始
2023-01-26 20:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004631921758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004631921758208[0;39m ==> Parameters: 
2023-01-26 20:36:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004631921758208[0;39m <==    Updates: 1
2023-01-26 20:36:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274004631921758208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:37:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274004736758386688[0;39m 生成今日电子书快照开始
2023-01-26 20:37:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004736758386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:37:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004736758386688[0;39m ==> Parameters: 
2023-01-26 20:37:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004736758386688[0;39m <==    Updates: 0
2023-01-26 20:37:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274004736758386688[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:37:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274004757738295296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:37:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004757738295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:37:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004757738295296[0;39m ==> Parameters: 
2023-01-26 20:37:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004757738295296[0;39m <==    Updates: 1
2023-01-26 20:37:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274004757738295296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:37:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274004883567415296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:37:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004883567415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:37:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004883567415296[0;39m ==> Parameters: 
2023-01-26 20:37:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274004883567415296[0;39m <==    Updates: 1
2023-01-26 20:37:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274004883567415296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:38:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274004988437598208[0;39m 生成今日电子书快照开始
2023-01-26 20:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004988437598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004988437598208[0;39m ==> Parameters: 
2023-01-26 20:38:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274004988437598208[0;39m <==    Updates: 0
2023-01-26 20:38:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274004988437598208[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 20:38:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274005009430089728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005009430089728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:38:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005009430089728[0;39m ==> Parameters: 
2023-01-26 20:38:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005009430089728[0;39m <==    Updates: 1
2023-01-26 20:38:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274005009430089728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:38:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274005135225655296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:38:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005135225655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:38:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005135225655296[0;39m ==> Parameters: 
2023-01-26 20:38:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005135225655296[0;39m <==    Updates: 1
2023-01-26 20:38:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274005135225655296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:39:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274005240070672384[0;39m 生成今日电子书快照开始
2023-01-26 20:39:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005240070672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005240070672384[0;39m ==> Parameters: 
2023-01-26 20:39:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005240070672384[0;39m <==    Updates: 0
2023-01-26 20:39:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274005240070672384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:39:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274005261033803776[0;39m 更新电子书下的文档数据开始
2023-01-26 20:39:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005261033803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:39:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005261033803776[0;39m ==> Parameters: 
2023-01-26 20:39:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005261033803776[0;39m <==    Updates: 1
2023-01-26 20:39:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274005261033803776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:39:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274005386862923776[0;39m 更新电子书下的文档数据开始
2023-01-26 20:39:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005386862923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:39:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005386862923776[0;39m ==> Parameters: 
2023-01-26 20:39:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005386862923776[0;39m <==    Updates: 1
2023-01-26 20:39:35.002 INFO  com.example.wiki.job.DocJob                       :35   [32m274005386862923776[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:40:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274005491733106688[0;39m 生成今日电子书快照开始
2023-01-26 20:40:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005491733106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:40:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005491733106688[0;39m ==> Parameters: 
2023-01-26 20:40:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005491733106688[0;39m <==    Updates: 0
2023-01-26 20:40:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274005491733106688[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:40:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274005512725598208[0;39m 更新电子书下的文档数据开始
2023-01-26 20:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005512725598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005512725598208[0;39m ==> Parameters: 
2023-01-26 20:40:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005512725598208[0;39m <==    Updates: 1
2023-01-26 20:40:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274005512725598208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:40:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274005638542135296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:40:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005638542135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:40:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005638542135296[0;39m ==> Parameters: 
2023-01-26 20:40:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005638542135296[0;39m <==    Updates: 1
2023-01-26 20:40:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274005638542135296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:41:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274005743391346688[0;39m 生成今日电子书快照开始
2023-01-26 20:41:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005743391346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005743391346688[0;39m ==> Parameters: 
2023-01-26 20:41:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005743391346688[0;39m <==    Updates: 0
2023-01-26 20:41:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274005743391346688[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:41:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274005764413198336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:41:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005764413198336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:41:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005764413198336[0;39m ==> Parameters: 
2023-01-26 20:41:05.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005764413198336[0;39m <==    Updates: 1
2023-01-26 20:41:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m274005764413198336[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:41:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274005890179403776[0;39m 更新电子书下的文档数据开始
2023-01-26 20:41:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005890179403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:41:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005890179403776[0;39m ==> Parameters: 
2023-01-26 20:41:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274005890179403776[0;39m <==    Updates: 1
2023-01-26 20:41:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274005890179403776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:42:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274005995049586688[0;39m 生成今日电子书快照开始
2023-01-26 20:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005995049586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005995049586688[0;39m ==> Parameters: 
2023-01-26 20:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274005995049586688[0;39m <==    Updates: 0
2023-01-26 20:42:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274005995049586688[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:42:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274006016058855424[0;39m 更新电子书下的文档数据开始
2023-01-26 20:42:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006016058855424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:42:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006016058855424[0;39m ==> Parameters: 
2023-01-26 20:42:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006016058855424[0;39m <==    Updates: 1
2023-01-26 20:42:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274006016058855424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:42:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274006141883781120[0;39m 更新电子书下的文档数据开始
2023-01-26 20:42:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006141883781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:42:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006141883781120[0;39m ==> Parameters: 
2023-01-26 20:42:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006141883781120[0;39m <==    Updates: 1
2023-01-26 20:42:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274006141883781120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:43:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274006246758158336[0;39m 生成今日电子书快照开始
2023-01-26 20:43:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006246758158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:43:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006246758158336[0;39m ==> Parameters: 
2023-01-26 20:43:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006246758158336[0;39m <==    Updates: 0
2023-01-26 20:43:00.032 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274006246758158336[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 20:43:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274006267670958080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006267670958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:43:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006267670958080[0;39m ==> Parameters: 
2023-01-26 20:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006267670958080[0;39m <==    Updates: 1
2023-01-26 20:43:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274006267670958080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:43:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274006393491689472[0;39m 更新电子书下的文档数据开始
2023-01-26 20:43:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006393491689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:43:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006393491689472[0;39m ==> Parameters: 
2023-01-26 20:43:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006393491689472[0;39m <==    Updates: 1
2023-01-26 20:43:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274006393491689472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:44:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274006498374455296[0;39m 生成今日电子书快照开始
2023-01-26 20:44:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006498374455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:44:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006498374455296[0;39m ==> Parameters: 
2023-01-26 20:44:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006498374455296[0;39m <==    Updates: 0
2023-01-26 20:44:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274006498374455296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:44:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274006519387918336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:44:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006519387918336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:44:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006519387918336[0;39m ==> Parameters: 
2023-01-26 20:44:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006519387918336[0;39m <==    Updates: 1
2023-01-26 20:44:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274006519387918336[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:44:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274006645175095296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:44:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006645175095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:44:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006645175095296[0;39m ==> Parameters: 
2023-01-26 20:44:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006645175095296[0;39m <==    Updates: 1
2023-01-26 20:44:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274006645175095296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:45:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274006750028500992[0;39m 生成今日电子书快照开始
2023-01-26 20:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006750028500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:45:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006750028500992[0;39m ==> Parameters: 
2023-01-26 20:45:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274006750028500992[0;39m <==    Updates: 0
2023-01-26 20:45:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274006750028500992[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:45:05.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274006771046158336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006771046158336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006771046158336[0;39m ==> Parameters: 
2023-01-26 20:45:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006771046158336[0;39m <==    Updates: 1
2023-01-26 20:45:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274006771046158336[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:45:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274006896824946688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:45:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006896824946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:45:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006896824946688[0;39m ==> Parameters: 
2023-01-26 20:45:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274006896824946688[0;39m <==    Updates: 1
2023-01-26 20:45:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274006896824946688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:46:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274007001686740992[0;39m 生成今日电子书快照开始
2023-01-26 20:46:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007001686740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:46:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007001686740992[0;39m ==> Parameters: 
2023-01-26 20:46:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007001686740992[0;39m <==    Updates: 0
2023-01-26 20:46:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274007001686740992[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:46:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274007022645678080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:46:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007022645678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:46:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007022645678080[0;39m ==> Parameters: 
2023-01-26 20:46:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007022645678080[0;39m <==    Updates: 1
2023-01-26 20:46:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274007022645678080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:46:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274007148483186688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007148483186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:46:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007148483186688[0;39m ==> Parameters: 
2023-01-26 20:46:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007148483186688[0;39m <==    Updates: 1
2023-01-26 20:46:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274007148483186688[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:47:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274007253349175296[0;39m 生成今日电子书快照开始
2023-01-26 20:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007253349175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007253349175296[0;39m ==> Parameters: 
2023-01-26 20:47:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007253349175296[0;39m <==    Updates: 0
2023-01-26 20:47:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274007253349175296[0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-01-26 20:47:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274007274329083904[0;39m 更新电子书下的文档数据开始
2023-01-26 20:47:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007274329083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:47:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007274329083904[0;39m ==> Parameters: 
2023-01-26 20:47:05.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007274329083904[0;39m <==    Updates: 1
2023-01-26 20:47:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m274007274329083904[0;39m 更新电子书下的文档数据结束，耗时：14毫秒
2023-01-26 20:47:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274007400145620992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:47:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007400145620992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:47:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007400145620992[0;39m ==> Parameters: 
2023-01-26 20:47:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007400145620992[0;39m <==    Updates: 1
2023-01-26 20:47:35.021 INFO  com.example.wiki.job.DocJob                       :35   [32m274007400145620992[0;39m 更新电子书下的文档数据结束，耗时：15毫秒
2023-01-26 20:48:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274007504986443776[0;39m 生成今日电子书快照开始
2023-01-26 20:48:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007504986443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:48:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007504986443776[0;39m ==> Parameters: 
2023-01-26 20:48:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007504986443776[0;39m <==    Updates: 0
2023-01-26 20:48:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274007504986443776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:48:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274007525962158080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:48:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007525962158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:48:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007525962158080[0;39m ==> Parameters: 
2023-01-26 20:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007525962158080[0;39m <==    Updates: 1
2023-01-26 20:48:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274007525962158080[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 20:48:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274007651803860992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007651803860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007651803860992[0;39m ==> Parameters: 
2023-01-26 20:48:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007651803860992[0;39m <==    Updates: 1
2023-01-26 20:48:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274007651803860992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:49:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274007756665655296[0;39m 生成今日电子书快照开始
2023-01-26 20:49:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007756665655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007756665655296[0;39m ==> Parameters: 
2023-01-26 20:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274007756665655296[0;39m <==    Updates: 0
2023-01-26 20:49:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274007756665655296[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:49:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274007777637175296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007777637175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:49:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007777637175296[0;39m ==> Parameters: 
2023-01-26 20:49:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007777637175296[0;39m <==    Updates: 1
2023-01-26 20:49:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274007777637175296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:49:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274007903474683904[0;39m 更新电子书下的文档数据开始
2023-01-26 20:49:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007903474683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:49:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007903474683904[0;39m ==> Parameters: 
2023-01-26 20:49:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274007903474683904[0;39m <==    Updates: 1
2023-01-26 20:49:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274007903474683904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:50:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274008008344866816[0;39m 生成今日电子书快照开始
2023-01-26 20:50:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008008344866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:50:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008008344866816[0;39m ==> Parameters: 
2023-01-26 20:50:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008008344866816[0;39m <==    Updates: 0
2023-01-26 20:50:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274008008344866816[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 20:50:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274008029320581120[0;39m 更新电子书下的文档数据开始
2023-01-26 20:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008029320581120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:50:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008029320581120[0;39m ==> Parameters: 
2023-01-26 20:50:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008029320581120[0;39m <==    Updates: 1
2023-01-26 20:50:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274008029320581120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:50:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274008155166478336[0;39m 更新电子书下的文档数据开始
2023-01-26 20:50:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008155166478336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:50:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008155166478336[0;39m ==> Parameters: 
2023-01-26 20:50:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008155166478336[0;39m <==    Updates: 1
2023-01-26 20:50:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274008155166478336[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:51:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274008259969552384[0;39m 生成今日电子书快照开始
2023-01-26 20:51:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008259969552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:51:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008259969552384[0;39m ==> Parameters: 
2023-01-26 20:51:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008259969552384[0;39m <==    Updates: 0
2023-01-26 20:51:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274008259969552384[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 20:51:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274008280945266688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:51:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008280945266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:51:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008280945266688[0;39m ==> Parameters: 
2023-01-26 20:51:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008280945266688[0;39m <==    Updates: 1
2023-01-26 20:51:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274008280945266688[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:51:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274008406782775296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:51:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008406782775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:51:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008406782775296[0;39m ==> Parameters: 
2023-01-26 20:51:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008406782775296[0;39m <==    Updates: 1
2023-01-26 20:51:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274008406782775296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:52:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274008511615209472[0;39m 生成今日电子书快照开始
2023-01-26 20:52:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008511615209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:52:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008511615209472[0;39m ==> Parameters: 
2023-01-26 20:52:00.001 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008511615209472[0;39m <==    Updates: 0
2023-01-26 20:52:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274008511615209472[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 20:52:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274008532645449728[0;39m 更新电子书下的文档数据开始
2023-01-26 20:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008532645449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008532645449728[0;39m ==> Parameters: 
2023-01-26 20:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008532645449728[0;39m <==    Updates: 1
2023-01-26 20:52:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274008532645449728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:52:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274008658441015296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:52:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008658441015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:52:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008658441015296[0;39m ==> Parameters: 
2023-01-26 20:52:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008658441015296[0;39m <==    Updates: 1
2023-01-26 20:52:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274008658441015296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:53:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274008763290226688[0;39m 生成今日电子书快照开始
2023-01-26 20:53:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008763290226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:53:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008763290226688[0;39m ==> Parameters: 
2023-01-26 20:53:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274008763290226688[0;39m <==    Updates: 0
2023-01-26 20:53:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274008763290226688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 20:53:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274008784265940992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008784265940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008784265940992[0;39m ==> Parameters: 
2023-01-26 20:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008784265940992[0;39m <==    Updates: 1
2023-01-26 20:53:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274008784265940992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 20:53:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274008910137004032[0;39m 更新电子书下的文档数据开始
2023-01-26 20:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008910137004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008910137004032[0;39m ==> Parameters: 
2023-01-26 20:53:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274008910137004032[0;39m <==    Updates: 1
2023-01-26 20:53:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274008910137004032[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 20:54:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274009014965243904[0;39m 生成今日电子书快照开始
2023-01-26 20:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009014965243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:54:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009014965243904[0;39m ==> Parameters: 
2023-01-26 20:54:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009014965243904[0;39m <==    Updates: 0
2023-01-26 20:54:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274009014965243904[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 20:54:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274009035919986688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:54:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009035919986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:54:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009035919986688[0;39m ==> Parameters: 
2023-01-26 20:54:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009035919986688[0;39m <==    Updates: 1
2023-01-26 20:54:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274009035919986688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:54:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274009161757495296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:54:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009161757495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:54:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009161757495296[0;39m ==> Parameters: 
2023-01-26 20:54:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009161757495296[0;39m <==    Updates: 1
2023-01-26 20:54:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274009161757495296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:55:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274009266615095296[0;39m 生成今日电子书快照开始
2023-01-26 20:55:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009266615095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:55:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009266615095296[0;39m ==> Parameters: 
2023-01-26 20:55:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009266615095296[0;39m <==    Updates: 0
2023-01-26 20:55:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274009266615095296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 20:55:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274009287578226688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009287578226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009287578226688[0;39m ==> Parameters: 
2023-01-26 20:55:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009287578226688[0;39m <==    Updates: 1
2023-01-26 20:55:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274009287578226688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:55:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274009413407346688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:55:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009413407346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:55:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009413407346688[0;39m ==> Parameters: 
2023-01-26 20:55:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009413407346688[0;39m <==    Updates: 1
2023-01-26 20:55:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274009413407346688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 20:56:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274009518281723904[0;39m 生成今日电子书快照开始
2023-01-26 20:56:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009518281723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009518281723904[0;39m ==> Parameters: 
2023-01-26 20:56:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009518281723904[0;39m <==    Updates: 0
2023-01-26 20:56:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274009518281723904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 20:56:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274009539228078080[0;39m 更新电子书下的文档数据开始
2023-01-26 20:56:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009539228078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:56:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009539228078080[0;39m ==> Parameters: 
2023-01-26 20:56:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009539228078080[0;39m <==    Updates: 1
2023-01-26 20:56:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274009539228078080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:56:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274009665069780992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:56:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009665069780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:56:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009665069780992[0;39m ==> Parameters: 
2023-01-26 20:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009665069780992[0;39m <==    Updates: 1
2023-01-26 20:56:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274009665069780992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:57:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274009769918992384[0;39m 生成今日电子书快照开始
2023-01-26 20:57:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009769918992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:57:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009769918992384[0;39m ==> Parameters: 
2023-01-26 20:57:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274009769918992384[0;39m <==    Updates: 0
2023-01-26 20:57:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274009769918992384[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 20:57:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274009790903095296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009790903095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009790903095296[0;39m ==> Parameters: 
2023-01-26 20:57:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009790903095296[0;39m <==    Updates: 1
2023-01-26 20:57:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274009790903095296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:57:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274009916728020992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:57:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009916728020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:57:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009916728020992[0;39m ==> Parameters: 
2023-01-26 20:57:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274009916728020992[0;39m <==    Updates: 1
2023-01-26 20:57:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274009916728020992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:58:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274010021602398208[0;39m 生成今日电子书快照开始
2023-01-26 20:58:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010021602398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:58:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010021602398208[0;39m ==> Parameters: 
2023-01-26 20:58:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010021602398208[0;39m <==    Updates: 0
2023-01-26 20:58:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274010021602398208[0;39m 生成今日电子书快照结束，耗时：15毫秒
2023-01-26 20:58:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274010042552946688[0;39m 更新电子书下的文档数据开始
2023-01-26 20:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010042552946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010042552946688[0;39m ==> Parameters: 
2023-01-26 20:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010042552946688[0;39m <==    Updates: 1
2023-01-26 20:58:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274010042552946688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 20:58:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274010168386260992[0;39m 更新电子书下的文档数据开始
2023-01-26 20:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010168386260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010168386260992[0;39m ==> Parameters: 
2023-01-26 20:58:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010168386260992[0;39m <==    Updates: 1
2023-01-26 20:58:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274010168386260992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:59:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274010273248055296[0;39m 生成今日电子书快照开始
2023-01-26 20:59:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010273248055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 20:59:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010273248055296[0;39m ==> Parameters: 
2023-01-26 20:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010273248055296[0;39m <==    Updates: 0
2023-01-26 20:59:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274010273248055296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 20:59:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274010294219575296[0;39m 更新电子书下的文档数据开始
2023-01-26 20:59:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010294219575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:59:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010294219575296[0;39m ==> Parameters: 
2023-01-26 20:59:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010294219575296[0;39m <==    Updates: 1
2023-01-26 20:59:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274010294219575296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 20:59:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274010420061278208[0;39m 更新电子书下的文档数据开始
2023-01-26 20:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010420061278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 20:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010420061278208[0;39m ==> Parameters: 
2023-01-26 20:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010420061278208[0;39m <==    Updates: 1
2023-01-26 20:59:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274010420061278208[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:00:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274010524897906688[0;39m 生成今日电子书快照开始
2023-01-26 21:00:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010524897906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:00:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010524897906688[0;39m ==> Parameters: 
2023-01-26 21:00:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010524897906688[0;39m <==    Updates: 0
2023-01-26 21:00:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274010524897906688[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 21:00:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274010545877815296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010545877815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:00:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010545877815296[0;39m ==> Parameters: 
2023-01-26 21:00:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010545877815296[0;39m <==    Updates: 1
2023-01-26 21:00:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274010545877815296[0;39m 更新电子书下的文档数据结束，耗时：11毫秒
2023-01-26 21:00:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274010671706935296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:00:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010671706935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010671706935296[0;39m ==> Parameters: 
2023-01-26 21:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010671706935296[0;39m <==    Updates: 1
2023-01-26 21:00:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274010671706935296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 21:01:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274010776593895424[0;39m 生成今日电子书快照开始
2023-01-26 21:01:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010776593895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:01:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010776593895424[0;39m ==> Parameters: 
2023-01-26 21:01:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274010776593895424[0;39m <==    Updates: 0
2023-01-26 21:01:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274010776593895424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 21:01:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274010797536055296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:01:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010797536055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:01:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010797536055296[0;39m ==> Parameters: 
2023-01-26 21:01:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010797536055296[0;39m <==    Updates: 1
2023-01-26 21:01:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274010797536055296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:01:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274010923365175296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:01:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010923365175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:01:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010923365175296[0;39m ==> Parameters: 
2023-01-26 21:01:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274010923365175296[0;39m <==    Updates: 1
2023-01-26 21:01:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274010923365175296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:02:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274011028243746816[0;39m 生成今日电子书快照开始
2023-01-26 21:02:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011028243746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:02:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011028243746816[0;39m ==> Parameters: 
2023-01-26 21:02:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011028243746816[0;39m <==    Updates: 0
2023-01-26 21:02:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274011028243746816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:02:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274011049194295296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011049194295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011049194295296[0;39m ==> Parameters: 
2023-01-26 21:02:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011049194295296[0;39m <==    Updates: 1
2023-01-26 21:02:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274011049194295296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:02:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274011175023415296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:02:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011175023415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:02:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011175023415296[0;39m ==> Parameters: 
2023-01-26 21:02:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011175023415296[0;39m <==    Updates: 1
2023-01-26 21:02:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274011175023415296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:03:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274011279914569728[0;39m 生成今日电子书快照开始
2023-01-26 21:03:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011279914569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:03:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011279914569728[0;39m ==> Parameters: 
2023-01-26 21:03:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011279914569728[0;39m <==    Updates: 0
2023-01-26 21:03:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274011279914569728[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 21:03:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274011300852535296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011300852535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011300852535296[0;39m ==> Parameters: 
2023-01-26 21:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011300852535296[0;39m <==    Updates: 1
2023-01-26 21:03:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274011300852535296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:03:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274011426681655296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011426681655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011426681655296[0;39m ==> Parameters: 
2023-01-26 21:03:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011426681655296[0;39m <==    Updates: 1
2023-01-26 21:03:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274011426681655296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:04:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274011531556032512[0;39m 生成今日电子书快照开始
2023-01-26 21:04:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011531556032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:04:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011531556032512[0;39m ==> Parameters: 
2023-01-26 21:04:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011531556032512[0;39m <==    Updates: 0
2023-01-26 21:04:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274011531556032512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 21:04:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274011552544329728[0;39m 更新电子书下的文档数据开始
2023-01-26 21:04:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011552544329728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:04:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011552544329728[0;39m ==> Parameters: 
2023-01-26 21:04:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011552544329728[0;39m <==    Updates: 1
2023-01-26 21:04:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274011552544329728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:04:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274011678356672512[0;39m 更新电子书下的文档数据开始
2023-01-26 21:04:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011678356672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:04:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011678356672512[0;39m ==> Parameters: 
2023-01-26 21:04:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011678356672512[0;39m <==    Updates: 1
2023-01-26 21:04:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274011678356672512[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274011783197495296[0;39m 生成今日电子书快照开始
2023-01-26 21:05:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011783197495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:05:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011783197495296[0;39m ==> Parameters: 
2023-01-26 21:05:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274011783197495296[0;39m <==    Updates: 0
2023-01-26 21:05:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274011783197495296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:05:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274011804177403904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011804177403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011804177403904[0;39m ==> Parameters: 
2023-01-26 21:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011804177403904[0;39m <==    Updates: 1
2023-01-26 21:05:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274011804177403904[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 21:05:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274011929998135296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011929998135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:05:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011929998135296[0;39m ==> Parameters: 
2023-01-26 21:05:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274011929998135296[0;39m <==    Updates: 1
2023-01-26 21:05:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274011929998135296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:06:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274012034885095424[0;39m 生成今日电子书快照开始
2023-01-26 21:06:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012034885095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:06:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012034885095424[0;39m ==> Parameters: 
2023-01-26 21:06:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012034885095424[0;39m <==    Updates: 0
2023-01-26 21:06:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274012034885095424[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 21:06:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274012055818866688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:06:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012055818866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:06:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012055818866688[0;39m ==> Parameters: 
2023-01-26 21:06:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012055818866688[0;39m <==    Updates: 1
2023-01-26 21:06:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012055818866688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:06:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274012181647986688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:06:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012181647986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012181647986688[0;39m ==> Parameters: 
2023-01-26 21:06:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012181647986688[0;39m <==    Updates: 1
2023-01-26 21:06:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012181647986688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:07:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274012286543335424[0;39m 生成今日电子书快照开始
2023-01-26 21:07:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012286543335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:07:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012286543335424[0;39m ==> Parameters: 
2023-01-26 21:07:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012286543335424[0;39m <==    Updates: 0
2023-01-26 21:07:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274012286543335424[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 21:07:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274012307481300992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012307481300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012307481300992[0;39m ==> Parameters: 
2023-01-26 21:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012307481300992[0;39m <==    Updates: 1
2023-01-26 21:07:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012307481300992[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 21:07:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274012433335586816[0;39m 更新电子书下的文档数据开始
2023-01-26 21:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012433335586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012433335586816[0;39m ==> Parameters: 
2023-01-26 21:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012433335586816[0;39m <==    Updates: 1
2023-01-26 21:07:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274012433335586816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:08:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274012538205769728[0;39m 生成今日电子书快照开始
2023-01-26 21:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012538205769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012538205769728[0;39m ==> Parameters: 
2023-01-26 21:08:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012538205769728[0;39m <==    Updates: 0
2023-01-26 21:08:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274012538205769728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 21:08:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274012559139540992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:08:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012559139540992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:08:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012559139540992[0;39m ==> Parameters: 
2023-01-26 21:08:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012559139540992[0;39m <==    Updates: 1
2023-01-26 21:08:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012559139540992[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:08:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m274012685014798336[0;39m 更新电子书下的文档数据开始
2023-01-26 21:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012685014798336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012685014798336[0;39m ==> Parameters: 
2023-01-26 21:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012685014798336[0;39m <==    Updates: 1
2023-01-26 21:08:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274012685014798336[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:09:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274012789830455296[0;39m 生成今日电子书快照开始
2023-01-26 21:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012789830455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012789830455296[0;39m ==> Parameters: 
2023-01-26 21:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274012789830455296[0;39m <==    Updates: 0
2023-01-26 21:09:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274012789830455296[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 21:09:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274012810793586688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:09:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012810793586688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012810793586688[0;39m ==> Parameters: 
2023-01-26 21:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012810793586688[0;39m <==    Updates: 1
2023-01-26 21:09:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012810793586688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:09:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274012936631095296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:09:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012936631095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:09:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012936631095296[0;39m ==> Parameters: 
2023-01-26 21:09:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274012936631095296[0;39m <==    Updates: 1
2023-01-26 21:09:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274012936631095296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:10:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274013041522249728[0;39m 生成今日电子书快照开始
2023-01-26 21:10:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013041522249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013041522249728[0;39m ==> Parameters: 
2023-01-26 21:10:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013041522249728[0;39m <==    Updates: 0
2023-01-26 21:10:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274013041522249728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 21:10:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274013062460215296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013062460215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013062460215296[0;39m ==> Parameters: 
2023-01-26 21:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013062460215296[0;39m <==    Updates: 1
2023-01-26 21:10:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274013062460215296[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 21:10:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274013188289335296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013188289335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:10:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013188289335296[0;39m ==> Parameters: 
2023-01-26 21:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013188289335296[0;39m <==    Updates: 1
2023-01-26 21:10:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274013188289335296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274013293155323904[0;39m 生成今日电子书快照开始
2023-01-26 21:11:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013293155323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:11:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013293155323904[0;39m ==> Parameters: 
2023-01-26 21:11:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013293155323904[0;39m <==    Updates: 0
2023-01-26 21:11:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274013293155323904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 21:11:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274013314101678080[0;39m 更新电子书下的文档数据开始
2023-01-26 21:11:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013314101678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:11:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013314101678080[0;39m ==> Parameters: 
2023-01-26 21:11:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013314101678080[0;39m <==    Updates: 1
2023-01-26 21:11:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274013314101678080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:11:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274013439964352512[0;39m 更新电子书下的文档数据开始
2023-01-26 21:11:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013439964352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:11:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013439964352512[0;39m ==> Parameters: 
2023-01-26 21:11:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013439964352512[0;39m <==    Updates: 1
2023-01-26 21:11:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274013439964352512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:12:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274013544805175296[0;39m 生成今日电子书快照开始
2023-01-26 21:12:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013544805175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:12:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013544805175296[0;39m ==> Parameters: 
2023-01-26 21:12:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013544805175296[0;39m <==    Updates: 0
2023-01-26 21:12:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274013544805175296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:12:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274013565768306688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013565768306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013565768306688[0;39m ==> Parameters: 
2023-01-26 21:12:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013565768306688[0;39m <==    Updates: 1
2023-01-26 21:12:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274013565768306688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:12:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274013691593232384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:12:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013691593232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:12:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013691593232384[0;39m ==> Parameters: 
2023-01-26 21:12:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013691593232384[0;39m <==    Updates: 1
2023-01-26 21:12:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274013691593232384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:13:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274013796475998208[0;39m 生成今日电子书快照开始
2023-01-26 21:13:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013796475998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:13:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013796475998208[0;39m ==> Parameters: 
2023-01-26 21:13:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274013796475998208[0;39m <==    Updates: 0
2023-01-26 21:13:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274013796475998208[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 21:13:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274013817422352384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:13:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013817422352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:13:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013817422352384[0;39m ==> Parameters: 
2023-01-26 21:13:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013817422352384[0;39m <==    Updates: 1
2023-01-26 21:13:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274013817422352384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:13:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274013943264055296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013943264055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013943264055296[0;39m ==> Parameters: 
2023-01-26 21:13:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274013943264055296[0;39m <==    Updates: 1
2023-01-26 21:13:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274013943264055296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:14:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274014048113266688[0;39m 生成今日电子书快照开始
2023-01-26 21:14:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014048113266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:14:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014048113266688[0;39m ==> Parameters: 
2023-01-26 21:14:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014048113266688[0;39m <==    Updates: 0
2023-01-26 21:14:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274014048113266688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:14:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274014069093175296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014069093175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014069093175296[0;39m ==> Parameters: 
2023-01-26 21:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014069093175296[0;39m <==    Updates: 1
2023-01-26 21:14:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274014069093175296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:14:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274014194922295296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:14:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014194922295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:14:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014194922295296[0;39m ==> Parameters: 
2023-01-26 21:14:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014194922295296[0;39m <==    Updates: 1
2023-01-26 21:14:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274014194922295296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:15:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274014299775700992[0;39m 生成今日电子书快照开始
2023-01-26 21:15:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014299775700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:15:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014299775700992[0;39m ==> Parameters: 
2023-01-26 21:15:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014299775700992[0;39m <==    Updates: 0
2023-01-26 21:15:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274014299775700992[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 21:15:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274014320789164032[0;39m 更新电子书下的文档数据开始
2023-01-26 21:15:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014320789164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:15:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014320789164032[0;39m ==> Parameters: 
2023-01-26 21:15:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014320789164032[0;39m <==    Updates: 1
2023-01-26 21:15:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274014320789164032[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 21:15:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274014446601506816[0;39m 更新电子书下的文档数据开始
2023-01-26 21:15:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014446601506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:15:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014446601506816[0;39m ==> Parameters: 
2023-01-26 21:15:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014446601506816[0;39m <==    Updates: 1
2023-01-26 21:15:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274014446601506816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:16:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274014551421358080[0;39m 生成今日电子书快照开始
2023-01-26 21:16:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014551421358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:16:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014551421358080[0;39m ==> Parameters: 
2023-01-26 21:16:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014551421358080[0;39m <==    Updates: 0
2023-01-26 21:16:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274014551421358080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 21:16:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274014572409655296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:16:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014572409655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:16:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014572409655296[0;39m ==> Parameters: 
2023-01-26 21:16:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014572409655296[0;39m <==    Updates: 1
2023-01-26 21:16:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274014572409655296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:16:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274014698255552512[0;39m 更新电子书下的文档数据开始
2023-01-26 21:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014698255552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014698255552512[0;39m ==> Parameters: 
2023-01-26 21:16:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014698255552512[0;39m <==    Updates: 1
2023-01-26 21:16:35.027 INFO  com.example.wiki.job.DocJob                       :35   [32m274014698255552512[0;39m 更新电子书下的文档数据结束，耗时：16毫秒
2023-01-26 21:17:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274014803100569600[0;39m 生成今日电子书快照开始
2023-01-26 21:17:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014803100569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:17:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014803100569600[0;39m ==> Parameters: 
2023-01-26 21:17:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274014803100569600[0;39m <==    Updates: 0
2023-01-26 21:17:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274014803100569600[0;39m 生成今日电子书快照结束，耗时：20毫秒
2023-01-26 21:17:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274014824067895296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:17:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014824067895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:17:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014824067895296[0;39m ==> Parameters: 
2023-01-26 21:17:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014824067895296[0;39m <==    Updates: 1
2023-01-26 21:17:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274014824067895296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:17:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274014949897015296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:17:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014949897015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:17:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014949897015296[0;39m ==> Parameters: 
2023-01-26 21:17:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274014949897015296[0;39m <==    Updates: 1
2023-01-26 21:17:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274014949897015296[0;39m 更新电子书下的文档数据结束，耗时：10毫秒
2023-01-26 21:18:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274015054783975424[0;39m 生成今日电子书快照开始
2023-01-26 21:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015054783975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015054783975424[0;39m ==> Parameters: 
2023-01-26 21:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015054783975424[0;39m <==    Updates: 0
2023-01-26 21:18:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274015054783975424[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 21:18:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274015075734523904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:18:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015075734523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:18:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015075734523904[0;39m ==> Parameters: 
2023-01-26 21:18:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015075734523904[0;39m <==    Updates: 1
2023-01-26 21:18:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274015075734523904[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:18:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274015201563643904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:18:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015201563643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:18:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015201563643904[0;39m ==> Parameters: 
2023-01-26 21:18:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015201563643904[0;39m <==    Updates: 1
2023-01-26 21:18:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274015201563643904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:19:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274015306475769856[0;39m 生成今日电子书快照开始
2023-01-26 21:19:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015306475769856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:19:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015306475769856[0;39m ==> Parameters: 
2023-01-26 21:19:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015306475769856[0;39m <==    Updates: 0
2023-01-26 21:19:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274015306475769856[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 21:19:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274015327409541120[0;39m 更新电子书下的文档数据开始
2023-01-26 21:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015327409541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015327409541120[0;39m ==> Parameters: 
2023-01-26 21:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015327409541120[0;39m <==    Updates: 1
2023-01-26 21:19:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274015327409541120[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:19:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274015453226078208[0;39m 更新电子书下的文档数据开始
2023-01-26 21:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015453226078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015453226078208[0;39m ==> Parameters: 
2023-01-26 21:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015453226078208[0;39m <==    Updates: 1
2023-01-26 21:19:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274015453226078208[0;39m 更新电子书下的文档数据结束，耗时：8毫秒
2023-01-26 21:20:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274015558083678208[0;39m 生成今日电子书快照开始
2023-01-26 21:20:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015558083678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:20:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015558083678208[0;39m ==> Parameters: 
2023-01-26 21:20:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274015558083678208[0;39m <==    Updates: 0
2023-01-26 21:20:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274015558083678208[0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-01-26 21:20:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274015579042615296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:20:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015579042615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:20:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015579042615296[0;39m ==> Parameters: 
2023-01-26 21:20:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015579042615296[0;39m <==    Updates: 1
2023-01-26 21:20:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274015579042615296[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:20:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274015704875929600[0;39m 更新电子书下的文档数据开始
2023-01-26 21:20:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015704875929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:20:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015704875929600[0;39m ==> Parameters: 
2023-01-26 21:20:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274015704875929600[0;39m <==    Updates: 1
2023-01-26 21:20:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274015704875929600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:29:35.998 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m10s796ms271µs800ns).
2023-01-26 21:29:40.787 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274017994038972416[0;39m 生成今日电子书快照开始
2023-01-26 21:29:40.788 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274017994038972416[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:29:40.788 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274017994038972416[0;39m ==> Parameters: 
2023-01-26 21:29:40.790 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274017994038972416[0;39m <==    Updates: 0
2023-01-26 21:29:40.790 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274017994038972416[0;39m 生成今日电子书快照结束，耗时：2毫秒
2023-01-26 21:29:40.790 INFO  com.example.wiki.job.DocJob                       :32   [32m274017994051555328[0;39m 更新电子书下的文档数据开始
2023-01-26 21:29:40.790 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274017994051555328[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:29:40.790 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274017994051555328[0;39m ==> Parameters: 
2023-01-26 21:29:40.790 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274017994051555328[0;39m <==    Updates: 1
2023-01-26 21:29:40.790 INFO  com.example.wiki.job.DocJob                       :35   [32m274017994051555328[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:30:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274018074703826944[0;39m 生成今日电子书快照开始
2023-01-26 21:30:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018074703826944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:30:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018074703826944[0;39m ==> Parameters: 
2023-01-26 21:30:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018074703826944[0;39m <==    Updates: 0
2023-01-26 21:30:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274018074703826944[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:30:05.021 INFO  com.example.wiki.job.DocJob                       :32   [32m274018095683735552[0;39m 更新电子书下的文档数据开始
2023-01-26 21:30:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018095683735552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:30:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018095683735552[0;39m ==> Parameters: 
2023-01-26 21:30:05.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018095683735552[0;39m <==    Updates: 1
2023-01-26 21:30:05.024 INFO  com.example.wiki.job.DocJob                       :35   [32m274018095683735552[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:30:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274018221428969472[0;39m 更新电子书下的文档数据开始
2023-01-26 21:30:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018221428969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:30:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018221428969472[0;39m ==> Parameters: 
2023-01-26 21:30:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018221428969472[0;39m <==    Updates: 1
2023-01-26 21:30:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m274018221428969472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:31:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274018326332706816[0;39m 生成今日电子书快照开始
2023-01-26 21:31:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018326332706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:31:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018326332706816[0;39m ==> Parameters: 
2023-01-26 21:31:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018326332706816[0;39m <==    Updates: 0
2023-01-26 21:31:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274018326332706816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:31:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274018347287449600[0;39m 更新电子书下的文档数据开始
2023-01-26 21:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018347287449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018347287449600[0;39m ==> Parameters: 
2023-01-26 21:31:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018347287449600[0;39m <==    Updates: 1
2023-01-26 21:31:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274018347287449600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274018473099792384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018473099792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018473099792384[0;39m ==> Parameters: 
2023-01-26 21:31:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018473099792384[0;39m <==    Updates: 1
2023-01-26 21:31:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274018473099792384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:32:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274018578003529728[0;39m 生成今日电子书快照开始
2023-01-26 21:32:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018578003529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:32:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018578003529728[0;39m ==> Parameters: 
2023-01-26 21:32:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018578003529728[0;39m <==    Updates: 0
2023-01-26 21:32:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274018578003529728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 21:32:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274018598945689600[0;39m 更新电子书下的文档数据开始
2023-01-26 21:32:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018598945689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:32:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018598945689600[0;39m ==> Parameters: 
2023-01-26 21:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018598945689600[0;39m <==    Updates: 1
2023-01-26 21:32:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274018598945689600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:32:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274018724799975424[0;39m 更新电子书下的文档数据开始
2023-01-26 21:32:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018724799975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:32:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018724799975424[0;39m ==> Parameters: 
2023-01-26 21:32:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018724799975424[0;39m <==    Updates: 1
2023-01-26 21:32:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274018724799975424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:33:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274018829603049472[0;39m 生成今日电子书快照开始
2023-01-26 21:33:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018829603049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:33:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018829603049472[0;39m ==> Parameters: 
2023-01-26 21:33:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274018829603049472[0;39m <==    Updates: 0
2023-01-26 21:33:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274018829603049472[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:33:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274018850612318208[0;39m 更新电子书下的文档数据开始
2023-01-26 21:33:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018850612318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:33:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018850612318208[0;39m ==> Parameters: 
2023-01-26 21:33:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018850612318208[0;39m <==    Updates: 1
2023-01-26 21:33:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274018850612318208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:33:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274018976462409728[0;39m 更新电子书下的文档数据开始
2023-01-26 21:33:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018976462409728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:33:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018976462409728[0;39m ==> Parameters: 
2023-01-26 21:33:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274018976462409728[0;39m <==    Updates: 1
2023-01-26 21:33:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274018976462409728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:34:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274019081278066688[0;39m 生成今日电子书快照开始
2023-01-26 21:34:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019081278066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:34:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019081278066688[0;39m ==> Parameters: 
2023-01-26 21:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019081278066688[0;39m <==    Updates: 0
2023-01-26 21:34:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274019081278066688[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 21:34:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274019102253780992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:34:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019102253780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:34:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019102253780992[0;39m ==> Parameters: 
2023-01-26 21:34:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019102253780992[0;39m <==    Updates: 1
2023-01-26 21:34:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274019102253780992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:34:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274019228120649728[0;39m 更新电子书下的文档数据开始
2023-01-26 21:34:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019228120649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:34:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019228120649728[0;39m ==> Parameters: 
2023-01-26 21:34:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019228120649728[0;39m <==    Updates: 1
2023-01-26 21:34:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274019228120649728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:35:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274019332944695296[0;39m 生成今日电子书快照开始
2023-01-26 21:35:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019332944695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:35:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019332944695296[0;39m ==> Parameters: 
2023-01-26 21:35:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019332944695296[0;39m <==    Updates: 0
2023-01-26 21:35:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274019332944695296[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:35:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274019353932992512[0;39m 更新电子书下的文档数据开始
2023-01-26 21:35:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019353932992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:35:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019353932992512[0;39m ==> Parameters: 
2023-01-26 21:35:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019353932992512[0;39m <==    Updates: 1
2023-01-26 21:35:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274019353932992512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:35:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274019479757918208[0;39m 更新电子书下的文档数据开始
2023-01-26 21:35:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019479757918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:35:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019479757918208[0;39m ==> Parameters: 
2023-01-26 21:35:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019479757918208[0;39m <==    Updates: 1
2023-01-26 21:35:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274019479757918208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:36:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274019584632295424[0;39m 生成今日电子书快照开始
2023-01-26 21:36:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019584632295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:36:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019584632295424[0;39m ==> Parameters: 
2023-01-26 21:36:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019584632295424[0;39m <==    Updates: 0
2023-01-26 21:36:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274019584632295424[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:36:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274019605570260992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:36:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019605570260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:36:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019605570260992[0;39m ==> Parameters: 
2023-01-26 21:36:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019605570260992[0;39m <==    Updates: 1
2023-01-26 21:36:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274019605570260992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:36:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274019731441324032[0;39m 更新电子书下的文档数据开始
2023-01-26 21:36:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019731441324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:36:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019731441324032[0;39m ==> Parameters: 
2023-01-26 21:36:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019731441324032[0;39m <==    Updates: 1
2023-01-26 21:36:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274019731441324032[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:37:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274019836294729728[0;39m 生成今日电子书快照开始
2023-01-26 21:37:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019836294729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019836294729728[0;39m ==> Parameters: 
2023-01-26 21:37:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274019836294729728[0;39m <==    Updates: 0
2023-01-26 21:37:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274019836294729728[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 21:37:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274019857245278208[0;39m 更新电子书下的文档数据开始
2023-01-26 21:37:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019857245278208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:37:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019857245278208[0;39m ==> Parameters: 
2023-01-26 21:37:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019857245278208[0;39m <==    Updates: 1
2023-01-26 21:37:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274019857245278208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:37:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274019983091175424[0;39m 更新电子书下的文档数据开始
2023-01-26 21:37:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019983091175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:37:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019983091175424[0;39m ==> Parameters: 
2023-01-26 21:37:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274019983091175424[0;39m <==    Updates: 1
2023-01-26 21:37:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274019983091175424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:38:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274020087936192512[0;39m 生成今日电子书快照开始
2023-01-26 21:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020087936192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:38:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020087936192512[0;39m ==> Parameters: 
2023-01-26 21:38:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020087936192512[0;39m <==    Updates: 0
2023-01-26 21:38:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274020087936192512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:38:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274020108920295424[0;39m 更新电子书下的文档数据开始
2023-01-26 21:38:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020108920295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:38:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020108920295424[0;39m ==> Parameters: 
2023-01-26 21:38:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020108920295424[0;39m <==    Updates: 1
2023-01-26 21:38:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274020108920295424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:38:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274020234728443904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:38:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020234728443904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:38:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020234728443904[0;39m ==> Parameters: 
2023-01-26 21:38:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020234728443904[0;39m <==    Updates: 1
2023-01-26 21:38:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274020234728443904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:39:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274020339560878080[0;39m 生成今日电子书快照开始
2023-01-26 21:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020339560878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:39:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020339560878080[0;39m ==> Parameters: 
2023-01-26 21:39:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020339560878080[0;39m <==    Updates: 0
2023-01-26 21:39:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274020339560878080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 21:39:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274020360524009472[0;39m 更新电子书下的文档数据开始
2023-01-26 21:39:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020360524009472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:39:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020360524009472[0;39m ==> Parameters: 
2023-01-26 21:39:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020360524009472[0;39m <==    Updates: 1
2023-01-26 21:39:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274020360524009472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:39:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274020486357323776[0;39m 更新电子书下的文档数据开始
2023-01-26 21:39:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020486357323776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:39:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020486357323776[0;39m ==> Parameters: 
2023-01-26 21:39:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020486357323776[0;39m <==    Updates: 1
2023-01-26 21:39:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274020486357323776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:40:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274020591240089600[0;39m 生成今日电子书快照开始
2023-01-26 21:40:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020591240089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:40:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020591240089600[0;39m ==> Parameters: 
2023-01-26 21:40:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020591240089600[0;39m <==    Updates: 0
2023-01-26 21:40:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274020591240089600[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 21:40:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274020612245164032[0;39m 更新电子书下的文档数据开始
2023-01-26 21:40:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020612245164032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:40:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020612245164032[0;39m ==> Parameters: 
2023-01-26 21:40:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020612245164032[0;39m <==    Updates: 1
2023-01-26 21:40:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274020612245164032[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:40:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274020738011369472[0;39m 更新电子书下的文档数据开始
2023-01-26 21:40:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020738011369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:40:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020738011369472[0;39m ==> Parameters: 
2023-01-26 21:40:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020738011369472[0;39m <==    Updates: 1
2023-01-26 21:40:35.001 INFO  com.example.wiki.job.DocJob                       :35   [32m274020738011369472[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 21:41:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274020842873163776[0;39m 生成今日电子书快照开始
2023-01-26 21:41:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020842873163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:41:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020842873163776[0;39m ==> Parameters: 
2023-01-26 21:41:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274020842873163776[0;39m <==    Updates: 0
2023-01-26 21:41:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274020842873163776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:41:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274020863890821120[0;39m 更新电子书下的文档数据开始
2023-01-26 21:41:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020863890821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:41:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020863890821120[0;39m ==> Parameters: 
2023-01-26 21:41:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020863890821120[0;39m <==    Updates: 1
2023-01-26 21:41:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274020863890821120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:41:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274020989694775296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020989694775296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:41:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020989694775296[0;39m ==> Parameters: 
2023-01-26 21:41:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274020989694775296[0;39m <==    Updates: 1
2023-01-26 21:41:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274020989694775296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:42:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274021094535598080[0;39m 生成今日电子书快照开始
2023-01-26 21:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021094535598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:42:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021094535598080[0;39m ==> Parameters: 
2023-01-26 21:42:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021094535598080[0;39m <==    Updates: 0
2023-01-26 21:42:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274021094535598080[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 21:42:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274021115511312384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021115511312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:42:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021115511312384[0;39m ==> Parameters: 
2023-01-26 21:42:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021115511312384[0;39m <==    Updates: 1
2023-01-26 21:42:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274021115511312384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:42:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274021241361403904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:42:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021241361403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:42:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021241361403904[0;39m ==> Parameters: 
2023-01-26 21:42:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021241361403904[0;39m <==    Updates: 1
2023-01-26 21:42:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274021241361403904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:43:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274021346248364032[0;39m 生成今日电子书快照开始
2023-01-26 21:43:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021346248364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:43:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021346248364032[0;39m ==> Parameters: 
2023-01-26 21:43:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274021346248364032[0;39m <==    Updates: 0
2023-01-26 21:43:00.031 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274021346248364032[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 21:43:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274021367169552384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021367169552384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:43:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021367169552384[0;39m ==> Parameters: 
2023-01-26 21:43:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021367169552384[0;39m <==    Updates: 1
2023-01-26 21:43:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274021367169552384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:43:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274021492994478080[0;39m 更新电子书下的文档数据开始
2023-01-26 21:43:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021492994478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:43:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021492994478080[0;39m ==> Parameters: 
2023-01-26 21:43:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021492994478080[0;39m <==    Updates: 1
2023-01-26 21:43:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274021492994478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 21:43:40.635 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-01-26 21:43:40.652 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-01-26 21:43:40.657 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-01-26 21:43:40.672 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-01-26 21:43:51.920 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-01-26 21:43:51.932 INFO  com.example.wiki.config.WikiApplication           :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_352 on Noland with PID 40488 (C:\Users\amper\project\Wiki\Knowledge-Based-System\wiki\target\classes started by amper in C:\Users\amper\project\Wiki\Knowledge-Based-System)
2023-01-26 21:43:51.933 INFO  com.example.wiki.config.WikiApplication           :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-01-26 21:43:52.010 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-01-26 21:43:52.010 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-01-26 21:43:53.209 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-01-26 21:43:53.214 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-01-26 21:43:53.255 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2023-01-26 21:43:54.306 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8080 (http)
2023-01-26 21:43:54.375 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8080"]
2023-01-26 21:43:54.376 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-01-26 21:43:54.377 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-01-26 21:43:54.762 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-01-26 21:43:54.763 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2752 ms
2023-01-26 21:43:56.356 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-01-26 21:43:57.161 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-01-26 21:43:57.291 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-01-26 21:43:57.338 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8080"]
2023-01-26 21:43:57.360 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext:596  [32m                  [0;39m Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 8080 is already in use
2023-01-26 21:43:57.368 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-01-26 21:43:57.369 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-01-26 21:43:57.394 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Pausing ProtocolHandler ["http-nio-8080"]
2023-01-26 21:43:57.394 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Stopping service [Tomcat]
2023-01-26 21:43:57.417 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Stopping ProtocolHandler ["http-nio-8080"]
2023-01-26 21:43:57.418 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Destroying ProtocolHandler ["http-nio-8080"]
2023-01-26 21:43:57.427 INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener:136  [32m                  [0;39m 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-01-26 21:43:57.462 ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter  :40   [32m                  [0;39m 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2023-01-26 21:45:06.412 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-01-26 21:45:06.424 INFO  com.example.wiki.config.WikiApplication           :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_352 on Noland with PID 40864 (C:\Users\amper\project\Wiki\Knowledge-Based-System\wiki\target\classes started by amper in C:\Users\amper\project\Wiki\Knowledge-Based-System)
2023-01-26 21:45:06.424 INFO  com.example.wiki.config.WikiApplication           :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-01-26 21:45:06.484 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-01-26 21:45:06.485 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-01-26 21:45:07.329 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-01-26 21:45:07.333 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-01-26 21:45:07.361 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2023-01-26 21:45:08.259 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8080 (http)
2023-01-26 21:45:08.269 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8080"]
2023-01-26 21:45:08.270 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-01-26 21:45:08.270 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-01-26 21:45:08.566 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-01-26 21:45:08.566 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2080 ms
2023-01-26 21:45:09.259 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-01-26 21:45:09.539 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-01-26 21:45:09.588 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-01-26 21:45:09.609 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8080"]
2023-01-26 21:45:09.635 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8080 (http) with context path ''
2023-01-26 21:45:09.649 INFO  com.example.wiki.config.WikiApplication           :61   [32m                  [0;39m Started WikiApplication in 3.79 seconds (JVM running for 4.788)
2023-01-26 21:45:09.652 INFO  com.example.wiki.config.WikiApplication           :24   [32m                  [0;39m Start successfully!
2023-01-26 21:45:09.652 INFO  com.example.wiki.config.WikiApplication           :25   [32m                  [0;39m Address: 	http://127.0.0.1:8080
2023-01-26 21:45:09.748 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-26 21:45:09.748 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-01-26 21:45:09.749 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 0 ms
2023-01-26 21:45:09.787 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:09.788 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://192.168.10.13:8080/sockjs-node/info
2023-01-26 21:45:09.788 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:09.788 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:45:14.156 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:14.157 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://192.168.10.13:8080/sockjs-node/info
2023-01-26 21:45:14.157 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:14.157 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:45:22.275 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:22.276 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://192.168.10.13:8080/sockjs-node/info
2023-01-26 21:45:22.278 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:22.278 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:45:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274021996315152384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:45:35.039 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m274021996315152384[0;39m HikariPool-1 - Starting...
2023-01-26 21:45:35.409 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m274021996315152384[0;39m HikariPool-1 - Start completed.
2023-01-26 21:45:35.418 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021996315152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:45:35.435 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021996315152384[0;39m ==> Parameters: 
2023-01-26 21:45:35.438 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274021996315152384[0;39m <==    Updates: 1
2023-01-26 21:45:35.439 INFO  com.example.wiki.job.DocJob                       :35   [32m274021996315152384[0;39m 更新电子书下的文档数据结束，耗时：434毫秒
2023-01-26 21:45:38.384 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:38.384 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://192.168.10.13:8080/sockjs-node/info
2023-01-26 21:45:38.385 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:38.385 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:45:47.284 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:47.285 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8080/
2023-01-26 21:45:47.285 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:47.285 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:45:53.535 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:45:53.537 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://localhost:8080/
2023-01-26 21:45:53.537 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:45:53.537 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:46:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274022101176946688[0;39m 生成今日电子书快照开始
2023-01-26 21:46:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022101176946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:46:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022101176946688[0;39m ==> Parameters: 
2023-01-26 21:46:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022101176946688[0;39m <==    Updates: 0
2023-01-26 21:46:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274022101176946688[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 21:46:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274022122131689472[0;39m 更新电子书下的文档数据开始
2023-01-26 21:46:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022122131689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:46:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022122131689472[0;39m ==> Parameters: 
2023-01-26 21:46:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022122131689472[0;39m <==    Updates: 1
2023-01-26 21:46:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m274022122131689472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:46:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274022248019529728[0;39m 更新电子书下的文档数据开始
2023-01-26 21:46:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022248019529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:46:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022248019529728[0;39m ==> Parameters: 
2023-01-26 21:46:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022248019529728[0;39m <==    Updates: 1
2023-01-26 21:46:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274022248019529728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:47:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274022352914878464[0;39m 生成今日电子书快照开始
2023-01-26 21:47:00.030 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022352914878464[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:47:00.032 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022352914878464[0;39m ==> Parameters: 
2023-01-26 21:47:00.044 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022352914878464[0;39m <==    Updates: 0
2023-01-26 21:47:00.050 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274022352914878464[0;39m 生成今日电子书快照结束，耗时：25毫秒
2023-01-26 21:47:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274022373840261120[0;39m 更新电子书下的文档数据开始
2023-01-26 21:47:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022373840261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:47:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022373840261120[0;39m ==> Parameters: 
2023-01-26 21:47:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022373840261120[0;39m <==    Updates: 1
2023-01-26 21:47:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274022373840261120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:47:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274022499644215296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:47:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022499644215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:47:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022499644215296[0;39m ==> Parameters: 
2023-01-26 21:47:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022499644215296[0;39m <==    Updates: 1
2023-01-26 21:47:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274022499644215296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:48:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274022604497620992[0;39m 生成今日电子书快照开始
2023-01-26 21:48:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022604497620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:48:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022604497620992[0;39m ==> Parameters: 
2023-01-26 21:48:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022604497620992[0;39m <==    Updates: 0
2023-01-26 21:48:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274022604497620992[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 21:48:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274022625473335296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:48:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022625473335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:48:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022625473335296[0;39m ==> Parameters: 
2023-01-26 21:48:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022625473335296[0;39m <==    Updates: 1
2023-01-26 21:48:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274022625473335296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:48:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274022751281483776[0;39m 更新电子书下的文档数据开始
2023-01-26 21:48:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022751281483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:48:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022751281483776[0;39m ==> Parameters: 
2023-01-26 21:48:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022751281483776[0;39m <==    Updates: 1
2023-01-26 21:48:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274022751281483776[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:49:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274022856164249600[0;39m 生成今日电子书快照开始
2023-01-26 21:49:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022856164249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:49:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022856164249600[0;39m ==> Parameters: 
2023-01-26 21:49:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274022856164249600[0;39m <==    Updates: 0
2023-01-26 21:49:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274022856164249600[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:49:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274022877114798080[0;39m 更新电子书下的文档数据开始
2023-01-26 21:49:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022877114798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:49:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022877114798080[0;39m ==> Parameters: 
2023-01-26 21:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274022877114798080[0;39m <==    Updates: 1
2023-01-26 21:49:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274022877114798080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:49:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274023002939723776[0;39m 更新电子书下的文档数据开始
2023-01-26 21:49:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023002939723776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:49:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023002939723776[0;39m ==> Parameters: 
2023-01-26 21:49:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023002939723776[0;39m <==    Updates: 1
2023-01-26 21:49:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274023002939723776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:50:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274023107843461120[0;39m 生成今日电子书快照开始
2023-01-26 21:50:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023107843461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:50:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023107843461120[0;39m ==> Parameters: 
2023-01-26 21:50:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023107843461120[0;39m <==    Updates: 0
2023-01-26 21:50:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274023107843461120[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 21:50:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274023128764649472[0;39m 更新电子书下的文档数据开始
2023-01-26 21:50:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023128764649472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:50:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023128764649472[0;39m ==> Parameters: 
2023-01-26 21:50:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023128764649472[0;39m <==    Updates: 1
2023-01-26 21:50:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274023128764649472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:50:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274023254631518208[0;39m 更新电子书下的文档数据开始
2023-01-26 21:50:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023254631518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:50:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023254631518208[0;39m ==> Parameters: 
2023-01-26 21:50:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023254631518208[0;39m <==    Updates: 1
2023-01-26 21:50:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274023254631518208[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 21:51:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274023359514284032[0;39m 生成今日电子书快照开始
2023-01-26 21:51:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023359514284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:51:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023359514284032[0;39m ==> Parameters: 
2023-01-26 21:51:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023359514284032[0;39m <==    Updates: 0
2023-01-26 21:51:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274023359514284032[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 21:51:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274023380418695168[0;39m 更新电子书下的文档数据开始
2023-01-26 21:51:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023380418695168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:51:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023380418695168[0;39m ==> Parameters: 
2023-01-26 21:51:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023380418695168[0;39m <==    Updates: 1
2023-01-26 21:51:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274023380418695168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:51:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274023506285563904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:51:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023506285563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:51:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023506285563904[0;39m ==> Parameters: 
2023-01-26 21:51:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023506285563904[0;39m <==    Updates: 1
2023-01-26 21:51:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274023506285563904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:52:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274023611155746816[0;39m 生成今日电子书快照开始
2023-01-26 21:52:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023611155746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:52:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023611155746816[0;39m ==> Parameters: 
2023-01-26 21:52:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023611155746816[0;39m <==    Updates: 0
2023-01-26 21:52:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274023611155746816[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 21:52:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274023632076935168[0;39m 更新电子书下的文档数据开始
2023-01-26 21:52:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023632076935168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:52:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023632076935168[0;39m ==> Parameters: 
2023-01-26 21:52:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023632076935168[0;39m <==    Updates: 1
2023-01-26 21:52:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274023632076935168[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 21:52:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274023757956386816[0;39m 更新电子书下的文档数据开始
2023-01-26 21:52:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023757956386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:52:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023757956386816[0;39m ==> Parameters: 
2023-01-26 21:52:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023757956386816[0;39m <==    Updates: 1
2023-01-26 21:52:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274023757956386816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:53:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274023862801403904[0;39m 生成今日电子书快照开始
2023-01-26 21:53:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023862801403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:53:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023862801403904[0;39m ==> Parameters: 
2023-01-26 21:53:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274023862801403904[0;39m <==    Updates: 0
2023-01-26 21:53:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274023862801403904[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 21:53:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274023883764535296[0;39m 更新电子书下的文档数据开始
2023-01-26 21:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023883764535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:53:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023883764535296[0;39m ==> Parameters: 
2023-01-26 21:53:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274023883764535296[0;39m <==    Updates: 1
2023-01-26 21:53:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274023883764535296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:53:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274024009597849600[0;39m 更新电子书下的文档数据开始
2023-01-26 21:53:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024009597849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:53:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024009597849600[0;39m ==> Parameters: 
2023-01-26 21:53:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024009597849600[0;39m <==    Updates: 1
2023-01-26 21:53:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274024009597849600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 21:54:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274024114459643904[0;39m 生成今日电子书快照开始
2023-01-26 21:54:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024114459643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:54:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024114459643904[0;39m ==> Parameters: 
2023-01-26 21:54:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024114459643904[0;39m <==    Updates: 0
2023-01-26 21:54:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274024114459643904[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 21:54:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274024135414386688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:54:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024135414386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:54:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024135414386688[0;39m ==> Parameters: 
2023-01-26 21:54:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024135414386688[0;39m <==    Updates: 1
2023-01-26 21:54:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274024135414386688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:54:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274024261285449728[0;39m 更新电子书下的文档数据开始
2023-01-26 21:54:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024261285449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:54:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024261285449728[0;39m ==> Parameters: 
2023-01-26 21:54:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024261285449728[0;39m <==    Updates: 1
2023-01-26 21:54:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274024261285449728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:55:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274024366138855424[0;39m 生成今日电子书快照开始
2023-01-26 21:55:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024366138855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:55:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024366138855424[0;39m ==> Parameters: 
2023-01-26 21:55:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024366138855424[0;39m <==    Updates: 0
2023-01-26 21:55:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274024366138855424[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 21:55:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274024387072626688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:55:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024387072626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:55:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024387072626688[0;39m ==> Parameters: 
2023-01-26 21:55:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024387072626688[0;39m <==    Updates: 1
2023-01-26 21:55:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274024387072626688[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 21:55:25.229 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274024471889842176[0;39m ------------- 开始 -------------
2023-01-26 21:55:25.229 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274024471889842176[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 21:55:25.229 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274024471889842176[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 21:55:25.229 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274024471889842176[0;39m 远程地址: 127.0.0.1
2023-01-26 21:55:25.280 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274024471889842176[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 21:55:25.328 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274024471889842176[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 21:55:25.328 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274024471889842176[0;39m ==> Parameters: 
2023-01-26 21:55:25.346 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274024471889842176[0;39m <==    Columns: count(0)
2023-01-26 21:55:25.346 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274024471889842176[0;39m <==        Row: 5
2023-01-26 21:55:25.347 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274024471889842176[0;39m <==      Total: 1
2023-01-26 21:55:25.348 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274024471889842176[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 21:55:25.348 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274024471889842176[0;39m ==> Parameters: 
2023-01-26 21:55:25.350 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 21:55:25.350 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 21:55:25.350 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 21:55:25.351 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 21:55:25.351 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 21:55:25.352 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274024471889842176[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 21:55:25.352 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274024471889842176[0;39m <==      Total: 5
2023-01-26 21:55:25.354 INFO  com.example.wiki.service.EbookService             :51   [32m274024471889842176[0;39m 总行数 5
2023-01-26 21:55:25.354 INFO  com.example.wiki.service.EbookService             :52   [32m274024471889842176[0;39m 总页数 0
2023-01-26 21:55:25.364 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274024471889842176[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 21:55:25.364 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274024471889842176[0;39m ------------- 结束 耗时：137 ms -------------
2023-01-26 21:55:25.624 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 21:55:25.625 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8080/favicon.ico
2023-01-26 21:55:25.625 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m                  [0;39m 登录校验开始，token：null
2023-01-26 21:55:25.625 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m                  [0;39m token为空，请求被拦截
2023-01-26 21:55:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274024512905940992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:55:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024512905940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:55:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024512905940992[0;39m ==> Parameters: 
2023-01-26 21:55:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024512905940992[0;39m <==    Updates: 1
2023-01-26 21:55:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274024512905940992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:56:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274024617742569472[0;39m 生成今日电子书快照开始
2023-01-26 21:56:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024617742569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:56:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024617742569472[0;39m ==> Parameters: 
2023-01-26 21:56:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024617742569472[0;39m <==    Updates: 0
2023-01-26 21:56:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274024617742569472[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 21:56:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274024638743449600[0;39m 更新电子书下的文档数据开始
2023-01-26 21:56:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024638743449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:56:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024638743449600[0;39m ==> Parameters: 
2023-01-26 21:56:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024638743449600[0;39m <==    Updates: 1
2023-01-26 21:56:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274024638743449600[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 21:56:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274024764559986688[0;39m 更新电子书下的文档数据开始
2023-01-26 21:56:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024764559986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:56:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024764559986688[0;39m ==> Parameters: 
2023-01-26 21:56:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024764559986688[0;39m <==    Updates: 1
2023-01-26 21:56:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274024764559986688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:57:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274024869400809472[0;39m 生成今日电子书快照开始
2023-01-26 21:57:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024869400809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:57:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024869400809472[0;39m ==> Parameters: 
2023-01-26 21:57:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274024869400809472[0;39m <==    Updates: 0
2023-01-26 21:57:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274024869400809472[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 21:57:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274024890393300992[0;39m 更新电子书下的文档数据开始
2023-01-26 21:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024890393300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:57:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024890393300992[0;39m ==> Parameters: 
2023-01-26 21:57:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274024890393300992[0;39m <==    Updates: 1
2023-01-26 21:57:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274024890393300992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 21:57:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274025016209838080[0;39m 更新电子书下的文档数据开始
2023-01-26 21:57:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025016209838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:57:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025016209838080[0;39m ==> Parameters: 
2023-01-26 21:57:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025016209838080[0;39m <==    Updates: 1
2023-01-26 21:57:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274025016209838080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:58:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274025121067438080[0;39m 生成今日电子书快照开始
2023-01-26 21:58:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025121067438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:58:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025121067438080[0;39m ==> Parameters: 
2023-01-26 21:58:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025121067438080[0;39m <==    Updates: 0
2023-01-26 21:58:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274025121067438080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 21:58:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274025142043152384[0;39m 更新电子书下的文档数据开始
2023-01-26 21:58:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025142043152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:58:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025142043152384[0;39m ==> Parameters: 
2023-01-26 21:58:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025142043152384[0;39m <==    Updates: 1
2023-01-26 21:58:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274025142043152384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 21:58:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274025267863883776[0;39m 更新电子书下的文档数据开始
2023-01-26 21:58:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025267863883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:58:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025267863883776[0;39m ==> Parameters: 
2023-01-26 21:58:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025267863883776[0;39m <==    Updates: 1
2023-01-26 21:58:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274025267863883776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:59:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274025372755038208[0;39m 生成今日电子书快照开始
2023-01-26 21:59:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025372755038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 21:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025372755038208[0;39m ==> Parameters: 
2023-01-26 21:59:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025372755038208[0;39m <==    Updates: 0
2023-01-26 21:59:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274025372755038208[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 21:59:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274025393734946816[0;39m 更新电子书下的文档数据开始
2023-01-26 21:59:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025393734946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:59:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025393734946816[0;39m ==> Parameters: 
2023-01-26 21:59:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025393734946816[0;39m <==    Updates: 1
2023-01-26 21:59:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274025393734946816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 21:59:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274025519551483904[0;39m 更新电子书下的文档数据开始
2023-01-26 21:59:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025519551483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 21:59:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025519551483904[0;39m ==> Parameters: 
2023-01-26 21:59:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025519551483904[0;39m <==    Updates: 1
2023-01-26 21:59:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274025519551483904[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:00:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274025624413278208[0;39m 生成今日电子书快照开始
2023-01-26 22:00:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025624413278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:00:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025624413278208[0;39m ==> Parameters: 
2023-01-26 22:00:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025624413278208[0;39m <==    Updates: 0
2023-01-26 22:00:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274025624413278208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:00:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274025645409964032[0;39m 更新电子书下的文档数据开始
2023-01-26 22:00:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025645409964032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:00:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025645409964032[0;39m ==> Parameters: 
2023-01-26 22:00:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025645409964032[0;39m <==    Updates: 1
2023-01-26 22:00:05.022 INFO  com.example.wiki.job.DocJob                       :35   [32m274025645409964032[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:00:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274025771192946688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025771192946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025771192946688[0;39m ==> Parameters: 
2023-01-26 22:00:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025771192946688[0;39m <==    Updates: 1
2023-01-26 22:00:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274025771192946688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:01:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274025876033769472[0;39m 生成今日电子书快照开始
2023-01-26 22:01:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025876033769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:01:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025876033769472[0;39m ==> Parameters: 
2023-01-26 22:01:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274025876033769472[0;39m <==    Updates: 0
2023-01-26 22:01:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274025876033769472[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:01:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274025897059815424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025897059815424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025897059815424[0;39m ==> Parameters: 
2023-01-26 22:01:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274025897059815424[0;39m <==    Updates: 1
2023-01-26 22:01:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274025897059815424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:01:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274026022851186688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:01:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026022851186688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:01:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026022851186688[0;39m ==> Parameters: 
2023-01-26 22:01:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026022851186688[0;39m <==    Updates: 1
2023-01-26 22:01:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274026022851186688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:02:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274026127692009472[0;39m 生成今日电子书快照开始
2023-01-26 22:02:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026127692009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:02:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026127692009472[0;39m ==> Parameters: 
2023-01-26 22:02:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026127692009472[0;39m <==    Updates: 0
2023-01-26 22:02:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274026127692009472[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 22:02:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274026148705472512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026148705472512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026148705472512[0;39m ==> Parameters: 
2023-01-26 22:02:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026148705472512[0;39m <==    Updates: 1
2023-01-26 22:02:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274026148705472512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:02:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274026274496843776[0;39m 更新电子书下的文档数据开始
2023-01-26 22:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026274496843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:02:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026274496843776[0;39m ==> Parameters: 
2023-01-26 22:02:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026274496843776[0;39m <==    Updates: 1
2023-01-26 22:02:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274026274496843776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:03:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274026379396386816[0;39m 生成今日电子书快照开始
2023-01-26 22:03:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026379396386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:03:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026379396386816[0;39m ==> Parameters: 
2023-01-26 22:03:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026379396386816[0;39m <==    Updates: 0
2023-01-26 22:03:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274026379396386816[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 22:03:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274026400376295424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:03:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026400376295424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:03:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026400376295424[0;39m ==> Parameters: 
2023-01-26 22:03:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026400376295424[0;39m <==    Updates: 1
2023-01-26 22:03:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274026400376295424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:03:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274026526192832512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026526192832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026526192832512[0;39m ==> Parameters: 
2023-01-26 22:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026526192832512[0;39m <==    Updates: 1
2023-01-26 22:03:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274026526192832512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:04:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274026631037849600[0;39m 生成今日电子书快照开始
2023-01-26 22:04:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026631037849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:04:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026631037849600[0;39m ==> Parameters: 
2023-01-26 22:04:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026631037849600[0;39m <==    Updates: 0
2023-01-26 22:04:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274026631037849600[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 22:04:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274026652026146816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026652026146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:04:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026652026146816[0;39m ==> Parameters: 
2023-01-26 22:04:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026652026146816[0;39m <==    Updates: 1
2023-01-26 22:04:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274026652026146816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:04:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274026777809129472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:04:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026777809129472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:04:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026777809129472[0;39m ==> Parameters: 
2023-01-26 22:04:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026777809129472[0;39m <==    Updates: 1
2023-01-26 22:04:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274026777809129472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:05:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274026882679312384[0;39m 生成今日电子书快照开始
2023-01-26 22:05:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026882679312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026882679312384[0;39m ==> Parameters: 
2023-01-26 22:05:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274026882679312384[0;39m <==    Updates: 0
2023-01-26 22:05:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274026882679312384[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:05:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274026903680192512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:05:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026903680192512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:05:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026903680192512[0;39m ==> Parameters: 
2023-01-26 22:05:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274026903680192512[0;39m <==    Updates: 1
2023-01-26 22:05:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274026903680192512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:05:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274027029513506816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:05:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027029513506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:05:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027029513506816[0;39m ==> Parameters: 
2023-01-26 22:05:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027029513506816[0;39m <==    Updates: 1
2023-01-26 22:05:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274027029513506816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:06:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274027134375301120[0;39m 生成今日电子书快照开始
2023-01-26 22:06:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027134375301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:06:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027134375301120[0;39m ==> Parameters: 
2023-01-26 22:06:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027134375301120[0;39m <==    Updates: 0
2023-01-26 22:06:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274027134375301120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 22:06:05.025 INFO  com.example.wiki.job.DocJob                       :32   [32m274027155397152768[0;39m 更新电子书下的文档数据开始
2023-01-26 22:06:05.090 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027155397152768[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:06:05.092 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027155397152768[0;39m ==> Parameters: 
2023-01-26 22:06:05.330 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027155397152768[0;39m <==    Updates: 1
2023-01-26 22:06:05.333 INFO  com.example.wiki.job.DocJob                       :35   [32m274027155397152768[0;39m 更新电子书下的文档数据结束，耗时：307毫秒
2023-01-26 22:06:35.040 INFO  com.example.wiki.job.DocJob                       :32   [32m274027281289187328[0;39m 更新电子书下的文档数据开始
2023-01-26 22:06:35.045 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027281289187328[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:06:35.046 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027281289187328[0;39m ==> Parameters: 
2023-01-26 22:06:35.050 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027281289187328[0;39m <==    Updates: 1
2023-01-26 22:06:35.054 INFO  com.example.wiki.job.DocJob                       :35   [32m274027281289187328[0;39m 更新电子书下的文档数据结束，耗时：10毫秒
2023-01-26 22:07:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274027386025152512[0;39m 生成今日电子书快照开始
2023-01-26 22:07:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027386025152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:07:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027386025152512[0;39m ==> Parameters: 
2023-01-26 22:07:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027386025152512[0;39m <==    Updates: 0
2023-01-26 22:07:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274027386025152512[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 22:07:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274027406979895296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027406979895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027406979895296[0;39m ==> Parameters: 
2023-01-26 22:07:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027406979895296[0;39m <==    Updates: 1
2023-01-26 22:07:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274027406979895296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:07:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274027532838375424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027532838375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:07:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027532838375424[0;39m ==> Parameters: 
2023-01-26 22:07:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027532838375424[0;39m <==    Updates: 1
2023-01-26 22:07:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274027532838375424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:08:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274027637658226688[0;39m 生成今日电子书快照开始
2023-01-26 22:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027637658226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027637658226688[0;39m ==> Parameters: 
2023-01-26 22:08:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027637658226688[0;39m <==    Updates: 0
2023-01-26 22:08:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274027637658226688[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:08:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274027658650718208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:08:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027658650718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:08:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027658650718208[0;39m ==> Parameters: 
2023-01-26 22:08:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027658650718208[0;39m <==    Updates: 1
2023-01-26 22:08:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274027658650718208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:08:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274027784463060992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:08:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027784463060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:08:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027784463060992[0;39m ==> Parameters: 
2023-01-26 22:08:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027784463060992[0;39m <==    Updates: 1
2023-01-26 22:08:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274027784463060992[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:09:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274027889312272384[0;39m 生成今日电子书快照开始
2023-01-26 22:09:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027889312272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:09:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027889312272384[0;39m ==> Parameters: 
2023-01-26 22:09:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274027889312272384[0;39m <==    Updates: 0
2023-01-26 22:09:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274027889312272384[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:09:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274027910317346816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:09:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027910317346816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:09:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027910317346816[0;39m ==> Parameters: 
2023-01-26 22:09:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274027910317346816[0;39m <==    Updates: 1
2023-01-26 22:09:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274027910317346816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:09:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274028036100329472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:09:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028036100329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:09:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028036100329472[0;39m ==> Parameters: 
2023-01-26 22:09:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028036100329472[0;39m <==    Updates: 1
2023-01-26 22:09:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m274028036100329472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:10:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274028140999872512[0;39m 生成今日电子书快照开始
2023-01-26 22:10:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028140999872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:10:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028140999872512[0;39m ==> Parameters: 
2023-01-26 22:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028140999872512[0;39m <==    Updates: 0
2023-01-26 22:10:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274028140999872512[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:10:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274028161954615296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028161954615296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028161954615296[0;39m ==> Parameters: 
2023-01-26 22:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028161954615296[0;39m <==    Updates: 1
2023-01-26 22:10:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274028161954615296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:10:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274028287813095424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:10:35.030 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028287813095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:10:35.031 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028287813095424[0;39m ==> Parameters: 
2023-01-26 22:10:35.032 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028287813095424[0;39m <==    Updates: 1
2023-01-26 22:10:35.032 INFO  com.example.wiki.job.DocJob                       :35   [32m274028287813095424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274028392649723904[0;39m 生成今日电子书快照开始
2023-01-26 22:11:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028392649723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:11:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028392649723904[0;39m ==> Parameters: 
2023-01-26 22:11:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028392649723904[0;39m <==    Updates: 0
2023-01-26 22:11:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274028392649723904[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 22:11:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274028413617049600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:11:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028413617049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:11:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028413617049600[0;39m ==> Parameters: 
2023-01-26 22:11:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028413617049600[0;39m <==    Updates: 1
2023-01-26 22:11:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274028413617049600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:11:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274028539429392384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:11:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028539429392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:11:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028539429392384[0;39m ==> Parameters: 
2023-01-26 22:11:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028539429392384[0;39m <==    Updates: 1
2023-01-26 22:11:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274028539429392384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:11:47.949 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274028593724657664[0;39m ------------- 开始 -------------
2023-01-26 22:11:47.949 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274028593724657664[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:11:47.950 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274028593724657664[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:11:47.950 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274028593724657664[0;39m 远程地址: 127.0.0.1
2023-01-26 22:11:47.950 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274028593724657664[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:11:47.952 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028593724657664[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:11:47.953 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028593724657664[0;39m ==> Parameters: 
2023-01-26 22:11:47.956 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028593724657664[0;39m <==    Columns: count(0)
2023-01-26 22:11:47.956 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028593724657664[0;39m <==        Row: 5
2023-01-26 22:11:47.956 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028593724657664[0;39m <==      Total: 1
2023-01-26 22:11:47.957 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028593724657664[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:11:47.957 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028593724657664[0;39m ==> Parameters: 
2023-01-26 22:11:47.958 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:11:47.958 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:11:47.959 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:11:47.959 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:11:47.960 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:11:47.960 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028593724657664[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:11:47.960 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028593724657664[0;39m <==      Total: 5
2023-01-26 22:11:47.961 INFO  com.example.wiki.service.EbookService             :51   [32m274028593724657664[0;39m 总行数 5
2023-01-26 22:11:47.961 INFO  com.example.wiki.service.EbookService             :52   [32m274028593724657664[0;39m 总页数 0
2023-01-26 22:11:47.961 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274028593724657664[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:11:47.961 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274028593724657664[0;39m ------------- 结束 耗时：12 ms -------------
2023-01-26 22:12:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274028644333129728[0;39m 生成今日电子书快照开始
2023-01-26 22:12:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028644333129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:12:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028644333129728[0;39m ==> Parameters: 
2023-01-26 22:12:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028644333129728[0;39m <==    Updates: 0
2023-01-26 22:12:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274028644333129728[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:12:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274028665287872512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:12:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028665287872512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:12:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028665287872512[0;39m ==> Parameters: 
2023-01-26 22:12:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028665287872512[0;39m <==    Updates: 1
2023-01-26 22:12:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274028665287872512[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:12:26.171 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274028754039345152[0;39m ------------- 开始 -------------
2023-01-26 22:12:26.172 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274028754039345152[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:12:26.172 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274028754039345152[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:12:26.172 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274028754039345152[0;39m 远程地址: 127.0.0.1
2023-01-26 22:12:26.172 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274028754039345152[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:12:26.173 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028754039345152[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:12:26.174 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028754039345152[0;39m ==> Parameters: 
2023-01-26 22:12:26.176 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028754039345152[0;39m <==    Columns: count(0)
2023-01-26 22:12:26.177 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028754039345152[0;39m <==        Row: 5
2023-01-26 22:12:26.177 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028754039345152[0;39m <==      Total: 1
2023-01-26 22:12:26.177 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028754039345152[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:12:26.177 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028754039345152[0;39m ==> Parameters: 
2023-01-26 22:12:26.179 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:12:26.179 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:12:26.179 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:26.180 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:26.180 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:26.180 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028754039345152[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:26.181 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028754039345152[0;39m <==      Total: 5
2023-01-26 22:12:26.181 INFO  com.example.wiki.service.EbookService             :51   [32m274028754039345152[0;39m 总行数 5
2023-01-26 22:12:26.181 INFO  com.example.wiki.service.EbookService             :52   [32m274028754039345152[0;39m 总页数 0
2023-01-26 22:12:26.182 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274028754039345152[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:12:26.182 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274028754039345152[0;39m ------------- 结束 耗时：11 ms -------------
2023-01-26 22:12:33.242 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274028783697268736[0;39m ------------- 开始 -------------
2023-01-26 22:12:33.243 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274028783697268736[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:12:33.243 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274028783697268736[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:12:33.244 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274028783697268736[0;39m 远程地址: 127.0.0.1
2023-01-26 22:12:33.244 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274028783697268736[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:12:33.247 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028783697268736[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:12:33.248 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028783697268736[0;39m ==> Parameters: 
2023-01-26 22:12:33.251 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028783697268736[0;39m <==    Columns: count(0)
2023-01-26 22:12:33.251 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274028783697268736[0;39m <==        Row: 5
2023-01-26 22:12:33.251 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274028783697268736[0;39m <==      Total: 1
2023-01-26 22:12:33.252 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028783697268736[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:12:33.252 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028783697268736[0;39m ==> Parameters: 
2023-01-26 22:12:33.253 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:12:33.253 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:12:33.267 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:33.268 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:33.268 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:33.269 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274028783697268736[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:12:33.269 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274028783697268736[0;39m <==      Total: 5
2023-01-26 22:12:33.270 INFO  com.example.wiki.service.EbookService             :51   [32m274028783697268736[0;39m 总行数 5
2023-01-26 22:12:33.270 INFO  com.example.wiki.service.EbookService             :52   [32m274028783697268736[0;39m 总页数 0
2023-01-26 22:12:33.407 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274028783697268736[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:12:33.408 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274028783697268736[0;39m ------------- 结束 耗时：166 ms -------------
2023-01-26 22:12:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274028791129575424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:12:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028791129575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:12:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028791129575424[0;39m ==> Parameters: 
2023-01-26 22:12:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028791129575424[0;39m <==    Updates: 1
2023-01-26 22:12:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274028791129575424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:13:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274028895957815296[0;39m 生成今日电子书快照开始
2023-01-26 22:13:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028895957815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:13:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028895957815296[0;39m ==> Parameters: 
2023-01-26 22:13:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274028895957815296[0;39m <==    Updates: 0
2023-01-26 22:13:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274028895957815296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:13:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274028916941918208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028916941918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028916941918208[0;39m ==> Parameters: 
2023-01-26 22:13:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274028916941918208[0;39m <==    Updates: 1
2023-01-26 22:13:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274028916941918208[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:13:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274029042775232512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:13:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029042775232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:13:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029042775232512[0;39m ==> Parameters: 
2023-01-26 22:13:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029042775232512[0;39m <==    Updates: 1
2023-01-26 22:13:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274029042775232512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:13:52.274 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274029115181502464[0;39m ------------- 开始 -------------
2023-01-26 22:13:52.274 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274029115181502464[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:13:52.274 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274029115181502464[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:13:52.275 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274029115181502464[0;39m 远程地址: 127.0.0.1
2023-01-26 22:13:52.275 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274029115181502464[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:13:52.276 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029115181502464[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:13:52.277 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029115181502464[0;39m ==> Parameters: 
2023-01-26 22:13:52.301 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029115181502464[0;39m <==    Columns: count(0)
2023-01-26 22:13:52.302 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029115181502464[0;39m <==        Row: 5
2023-01-26 22:13:52.302 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029115181502464[0;39m <==      Total: 1
2023-01-26 22:13:52.302 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029115181502464[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:13:52.303 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029115181502464[0;39m ==> Parameters: 
2023-01-26 22:13:52.304 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:13:52.304 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:13:52.305 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:52.305 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:52.305 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:52.306 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029115181502464[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:52.306 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029115181502464[0;39m <==      Total: 5
2023-01-26 22:13:52.306 INFO  com.example.wiki.service.EbookService             :51   [32m274029115181502464[0;39m 总行数 5
2023-01-26 22:13:52.307 INFO  com.example.wiki.service.EbookService             :52   [32m274029115181502464[0;39m 总页数 0
2023-01-26 22:13:52.307 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274029115181502464[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:13:52.307 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274029115181502464[0;39m ------------- 结束 耗时：33 ms -------------
2023-01-26 22:13:58.720 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274029142213791744[0;39m ------------- 开始 -------------
2023-01-26 22:13:58.720 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274029142213791744[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:13:58.720 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274029142213791744[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:13:58.720 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274029142213791744[0;39m 远程地址: 127.0.0.1
2023-01-26 22:13:58.721 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274029142213791744[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:13:58.722 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029142213791744[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:13:58.723 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029142213791744[0;39m ==> Parameters: 
2023-01-26 22:13:58.724 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029142213791744[0;39m <==    Columns: count(0)
2023-01-26 22:13:58.725 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029142213791744[0;39m <==        Row: 5
2023-01-26 22:13:58.725 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029142213791744[0;39m <==      Total: 1
2023-01-26 22:13:58.725 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029142213791744[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:13:58.725 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029142213791744[0;39m ==> Parameters: 
2023-01-26 22:13:58.726 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:13:58.727 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:13:58.727 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:58.727 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:58.728 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:58.728 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029142213791744[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:13:58.728 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029142213791744[0;39m <==      Total: 5
2023-01-26 22:13:58.729 INFO  com.example.wiki.service.EbookService             :51   [32m274029142213791744[0;39m 总行数 5
2023-01-26 22:13:58.729 INFO  com.example.wiki.service.EbookService             :52   [32m274029142213791744[0;39m 总页数 0
2023-01-26 22:13:58.729 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274029142213791744[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:13:58.729 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274029142213791744[0;39m ------------- 结束 耗时：10 ms -------------
2023-01-26 22:14:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274029147628638208[0;39m 生成今日电子书快照开始
2023-01-26 22:14:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029147628638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:14:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029147628638208[0;39m ==> Parameters: 
2023-01-26 22:14:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029147628638208[0;39m <==    Updates: 0
2023-01-26 22:14:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274029147628638208[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 22:14:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274029168595963904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:14:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029168595963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:14:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029168595963904[0;39m ==> Parameters: 
2023-01-26 22:14:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029168595963904[0;39m <==    Updates: 1
2023-01-26 22:14:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274029168595963904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:14:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274029294446055424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:14:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029294446055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:14:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029294446055424[0;39m ==> Parameters: 
2023-01-26 22:14:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029294446055424[0;39m <==    Updates: 1
2023-01-26 22:14:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274029294446055424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:15:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274029399278489600[0;39m 生成今日电子书快照开始
2023-01-26 22:15:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029399278489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:15:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029399278489600[0;39m ==> Parameters: 
2023-01-26 22:15:00.036 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029399278489600[0;39m <==    Updates: 0
2023-01-26 22:15:00.037 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274029399278489600[0;39m 生成今日电子书快照结束，耗时：29毫秒
2023-01-26 22:15:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274029420245815296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:15:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029420245815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:15:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029420245815296[0;39m ==> Parameters: 
2023-01-26 22:15:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029420245815296[0;39m <==    Updates: 1
2023-01-26 22:15:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274029420245815296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:15:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274029546087518208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:15:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029546087518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:15:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029546087518208[0;39m ==> Parameters: 
2023-01-26 22:15:35.031 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029546087518208[0;39m <==    Updates: 1
2023-01-26 22:15:35.032 INFO  com.example.wiki.job.DocJob                       :35   [32m274029546087518208[0;39m 更新电子书下的文档数据结束，耗时：22毫秒
2023-01-26 22:16:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274029650915758080[0;39m 生成今日电子书快照开始
2023-01-26 22:16:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029650915758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:16:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029650915758080[0;39m ==> Parameters: 
2023-01-26 22:16:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029650915758080[0;39m <==    Updates: 0
2023-01-26 22:16:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274029650915758080[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:16:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274029671887278080[0;39m 更新电子书下的文档数据开始
2023-01-26 22:16:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029671887278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:16:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029671887278080[0;39m ==> Parameters: 
2023-01-26 22:16:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029671887278080[0;39m <==    Updates: 1
2023-01-26 22:16:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274029671887278080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:16:22.213 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274029744071249920[0;39m ------------- 开始 -------------
2023-01-26 22:16:22.213 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274029744071249920[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:16:22.214 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274029744071249920[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:16:22.214 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274029744071249920[0;39m 远程地址: 127.0.0.1
2023-01-26 22:16:22.214 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274029744071249920[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:16:22.215 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029744071249920[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:16:22.216 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029744071249920[0;39m ==> Parameters: 
2023-01-26 22:16:22.218 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029744071249920[0;39m <==    Columns: count(0)
2023-01-26 22:16:22.219 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029744071249920[0;39m <==        Row: 5
2023-01-26 22:16:22.219 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029744071249920[0;39m <==      Total: 1
2023-01-26 22:16:22.220 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029744071249920[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:16:22.220 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029744071249920[0;39m ==> Parameters: 
2023-01-26 22:16:22.221 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:16:22.221 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:16:22.222 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:22.222 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:22.223 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:22.223 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029744071249920[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:22.223 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029744071249920[0;39m <==      Total: 5
2023-01-26 22:16:22.224 INFO  com.example.wiki.service.EbookService             :51   [32m274029744071249920[0;39m 总行数 5
2023-01-26 22:16:22.224 INFO  com.example.wiki.service.EbookService             :52   [32m274029744071249920[0;39m 总页数 0
2023-01-26 22:16:22.224 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274029744071249920[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:16:22.225 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274029744071249920[0;39m ------------- 结束 耗时：12 ms -------------
2023-01-26 22:16:29.870 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274029776187035648[0;39m ------------- 开始 -------------
2023-01-26 22:16:29.872 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274029776187035648[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:16:29.872 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274029776187035648[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:16:29.872 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274029776187035648[0;39m 远程地址: 127.0.0.1
2023-01-26 22:16:29.873 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274029776187035648[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:16:29.874 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029776187035648[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:16:29.875 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029776187035648[0;39m ==> Parameters: 
2023-01-26 22:16:29.878 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029776187035648[0;39m <==    Columns: count(0)
2023-01-26 22:16:29.879 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029776187035648[0;39m <==        Row: 5
2023-01-26 22:16:29.879 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029776187035648[0;39m <==      Total: 1
2023-01-26 22:16:29.879 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029776187035648[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:16:29.880 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029776187035648[0;39m ==> Parameters: 
2023-01-26 22:16:29.881 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:16:29.881 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:16:29.882 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:29.882 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:29.882 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:29.883 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029776187035648[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:29.883 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029776187035648[0;39m <==      Total: 5
2023-01-26 22:16:29.884 INFO  com.example.wiki.service.EbookService             :51   [32m274029776187035648[0;39m 总行数 5
2023-01-26 22:16:29.884 INFO  com.example.wiki.service.EbookService             :52   [32m274029776187035648[0;39m 总页数 0
2023-01-26 22:16:29.884 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274029776187035648[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:16:29.884 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274029776187035648[0;39m ------------- 结束 耗时：14 ms -------------
2023-01-26 22:16:34.157 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274029794168016896[0;39m ------------- 开始 -------------
2023-01-26 22:16:34.157 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274029794168016896[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:16:34.157 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274029794168016896[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:16:34.157 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274029794168016896[0;39m 远程地址: 127.0.0.1
2023-01-26 22:16:34.158 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274029794168016896[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:16:34.159 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029794168016896[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:16:34.159 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029794168016896[0;39m ==> Parameters: 
2023-01-26 22:16:34.173 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029794168016896[0;39m <==    Columns: count(0)
2023-01-26 22:16:34.173 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274029794168016896[0;39m <==        Row: 5
2023-01-26 22:16:34.174 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274029794168016896[0;39m <==      Total: 1
2023-01-26 22:16:34.174 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029794168016896[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:16:34.175 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029794168016896[0;39m ==> Parameters: 
2023-01-26 22:16:34.176 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:16:34.177 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:16:34.177 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:34.177 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:34.179 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:34.179 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274029794168016896[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:16:34.180 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274029794168016896[0;39m <==      Total: 5
2023-01-26 22:16:34.180 INFO  com.example.wiki.service.EbookService             :51   [32m274029794168016896[0;39m 总行数 5
2023-01-26 22:16:34.180 INFO  com.example.wiki.service.EbookService             :52   [32m274029794168016896[0;39m 总页数 0
2023-01-26 22:16:34.181 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274029794168016896[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:16:34.181 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274029794168016896[0;39m ------------- 结束 耗时：24 ms -------------
2023-01-26 22:16:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274029797741563904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029797741563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:16:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029797741563904[0;39m ==> Parameters: 
2023-01-26 22:16:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029797741563904[0;39m <==    Updates: 1
2023-01-26 22:16:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274029797741563904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:17:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274029902620135424[0;39m 生成今日电子书快照开始
2023-01-26 22:17:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029902620135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:17:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029902620135424[0;39m ==> Parameters: 
2023-01-26 22:17:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274029902620135424[0;39m <==    Updates: 0
2023-01-26 22:17:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274029902620135424[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 22:17:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274029923558100992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:17:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029923558100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:17:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029923558100992[0;39m ==> Parameters: 
2023-01-26 22:17:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274029923558100992[0;39m <==    Updates: 1
2023-01-26 22:17:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274029923558100992[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:17:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274030049399803904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:17:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030049399803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:17:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030049399803904[0;39m ==> Parameters: 
2023-01-26 22:17:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030049399803904[0;39m <==    Updates: 1
2023-01-26 22:17:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274030049399803904[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:18:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274030154244820992[0;39m 生成今日电子书快照开始
2023-01-26 22:18:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030154244820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:18:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030154244820992[0;39m ==> Parameters: 
2023-01-26 22:18:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030154244820992[0;39m <==    Updates: 0
2023-01-26 22:18:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274030154244820992[0;39m 生成今日电子书快照结束，耗时：12毫秒
2023-01-26 22:18:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274030175245701120[0;39m 更新电子书下的文档数据开始
2023-01-26 22:18:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030175245701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:18:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030175245701120[0;39m ==> Parameters: 
2023-01-26 22:18:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030175245701120[0;39m <==    Updates: 1
2023-01-26 22:18:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274030175245701120[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:18:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274030301045460992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:18:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030301045460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:18:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030301045460992[0;39m ==> Parameters: 
2023-01-26 22:18:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030301045460992[0;39m <==    Updates: 1
2023-01-26 22:18:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274030301045460992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:19:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274030405915643904[0;39m 生成今日电子书快照开始
2023-01-26 22:19:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030405915643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:19:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030405915643904[0;39m ==> Parameters: 
2023-01-26 22:19:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030405915643904[0;39m <==    Updates: 0
2023-01-26 22:19:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274030405915643904[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 22:19:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274030426891358208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030426891358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030426891358208[0;39m ==> Parameters: 
2023-01-26 22:19:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030426891358208[0;39m <==    Updates: 1
2023-01-26 22:19:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274030426891358208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:19:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274030552707895296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030552707895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:19:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030552707895296[0;39m ==> Parameters: 
2023-01-26 22:19:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030552707895296[0;39m <==    Updates: 1
2023-01-26 22:19:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274030552707895296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:20:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274030657573883904[0;39m 生成今日电子书快照开始
2023-01-26 22:20:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030657573883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:20:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030657573883904[0;39m ==> Parameters: 
2023-01-26 22:20:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030657573883904[0;39m <==    Updates: 0
2023-01-26 22:20:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274030657573883904[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:20:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274030678574764032[0;39m 更新电子书下的文档数据开始
2023-01-26 22:20:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030678574764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:20:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030678574764032[0;39m ==> Parameters: 
2023-01-26 22:20:05.022 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030678574764032[0;39m <==    Updates: 1
2023-01-26 22:20:05.023 INFO  com.example.wiki.job.DocJob                       :35   [32m274030678574764032[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:20:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274030804366135296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:20:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030804366135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:20:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030804366135296[0;39m ==> Parameters: 
2023-01-26 22:20:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030804366135296[0;39m <==    Updates: 1
2023-01-26 22:20:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274030804366135296[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:21:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274030909227929600[0;39m 生成今日电子书快照开始
2023-01-26 22:21:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030909227929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:21:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030909227929600[0;39m ==> Parameters: 
2023-01-26 22:21:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274030909227929600[0;39m <==    Updates: 0
2023-01-26 22:21:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274030909227929600[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 22:21:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274030930212032512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030930212032512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030930212032512[0;39m ==> Parameters: 
2023-01-26 22:21:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274030930212032512[0;39m <==    Updates: 1
2023-01-26 22:21:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274030930212032512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:21:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274031055999209472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:21:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031055999209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:21:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031055999209472[0;39m ==> Parameters: 
2023-01-26 22:21:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031055999209472[0;39m <==    Updates: 1
2023-01-26 22:21:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274031055999209472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:22:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274031160915529728[0;39m 生成今日电子书快照开始
2023-01-26 22:22:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031160915529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:22:00.027 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031160915529728[0;39m ==> Parameters: 
2023-01-26 22:22:00.033 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031160915529728[0;39m <==    Updates: 0
2023-01-26 22:22:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274031160915529728[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 22:22:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274031181845106688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:22:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031181845106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:22:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031181845106688[0;39m ==> Parameters: 
2023-01-26 22:22:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031181845106688[0;39m <==    Updates: 1
2023-01-26 22:22:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274031181845106688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:22:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274031307678420992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:22:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031307678420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:22:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031307678420992[0;39m ==> Parameters: 
2023-01-26 22:22:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031307678420992[0;39m <==    Updates: 1
2023-01-26 22:22:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274031307678420992[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:23:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274031412515049472[0;39m 生成今日电子书快照开始
2023-01-26 22:23:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031412515049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:23:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031412515049472[0;39m ==> Parameters: 
2023-01-26 22:23:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031412515049472[0;39m <==    Updates: 0
2023-01-26 22:23:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274031412515049472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 22:23:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274031433520123904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031433520123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:23:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031433520123904[0;39m ==> Parameters: 
2023-01-26 22:23:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031433520123904[0;39m <==    Updates: 1
2023-01-26 22:23:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274031433520123904[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:23:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274031559357632512[0;39m 更新电子书下的文档数据开始
2023-01-26 22:23:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031559357632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:23:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031559357632512[0;39m ==> Parameters: 
2023-01-26 22:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031559357632512[0;39m <==    Updates: 1
2023-01-26 22:23:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274031559357632512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:24:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274031664211038208[0;39m 生成今日电子书快照开始
2023-01-26 22:24:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031664211038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:24:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031664211038208[0;39m ==> Parameters: 
2023-01-26 22:24:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031664211038208[0;39m <==    Updates: 0
2023-01-26 22:24:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274031664211038208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:24:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274031685195141120[0;39m 更新电子书下的文档数据开始
2023-01-26 22:24:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031685195141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:24:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031685195141120[0;39m ==> Parameters: 
2023-01-26 22:24:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031685195141120[0;39m <==    Updates: 1
2023-01-26 22:24:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274031685195141120[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:24:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274031811003289600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031811003289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031811003289600[0;39m ==> Parameters: 
2023-01-26 22:24:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031811003289600[0;39m <==    Updates: 1
2023-01-26 22:24:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274031811003289600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:25:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274031915852500992[0;39m 生成今日电子书快照开始
2023-01-26 22:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031915852500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031915852500992[0;39m ==> Parameters: 
2023-01-26 22:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274031915852500992[0;39m <==    Updates: 0
2023-01-26 22:25:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274031915852500992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 22:25:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274031936819826688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:25:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031936819826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:25:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031936819826688[0;39m ==> Parameters: 
2023-01-26 22:25:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274031936819826688[0;39m <==    Updates: 1
2023-01-26 22:25:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274031936819826688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:25:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274032062686695424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:25:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032062686695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:25:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032062686695424[0;39m ==> Parameters: 
2023-01-26 22:25:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032062686695424[0;39m <==    Updates: 1
2023-01-26 22:25:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274032062686695424[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:26:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274032167498158080[0;39m 生成今日电子书快照开始
2023-01-26 22:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032167498158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032167498158080[0;39m ==> Parameters: 
2023-01-26 22:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032167498158080[0;39m <==    Updates: 0
2023-01-26 22:26:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274032167498158080[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:26:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274032188469678080[0;39m 更新电子书下的文档数据开始
2023-01-26 22:26:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032188469678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:26:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032188469678080[0;39m ==> Parameters: 
2023-01-26 22:26:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032188469678080[0;39m <==    Updates: 1
2023-01-26 22:26:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274032188469678080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:26:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274032314319769600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:26:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032314319769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:26:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032314319769600[0;39m ==> Parameters: 
2023-01-26 22:26:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032314319769600[0;39m <==    Updates: 1
2023-01-26 22:26:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274032314319769600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:27:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274032419194146816[0;39m 生成今日电子书快照开始
2023-01-26 22:27:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032419194146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:27:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032419194146816[0;39m ==> Parameters: 
2023-01-26 22:27:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032419194146816[0;39m <==    Updates: 0
2023-01-26 22:27:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274032419194146816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:27:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274032440140500992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:27:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032440140500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:27:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032440140500992[0;39m ==> Parameters: 
2023-01-26 22:27:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032440140500992[0;39m <==    Updates: 1
2023-01-26 22:27:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274032440140500992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:27:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274032565961232384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:27:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032565961232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:27:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032565961232384[0;39m ==> Parameters: 
2023-01-26 22:27:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032565961232384[0;39m <==    Updates: 1
2023-01-26 22:27:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274032565961232384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:28:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274032670823026688[0;39m 生成今日电子书快照开始
2023-01-26 22:28:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032670823026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:28:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032670823026688[0;39m ==> Parameters: 
2023-01-26 22:28:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032670823026688[0;39m <==    Updates: 0
2023-01-26 22:28:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274032670823026688[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 22:28:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274032691777769472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:28:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032691777769472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:28:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032691777769472[0;39m ==> Parameters: 
2023-01-26 22:28:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032691777769472[0;39m <==    Updates: 1
2023-01-26 22:28:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274032691777769472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:28:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274032817606889472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:28:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032817606889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:28:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032817606889472[0;39m ==> Parameters: 
2023-01-26 22:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032817606889472[0;39m <==    Updates: 1
2023-01-26 22:28:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m274032817606889472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:29:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274032922468683776[0;39m 生成今日电子书快照开始
2023-01-26 22:29:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032922468683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:29:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032922468683776[0;39m ==> Parameters: 
2023-01-26 22:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274032922468683776[0;39m <==    Updates: 0
2023-01-26 22:29:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274032922468683776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:29:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274032943473758208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:29:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032943473758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:29:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032943473758208[0;39m ==> Parameters: 
2023-01-26 22:29:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274032943473758208[0;39m <==    Updates: 1
2023-01-26 22:29:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274032943473758208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:29:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274033069302878208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:29:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033069302878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:29:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033069302878208[0;39m ==> Parameters: 
2023-01-26 22:29:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033069302878208[0;39m <==    Updates: 1
2023-01-26 22:29:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274033069302878208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:29:58.233 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274033166707200000[0;39m ------------- 开始 -------------
2023-01-26 22:29:58.234 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274033166707200000[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:29:58.234 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274033166707200000[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:29:58.234 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274033166707200000[0;39m 远程地址: 127.0.0.1
2023-01-26 22:29:58.235 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274033166707200000[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:29:58.240 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033166707200000[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:29:58.241 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033166707200000[0;39m ==> Parameters: 
2023-01-26 22:29:58.253 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033166707200000[0;39m <==    Columns: count(0)
2023-01-26 22:29:58.253 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033166707200000[0;39m <==        Row: 5
2023-01-26 22:29:58.254 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033166707200000[0;39m <==      Total: 1
2023-01-26 22:29:58.255 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033166707200000[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:29:58.255 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033166707200000[0;39m ==> Parameters: 
2023-01-26 22:29:58.256 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:29:58.257 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:29:58.257 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:29:58.257 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:29:58.258 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:29:58.258 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033166707200000[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:29:58.259 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033166707200000[0;39m <==      Total: 5
2023-01-26 22:29:58.259 INFO  com.example.wiki.service.EbookService             :51   [32m274033166707200000[0;39m 总行数 5
2023-01-26 22:29:58.259 INFO  com.example.wiki.service.EbookService             :52   [32m274033166707200000[0;39m 总页数 0
2023-01-26 22:29:58.260 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274033166707200000[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:29:58.260 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274033166707200000[0;39m ------------- 结束 耗时：27 ms -------------
2023-01-26 22:30:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274033174160478208[0;39m 生成今日电子书快照开始
2023-01-26 22:30:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033174160478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:30:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033174160478208[0;39m ==> Parameters: 
2023-01-26 22:30:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033174160478208[0;39m <==    Updates: 0
2023-01-26 22:30:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274033174160478208[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:30:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274033195106832384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033195106832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033195106832384[0;39m ==> Parameters: 
2023-01-26 22:30:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033195106832384[0;39m <==    Updates: 1
2023-01-26 22:30:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274033195106832384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:30:21.993 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274033266363863040[0;39m ------------- 开始 -------------
2023-01-26 22:30:21.993 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274033266363863040[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:30:21.994 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274033266363863040[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:30:21.995 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274033266363863040[0;39m 远程地址: 127.0.0.1
2023-01-26 22:30:21.996 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274033266363863040[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:30:21.998 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033266363863040[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:30:21.999 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033266363863040[0;39m ==> Parameters: 
2023-01-26 22:30:22.001 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033266363863040[0;39m <==    Columns: count(0)
2023-01-26 22:30:22.002 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033266363863040[0;39m <==        Row: 5
2023-01-26 22:30:22.002 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033266363863040[0;39m <==      Total: 1
2023-01-26 22:30:22.002 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033266363863040[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:30:22.003 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033266363863040[0;39m ==> Parameters: 
2023-01-26 22:30:22.004 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:30:22.004 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:30:22.005 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:22.005 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:22.005 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:22.006 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033266363863040[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:22.006 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033266363863040[0;39m <==      Total: 5
2023-01-26 22:30:22.006 INFO  com.example.wiki.service.EbookService             :51   [32m274033266363863040[0;39m 总行数 5
2023-01-26 22:30:22.007 INFO  com.example.wiki.service.EbookService             :52   [32m274033266363863040[0;39m 总页数 0
2023-01-26 22:30:22.007 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274033266363863040[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:30:22.008 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274033266363863040[0;39m ------------- 结束 耗时：15 ms -------------
2023-01-26 22:30:24.752 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274033277935947776[0;39m ------------- 开始 -------------
2023-01-26 22:30:24.752 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274033277935947776[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:30:24.752 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274033277935947776[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:30:24.753 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274033277935947776[0;39m 远程地址: 127.0.0.1
2023-01-26 22:30:24.753 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274033277935947776[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:30:24.754 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033277935947776[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:30:24.755 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033277935947776[0;39m ==> Parameters: 
2023-01-26 22:30:24.757 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033277935947776[0;39m <==    Columns: count(0)
2023-01-26 22:30:24.757 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033277935947776[0;39m <==        Row: 5
2023-01-26 22:30:24.757 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033277935947776[0;39m <==      Total: 1
2023-01-26 22:30:24.758 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033277935947776[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:30:24.758 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033277935947776[0;39m ==> Parameters: 
2023-01-26 22:30:24.759 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:30:24.759 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:30:24.760 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:24.760 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:24.760 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:24.761 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033277935947776[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:24.761 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033277935947776[0;39m <==      Total: 5
2023-01-26 22:30:24.761 INFO  com.example.wiki.service.EbookService             :51   [32m274033277935947776[0;39m 总行数 5
2023-01-26 22:30:24.761 INFO  com.example.wiki.service.EbookService             :52   [32m274033277935947776[0;39m 总页数 0
2023-01-26 22:30:24.762 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274033277935947776[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:30:24.762 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274033277935947776[0;39m ------------- 结束 耗时：10 ms -------------
2023-01-26 22:30:26.456 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274033285083041792[0;39m ------------- 开始 -------------
2023-01-26 22:30:26.457 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274033285083041792[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:30:26.457 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274033285083041792[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:30:26.458 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274033285083041792[0;39m 远程地址: 127.0.0.1
2023-01-26 22:30:26.458 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274033285083041792[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:30:26.460 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033285083041792[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:30:26.460 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033285083041792[0;39m ==> Parameters: 
2023-01-26 22:30:26.463 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033285083041792[0;39m <==    Columns: count(0)
2023-01-26 22:30:26.464 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033285083041792[0;39m <==        Row: 5
2023-01-26 22:30:26.464 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033285083041792[0;39m <==      Total: 1
2023-01-26 22:30:26.465 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033285083041792[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:30:26.465 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033285083041792[0;39m ==> Parameters: 
2023-01-26 22:30:26.479 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:30:26.479 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:30:26.480 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:26.480 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:26.481 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:26.481 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033285083041792[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:26.482 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033285083041792[0;39m <==      Total: 5
2023-01-26 22:30:26.482 INFO  com.example.wiki.service.EbookService             :51   [32m274033285083041792[0;39m 总行数 5
2023-01-26 22:30:26.483 INFO  com.example.wiki.service.EbookService             :52   [32m274033285083041792[0;39m 总页数 0
2023-01-26 22:30:26.484 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274033285083041792[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:30:26.484 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274033285083041792[0;39m ------------- 结束 耗时：28 ms -------------
2023-01-26 22:30:30.656 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274033302699118592[0;39m ------------- 开始 -------------
2023-01-26 22:30:30.656 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274033302699118592[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:30:30.656 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274033302699118592[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:30:30.657 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274033302699118592[0;39m 远程地址: 127.0.0.1
2023-01-26 22:30:30.657 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274033302699118592[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:30:30.658 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033302699118592[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:30:30.659 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033302699118592[0;39m ==> Parameters: 
2023-01-26 22:30:30.661 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033302699118592[0;39m <==    Columns: count(0)
2023-01-26 22:30:30.661 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274033302699118592[0;39m <==        Row: 5
2023-01-26 22:30:30.662 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274033302699118592[0;39m <==      Total: 1
2023-01-26 22:30:30.662 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033302699118592[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:30:30.663 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033302699118592[0;39m ==> Parameters: 
2023-01-26 22:30:30.664 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:30:30.664 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:30:30.665 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:30.665 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:30.665 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:30.665 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274033302699118592[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:30:30.666 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274033302699118592[0;39m <==      Total: 5
2023-01-26 22:30:30.666 INFO  com.example.wiki.service.EbookService             :51   [32m274033302699118592[0;39m 总行数 5
2023-01-26 22:30:30.666 INFO  com.example.wiki.service.EbookService             :52   [32m274033302699118592[0;39m 总页数 0
2023-01-26 22:30:30.667 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274033302699118592[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:30:30.667 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274033302699118592[0;39m ------------- 结束 耗时：11 ms -------------
2023-01-26 22:30:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274033320931758080[0;39m 更新电子书下的文档数据开始
2023-01-26 22:30:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033320931758080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:30:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033320931758080[0;39m ==> Parameters: 
2023-01-26 22:30:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033320931758080[0;39m <==    Updates: 1
2023-01-26 22:30:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274033320931758080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:31:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274033425801940992[0;39m 生成今日电子书快照开始
2023-01-26 22:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033425801940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:31:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033425801940992[0;39m ==> Parameters: 
2023-01-26 22:31:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033425801940992[0;39m <==    Updates: 0
2023-01-26 22:31:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274033425801940992[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 22:31:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274033446756683776[0;39m 更新电子书下的文档数据开始
2023-01-26 22:31:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033446756683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:31:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033446756683776[0;39m ==> Parameters: 
2023-01-26 22:31:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033446756683776[0;39m <==    Updates: 1
2023-01-26 22:31:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274033446756683776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:31:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274033572610969600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:31:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033572610969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:31:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033572610969600[0;39m ==> Parameters: 
2023-01-26 22:31:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033572610969600[0;39m <==    Updates: 1
2023-01-26 22:31:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274033572610969600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:32:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274033677493735424[0;39m 生成今日电子书快照开始
2023-01-26 22:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033677493735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:32:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033677493735424[0;39m ==> Parameters: 
2023-01-26 22:32:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033677493735424[0;39m <==    Updates: 0
2023-01-26 22:32:00.028 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274033677493735424[0;39m 生成今日电子书快照结束，耗时：13毫秒
2023-01-26 22:32:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274033698440089600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033698440089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:32:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033698440089600[0;39m ==> Parameters: 
2023-01-26 22:32:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033698440089600[0;39m <==    Updates: 1
2023-01-26 22:32:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274033698440089600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:32:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274033824239849472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:32:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033824239849472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:32:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033824239849472[0;39m ==> Parameters: 
2023-01-26 22:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033824239849472[0;39m <==    Updates: 1
2023-01-26 22:32:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274033824239849472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:33:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274033929118420992[0;39m 生成今日电子书快照开始
2023-01-26 22:33:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033929118420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:33:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033929118420992[0;39m ==> Parameters: 
2023-01-26 22:33:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274033929118420992[0;39m <==    Updates: 0
2023-01-26 22:33:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274033929118420992[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:33:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274033950119301120[0;39m 更新电子书下的文档数据开始
2023-01-26 22:33:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033950119301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:33:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033950119301120[0;39m ==> Parameters: 
2023-01-26 22:33:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274033950119301120[0;39m <==    Updates: 1
2023-01-26 22:33:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274033950119301120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:33:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274034075944226816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:33:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034075944226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:33:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034075944226816[0;39m ==> Parameters: 
2023-01-26 22:33:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034075944226816[0;39m <==    Updates: 1
2023-01-26 22:33:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274034075944226816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:34:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274034180789243904[0;39m 生成今日电子书快照开始
2023-01-26 22:34:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034180789243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:34:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034180789243904[0;39m ==> Parameters: 
2023-01-26 22:34:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034180789243904[0;39m <==    Updates: 0
2023-01-26 22:34:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274034180789243904[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 22:34:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274034201781735424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:34:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034201781735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:34:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034201781735424[0;39m ==> Parameters: 
2023-01-26 22:34:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034201781735424[0;39m <==    Updates: 1
2023-01-26 22:34:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274034201781735424[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:34:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274034327568912384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:34:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034327568912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:34:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034327568912384[0;39m ==> Parameters: 
2023-01-26 22:34:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034327568912384[0;39m <==    Updates: 1
2023-01-26 22:34:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274034327568912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:35:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274034432430706688[0;39m 生成今日电子书快照开始
2023-01-26 22:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034432430706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:35:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034432430706688[0;39m ==> Parameters: 
2023-01-26 22:35:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034432430706688[0;39m <==    Updates: 0
2023-01-26 22:35:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274034432430706688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:35:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274034453435781120[0;39m 更新电子书下的文档数据开始
2023-01-26 22:35:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034453435781120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:35:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034453435781120[0;39m ==> Parameters: 
2023-01-26 22:35:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034453435781120[0;39m <==    Updates: 1
2023-01-26 22:35:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274034453435781120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:35:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274034579218763776[0;39m 更新电子书下的文档数据开始
2023-01-26 22:35:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034579218763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:35:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034579218763776[0;39m ==> Parameters: 
2023-01-26 22:35:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034579218763776[0;39m <==    Updates: 1
2023-01-26 22:35:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274034579218763776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:36:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274034684076363776[0;39m 生成今日电子书快照开始
2023-01-26 22:36:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034684076363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:36:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034684076363776[0;39m ==> Parameters: 
2023-01-26 22:36:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034684076363776[0;39m <==    Updates: 0
2023-01-26 22:36:00.030 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274034684076363776[0;39m 生成今日电子书快照结束，耗时：27毫秒
2023-01-26 22:36:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274034705073049600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034705073049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:36:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034705073049600[0;39m ==> Parameters: 
2023-01-26 22:36:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034705073049600[0;39m <==    Updates: 1
2023-01-26 22:36:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274034705073049600[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:36:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274034830893780992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:36:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034830893780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:36:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034830893780992[0;39m ==> Parameters: 
2023-01-26 22:36:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034830893780992[0;39m <==    Updates: 1
2023-01-26 22:36:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274034830893780992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:37:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274034935789129728[0;39m 生成今日电子书快照开始
2023-01-26 22:37:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034935789129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:37:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034935789129728[0;39m ==> Parameters: 
2023-01-26 22:37:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274034935789129728[0;39m <==    Updates: 0
2023-01-26 22:37:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274034935789129728[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:37:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274034956697735168[0;39m 更新电子书下的文档数据开始
2023-01-26 22:37:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034956697735168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:37:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034956697735168[0;39m ==> Parameters: 
2023-01-26 22:37:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274034956697735168[0;39m <==    Updates: 1
2023-01-26 22:37:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274034956697735168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:37:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274035082577186816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:37:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035082577186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:37:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035082577186816[0;39m ==> Parameters: 
2023-01-26 22:37:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035082577186816[0;39m <==    Updates: 1
2023-01-26 22:37:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274035082577186816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:38:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274035187413815296[0;39m 生成今日电子书快照开始
2023-01-26 22:38:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035187413815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:38:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035187413815296[0;39m ==> Parameters: 
2023-01-26 22:38:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035187413815296[0;39m <==    Updates: 0
2023-01-26 22:38:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274035187413815296[0;39m 生成今日电子书快照结束，耗时：16毫秒
2023-01-26 22:38:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274035208385335296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:38:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035208385335296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:38:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035208385335296[0;39m ==> Parameters: 
2023-01-26 22:38:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035208385335296[0;39m <==    Updates: 1
2023-01-26 22:38:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274035208385335296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:38:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274035334235426816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:38:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035334235426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:38:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035334235426816[0;39m ==> Parameters: 
2023-01-26 22:38:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035334235426816[0;39m <==    Updates: 1
2023-01-26 22:38:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274035334235426816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:39:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274035439055278080[0;39m 生成今日电子书快照开始
2023-01-26 22:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035439055278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:39:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035439055278080[0;39m ==> Parameters: 
2023-01-26 22:39:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035439055278080[0;39m <==    Updates: 0
2023-01-26 22:39:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274035439055278080[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:39:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274035460064546816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:39:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035460064546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:39:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035460064546816[0;39m ==> Parameters: 
2023-01-26 22:39:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035460064546816[0;39m <==    Updates: 1
2023-01-26 22:39:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274035460064546816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:39:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274035585864306688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:39:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035585864306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:39:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035585864306688[0;39m ==> Parameters: 
2023-01-26 22:39:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035585864306688[0;39m <==    Updates: 1
2023-01-26 22:39:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274035585864306688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:40:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274035690734489600[0;39m 生成今日电子书快照开始
2023-01-26 22:40:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035690734489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:40:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035690734489600[0;39m ==> Parameters: 
2023-01-26 22:40:00.029 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035690734489600[0;39m <==    Updates: 0
2023-01-26 22:40:00.038 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274035690734489600[0;39m 生成今日电子书快照结束，耗时：29毫秒
2023-01-26 22:40:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274035711722786816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:40:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035711722786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:40:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035711722786816[0;39m ==> Parameters: 
2023-01-26 22:40:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035711722786816[0;39m <==    Updates: 1
2023-01-26 22:40:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274035711722786816[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:40:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274035837543518208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:40:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035837543518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:40:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035837543518208[0;39m ==> Parameters: 
2023-01-26 22:40:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035837543518208[0;39m <==    Updates: 1
2023-01-26 22:40:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274035837543518208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:41:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274035942392729600[0;39m 生成今日电子书快照开始
2023-01-26 22:41:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035942392729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:41:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035942392729600[0;39m ==> Parameters: 
2023-01-26 22:41:00.026 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274035942392729600[0;39m <==    Updates: 0
2023-01-26 22:41:00.027 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274035942392729600[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 22:41:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274035963393609728[0;39m 更新电子书下的文档数据开始
2023-01-26 22:41:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035963393609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:41:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035963393609728[0;39m ==> Parameters: 
2023-01-26 22:41:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274035963393609728[0;39m <==    Updates: 1
2023-01-26 22:41:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m274035963393609728[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:41:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274036089210146816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:41:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036089210146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:41:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036089210146816[0;39m ==> Parameters: 
2023-01-26 22:41:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036089210146816[0;39m <==    Updates: 1
2023-01-26 22:41:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274036089210146816[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:42:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274036194042580992[0;39m 生成今日电子书快照开始
2023-01-26 22:42:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036194042580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:42:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036194042580992[0;39m ==> Parameters: 
2023-01-26 22:42:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036194042580992[0;39m <==    Updates: 0
2023-01-26 22:42:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274036194042580992[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 22:42:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274036215051849728[0;39m 更新电子书下的文档数据开始
2023-01-26 22:42:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036215051849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:42:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036215051849728[0;39m ==> Parameters: 
2023-01-26 22:42:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036215051849728[0;39m <==    Updates: 1
2023-01-26 22:42:05.021 INFO  com.example.wiki.job.DocJob                       :35   [32m274036215051849728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:42:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274036340880969728[0;39m 更新电子书下的文档数据开始
2023-01-26 22:42:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036340880969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:42:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036340880969728[0;39m ==> Parameters: 
2023-01-26 22:42:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036340880969728[0;39m <==    Updates: 1
2023-01-26 22:42:35.022 INFO  com.example.wiki.job.DocJob                       :35   [32m274036340880969728[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:43:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274036445721792512[0;39m 生成今日电子书快照开始
2023-01-26 22:43:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036445721792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:43:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036445721792512[0;39m ==> Parameters: 
2023-01-26 22:43:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036445721792512[0;39m <==    Updates: 0
2023-01-26 22:43:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274036445721792512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:43:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274036466676535296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:43:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036466676535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:43:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036466676535296[0;39m ==> Parameters: 
2023-01-26 22:43:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036466676535296[0;39m <==    Updates: 1
2023-01-26 22:43:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274036466676535296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:43:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274036592505655296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036592505655296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:43:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036592505655296[0;39m ==> Parameters: 
2023-01-26 22:43:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036592505655296[0;39m <==    Updates: 1
2023-01-26 22:43:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274036592505655296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:44:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274036697338089472[0;39m 生成今日电子书快照开始
2023-01-26 22:44:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036697338089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:44:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036697338089472[0;39m ==> Parameters: 
2023-01-26 22:44:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036697338089472[0;39m <==    Updates: 0
2023-01-26 22:44:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274036697338089472[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:44:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274036718322192384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:44:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036718322192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:44:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036718322192384[0;39m ==> Parameters: 
2023-01-26 22:44:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036718322192384[0;39m <==    Updates: 1
2023-01-26 22:44:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274036718322192384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:44:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274036844172283904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:44:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036844172283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:44:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036844172283904[0;39m ==> Parameters: 
2023-01-26 22:44:35.035 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036844172283904[0;39m <==    Updates: 1
2023-01-26 22:44:35.036 INFO  com.example.wiki.job.DocJob                       :35   [32m274036844172283904[0;39m 更新电子书下的文档数据结束，耗时：26毫秒
2023-01-26 22:45:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274036949046661120[0;39m 生成今日电子书快照开始
2023-01-26 22:45:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036949046661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:45:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036949046661120[0;39m ==> Parameters: 
2023-01-26 22:45:00.033 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274036949046661120[0;39m <==    Updates: 0
2023-01-26 22:45:00.034 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274036949046661120[0;39m 生成今日电子书快照结束，耗时：21毫秒
2023-01-26 22:45:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274036969988820992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:45:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036969988820992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:45:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036969988820992[0;39m ==> Parameters: 
2023-01-26 22:45:05.026 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274036969988820992[0;39m <==    Updates: 1
2023-01-26 22:45:05.027 INFO  com.example.wiki.job.DocJob                       :35   [32m274036969988820992[0;39m 更新电子书下的文档数据结束，耗时：21毫秒
2023-01-26 22:45:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274037095826329600[0;39m 更新电子书下的文档数据开始
2023-01-26 22:45:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037095826329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:45:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037095826329600[0;39m ==> Parameters: 
2023-01-26 22:45:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037095826329600[0;39m <==    Updates: 1
2023-01-26 22:45:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274037095826329600[0;39m 更新电子书下的文档数据结束，耗时：11毫秒
2023-01-26 22:46:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274037200704901120[0;39m 生成今日电子书快照开始
2023-01-26 22:46:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037200704901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:46:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037200704901120[0;39m ==> Parameters: 
2023-01-26 22:46:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037200704901120[0;39m <==    Updates: 0
2023-01-26 22:46:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274037200704901120[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 22:46:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274037221680615424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037221680615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:46:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037221680615424[0;39m ==> Parameters: 
2023-01-26 22:46:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037221680615424[0;39m <==    Updates: 1
2023-01-26 22:46:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274037221680615424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:46:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274037347455209472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:46:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037347455209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:46:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037347455209472[0;39m ==> Parameters: 
2023-01-26 22:46:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037347455209472[0;39m <==    Updates: 1
2023-01-26 22:46:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274037347455209472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:47:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274037452329586688[0;39m 生成今日电子书快照开始
2023-01-26 22:47:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037452329586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:47:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037452329586688[0;39m ==> Parameters: 
2023-01-26 22:47:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037452329586688[0;39m <==    Updates: 0
2023-01-26 22:47:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274037452329586688[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 22:47:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274037473301106688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:47:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037473301106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:47:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037473301106688[0;39m ==> Parameters: 
2023-01-26 22:47:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037473301106688[0;39m <==    Updates: 1
2023-01-26 22:47:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274037473301106688[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 22:47:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274037599109255168[0;39m 更新电子书下的文档数据开始
2023-01-26 22:47:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037599109255168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:47:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037599109255168[0;39m ==> Parameters: 
2023-01-26 22:47:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037599109255168[0;39m <==    Updates: 1
2023-01-26 22:47:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m274037599109255168[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:48:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274037704008798208[0;39m 生成今日电子书快照开始
2023-01-26 22:48:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037704008798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:48:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037704008798208[0;39m ==> Parameters: 
2023-01-26 22:48:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037704008798208[0;39m <==    Updates: 0
2023-01-26 22:48:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274037704008798208[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 22:48:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274037724988706816[0;39m 更新电子书下的文档数据开始
2023-01-26 22:48:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037724988706816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:48:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037724988706816[0;39m ==> Parameters: 
2023-01-26 22:48:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037724988706816[0;39m <==    Updates: 1
2023-01-26 22:48:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274037724988706816[0;39m 更新电子书下的文档数据结束，耗时：7毫秒
2023-01-26 22:48:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274037850809438208[0;39m 更新电子书下的文档数据开始
2023-01-26 22:48:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037850809438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:48:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037850809438208[0;39m ==> Parameters: 
2023-01-26 22:48:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037850809438208[0;39m <==    Updates: 1
2023-01-26 22:48:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274037850809438208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:49:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274037955662843904[0;39m 生成今日电子书快照开始
2023-01-26 22:49:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037955662843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:49:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037955662843904[0;39m ==> Parameters: 
2023-01-26 22:49:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274037955662843904[0;39m <==    Updates: 0
2023-01-26 22:49:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274037955662843904[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:49:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274037976600809472[0;39m 更新电子书下的文档数据开始
2023-01-26 22:49:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037976600809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:49:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037976600809472[0;39m ==> Parameters: 
2023-01-26 22:49:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274037976600809472[0;39m <==    Updates: 1
2023-01-26 22:49:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274037976600809472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:49:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274038102446706688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:49:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038102446706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:49:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038102446706688[0;39m ==> Parameters: 
2023-01-26 22:49:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038102446706688[0;39m <==    Updates: 1
2023-01-26 22:49:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274038102446706688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:50:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274038207325278208[0;39m 生成今日电子书快照开始
2023-01-26 22:50:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038207325278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:50:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038207325278208[0;39m ==> Parameters: 
2023-01-26 22:50:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038207325278208[0;39m <==    Updates: 0
2023-01-26 22:50:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274038207325278208[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 22:50:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274038228292603904[0;39m 更新电子书下的文档数据开始
2023-01-26 22:50:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038228292603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:50:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038228292603904[0;39m ==> Parameters: 
2023-01-26 22:50:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038228292603904[0;39m <==    Updates: 1
2023-01-26 22:50:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274038228292603904[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:50:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274038354109140992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:50:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038354109140992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:50:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038354109140992[0;39m ==> Parameters: 
2023-01-26 22:50:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038354109140992[0;39m <==    Updates: 1
2023-01-26 22:50:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274038354109140992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:51:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274038458970935296[0;39m 生成今日电子书快照开始
2023-01-26 22:51:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038458970935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:51:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038458970935296[0;39m ==> Parameters: 
2023-01-26 22:51:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038458970935296[0;39m <==    Updates: 0
2023-01-26 22:51:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274038458970935296[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:51:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274038479929872384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:51:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038479929872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:51:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038479929872384[0;39m ==> Parameters: 
2023-01-26 22:51:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038479929872384[0;39m <==    Updates: 1
2023-01-26 22:51:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274038479929872384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:51:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274038605758992384[0;39m 更新电子书下的文档数据开始
2023-01-26 22:51:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038605758992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:51:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038605758992384[0;39m ==> Parameters: 
2023-01-26 22:51:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038605758992384[0;39m <==    Updates: 1
2023-01-26 22:51:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274038605758992384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:51:53.496 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274038683320061952[0;39m ------------- 开始 -------------
2023-01-26 22:51:53.496 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274038683320061952[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:51:53.496 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274038683320061952[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:51:53.496 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274038683320061952[0;39m 远程地址: 127.0.0.1
2023-01-26 22:51:53.498 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274038683320061952[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:51:53.500 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038683320061952[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:51:53.502 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038683320061952[0;39m ==> Parameters: 
2023-01-26 22:51:53.505 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038683320061952[0;39m <==    Columns: count(0)
2023-01-26 22:51:53.506 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038683320061952[0;39m <==        Row: 5
2023-01-26 22:51:53.506 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038683320061952[0;39m <==      Total: 1
2023-01-26 22:51:53.507 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038683320061952[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:51:53.507 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038683320061952[0;39m ==> Parameters: 
2023-01-26 22:51:53.508 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:51:53.508 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:51:53.509 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:51:53.509 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:51:53.509 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:51:53.510 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038683320061952[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:51:53.510 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038683320061952[0;39m <==      Total: 5
2023-01-26 22:51:53.510 INFO  com.example.wiki.service.EbookService             :51   [32m274038683320061952[0;39m 总行数 5
2023-01-26 22:51:53.511 INFO  com.example.wiki.service.EbookService             :52   [32m274038683320061952[0;39m 总页数 0
2023-01-26 22:51:53.511 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274038683320061952[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:51:53.511 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274038683320061952[0;39m ------------- 结束 耗时：15 ms -------------
2023-01-26 22:51:53.706 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m274029776187035648[0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 22:51:53.707 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m274029776187035648[0;39m 接口登录拦截：，path：http://127.0.0.1:8080/favicon.ico
2023-01-26 22:51:53.707 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m274029776187035648[0;39m 登录校验开始，token：null
2023-01-26 22:51:53.707 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m274029776187035648[0;39m token为空，请求被拦截
2023-01-26 22:51:54.467 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m274029794168016896[0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 22:51:54.467 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m274029794168016896[0;39m 接口登录拦截：，path：http://127.0.0.1:8080/favicon.ico
2023-01-26 22:51:54.468 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m274029794168016896[0;39m 登录校验开始，token：null
2023-01-26 22:51:54.468 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m274029794168016896[0;39m token为空，请求被拦截
2023-01-26 22:52:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274038710641758208[0;39m 生成今日电子书快照开始
2023-01-26 22:52:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038710641758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:52:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038710641758208[0;39m ==> Parameters: 
2023-01-26 22:52:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038710641758208[0;39m <==    Updates: 0
2023-01-26 22:52:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274038710641758208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:52:05.016 INFO  com.example.wiki.job.DocJob                       :32   [32m274038731638444032[0;39m 更新电子书下的文档数据开始
2023-01-26 22:52:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038731638444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:52:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038731638444032[0;39m ==> Parameters: 
2023-01-26 22:52:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038731638444032[0;39m <==    Updates: 1
2023-01-26 22:52:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274038731638444032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:52:12.595 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274038763427074048[0;39m ------------- 开始 -------------
2023-01-26 22:52:12.595 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274038763427074048[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:52:12.596 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274038763427074048[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:52:12.596 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274038763427074048[0;39m 远程地址: 127.0.0.1
2023-01-26 22:52:12.596 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274038763427074048[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:52:12.598 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038763427074048[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:52:12.598 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038763427074048[0;39m ==> Parameters: 
2023-01-26 22:52:12.601 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038763427074048[0;39m <==    Columns: count(0)
2023-01-26 22:52:12.601 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038763427074048[0;39m <==        Row: 5
2023-01-26 22:52:12.602 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038763427074048[0;39m <==      Total: 1
2023-01-26 22:52:12.602 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038763427074048[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:52:12.602 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038763427074048[0;39m ==> Parameters: 
2023-01-26 22:52:12.603 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:52:12.603 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:52:12.604 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:12.604 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:12.604 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:12.604 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038763427074048[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:12.604 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038763427074048[0;39m <==      Total: 5
2023-01-26 22:52:12.605 INFO  com.example.wiki.service.EbookService             :51   [32m274038763427074048[0;39m 总行数 5
2023-01-26 22:52:12.605 INFO  com.example.wiki.service.EbookService             :52   [32m274038763427074048[0;39m 总页数 0
2023-01-26 22:52:12.605 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274038763427074048[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:52:12.605 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274038763427074048[0;39m ------------- 结束 耗时：10 ms -------------
2023-01-26 22:52:20.500 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274038796583047168[0;39m ------------- 开始 -------------
2023-01-26 22:52:20.500 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274038796583047168[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:52:20.500 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274038796583047168[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:52:20.500 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274038796583047168[0;39m 远程地址: 127.0.0.1
2023-01-26 22:52:20.501 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274038796583047168[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:52:20.502 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038796583047168[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:52:20.502 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038796583047168[0;39m ==> Parameters: 
2023-01-26 22:52:20.504 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038796583047168[0;39m <==    Columns: count(0)
2023-01-26 22:52:20.504 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274038796583047168[0;39m <==        Row: 5
2023-01-26 22:52:20.505 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274038796583047168[0;39m <==      Total: 1
2023-01-26 22:52:20.505 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038796583047168[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:52:20.505 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038796583047168[0;39m ==> Parameters: 
2023-01-26 22:52:20.506 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:52:20.506 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:52:20.506 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:20.507 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:20.507 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:20.507 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274038796583047168[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:52:20.507 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274038796583047168[0;39m <==      Total: 5
2023-01-26 22:52:20.508 INFO  com.example.wiki.service.EbookService             :51   [32m274038796583047168[0;39m 总行数 5
2023-01-26 22:52:20.508 INFO  com.example.wiki.service.EbookService             :52   [32m274038796583047168[0;39m 总页数 0
2023-01-26 22:52:20.509 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274038796583047168[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:52:20.509 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274038796583047168[0;39m ------------- 结束 耗时：9 ms -------------
2023-01-26 22:52:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274038857400455168[0;39m 更新电子书下的文档数据开始
2023-01-26 22:52:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038857400455168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:52:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038857400455168[0;39m ==> Parameters: 
2023-01-26 22:52:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038857400455168[0;39m <==    Updates: 1
2023-01-26 22:52:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m274038857400455168[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:53:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274038962325164032[0;39m 生成今日电子书快照开始
2023-01-26 22:53:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038962325164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:53:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038962325164032[0;39m ==> Parameters: 
2023-01-26 22:53:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274038962325164032[0;39m <==    Updates: 0
2023-01-26 22:53:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274038962325164032[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 22:53:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274038983254740992[0;39m 更新电子书下的文档数据开始
2023-01-26 22:53:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038983254740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:53:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038983254740992[0;39m ==> Parameters: 
2023-01-26 22:53:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274038983254740992[0;39m <==    Updates: 1
2023-01-26 22:53:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274038983254740992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 22:53:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274039109079666688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:53:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039109079666688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:53:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039109079666688[0;39m ==> Parameters: 
2023-01-26 22:53:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039109079666688[0;39m <==    Updates: 1
2023-01-26 22:53:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274039109079666688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:54:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274039213983404032[0;39m 生成今日电子书快照开始
2023-01-26 22:54:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039213983404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:54:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039213983404032[0;39m ==> Parameters: 
2023-01-26 22:54:00.024 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039213983404032[0;39m <==    Updates: 0
2023-01-26 22:54:00.025 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274039213983404032[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:54:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274039234908786688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:54:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039234908786688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:54:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039234908786688[0;39m ==> Parameters: 
2023-01-26 22:54:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039234908786688[0;39m <==    Updates: 1
2023-01-26 22:54:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274039234908786688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:54:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274039360779849728[0;39m 更新电子书下的文档数据开始
2023-01-26 22:54:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039360779849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:54:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039360779849728[0;39m ==> Parameters: 
2023-01-26 22:54:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039360779849728[0;39m <==    Updates: 1
2023-01-26 22:54:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274039360779849728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:55:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274039465637449728[0;39m 生成今日电子书快照开始
2023-01-26 22:55:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039465637449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:55:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039465637449728[0;39m ==> Parameters: 
2023-01-26 22:55:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039465637449728[0;39m <==    Updates: 0
2023-01-26 22:55:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274039465637449728[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 22:55:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274039486558638080[0;39m 更新电子书下的文档数据开始
2023-01-26 22:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039486558638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039486558638080[0;39m ==> Parameters: 
2023-01-26 22:55:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039486558638080[0;39m <==    Updates: 1
2023-01-26 22:55:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m274039486558638080[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 22:55:35.019 INFO  com.example.wiki.job.DocJob                       :32   [32m274039612454866944[0;39m 更新电子书下的文档数据开始
2023-01-26 22:55:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039612454866944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:55:35.021 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039612454866944[0;39m ==> Parameters: 
2023-01-26 22:55:35.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039612454866944[0;39m <==    Updates: 1
2023-01-26 22:55:35.024 INFO  com.example.wiki.job.DocJob                       :35   [32m274039612454866944[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:56:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274039717257940992[0;39m 生成今日电子书快照开始
2023-01-26 22:56:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039717257940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:56:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039717257940992[0;39m ==> Parameters: 
2023-01-26 22:56:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039717257940992[0;39m <==    Updates: 0
2023-01-26 22:56:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274039717257940992[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 22:56:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274039738263015424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039738263015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:56:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039738263015424[0;39m ==> Parameters: 
2023-01-26 22:56:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039738263015424[0;39m <==    Updates: 1
2023-01-26 22:56:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274039738263015424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:56:35.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274039864033415168[0;39m 更新电子书下的文档数据开始
2023-01-26 22:56:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039864033415168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:56:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039864033415168[0;39m ==> Parameters: 
2023-01-26 22:56:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039864033415168[0;39m <==    Updates: 1
2023-01-26 22:56:35.003 INFO  com.example.wiki.job.DocJob                       :35   [32m274039864033415168[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:57:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274039968928763904[0;39m 生成今日电子书快照开始
2023-01-26 22:57:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039968928763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:57:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039968928763904[0;39m ==> Parameters: 
2023-01-26 22:57:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274039968928763904[0;39m <==    Updates: 0
2023-01-26 22:57:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274039968928763904[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 22:57:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274039989925449728[0;39m 更新电子书下的文档数据开始
2023-01-26 22:57:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039989925449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:57:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039989925449728[0;39m ==> Parameters: 
2023-01-26 22:57:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274039989925449728[0;39m <==    Updates: 1
2023-01-26 22:57:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274039989925449728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:57:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274040115750375424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:57:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040115750375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:57:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040115750375424[0;39m ==> Parameters: 
2023-01-26 22:57:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040115750375424[0;39m <==    Updates: 1
2023-01-26 22:57:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274040115750375424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:58:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274040220616364032[0;39m 生成今日电子书快照开始
2023-01-26 22:58:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040220616364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:58:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040220616364032[0;39m ==> Parameters: 
2023-01-26 22:58:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040220616364032[0;39m <==    Updates: 0
2023-01-26 22:58:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274040220616364032[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 22:58:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274040241550135296[0;39m 更新电子书下的文档数据开始
2023-01-26 22:58:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040241550135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:58:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040241550135296[0;39m ==> Parameters: 
2023-01-26 22:58:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040241550135296[0;39m <==    Updates: 1
2023-01-26 22:58:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274040241550135296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 22:58:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274040367408615424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:58:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040367408615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:58:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040367408615424[0;39m ==> Parameters: 
2023-01-26 22:58:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040367408615424[0;39m <==    Updates: 1
2023-01-26 22:58:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274040367408615424[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 22:58:43.625 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274040403525767168[0;39m ------------- 开始 -------------
2023-01-26 22:58:43.626 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274040403525767168[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:58:43.627 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274040403525767168[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:58:43.627 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274040403525767168[0;39m 远程地址: 127.0.0.1
2023-01-26 22:58:43.627 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274040403525767168[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:58:43.629 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040403525767168[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:58:43.630 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040403525767168[0;39m ==> Parameters: 
2023-01-26 22:58:43.716 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040403525767168[0;39m <==    Columns: count(0)
2023-01-26 22:58:43.716 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040403525767168[0;39m <==        Row: 5
2023-01-26 22:58:43.717 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040403525767168[0;39m <==      Total: 1
2023-01-26 22:58:43.718 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040403525767168[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:58:43.718 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040403525767168[0;39m ==> Parameters: 
2023-01-26 22:58:43.719 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:58:43.720 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:58:43.721 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:43.721 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:43.721 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:43.722 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040403525767168[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:43.722 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040403525767168[0;39m <==      Total: 5
2023-01-26 22:58:43.722 INFO  com.example.wiki.service.EbookService             :51   [32m274040403525767168[0;39m 总行数 5
2023-01-26 22:58:43.722 INFO  com.example.wiki.service.EbookService             :52   [32m274040403525767168[0;39m 总页数 0
2023-01-26 22:58:43.723 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274040403525767168[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:58:43.723 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274040403525767168[0;39m ------------- 结束 耗时：98 ms -------------
2023-01-26 22:58:44.088 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m274029744071249920[0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 22:58:44.088 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m274029744071249920[0;39m 接口登录拦截：，path：http://127.0.0.1:8080/favicon.ico
2023-01-26 22:58:44.088 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m274029744071249920[0;39m 登录校验开始，token：null
2023-01-26 22:58:44.088 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m274029744071249920[0;39m token为空，请求被拦截
2023-01-26 22:58:44.406 INFO  com.example.wiki.interceptor.LoginInterceptor     :29   [32m274038683320061952[0;39m ------------- LoginInterceptor 开始 -------------
2023-01-26 22:58:44.407 INFO  com.example.wiki.interceptor.LoginInterceptor     :40   [32m274038683320061952[0;39m 接口登录拦截：，path：http://127.0.0.1:8080/favicon.ico
2023-01-26 22:58:44.407 INFO  com.example.wiki.interceptor.LoginInterceptor     :44   [32m274038683320061952[0;39m 登录校验开始，token：null
2023-01-26 22:58:44.407 INFO  com.example.wiki.interceptor.LoginInterceptor     :46   [32m274038683320061952[0;39m token为空，请求被拦截
2023-01-26 22:58:44.565 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274040407468412928[0;39m ------------- 开始 -------------
2023-01-26 22:58:44.565 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274040407468412928[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:58:44.566 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274040407468412928[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:58:44.566 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274040407468412928[0;39m 远程地址: 127.0.0.1
2023-01-26 22:58:44.567 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274040407468412928[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:58:44.569 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040407468412928[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:58:44.569 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040407468412928[0;39m ==> Parameters: 
2023-01-26 22:58:44.574 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040407468412928[0;39m <==    Columns: count(0)
2023-01-26 22:58:44.575 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040407468412928[0;39m <==        Row: 5
2023-01-26 22:58:44.576 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040407468412928[0;39m <==      Total: 1
2023-01-26 22:58:44.577 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040407468412928[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:58:44.577 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040407468412928[0;39m ==> Parameters: 
2023-01-26 22:58:44.579 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:58:44.579 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:58:44.580 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:44.580 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:44.581 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:44.581 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040407468412928[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:44.581 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040407468412928[0;39m <==      Total: 5
2023-01-26 22:58:44.582 INFO  com.example.wiki.service.EbookService             :51   [32m274040407468412928[0;39m 总行数 5
2023-01-26 22:58:44.582 INFO  com.example.wiki.service.EbookService             :52   [32m274040407468412928[0;39m 总页数 0
2023-01-26 22:58:44.582 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274040407468412928[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:58:44.582 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274040407468412928[0;39m ------------- 结束 耗时：17 ms -------------
2023-01-26 22:58:53.603 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274040445376532480[0;39m ------------- 开始 -------------
2023-01-26 22:58:53.603 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274040445376532480[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 22:58:53.603 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274040445376532480[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 22:58:53.604 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274040445376532480[0;39m 远程地址: 127.0.0.1
2023-01-26 22:58:53.604 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274040445376532480[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 22:58:53.605 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040445376532480[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 22:58:53.605 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040445376532480[0;39m ==> Parameters: 
2023-01-26 22:58:53.606 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040445376532480[0;39m <==    Columns: count(0)
2023-01-26 22:58:53.608 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274040445376532480[0;39m <==        Row: 5
2023-01-26 22:58:53.608 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274040445376532480[0;39m <==      Total: 1
2023-01-26 22:58:53.609 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040445376532480[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 22:58:53.609 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040445376532480[0;39m ==> Parameters: 
2023-01-26 22:58:53.611 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 22:58:53.612 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 22:58:53.612 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:53.612 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:53.612 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:53.613 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274040445376532480[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 22:58:53.613 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274040445376532480[0;39m <==      Total: 5
2023-01-26 22:58:53.613 INFO  com.example.wiki.service.EbookService             :51   [32m274040445376532480[0;39m 总行数 5
2023-01-26 22:58:53.614 INFO  com.example.wiki.service.EbookService             :52   [32m274040445376532480[0;39m 总页数 0
2023-01-26 22:58:53.614 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274040445376532480[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 22:58:53.614 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274040445376532480[0;39m ------------- 结束 耗时：11 ms -------------
2023-01-26 22:59:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274040472262021120[0;39m 生成今日电子书快照开始
2023-01-26 22:59:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040472262021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 22:59:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040472262021120[0;39m ==> Parameters: 
2023-01-26 22:59:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040472262021120[0;39m <==    Updates: 0
2023-01-26 22:59:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274040472262021120[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 22:59:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274040493237735424[0;39m 更新电子书下的文档数据开始
2023-01-26 22:59:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040493237735424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:59:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040493237735424[0;39m ==> Parameters: 
2023-01-26 22:59:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040493237735424[0;39m <==    Updates: 1
2023-01-26 22:59:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274040493237735424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 22:59:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274040619029106688[0;39m 更新电子书下的文档数据开始
2023-01-26 22:59:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040619029106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 22:59:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040619029106688[0;39m ==> Parameters: 
2023-01-26 22:59:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040619029106688[0;39m <==    Updates: 1
2023-01-26 22:59:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274040619029106688[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:00:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274040723874123776[0;39m 生成今日电子书快照开始
2023-01-26 23:00:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040723874123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:00:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040723874123776[0;39m ==> Parameters: 
2023-01-26 23:00:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040723874123776[0;39m <==    Updates: 0
2023-01-26 23:00:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274040723874123776[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 23:00:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274040744900169728[0;39m 更新电子书下的文档数据开始
2023-01-26 23:00:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040744900169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:00:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040744900169728[0;39m ==> Parameters: 
2023-01-26 23:00:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040744900169728[0;39m <==    Updates: 1
2023-01-26 23:00:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274040744900169728[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:00:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274040870695735296[0;39m 更新电子书下的文档数据开始
2023-01-26 23:00:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040870695735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:00:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040870695735296[0;39m ==> Parameters: 
2023-01-26 23:00:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040870695735296[0;39m <==    Updates: 1
2023-01-26 23:00:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274040870695735296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:01:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274040975553335296[0;39m 生成今日电子书快照开始
2023-01-26 23:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040975553335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:01:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040975553335296[0;39m ==> Parameters: 
2023-01-26 23:01:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274040975553335296[0;39m <==    Updates: 0
2023-01-26 23:01:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274040975553335296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 23:01:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274040996537438208[0;39m 更新电子书下的文档数据开始
2023-01-26 23:01:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040996537438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:01:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040996537438208[0;39m ==> Parameters: 
2023-01-26 23:01:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274040996537438208[0;39m <==    Updates: 1
2023-01-26 23:01:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274040996537438208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 23:01:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274041122374946816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:01:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041122374946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:01:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041122374946816[0;39m ==> Parameters: 
2023-01-26 23:01:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041122374946816[0;39m <==    Updates: 1
2023-01-26 23:01:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274041122374946816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 23:02:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274041227232546816[0;39m 生成今日电子书快照开始
2023-01-26 23:02:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041227232546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:02:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041227232546816[0;39m ==> Parameters: 
2023-01-26 23:02:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041227232546816[0;39m <==    Updates: 0
2023-01-26 23:02:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274041227232546816[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 23:02:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274041248174706688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:02:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041248174706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:02:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041248174706688[0;39m ==> Parameters: 
2023-01-26 23:02:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041248174706688[0;39m <==    Updates: 1
2023-01-26 23:02:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274041248174706688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:02:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274041374037381120[0;39m 更新电子书下的文档数据开始
2023-01-26 23:02:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041374037381120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:02:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041374037381120[0;39m ==> Parameters: 
2023-01-26 23:02:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041374037381120[0;39m <==    Updates: 1
2023-01-26 23:02:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274041374037381120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:03:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274041478878203904[0;39m 生成今日电子书快照开始
2023-01-26 23:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041478878203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041478878203904[0;39m ==> Parameters: 
2023-01-26 23:03:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041478878203904[0;39m <==    Updates: 0
2023-01-26 23:03:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274041478878203904[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 23:03:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274041499832946688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041499832946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041499832946688[0;39m ==> Parameters: 
2023-01-26 23:03:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041499832946688[0;39m <==    Updates: 1
2023-01-26 23:03:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274041499832946688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:03:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274041625691426816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041625691426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:03:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041625691426816[0;39m ==> Parameters: 
2023-01-26 23:03:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041625691426816[0;39m <==    Updates: 1
2023-01-26 23:03:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274041625691426816[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:04:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274041730528055296[0;39m 生成今日电子书快照开始
2023-01-26 23:04:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041730528055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:04:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041730528055296[0;39m ==> Parameters: 
2023-01-26 23:04:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041730528055296[0;39m <==    Updates: 0
2023-01-26 23:04:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274041730528055296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 23:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274041751516352512[0;39m 更新电子书下的文档数据开始
2023-01-26 23:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041751516352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:04:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041751516352512[0;39m ==> Parameters: 
2023-01-26 23:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041751516352512[0;39m <==    Updates: 1
2023-01-26 23:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274041751516352512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:04:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274041877324500992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:04:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041877324500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:04:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041877324500992[0;39m ==> Parameters: 
2023-01-26 23:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274041877324500992[0;39m <==    Updates: 1
2023-01-26 23:04:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274041877324500992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:05:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274041982215655424[0;39m 生成今日电子书快照开始
2023-01-26 23:05:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041982215655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:05:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041982215655424[0;39m ==> Parameters: 
2023-01-26 23:05:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274041982215655424[0;39m <==    Updates: 0
2023-01-26 23:05:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274041982215655424[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 23:05:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274042003149426688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:05:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042003149426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:05:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042003149426688[0;39m ==> Parameters: 
2023-01-26 23:05:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042003149426688[0;39m <==    Updates: 1
2023-01-26 23:05:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274042003149426688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:05:35.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274042128978546688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042128978546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042128978546688[0;39m ==> Parameters: 
2023-01-26 23:05:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042128978546688[0;39m <==    Updates: 1
2023-01-26 23:05:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274042128978546688[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:06:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274042233827758080[0;39m 生成今日电子书快照开始
2023-01-26 23:06:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042233827758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:06:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042233827758080[0;39m ==> Parameters: 
2023-01-26 23:06:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042233827758080[0;39m <==    Updates: 0
2023-01-26 23:06:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274042233827758080[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 23:06:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274042254820249600[0;39m 更新电子书下的文档数据开始
2023-01-26 23:06:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042254820249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:06:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042254820249600[0;39m ==> Parameters: 
2023-01-26 23:06:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042254820249600[0;39m <==    Updates: 1
2023-01-26 23:06:05.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274042254820249600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:06:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274042380678729728[0;39m 更新电子书下的文档数据开始
2023-01-26 23:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042380678729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:06:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042380678729728[0;39m ==> Parameters: 
2023-01-26 23:06:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042380678729728[0;39m <==    Updates: 1
2023-01-26 23:06:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274042380678729728[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:07:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274042485490192384[0;39m 生成今日电子书快照开始
2023-01-26 23:07:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042485490192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:07:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042485490192384[0;39m ==> Parameters: 
2023-01-26 23:07:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042485490192384[0;39m <==    Updates: 0
2023-01-26 23:07:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274042485490192384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 23:07:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274042506465906688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042506465906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042506465906688[0;39m ==> Parameters: 
2023-01-26 23:07:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042506465906688[0;39m <==    Updates: 1
2023-01-26 23:07:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274042506465906688[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:07:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274042632332775424[0;39m 更新电子书下的文档数据开始
2023-01-26 23:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042632332775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042632332775424[0;39m ==> Parameters: 
2023-01-26 23:07:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042632332775424[0;39m <==    Updates: 1
2023-01-26 23:07:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274042632332775424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:08:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274042737190375424[0;39m 生成今日电子书快照开始
2023-01-26 23:08:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042737190375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:08:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042737190375424[0;39m ==> Parameters: 
2023-01-26 23:08:00.032 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042737190375424[0;39m <==    Updates: 0
2023-01-26 23:08:00.033 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274042737190375424[0;39m 生成今日电子书快照结束，耗时：18毫秒
2023-01-26 23:08:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m274042758103175168[0;39m 更新电子书下的文档数据开始
2023-01-26 23:08:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042758103175168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:08:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042758103175168[0;39m ==> Parameters: 
2023-01-26 23:08:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042758103175168[0;39m <==    Updates: 1
2023-01-26 23:08:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m274042758103175168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:08:08.891 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274042774423212032[0;39m ------------- 开始 -------------
2023-01-26 23:08:08.892 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274042774423212032[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 23:08:08.892 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274042774423212032[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 23:08:08.892 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274042774423212032[0;39m 远程地址: 127.0.0.1
2023-01-26 23:08:08.893 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274042774423212032[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 23:08:08.894 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274042774423212032[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 23:08:08.895 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274042774423212032[0;39m ==> Parameters: 
2023-01-26 23:08:08.897 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274042774423212032[0;39m <==    Columns: count(0)
2023-01-26 23:08:08.897 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274042774423212032[0;39m <==        Row: 5
2023-01-26 23:08:08.897 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274042774423212032[0;39m <==      Total: 1
2023-01-26 23:08:08.898 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274042774423212032[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 23:08:08.898 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274042774423212032[0;39m ==> Parameters: 
2023-01-26 23:08:08.898 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 23:08:08.898 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 23:08:08.899 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:08:08.899 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:08:08.899 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:08:08.899 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274042774423212032[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:08:08.899 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274042774423212032[0;39m <==      Total: 5
2023-01-26 23:08:08.900 INFO  com.example.wiki.service.EbookService             :51   [32m274042774423212032[0;39m 总行数 5
2023-01-26 23:08:08.900 INFO  com.example.wiki.service.EbookService             :52   [32m274042774423212032[0;39m 总页数 0
2023-01-26 23:08:08.900 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274042774423212032[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 23:08:08.900 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274042774423212032[0;39m ------------- 结束 耗时：9 ms -------------
2023-01-26 23:08:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274042883949072384[0;39m 更新电子书下的文档数据开始
2023-01-26 23:08:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042883949072384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:08:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042883949072384[0;39m ==> Parameters: 
2023-01-26 23:08:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274042883949072384[0;39m <==    Updates: 1
2023-01-26 23:08:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274042883949072384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:09:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274042988794089472[0;39m 生成今日电子书快照开始
2023-01-26 23:09:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042988794089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:09:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042988794089472[0;39m ==> Parameters: 
2023-01-26 23:09:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274042988794089472[0;39m <==    Updates: 0
2023-01-26 23:09:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274042988794089472[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 23:09:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274043009782386688[0;39m 更新电子书下的文档数据开始
2023-01-26 23:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043009782386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043009782386688[0;39m ==> Parameters: 
2023-01-26 23:09:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043009782386688[0;39m <==    Updates: 1
2023-01-26 23:09:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274043009782386688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:09:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274043135615700992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:09:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043135615700992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:09:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043135615700992[0;39m ==> Parameters: 
2023-01-26 23:09:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043135615700992[0;39m <==    Updates: 1
2023-01-26 23:09:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274043135615700992[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:10:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274043240502661120[0;39m 生成今日电子书快照开始
2023-01-26 23:10:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043240502661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:10:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043240502661120[0;39m ==> Parameters: 
2023-01-26 23:10:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043240502661120[0;39m <==    Updates: 0
2023-01-26 23:10:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274043240502661120[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 23:10:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274043261457403904[0;39m 更新电子书下的文档数据开始
2023-01-26 23:10:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043261457403904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:10:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043261457403904[0;39m ==> Parameters: 
2023-01-26 23:10:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043261457403904[0;39m <==    Updates: 1
2023-01-26 23:10:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274043261457403904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:10:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274043387286523904[0;39m 更新电子书下的文档数据开始
2023-01-26 23:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043387286523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:10:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043387286523904[0;39m ==> Parameters: 
2023-01-26 23:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043387286523904[0;39m <==    Updates: 1
2023-01-26 23:10:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274043387286523904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:11:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274043492110569472[0;39m 生成今日电子书快照开始
2023-01-26 23:11:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043492110569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:11:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043492110569472[0;39m ==> Parameters: 
2023-01-26 23:11:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043492110569472[0;39m <==    Updates: 0
2023-01-26 23:11:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274043492110569472[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 23:11:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274043513094672384[0;39m 更新电子书下的文档数据开始
2023-01-26 23:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043513094672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043513094672384[0;39m ==> Parameters: 
2023-01-26 23:11:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043513094672384[0;39m <==    Updates: 1
2023-01-26 23:11:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274043513094672384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:11:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274043638911209472[0;39m 更新电子书下的文档数据开始
2023-01-26 23:11:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043638911209472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:11:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043638911209472[0;39m ==> Parameters: 
2023-01-26 23:11:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043638911209472[0;39m <==    Updates: 1
2023-01-26 23:11:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274043638911209472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:12:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274043743814946816[0;39m 生成今日电子书快照开始
2023-01-26 23:12:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043743814946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:12:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043743814946816[0;39m ==> Parameters: 
2023-01-26 23:12:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043743814946816[0;39m <==    Updates: 0
2023-01-26 23:12:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274043743814946816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 23:12:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274043764799049728[0;39m 更新电子书下的文档数据开始
2023-01-26 23:12:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043764799049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:12:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043764799049728[0;39m ==> Parameters: 
2023-01-26 23:12:05.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043764799049728[0;39m <==    Updates: 1
2023-01-26 23:12:05.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274043764799049728[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:12:35.022 INFO  com.example.wiki.job.DocJob                       :32   [32m274043890657529856[0;39m 更新电子书下的文档数据开始
2023-01-26 23:12:35.023 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043890657529856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:12:35.024 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043890657529856[0;39m ==> Parameters: 
2023-01-26 23:12:35.025 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274043890657529856[0;39m <==    Updates: 1
2023-01-26 23:12:35.032 INFO  com.example.wiki.job.DocJob                       :35   [32m274043890657529856[0;39m 更新电子书下的文档数据结束，耗时：9毫秒
2023-01-26 23:13:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274043995464798208[0;39m 生成今日电子书快照开始
2023-01-26 23:13:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043995464798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:13:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043995464798208[0;39m ==> Parameters: 
2023-01-26 23:13:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274043995464798208[0;39m <==    Updates: 0
2023-01-26 23:13:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274043995464798208[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 23:13:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274044016436318208[0;39m 更新电子书下的文档数据开始
2023-01-26 23:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044016436318208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044016436318208[0;39m ==> Parameters: 
2023-01-26 23:13:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044016436318208[0;39m <==    Updates: 1
2023-01-26 23:13:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274044016436318208[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 23:13:10.060 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274044037617553408[0;39m ------------- 开始 -------------
2023-01-26 23:13:10.060 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274044037617553408[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 23:13:10.061 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274044037617553408[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 23:13:10.061 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274044037617553408[0;39m 远程地址: 127.0.0.1
2023-01-26 23:13:10.061 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274044037617553408[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 23:13:10.063 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044037617553408[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 23:13:10.065 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044037617553408[0;39m ==> Parameters: 
2023-01-26 23:13:10.068 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274044037617553408[0;39m <==    Columns: count(0)
2023-01-26 23:13:10.068 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274044037617553408[0;39m <==        Row: 5
2023-01-26 23:13:10.068 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044037617553408[0;39m <==      Total: 1
2023-01-26 23:13:10.068 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044037617553408[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 23:13:10.069 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044037617553408[0;39m ==> Parameters: 
2023-01-26 23:13:10.069 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 23:13:10.070 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 23:13:10.070 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:10.070 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:10.071 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:10.071 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044037617553408[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:10.071 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044037617553408[0;39m <==      Total: 5
2023-01-26 23:13:10.071 INFO  com.example.wiki.service.EbookService             :51   [32m274044037617553408[0;39m 总行数 5
2023-01-26 23:13:10.071 INFO  com.example.wiki.service.EbookService             :52   [32m274044037617553408[0;39m 总页数 0
2023-01-26 23:13:10.072 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274044037617553408[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 23:13:10.072 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274044037617553408[0;39m ------------- 结束 耗时：12 ms -------------
2023-01-26 23:13:16.791 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274044065849413632[0;39m ------------- 开始 -------------
2023-01-26 23:13:16.791 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274044065849413632[0;39m 请求地址: http://127.0.0.1:8080/ebook/list GET
2023-01-26 23:13:16.792 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274044065849413632[0;39m 类名方法: com.example.wiki.controller.EbookController.list
2023-01-26 23:13:16.792 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274044065849413632[0;39m 远程地址: 127.0.0.1
2023-01-26 23:13:16.792 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274044065849413632[0;39m 请求参数: [{"page":0,"size":0}]
2023-01-26 23:13:16.793 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044065849413632[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-26 23:13:16.793 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044065849413632[0;39m ==> Parameters: 
2023-01-26 23:13:16.795 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274044065849413632[0;39m <==    Columns: count(0)
2023-01-26 23:13:16.796 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274044065849413632[0;39m <==        Row: 5
2023-01-26 23:13:16.796 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274044065849413632[0;39m <==      Total: 1
2023-01-26 23:13:16.797 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044065849413632[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook
2023-01-26 23:13:16.797 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044065849413632[0;39m ==> Parameters: 
2023-01-26 23:13:16.798 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-26 23:13:16.798 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==        Row: 1, Spring Boot 入门教程, null, null, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 0, 0
2023-01-26 23:13:16.799 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==        Row: 2, Vue 入门教程, null, null, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:16.799 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==        Row: 3, Python 入门教程, null, null, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:16.799 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==        Row: 4, Mysql 入门教程, null, null, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:16.799 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274044065849413632[0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-01-26 23:13:16.799 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274044065849413632[0;39m <==      Total: 5
2023-01-26 23:13:16.800 INFO  com.example.wiki.service.EbookService             :51   [32m274044065849413632[0;39m 总行数 5
2023-01-26 23:13:16.800 INFO  com.example.wiki.service.EbookService             :52   [32m274044065849413632[0;39m 总页数 0
2023-01-26 23:13:16.800 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274044065849413632[0;39m 返回结果: {"content":{"list":[{"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-26 23:13:16.800 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274044065849413632[0;39m ------------- 结束 耗时：9 ms -------------
2023-01-26 23:13:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274044142257049600[0;39m 更新电子书下的文档数据开始
2023-01-26 23:13:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044142257049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:13:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044142257049600[0;39m ==> Parameters: 
2023-01-26 23:13:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044142257049600[0;39m <==    Updates: 1
2023-01-26 23:13:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274044142257049600[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:14:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274044247089483776[0;39m 生成今日电子书快照开始
2023-01-26 23:14:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044247089483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:14:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044247089483776[0;39m ==> Parameters: 
2023-01-26 23:14:00.025 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044247089483776[0;39m <==    Updates: 0
2023-01-26 23:14:00.026 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274044247089483776[0;39m 生成今日电子书快照结束，耗时：24毫秒
2023-01-26 23:14:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274044268056809472[0;39m 更新电子书下的文档数据开始
2023-01-26 23:14:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044268056809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:14:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044268056809472[0;39m ==> Parameters: 
2023-01-26 23:14:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044268056809472[0;39m <==    Updates: 1
2023-01-26 23:14:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274044268056809472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:14:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274044393890123776[0;39m 更新电子书下的文档数据开始
2023-01-26 23:14:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044393890123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:14:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044393890123776[0;39m ==> Parameters: 
2023-01-26 23:14:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044393890123776[0;39m <==    Updates: 1
2023-01-26 23:14:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274044393890123776[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 23:15:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274044498781278208[0;39m 生成今日电子书快照开始
2023-01-26 23:15:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044498781278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:15:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044498781278208[0;39m ==> Parameters: 
2023-01-26 23:15:00.034 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044498781278208[0;39m <==    Updates: 0
2023-01-26 23:15:00.035 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274044498781278208[0;39m 生成今日电子书快照结束，耗时：24毫秒
2023-01-26 23:15:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274044519727632384[0;39m 更新电子书下的文档数据开始
2023-01-26 23:15:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044519727632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:15:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044519727632384[0;39m ==> Parameters: 
2023-01-26 23:15:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044519727632384[0;39m <==    Updates: 1
2023-01-26 23:15:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274044519727632384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:15:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274044645552558080[0;39m 更新电子书下的文档数据开始
2023-01-26 23:15:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044645552558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:15:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044645552558080[0;39m ==> Parameters: 
2023-01-26 23:15:35.027 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044645552558080[0;39m <==    Updates: 1
2023-01-26 23:15:35.028 INFO  com.example.wiki.job.DocJob                       :35   [32m274044645552558080[0;39m 更新电子书下的文档数据结束，耗时：24毫秒
2023-01-26 23:16:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274044750422740992[0;39m 生成今日电子书快照开始
2023-01-26 23:16:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044750422740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:16:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044750422740992[0;39m ==> Parameters: 
2023-01-26 23:16:00.028 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274044750422740992[0;39m <==    Updates: 0
2023-01-26 23:16:00.029 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274044750422740992[0;39m 生成今日电子书快照结束，耗时：22毫秒
2023-01-26 23:16:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274044771419426816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:16:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044771419426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044771419426816[0;39m ==> Parameters: 
2023-01-26 23:16:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044771419426816[0;39m <==    Updates: 1
2023-01-26 23:16:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274044771419426816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:16:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274044897235963904[0;39m 更新电子书下的文档数据开始
2023-01-26 23:16:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044897235963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:16:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044897235963904[0;39m ==> Parameters: 
2023-01-26 23:16:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274044897235963904[0;39m <==    Updates: 1
2023-01-26 23:16:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274044897235963904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:17:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274045002097758208[0;39m 生成今日电子书快照开始
2023-01-26 23:17:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045002097758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:17:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045002097758208[0;39m ==> Parameters: 
2023-01-26 23:17:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045002097758208[0;39m <==    Updates: 0
2023-01-26 23:17:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274045002097758208[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 23:17:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274045023052500992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:17:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045023052500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:17:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045023052500992[0;39m ==> Parameters: 
2023-01-26 23:17:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045023052500992[0;39m <==    Updates: 1
2023-01-26 23:17:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274045023052500992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:17:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274045148873232384[0;39m 更新电子书下的文档数据开始
2023-01-26 23:17:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045148873232384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:17:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045148873232384[0;39m ==> Parameters: 
2023-01-26 23:17:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045148873232384[0;39m <==    Updates: 1
2023-01-26 23:17:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274045148873232384[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:18:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274045253760192512[0;39m 生成今日电子书快照开始
2023-01-26 23:18:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045253760192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:18:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045253760192512[0;39m ==> Parameters: 
2023-01-26 23:18:00.019 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045253760192512[0;39m <==    Updates: 0
2023-01-26 23:18:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274045253760192512[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 23:18:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274045274710740992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:18:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045274710740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:18:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045274710740992[0;39m ==> Parameters: 
2023-01-26 23:18:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045274710740992[0;39m <==    Updates: 1
2023-01-26 23:18:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274045274710740992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:18:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274045400527278080[0;39m 更新电子书下的文档数据开始
2023-01-26 23:18:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045400527278080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:18:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045400527278080[0;39m ==> Parameters: 
2023-01-26 23:18:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045400527278080[0;39m <==    Updates: 1
2023-01-26 23:18:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274045400527278080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:19:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274045505389072384[0;39m 生成今日电子书快照开始
2023-01-26 23:19:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045505389072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:19:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045505389072384[0;39m ==> Parameters: 
2023-01-26 23:19:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045505389072384[0;39m <==    Updates: 0
2023-01-26 23:19:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274045505389072384[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 23:19:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274045526385758208[0;39m 更新电子书下的文档数据开始
2023-01-26 23:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045526385758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045526385758208[0;39m ==> Parameters: 
2023-01-26 23:19:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045526385758208[0;39m <==    Updates: 1
2023-01-26 23:19:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274045526385758208[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:19:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274045652206489600[0;39m 更新电子书下的文档数据开始
2023-01-26 23:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045652206489600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:19:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045652206489600[0;39m ==> Parameters: 
2023-01-26 23:19:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045652206489600[0;39m <==    Updates: 1
2023-01-26 23:19:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274045652206489600[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:20:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274045757093449728[0;39m 生成今日电子书快照开始
2023-01-26 23:20:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045757093449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:20:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045757093449728[0;39m ==> Parameters: 
2023-01-26 23:20:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274045757093449728[0;39m <==    Updates: 0
2023-01-26 23:20:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274045757093449728[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 23:20:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274045778031415296[0;39m 更新电子书下的文档数据开始
2023-01-26 23:20:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045778031415296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:20:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045778031415296[0;39m ==> Parameters: 
2023-01-26 23:20:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045778031415296[0;39m <==    Updates: 1
2023-01-26 23:20:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274045778031415296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:20:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274045903835369472[0;39m 更新电子书下的文档数据开始
2023-01-26 23:20:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045903835369472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:20:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045903835369472[0;39m ==> Parameters: 
2023-01-26 23:20:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274045903835369472[0;39m <==    Updates: 1
2023-01-26 23:20:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274045903835369472[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:21:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274046008709746688[0;39m 生成今日电子书快照开始
2023-01-26 23:21:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046008709746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:21:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046008709746688[0;39m ==> Parameters: 
2023-01-26 23:21:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046008709746688[0;39m <==    Updates: 0
2023-01-26 23:21:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274046008709746688[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 23:21:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m274046029693849600[0;39m 更新电子书下的文档数据开始
2023-01-26 23:21:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046029693849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:21:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046029693849600[0;39m ==> Parameters: 
2023-01-26 23:21:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046029693849600[0;39m <==    Updates: 1
2023-01-26 23:21:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274046029693849600[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:21:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274046155539746816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:21:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046155539746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:21:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046155539746816[0;39m ==> Parameters: 
2023-01-26 23:21:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046155539746816[0;39m <==    Updates: 1
2023-01-26 23:21:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274046155539746816[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:22:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274046260351209472[0;39m 生成今日电子书快照开始
2023-01-26 23:22:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046260351209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:22:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046260351209472[0;39m ==> Parameters: 
2023-01-26 23:22:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046260351209472[0;39m <==    Updates: 0
2023-01-26 23:22:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274046260351209472[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 23:22:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274046281364672512[0;39m 更新电子书下的文档数据开始
2023-01-26 23:22:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046281364672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:22:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046281364672512[0;39m ==> Parameters: 
2023-01-26 23:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046281364672512[0;39m <==    Updates: 1
2023-01-26 23:22:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274046281364672512[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:22:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274046407197986816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:22:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046407197986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:22:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046407197986816[0;39m ==> Parameters: 
2023-01-26 23:22:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046407197986816[0;39m <==    Updates: 1
2023-01-26 23:22:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274046407197986816[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 23:23:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274046512068169728[0;39m 生成今日电子书快照开始
2023-01-26 23:23:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046512068169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:23:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046512068169728[0;39m ==> Parameters: 
2023-01-26 23:23:00.023 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046512068169728[0;39m <==    Updates: 0
2023-01-26 23:23:00.024 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274046512068169728[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 23:23:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274046532985163776[0;39m 更新电子书下的文档数据开始
2023-01-26 23:23:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046532985163776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:23:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046532985163776[0;39m ==> Parameters: 
2023-01-26 23:23:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046532985163776[0;39m <==    Updates: 1
2023-01-26 23:23:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274046532985163776[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:23:35.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274046658831060992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:23:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046658831060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:23:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046658831060992[0;39m ==> Parameters: 
2023-01-26 23:23:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046658831060992[0;39m <==    Updates: 1
2023-01-26 23:23:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274046658831060992[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 23:24:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274046763667689472[0;39m 生成今日电子书快照开始
2023-01-26 23:24:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046763667689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:24:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046763667689472[0;39m ==> Parameters: 
2023-01-26 23:24:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274046763667689472[0;39m <==    Updates: 0
2023-01-26 23:24:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274046763667689472[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 23:24:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274046784643403776[0;39m 更新电子书下的文档数据开始
2023-01-26 23:24:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046784643403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:24:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046784643403776[0;39m ==> Parameters: 
2023-01-26 23:24:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046784643403776[0;39m <==    Updates: 1
2023-01-26 23:24:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274046784643403776[0;39m 更新电子书下的文档数据结束，耗时：6毫秒
2023-01-26 23:24:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274046910480912384[0;39m 更新电子书下的文档数据开始
2023-01-26 23:24:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046910480912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:24:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046910480912384[0;39m ==> Parameters: 
2023-01-26 23:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274046910480912384[0;39m <==    Updates: 1
2023-01-26 23:24:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274046910480912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274047015351095296[0;39m 生成今日电子书快照开始
2023-01-26 23:25:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047015351095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047015351095296[0;39m ==> Parameters: 
2023-01-26 23:25:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047015351095296[0;39m <==    Updates: 0
2023-01-26 23:25:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274047015351095296[0;39m 生成今日电子书快照结束，耗时：11毫秒
2023-01-26 23:25:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274047036331003904[0;39m 更新电子书下的文档数据开始
2023-01-26 23:25:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047036331003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:25:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047036331003904[0;39m ==> Parameters: 
2023-01-26 23:25:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047036331003904[0;39m <==    Updates: 1
2023-01-26 23:25:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274047036331003904[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:25:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274047162151735296[0;39m 更新电子书下的文档数据开始
2023-01-26 23:25:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047162151735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:25:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047162151735296[0;39m ==> Parameters: 
2023-01-26 23:25:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047162151735296[0;39m <==    Updates: 1
2023-01-26 23:25:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274047162151735296[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:26:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274047266984169472[0;39m 生成今日电子书快照开始
2023-01-26 23:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047266984169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047266984169472[0;39m ==> Parameters: 
2023-01-26 23:26:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047266984169472[0;39m <==    Updates: 0
2023-01-26 23:26:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274047266984169472[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 23:26:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274047287976660992[0;39m 更新电子书下的文档数据开始
2023-01-26 23:26:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047287976660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:26:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047287976660992[0;39m ==> Parameters: 
2023-01-26 23:26:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047287976660992[0;39m <==    Updates: 1
2023-01-26 23:26:05.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274047287976660992[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 23:26:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274047413839335424[0;39m 更新电子书下的文档数据开始
2023-01-26 23:26:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047413839335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:26:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047413839335424[0;39m ==> Parameters: 
2023-01-26 23:26:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047413839335424[0;39m <==    Updates: 1
2023-01-26 23:26:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274047413839335424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:27:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274047518646603776[0;39m 生成今日电子书快照开始
2023-01-26 23:27:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047518646603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:27:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047518646603776[0;39m ==> Parameters: 
2023-01-26 23:27:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047518646603776[0;39m <==    Updates: 0
2023-01-26 23:27:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274047518646603776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 23:27:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274047539660066816[0;39m 更新电子书下的文档数据开始
2023-01-26 23:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047539660066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:27:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047539660066816[0;39m ==> Parameters: 
2023-01-26 23:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047539660066816[0;39m <==    Updates: 1
2023-01-26 23:27:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274047539660066816[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 23:27:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274047665451438080[0;39m 更新电子书下的文档数据开始
2023-01-26 23:27:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047665451438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:27:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047665451438080[0;39m ==> Parameters: 
2023-01-26 23:27:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047665451438080[0;39m <==    Updates: 1
2023-01-26 23:27:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274047665451438080[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 23:28:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274047770355175424[0;39m 生成今日电子书快照开始
2023-01-26 23:28:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047770355175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 23:28:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047770355175424[0;39m ==> Parameters: 
2023-01-26 23:28:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274047770355175424[0;39m <==    Updates: 0
2023-01-26 23:28:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274047770355175424[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 23:28:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274047791272169472[0;39m 更新电子书下的文档数据开始
2023-01-26 23:28:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047791272169472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:28:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047791272169472[0;39m ==> Parameters: 
2023-01-26 23:28:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047791272169472[0;39m <==    Updates: 1
2023-01-26 23:28:05.003 INFO  com.example.wiki.job.DocJob                       :35   [32m274047791272169472[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 23:28:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274047917126455296[0;39m 更新电子书下的文档数据开始
2023-01-26 23:28:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047917126455296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 23:28:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047917126455296[0;39m ==> Parameters: 
2023-01-26 23:28:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274047917126455296[0;39m <==    Updates: 1
2023-01-26 23:28:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274047917126455296[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
