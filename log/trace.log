2023-01-27 00:00:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274055823414661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:00:00.061 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274055823414661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:00:00.067 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274055823414661120[0;39m ==> Parameters: 
2023-01-27 00:00:00.095 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274055823414661120[0;39m <==    Updates: 5
2023-01-27 00:00:00.096 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274055823414661120[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š36æ¯«ç§’
2023-01-27 00:00:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m274055844394569728[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:00:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055844394569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:00:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055844394569728[0;39m ==> Parameters: 
2023-01-27 00:00:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055844394569728[0;39m <==    Updates: 1
2023-01-27 00:00:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274055844394569728[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-01-27 00:00:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274055970206912512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:00:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055970206912512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:00:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055970206912512[0;39m ==> Parameters: 
2023-01-27 00:00:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274055970206912512[0;39m <==    Updates: 1
2023-01-27 00:00:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274055970206912512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-01-27 00:01:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274056075043540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:01:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056075043540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:01:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056075043540992[0;39m ==> Parameters: 
2023-01-27 00:01:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056075043540992[0;39m <==    Updates: 0
2023-01-27 00:01:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274056075043540992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-01-27 00:01:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274056096048615424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056096048615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:01:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056096048615424[0;39m ==> Parameters: 
2023-01-27 00:01:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056096048615424[0;39m <==    Updates: 1
2023-01-27 00:01:05.018 INFO  com.example.wiki.job.DocJob                       :35   [32m274056096048615424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:01:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274056221835792384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:01:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056221835792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:01:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056221835792384[0;39m ==> Parameters: 
2023-01-27 00:01:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056221835792384[0;39m <==    Updates: 1
2023-01-27 00:01:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274056221835792384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:02:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274056326685003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:02:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056326685003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:02:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056326685003776[0;39m ==> Parameters: 
2023-01-27 00:02:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056326685003776[0;39m <==    Updates: 0
2023-01-27 00:02:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274056326685003776[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-01-27 00:02:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274056347694272512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056347694272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056347694272512[0;39m ==> Parameters: 
2023-01-27 00:02:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056347694272512[0;39m <==    Updates: 1
2023-01-27 00:02:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274056347694272512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:02:35.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274056473535975424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:02:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056473535975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:02:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056473535975424[0;39m ==> Parameters: 
2023-01-27 00:02:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056473535975424[0;39m <==    Updates: 1
2023-01-27 00:02:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274056473535975424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:03:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274056578360020992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:03:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056578360020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:03:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056578360020992[0;39m ==> Parameters: 
2023-01-27 00:03:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056578360020992[0;39m <==    Updates: 0
2023-01-27 00:03:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274056578360020992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-01-27 00:03:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274056599327346688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056599327346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:03:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056599327346688[0;39m ==> Parameters: 
2023-01-27 00:03:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056599327346688[0;39m <==    Updates: 1
2023-01-27 00:03:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274056599327346688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:03:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274056725164855296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056725164855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:03:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056725164855296[0;39m ==> Parameters: 
2023-01-27 00:03:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056725164855296[0;39m <==    Updates: 1
2023-01-27 00:03:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m274056725164855296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:04:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274056830051815424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:04:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056830051815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:04:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056830051815424[0;39m ==> Parameters: 
2023-01-27 00:04:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274056830051815424[0;39m <==    Updates: 0
2023-01-27 00:04:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274056830051815424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-01-27 00:04:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274056850968809472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:04:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056850968809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:04:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056850968809472[0;39m ==> Parameters: 
2023-01-27 00:04:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056850968809472[0;39m <==    Updates: 1
2023-01-27 00:04:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274056850968809472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:04:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274056976823095296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:04:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056976823095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:04:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056976823095296[0;39m ==> Parameters: 
2023-01-27 00:04:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274056976823095296[0;39m <==    Updates: 1
2023-01-27 00:04:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m274056976823095296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274057081663918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:05:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057081663918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:05:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057081663918080[0;39m ==> Parameters: 
2023-01-27 00:05:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057081663918080[0;39m <==    Updates: 0
2023-01-27 00:05:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274057081663918080[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-01-27 00:05:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274057102631243776[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:05:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057102631243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:05:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057102631243776[0;39m ==> Parameters: 
2023-01-27 00:05:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057102631243776[0;39m <==    Updates: 1
2023-01-27 00:05:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m274057102631243776[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:05:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274057228489723904[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057228489723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:05:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057228489723904[0;39m ==> Parameters: 
2023-01-27 00:05:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057228489723904[0;39m <==    Updates: 1
2023-01-27 00:05:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m274057228489723904[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:06:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274057333326352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:06:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057333326352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:06:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057333326352384[0;39m ==> Parameters: 
2023-01-27 00:06:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057333326352384[0;39m <==    Updates: 0
2023-01-27 00:06:00.015 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274057333326352384[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-01-27 00:06:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274057354327232512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:06:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057354327232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:06:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057354327232512[0;39m ==> Parameters: 
2023-01-27 00:06:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057354327232512[0;39m <==    Updates: 1
2023-01-27 00:06:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274057354327232512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:06:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274057480156352512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:06:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057480156352512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:06:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057480156352512[0;39m ==> Parameters: 
2023-01-27 00:06:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057480156352512[0;39m <==    Updates: 1
2023-01-27 00:06:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m274057480156352512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:07:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274057584972009472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057584972009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:07:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057584972009472[0;39m ==> Parameters: 
2023-01-27 00:07:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057584972009472[0;39m <==    Updates: 0
2023-01-27 00:07:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274057584972009472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-01-27 00:07:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m274057605964500992[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057605964500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:07:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057605964500992[0;39m ==> Parameters: 
2023-01-27 00:07:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057605964500992[0;39m <==    Updates: 1
2023-01-27 00:07:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274057605964500992[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:07:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274057731814592512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057731814592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:07:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057731814592512[0;39m ==> Parameters: 
2023-01-27 00:07:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057731814592512[0;39m <==    Updates: 1
2023-01-27 00:07:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m274057731814592512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:08:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274057836647026688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057836647026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:08:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057836647026688[0;39m ==> Parameters: 
2023-01-27 00:08:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274057836647026688[0;39m <==    Updates: 0
2023-01-27 00:08:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274057836647026688[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-01-27 00:08:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274057857643712512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:08:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057857643712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:08:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057857643712512[0;39m ==> Parameters: 
2023-01-27 00:08:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057857643712512[0;39m <==    Updates: 1
2023-01-27 00:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274057857643712512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:08:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274057983430889472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:08:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057983430889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:08:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057983430889472[0;39m ==> Parameters: 
2023-01-27 00:08:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274057983430889472[0;39m <==    Updates: 1
2023-01-27 00:08:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m274057983430889472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:09:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274058088309460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058088309460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:09:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058088309460992[0;39m ==> Parameters: 
2023-01-27 00:09:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058088309460992[0;39m <==    Updates: 0
2023-01-27 00:09:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274058088309460992[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:09:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274058109310341120[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:09:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058109310341120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:09:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058109310341120[0;39m ==> Parameters: 
2023-01-27 00:09:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058109310341120[0;39m <==    Updates: 1
2023-01-27 00:09:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274058109310341120[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:09:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m274058235135266816[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058235135266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058235135266816[0;39m ==> Parameters: 
2023-01-27 00:09:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058235135266816[0;39m <==    Updates: 1
2023-01-27 00:09:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274058235135266816[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:10:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274058339976089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:10:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058339976089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:10:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058339976089600[0;39m ==> Parameters: 
2023-01-27 00:10:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058339976089600[0;39m <==    Updates: 0
2023-01-27 00:10:00.017 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274058339976089600[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-01-27 00:10:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274058360935026688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:10:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058360935026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:10:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058360935026688[0;39m ==> Parameters: 
2023-01-27 00:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058360935026688[0;39m <==    Updates: 1
2023-01-27 00:10:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m274058360935026688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:10:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m274058486772535296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:10:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058486772535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:10:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058486772535296[0;39m ==> Parameters: 
2023-01-27 00:10:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058486772535296[0;39m <==    Updates: 1
2023-01-27 00:10:35.013 INFO  com.example.wiki.job.DocJob                       :35   [32m274058486772535296[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:11:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274058591659495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:11:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058591659495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:11:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058591659495424[0;39m ==> Parameters: 
2023-01-27 00:11:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058591659495424[0;39m <==    Updates: 0
2023-01-27 00:11:00.020 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274058591659495424[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:11:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274058612576489472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:11:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058612576489472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:11:05.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058612576489472[0;39m ==> Parameters: 
2023-01-27 00:11:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058612576489472[0;39m <==    Updates: 1
2023-01-27 00:11:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m274058612576489472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š18æ¯«ç§’
2023-01-27 00:11:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m274058738455941120[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:11:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058738455941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:11:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058738455941120[0;39m ==> Parameters: 
2023-01-27 00:11:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058738455941120[0;39m <==    Updates: 1
2023-01-27 00:11:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274058738455941120[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-01-27 00:11:52.307 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274058810992234496[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:11:52.318 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274058810992234496[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:11:52.318 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274058810992234496[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:11:52.319 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274058810992234496[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:11:52.319 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274058810992234496[0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":4}]
2023-01-27 00:11:52.320 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274058810992234496[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:11:52.320 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274058810992234496[0;39m ==> Parameters: 
2023-01-27 00:11:52.323 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274058810992234496[0;39m <==    Columns: count(0)
2023-01-27 00:11:52.323 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274058810992234496[0;39m <==        Row: 5
2023-01-27 00:11:52.323 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274058810992234496[0;39m <==      Total: 1
2023-01-27 00:11:52.324 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274058810992234496[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-01-27 00:11:52.324 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274058810992234496[0;39m ==> Parameters: 4(Integer)
2023-01-27 00:11:52.325 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274058810992234496[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:11:52.325 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274058810992234496[0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-01-27 00:11:52.325 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274058810992234496[0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:11:52.325 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274058810992234496[0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:11:52.326 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274058810992234496[0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:11:52.326 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274058810992234496[0;39m <==      Total: 4
2023-01-27 00:11:52.326 INFO  com.example.wiki.service.EbookService             :51   [32m274058810992234496[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:11:52.326 INFO  com.example.wiki.service.EbookService             :52   [32m274058810992234496[0;39m æ€»é¡µæ•° 2
2023-01-27 00:11:52.327 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274058810992234496[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:11:52.327 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274058810992234496[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š20 ms -------------
2023-01-27 00:12:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274058843296763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:12:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058843296763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:12:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058843296763904[0;39m ==> Parameters: 
2023-01-27 00:12:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274058843296763904[0;39m <==    Updates: 0
2023-01-27 00:12:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274058843296763904[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-01-27 00:12:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m274058864238923776[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:12:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058864238923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:12:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058864238923776[0;39m ==> Parameters: 
2023-01-27 00:12:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058864238923776[0;39m <==    Updates: 1
2023-01-27 00:12:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274058864238923776[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:12:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274058990076432384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:12:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058990076432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:12:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058990076432384[0;39m ==> Parameters: 
2023-01-27 00:12:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274058990076432384[0;39m <==    Updates: 1
2023-01-27 00:12:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m274058990076432384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-01-27 00:12:56.299 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274059079394136064[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:12:56.300 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274059079394136064[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:12:56.300 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274059079394136064[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:12:56.300 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274059079394136064[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:12:56.300 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274059079394136064[0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":4}]
2023-01-27 00:12:56.301 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059079394136064[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:12:56.302 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059079394136064[0;39m ==> Parameters: 
2023-01-27 00:12:56.304 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059079394136064[0;39m <==    Columns: count(0)
2023-01-27 00:12:56.304 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059079394136064[0;39m <==        Row: 5
2023-01-27 00:12:56.304 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059079394136064[0;39m <==      Total: 1
2023-01-27 00:12:56.306 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059079394136064[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-01-27 00:12:56.308 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059079394136064[0;39m ==> Parameters: 4(Integer)
2023-01-27 00:12:56.309 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059079394136064[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:12:56.309 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059079394136064[0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-01-27 00:12:56.310 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059079394136064[0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:12:56.310 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059079394136064[0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:12:56.310 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059079394136064[0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:12:56.310 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059079394136064[0;39m <==      Total: 4
2023-01-27 00:12:56.311 INFO  com.example.wiki.service.EbookService             :51   [32m274059079394136064[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:12:56.311 INFO  com.example.wiki.service.EbookService             :52   [32m274059079394136064[0;39m æ€»é¡µæ•° 2
2023-01-27 00:12:56.311 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274059079394136064[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:12:56.311 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274059079394136064[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-01-27 00:13:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274059094963392512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:13:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059094963392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:13:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059094963392512[0;39m ==> Parameters: 
2023-01-27 00:13:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059094963392512[0;39m <==    Updates: 0
2023-01-27 00:13:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274059094963392512[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:13:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m274059115909746688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:13:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059115909746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:13:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059115909746688[0;39m ==> Parameters: 
2023-01-27 00:13:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059115909746688[0;39m <==    Updates: 1
2023-01-27 00:13:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274059115909746688[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-01-27 00:13:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m274059241730478080[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:13:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059241730478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:13:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059241730478080[0;39m ==> Parameters: 
2023-01-27 00:13:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059241730478080[0;39m <==    Updates: 1
2023-01-27 00:13:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m274059241730478080[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-01-27 00:14:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274059346625826816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:14:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059346625826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:14:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059346625826816[0;39m ==> Parameters: 
2023-01-27 00:14:00.035 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059346625826816[0;39m <==    Updates: 0
2023-01-27 00:14:00.036 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274059346625826816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š24æ¯«ç§’
2023-01-27 00:14:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m274059367593152512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:14:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059367593152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:14:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059367593152512[0;39m ==> Parameters: 
2023-01-27 00:14:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059367593152512[0;39m <==    Updates: 1
2023-01-27 00:14:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274059367593152512[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-01-27 00:14:35.010 INFO  com.example.wiki.job.DocJob                       :32   [32m274059493418078208[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059493418078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:14:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059493418078208[0;39m ==> Parameters: 
2023-01-27 00:14:35.025 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059493418078208[0;39m <==    Updates: 1
2023-01-27 00:14:35.025 INFO  com.example.wiki.job.DocJob                       :35   [32m274059493418078208[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-01-27 00:15:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274059598284066816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:15:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059598284066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:15:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059598284066816[0;39m ==> Parameters: 
2023-01-27 00:15:00.022 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059598284066816[0;39m <==    Updates: 0
2023-01-27 00:15:00.023 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274059598284066816[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-01-27 00:15:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m274059619209449472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:15:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059619209449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:15:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059619209449472[0;39m ==> Parameters: 
2023-01-27 00:15:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059619209449472[0;39m <==    Updates: 1
2023-01-27 00:15:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m274059619209449472[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:15:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m274059745051152384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:15:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059745051152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:15:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059745051152384[0;39m ==> Parameters: 
2023-01-27 00:15:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059745051152384[0;39m <==    Updates: 1
2023-01-27 00:15:35.010 INFO  com.example.wiki.job.DocJob                       :35   [32m274059745051152384[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-01-27 00:15:43.388 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274059780216197120[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:15:43.389 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274059780216197120[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:15:43.389 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274059780216197120[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:15:43.390 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274059780216197120[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:15:43.390 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274059780216197120[0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":4}]
2023-01-27 00:15:43.394 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059780216197120[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:15:43.395 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059780216197120[0;39m ==> Parameters: 
2023-01-27 00:15:43.396 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059780216197120[0;39m <==    Columns: count(0)
2023-01-27 00:15:43.397 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059780216197120[0;39m <==        Row: 5
2023-01-27 00:15:43.397 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059780216197120[0;39m <==      Total: 1
2023-01-27 00:15:43.397 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059780216197120[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-01-27 00:15:43.398 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059780216197120[0;39m ==> Parameters: 4(Integer)
2023-01-27 00:15:43.399 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059780216197120[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:15:43.399 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059780216197120[0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-01-27 00:15:43.399 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059780216197120[0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:15:43.399 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059780216197120[0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:15:43.399 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059780216197120[0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:15:43.400 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059780216197120[0;39m <==      Total: 4
2023-01-27 00:15:43.400 INFO  com.example.wiki.service.EbookService             :51   [32m274059780216197120[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:15:43.400 INFO  com.example.wiki.service.EbookService             :52   [32m274059780216197120[0;39m æ€»é¡µæ•° 2
2023-01-27 00:15:43.400 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274059780216197120[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:15:43.400 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274059780216197120[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-01-27 00:16:00.001 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m274059849896169472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-01-27 00:16:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059849896169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-27 00:16:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059849896169472[0;39m ==> Parameters: 
2023-01-27 00:16:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m274059849896169472[0;39m <==    Updates: 0
2023-01-27 00:16:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m274059849896169472[0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-01-27 00:16:02.638 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274059860956549120[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:16:02.638 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274059860956549120[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:16:02.638 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274059860956549120[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:16:02.639 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274059860956549120[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:16:02.639 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274059860956549120[0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":4}]
2023-01-27 00:16:02.640 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059860956549120[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:16:02.640 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059860956549120[0;39m ==> Parameters: 
2023-01-27 00:16:02.642 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059860956549120[0;39m <==    Columns: count(0)
2023-01-27 00:16:02.642 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059860956549120[0;39m <==        Row: 5
2023-01-27 00:16:02.643 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059860956549120[0;39m <==      Total: 1
2023-01-27 00:16:02.643 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059860956549120[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-01-27 00:16:02.643 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059860956549120[0;39m ==> Parameters: 4(Integer)
2023-01-27 00:16:02.644 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059860956549120[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:16:02.645 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059860956549120[0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-01-27 00:16:02.645 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059860956549120[0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:02.645 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059860956549120[0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:02.645 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059860956549120[0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:02.645 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059860956549120[0;39m <==      Total: 4
2023-01-27 00:16:02.645 INFO  com.example.wiki.service.EbookService             :51   [32m274059860956549120[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:16:02.646 INFO  com.example.wiki.service.EbookService             :52   [32m274059860956549120[0;39m æ€»é¡µæ•° 2
2023-01-27 00:16:02.646 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274059860956549120[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:16:02.646 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274059860956549120[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-01-27 00:16:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m274059870922215424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059870922215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-27 00:16:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059870922215424[0;39m ==> Parameters: 
2023-01-27 00:16:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059870922215424[0;39m <==    Updates: 1
2023-01-27 00:16:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m274059870922215424[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-01-27 00:16:11.785 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274059899321847808[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:16:11.785 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274059899321847808[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:16:11.785 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274059899321847808[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:16:11.786 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274059899321847808[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:16:11.786 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274059899321847808[0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":4}]
2023-01-27 00:16:11.787 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059899321847808[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:16:11.788 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059899321847808[0;39m ==> Parameters: 
2023-01-27 00:16:11.789 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059899321847808[0;39m <==    Columns: count(0)
2023-01-27 00:16:11.790 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059899321847808[0;39m <==        Row: 5
2023-01-27 00:16:11.790 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059899321847808[0;39m <==      Total: 1
2023-01-27 00:16:11.791 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059899321847808[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-01-27 00:16:11.791 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059899321847808[0;39m ==> Parameters: 4(Integer)
2023-01-27 00:16:11.793 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059899321847808[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:16:11.793 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059899321847808[0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-01-27 00:16:11.793 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059899321847808[0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:11.794 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059899321847808[0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:11.794 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059899321847808[0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:11.794 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059899321847808[0;39m <==      Total: 4
2023-01-27 00:16:11.794 INFO  com.example.wiki.service.EbookService             :51   [32m274059899321847808[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:16:11.794 INFO  com.example.wiki.service.EbookService             :52   [32m274059899321847808[0;39m æ€»é¡µæ•° 2
2023-01-27 00:16:11.795 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274059899321847808[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:16:11.795 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274059899321847808[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-01-27 00:16:17.952 INFO  com.example.wiki.aspect.LogAspect                 :50   [32m274059925188120576[0;39m ------------- å¼€å§‹ -------------
2023-01-27 00:16:17.952 INFO  com.example.wiki.aspect.LogAspect                 :51   [32m274059925188120576[0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8080/ebook/list GET
2023-01-27 00:16:17.953 INFO  com.example.wiki.aspect.LogAspect                 :52   [32m274059925188120576[0;39m ç±»åæ–¹æ³•: com.example.wiki.controller.EbookController.list
2023-01-27 00:16:17.953 INFO  com.example.wiki.aspect.LogAspect                 :53   [32m274059925188120576[0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-01-27 00:16:17.953 INFO  com.example.wiki.aspect.LogAspect                 :75   [32m274059925188120576[0;39m è¯·æ±‚å‚æ•°: [{"page":2,"size":4}]
2023-01-27 00:16:17.954 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059925188120576[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-01-27 00:16:17.955 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059925188120576[0;39m ==> Parameters: 
2023-01-27 00:16:17.957 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059925188120576[0;39m <==    Columns: count(0)
2023-01-27 00:16:17.957 TRACE c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m274059925188120576[0;39m <==        Row: 5
2023-01-27 00:16:17.957 DEBUG c.e.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m274059925188120576[0;39m <==      Total: 1
2023-01-27 00:16:17.958 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059925188120576[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2023-01-27 00:16:17.958 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059925188120576[0;39m ==> Parameters: 4(Integer), 4(Integer)
2023-01-27 00:16:17.959 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059925188120576[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-01-27 00:16:17.959 TRACE c.example.wiki.mapper.EbookMapper.selectByExample :143  [32m274059925188120576[0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-01-27 00:16:17.959 DEBUG c.example.wiki.mapper.EbookMapper.selectByExample :137  [32m274059925188120576[0;39m <==      Total: 1
2023-01-27 00:16:17.960 INFO  com.example.wiki.service.EbookService             :51   [32m274059925188120576[0;39m æ€»è¡Œæ•° 5
2023-01-27 00:16:17.960 INFO  com.example.wiki.service.EbookService             :52   [32m274059925188120576[0;39m æ€»é¡µæ•° 2
2023-01-27 00:16:17.960 INFO  com.example.wiki.aspect.LogAspect                 :87   [32m274059925188120576[0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-01-27 00:16:17.960 INFO  com.example.wiki.aspect.LogAspect                 :88   [32m274059925188120576[0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-01-27 00:16:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m274059996730363904[0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-01-27 00:16:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m274059996730363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
