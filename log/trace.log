2023-01-26 00:00:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693435544866816[0;39m 生成今日电子书快照开始
2023-01-26 00:00:00.043 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:00:00.051 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m ==> Parameters: 
2023-01-26 00:00:00.073 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693435544866816[0;39m <==    Updates: 5
2023-01-26 00:00:00.074 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693435544866816[0;39m 生成今日电子书快照结束，耗时：33毫秒
2023-01-26 00:00:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693456482832384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m ==> Parameters: 
2023-01-26 00:00:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693456482832384[0;39m <==    Updates: 1
2023-01-26 00:00:05.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273693456482832384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:00:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273693582311952384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:00:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m ==> Parameters: 
2023-01-26 00:00:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693582311952384[0;39m <==    Updates: 1
2023-01-26 00:00:35.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273693582311952384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:01:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693687203106816[0;39m 生成今日电子书快照开始
2023-01-26 00:01:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:01:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m ==> Parameters: 
2023-01-26 00:01:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693687203106816[0;39m <==    Updates: 0
2023-01-26 00:01:00.019 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693687203106816[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:01:05.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273693708174626816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m ==> Parameters: 
2023-01-26 00:01:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693708174626816[0;39m <==    Updates: 1
2023-01-26 00:01:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273693708174626816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:01:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273693833957609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:01:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m ==> Parameters: 
2023-01-26 00:01:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693833957609472[0;39m <==    Updates: 1
2023-01-26 00:01:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273693833957609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:02:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273693938819403776[0;39m 生成今日电子书快照开始
2023-01-26 00:02:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:02:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m ==> Parameters: 
2023-01-26 00:02:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273693938819403776[0;39m <==    Updates: 0
2023-01-26 00:02:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273693938819403776[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:02:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273693959820283904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m ==> Parameters: 
2023-01-26 00:02:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273693959820283904[0;39m <==    Updates: 1
2023-01-26 00:02:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273693959820283904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:02:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273694085666181120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:02:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m ==> Parameters: 
2023-01-26 00:02:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694085666181120[0;39m <==    Updates: 1
2023-01-26 00:02:35.018 INFO  com.example.wiki.job.DocJob                       :35   [32m273694085666181120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:03:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694190515392512[0;39m 生成今日电子书快照开始
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:03:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m ==> Parameters: 
2023-01-26 00:03:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694190515392512[0;39m <==    Updates: 0
2023-01-26 00:03:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694190515392512[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:03:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273694211453358080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m ==> Parameters: 
2023-01-26 00:03:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694211453358080[0;39m <==    Updates: 1
2023-01-26 00:03:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694211453358080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:03:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694337307643904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:03:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:03:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m ==> Parameters: 
2023-01-26 00:03:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694337307643904[0;39m <==    Updates: 1
2023-01-26 00:03:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694337307643904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:04:00.000 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694442127495168[0;39m 生成今日电子书快照开始
2023-01-26 00:04:00.002 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:04:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m ==> Parameters: 
2023-01-26 00:04:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694442127495168[0;39m <==    Updates: 0
2023-01-26 00:04:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694442127495168[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:04:05.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273694463145152512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m ==> Parameters: 
2023-01-26 00:04:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694463145152512[0;39m <==    Updates: 1
2023-01-26 00:04:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273694463145152512[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:04:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273694588991049728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:04:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:04:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m ==> Parameters: 
2023-01-26 00:04:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694588991049728[0;39m <==    Updates: 1
2023-01-26 00:04:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273694588991049728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:05:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694693798318080[0;39m 生成今日电子书快照开始
2023-01-26 00:05:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:05:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m ==> Parameters: 
2023-01-26 00:05:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694693798318080[0;39m <==    Updates: 0
2023-01-26 00:05:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694693798318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:05:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273694714795003904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m ==> Parameters: 
2023-01-26 00:05:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694714795003904[0;39m <==    Updates: 1
2023-01-26 00:05:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273694714795003904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:05:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273694840594763776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:05:35.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:05:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m ==> Parameters: 
2023-01-26 00:05:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694840594763776[0;39m <==    Updates: 1
2023-01-26 00:05:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273694840594763776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:06:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273694945464946688[0;39m 生成今日电子书快照开始
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:06:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m ==> Parameters: 
2023-01-26 00:06:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273694945464946688[0;39m <==    Updates: 0
2023-01-26 00:06:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273694945464946688[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:06:05.000 INFO  com.example.wiki.job.DocJob                       :32   [32m273694966415495168[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:05.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:05.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m ==> Parameters: 
2023-01-26 00:06:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273694966415495168[0;39m <==    Updates: 1
2023-01-26 00:06:05.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273694966415495168[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:06:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695092273975296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:06:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m ==> Parameters: 
2023-01-26 00:06:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695092273975296[0;39m <==    Updates: 1
2023-01-26 00:06:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695092273975296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:07:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695197110603776[0;39m 生成今日电子书快照开始
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:07:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m ==> Parameters: 
2023-01-26 00:07:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695197110603776[0;39m <==    Updates: 0
2023-01-26 00:07:00.006 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695197110603776[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:07:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273695218090512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m ==> Parameters: 
2023-01-26 00:07:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695218090512384[0;39m <==    Updates: 1
2023-01-26 00:07:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273695218090512384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:07:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273695343948992512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:07:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:07:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m ==> Parameters: 
2023-01-26 00:07:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695343948992512[0;39m <==    Updates: 1
2023-01-26 00:07:35.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273695343948992512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:08:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695448777232384[0;39m 生成今日电子书快照开始
2023-01-26 00:08:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:08:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m ==> Parameters: 
2023-01-26 00:08:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695448777232384[0;39m <==    Updates: 0
2023-01-26 00:08:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695448777232384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:08:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695469786501120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m ==> Parameters: 
2023-01-26 00:08:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695469786501120[0;39m <==    Updates: 1
2023-01-26 00:08:05.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273695469786501120[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:08:35.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273695595615621120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:08:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:08:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m ==> Parameters: 
2023-01-26 00:08:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695595615621120[0;39m <==    Updates: 1
2023-01-26 00:08:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273695595615621120[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695700469026816[0;39m 生成今日电子书快照开始
2023-01-26 00:09:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:09:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m ==> Parameters: 
2023-01-26 00:09:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695700469026816[0;39m <==    Updates: 0
2023-01-26 00:09:00.018 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695700469026816[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:09:05.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273695721394409472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:05.003 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m ==> Parameters: 
2023-01-26 00:09:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695721394409472[0;39m <==    Updates: 1
2023-01-26 00:09:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273695721394409472[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:09:35.012 INFO  com.example.wiki.job.DocJob                       :32   [32m273695847269666816[0;39m 更新电子书下的文档数据开始
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:09:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m ==> Parameters: 
2023-01-26 00:09:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695847269666816[0;39m <==    Updates: 1
2023-01-26 00:09:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273695847269666816[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:10:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273695952097906688[0;39m 生成今日电子书快照开始
2023-01-26 00:10:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:10:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m ==> Parameters: 
2023-01-26 00:10:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273695952097906688[0;39m <==    Updates: 0
2023-01-26 00:10:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273695952097906688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:10:05.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273695973077815296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m ==> Parameters: 
2023-01-26 00:10:05.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273695973077815296[0;39m <==    Updates: 1
2023-01-26 00:10:05.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273695973077815296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:10:35.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273696098915323904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:10:35.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m ==> Parameters: 
2023-01-26 00:10:35.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696098915323904[0;39m <==    Updates: 1
2023-01-26 00:10:35.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273696098915323904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:11:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273696203747758080[0;39m 生成今日电子书快照开始
2023-01-26 00:11:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:11:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m ==> Parameters: 
2023-01-26 00:11:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273696203747758080[0;39m <==    Updates: 0
2023-01-26 00:11:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273696203747758080[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:11:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273696224723472384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:11:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m ==> Parameters: 
2023-01-26 00:11:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273696224723472384[0;39m <==    Updates: 1
2023-01-26 00:11:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273696224723472384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:18:41.817 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m51s657ms448µs800ns).
2023-01-26 00:18:56.659 INFO  com.example.wiki.job.DocJob                       :32   [32m273698202987925504[0;39m 更新电子书下的文档数据开始
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:18:56.662 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m ==> Parameters: 
2023-01-26 00:18:56.677 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698202987925504[0;39m <==    Updates: 1
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.DocJob                       :35   [32m273698202987925504[0;39m 更新电子书下的文档数据结束，耗时：17毫秒
2023-01-26 00:18:56.677 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698203063422976[0;39m 生成今日电子书快照开始
2023-01-26 00:18:56.677 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:18:56.678 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m ==> Parameters: 
2023-01-26 00:18:56.681 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698203063422976[0;39m <==    Updates: 0
2023-01-26 00:18:56.681 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698203063422976[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:19:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698217043038208[0;39m 生成今日电子书快照开始
2023-01-26 00:19:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:19:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m ==> Parameters: 
2023-01-26 00:19:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698217043038208[0;39m <==    Updates: 0
2023-01-26 00:19:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698217043038208[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:19:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273698238014558208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m ==> Parameters: 
2023-01-26 00:19:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698238014558208[0;39m <==    Updates: 1
2023-01-26 00:19:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273698238014558208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:19:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273698363818512384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:19:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m ==> Parameters: 
2023-01-26 00:19:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698363818512384[0;39m <==    Updates: 1
2023-01-26 00:19:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273698363818512384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:20:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698468713861120[0;39m 生成今日电子书快照开始
2023-01-26 00:20:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:20:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m ==> Parameters: 
2023-01-26 00:20:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698468713861120[0;39m <==    Updates: 0
2023-01-26 00:20:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698468713861120[0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-01-26 00:20:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273698489689575424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m ==> Parameters: 
2023-01-26 00:20:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698489689575424[0;39m <==    Updates: 1
2023-01-26 00:20:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698489689575424[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:20:35.011 INFO  com.example.wiki.job.DocJob                       :32   [32m273698615506112512[0;39m 更新电子书下的文档数据开始
2023-01-26 00:20:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:20:35.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m ==> Parameters: 
2023-01-26 00:20:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698615506112512[0;39m <==    Updates: 1
2023-01-26 00:20:35.016 INFO  com.example.wiki.job.DocJob                       :35   [32m273698615506112512[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:21:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698720338546688[0;39m 生成今日电子书快照开始
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:21:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m ==> Parameters: 
2023-01-26 00:21:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698720338546688[0;39m <==    Updates: 0
2023-01-26 00:21:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698720338546688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:21:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273698741301678080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m ==> Parameters: 
2023-01-26 00:21:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698741301678080[0;39m <==    Updates: 1
2023-01-26 00:21:05.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273698741301678080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:21:35.017 INFO  com.example.wiki.job.DocJob                       :32   [32m273698867189518336[0;39m 更新电子书下的文档数据开始
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:21:35.018 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m ==> Parameters: 
2023-01-26 00:21:35.020 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698867189518336[0;39m <==    Updates: 1
2023-01-26 00:21:35.020 INFO  com.example.wiki.job.DocJob                       :35   [32m273698867189518336[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:22:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273698972005175296[0;39m 生成今日电子书快照开始
2023-01-26 00:22:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:22:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m ==> Parameters: 
2023-01-26 00:22:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273698972005175296[0;39m <==    Updates: 0
2023-01-26 00:22:00.012 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273698972005175296[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:22:05.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273698993010249728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m ==> Parameters: 
2023-01-26 00:22:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273698993010249728[0;39m <==    Updates: 1
2023-01-26 00:22:05.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273698993010249728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:22:35.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273699118784843776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:22:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m ==> Parameters: 
2023-01-26 00:22:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699118784843776[0;39m <==    Updates: 1
2023-01-26 00:22:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273699118784843776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:23:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699223642443776[0;39m 生成今日电子书快照开始
2023-01-26 00:23:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:23:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m ==> Parameters: 
2023-01-26 00:23:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699223642443776[0;39m <==    Updates: 0
2023-01-26 00:23:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699223642443776[0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-01-26 00:23:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273699244618158080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m ==> Parameters: 
2023-01-26 00:23:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699244618158080[0;39m <==    Updates: 1
2023-01-26 00:23:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699244618158080[0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-01-26 00:23:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273699370497609728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:23:35.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m ==> Parameters: 
2023-01-26 00:23:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699370497609728[0;39m <==    Updates: 1
2023-01-26 00:23:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273699370497609728[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:24:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699475351015424[0;39m 生成今日电子书快照开始
2023-01-26 00:24:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:24:00.017 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m ==> Parameters: 
2023-01-26 00:24:00.021 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699475351015424[0;39m <==    Updates: 0
2023-01-26 00:24:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699475351015424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:24:05.006 INFO  com.example.wiki.job.DocJob                       :32   [32m273699496288980992[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:05.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m ==> Parameters: 
2023-01-26 00:24:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699496288980992[0;39m <==    Updates: 1
2023-01-26 00:24:05.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699496288980992[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:24:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273699622122295296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:24:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m ==> Parameters: 
2023-01-26 00:24:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699622122295296[0;39m <==    Updates: 1
2023-01-26 00:24:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273699622122295296[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:25:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699726979895296[0;39m 生成今日电子书快照开始
2023-01-26 00:25:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:25:00.010 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m ==> Parameters: 
2023-01-26 00:25:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699726979895296[0;39m <==    Updates: 0
2023-01-26 00:25:00.016 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699726979895296[0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-01-26 00:25:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699747980775424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m ==> Parameters: 
2023-01-26 00:25:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699747980775424[0;39m <==    Updates: 1
2023-01-26 00:25:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699747980775424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:25:35.016 INFO  com.example.wiki.job.DocJob                       :32   [32m273699873818284032[0;39m 更新电子书下的文档数据开始
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:25:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m ==> Parameters: 
2023-01-26 00:25:35.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699873818284032[0;39m <==    Updates: 1
2023-01-26 00:25:35.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699873818284032[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:26:00.002 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273699978617163776[0;39m 生成今日电子书快照开始
2023-01-26 00:26:00.003 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:26:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m ==> Parameters: 
2023-01-26 00:26:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273699978617163776[0;39m <==    Updates: 0
2023-01-26 00:26:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273699978617163776[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:26:05.014 INFO  com.example.wiki.job.DocJob                       :32   [32m273699999639015424[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:05.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:05.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m ==> Parameters: 
2023-01-26 00:26:05.019 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273699999639015424[0;39m <==    Updates: 1
2023-01-26 00:26:05.019 INFO  com.example.wiki.job.DocJob                       :35   [32m273699999639015424[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:26:35.001 INFO  com.example.wiki.job.DocJob                       :32   [32m273700125413609472[0;39m 更新电子书下的文档数据开始
2023-01-26 00:26:35.001 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:26:35.002 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m ==> Parameters: 
2023-01-26 00:26:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700125413609472[0;39m <==    Updates: 1
2023-01-26 00:26:35.004 INFO  com.example.wiki.job.DocJob                       :35   [32m273700125413609472[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:27:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700230283792384[0;39m 生成今日电子书快照开始
2023-01-26 00:27:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:27:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m ==> Parameters: 
2023-01-26 00:27:00.009 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700230283792384[0;39m <==    Updates: 0
2023-01-26 00:27:00.010 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700230283792384[0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-01-26 00:27:05.013 INFO  com.example.wiki.job.DocJob                       :32   [32m273700251293061120[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m ==> Parameters: 
2023-01-26 00:27:05.015 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700251293061120[0;39m <==    Updates: 1
2023-01-26 00:27:05.015 INFO  com.example.wiki.job.DocJob                       :35   [32m273700251293061120[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:27:35.015 INFO  com.example.wiki.job.DocJob                       :32   [32m273700377130569728[0;39m 更新电子书下的文档数据开始
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:27:35.016 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m ==> Parameters: 
2023-01-26 00:27:35.017 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700377130569728[0;39m <==    Updates: 1
2023-01-26 00:27:35.017 INFO  com.example.wiki.job.DocJob                       :35   [32m273700377130569728[0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-01-26 00:28:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700481979781120[0;39m 生成今日电子书快照开始
2023-01-26 00:28:00.014 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:28:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m ==> Parameters: 
2023-01-26 00:28:00.018 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700481979781120[0;39m <==    Updates: 0
2023-01-26 00:28:00.022 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700481979781120[0;39m 生成今日电子书快照结束，耗时：9毫秒
2023-01-26 00:28:05.009 INFO  com.example.wiki.job.DocJob                       :32   [32m273700502934523904[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m ==> Parameters: 
2023-01-26 00:28:05.014 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700502934523904[0;39m <==    Updates: 1
2023-01-26 00:28:05.014 INFO  com.example.wiki.job.DocJob                       :35   [32m273700502934523904[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:28:35.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700628738478080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:28:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m ==> Parameters: 
2023-01-26 00:28:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700628738478080[0;39m <==    Updates: 1
2023-01-26 00:28:35.005 INFO  com.example.wiki.job.DocJob                       :35   [32m273700628738478080[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:29:00.004 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700733600272384[0;39m 生成今日电子书快照开始
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:29:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m ==> Parameters: 
2023-01-26 00:29:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700733600272384[0;39m <==    Updates: 0
2023-01-26 00:29:00.008 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700733600272384[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:29:05.003 INFO  com.example.wiki.job.DocJob                       :32   [32m273700754567598080[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m ==> Parameters: 
2023-01-26 00:29:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700754567598080[0;39m <==    Updates: 1
2023-01-26 00:29:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273700754567598080[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:29:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273700880400912384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:29:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:29:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m ==> Parameters: 
2023-01-26 00:29:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273700880400912384[0;39m <==    Updates: 1
2023-01-26 00:29:35.009 INFO  com.example.wiki.job.DocJob                       :35   [32m273700880400912384[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:30:00.003 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273700985254318080[0;39m 生成今日电子书快照开始
2023-01-26 00:30:00.004 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:30:00.005 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m ==> Parameters: 
2023-01-26 00:30:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273700985254318080[0;39m <==    Updates: 0
2023-01-26 00:30:00.007 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273700985254318080[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:30:05.005 INFO  com.example.wiki.job.DocJob                       :32   [32m273701006234226688[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m ==> Parameters: 
2023-01-26 00:30:05.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701006234226688[0;39m <==    Updates: 1
2023-01-26 00:30:05.007 INFO  com.example.wiki.job.DocJob                       :35   [32m273701006234226688[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:30:35.007 INFO  com.example.wiki.job.DocJob                       :32   [32m273701132071735296[0;39m 更新电子书下的文档数据开始
2023-01-26 00:30:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:30:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m ==> Parameters: 
2023-01-26 00:30:35.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701132071735296[0;39m <==    Updates: 1
2023-01-26 00:30:35.012 INFO  com.example.wiki.job.DocJob                       :35   [32m273701132071735296[0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-01-26 00:31:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701236920946688[0;39m 生成今日电子书快照开始
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:31:00.006 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m ==> Parameters: 
2023-01-26 00:31:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701236920946688[0;39m <==    Updates: 0
2023-01-26 00:31:00.009 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701236920946688[0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-01-26 00:31:05.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701257905049600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m ==> Parameters: 
2023-01-26 00:31:05.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701257905049600[0;39m <==    Updates: 1
2023-01-26 00:31:05.024 INFO  com.example.wiki.job.DocJob                       :35   [32m273701257905049600[0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-01-26 00:31:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701383717392384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:31:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:31:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m ==> Parameters: 
2023-01-26 00:31:35.007 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701383717392384[0;39m <==    Updates: 1
2023-01-26 00:31:35.008 INFO  com.example.wiki.job.DocJob                       :35   [32m273701383717392384[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:00.011 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701488604352512[0;39m 生成今日电子书快照开始
2023-01-26 00:32:00.012 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:32:00.013 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m ==> Parameters: 
2023-01-26 00:32:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701488604352512[0;39m <==    Updates: 0
2023-01-26 00:32:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701488604352512[0;39m 生成今日电子书快照结束，耗时：10毫秒
2023-01-26 00:32:05.002 INFO  com.example.wiki.job.DocJob                       :32   [32m273701509538123776[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:05.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m ==> Parameters: 
2023-01-26 00:32:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701509538123776[0;39m <==    Updates: 1
2023-01-26 00:32:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701509538123776[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:32:35.008 INFO  com.example.wiki.job.DocJob                       :32   [32m273701635392409600[0;39m 更新电子书下的文档数据开始
2023-01-26 00:32:35.008 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:32:35.009 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m ==> Parameters: 
2023-01-26 00:32:35.010 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701635392409600[0;39m <==    Updates: 1
2023-01-26 00:32:35.011 INFO  com.example.wiki.job.DocJob                       :35   [32m273701635392409600[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:00.014 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701740275175424[0;39m 生成今日电子书快照开始
2023-01-26 00:33:00.015 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:33:00.016 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m ==> Parameters: 
2023-01-26 00:33:00.020 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701740275175424[0;39m <==    Updates: 0
2023-01-26 00:33:00.021 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701740275175424[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:33:05.010 INFO  com.example.wiki.job.DocJob                       :32   [32m273701761229918208[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:05.011 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:05.012 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m ==> Parameters: 
2023-01-26 00:33:05.013 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701761229918208[0;39m <==    Updates: 1
2023-01-26 00:33:05.013 INFO  com.example.wiki.job.DocJob                       :35   [32m273701761229918208[0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-01-26 00:33:35.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273701887033872384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:33:35.004 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:33:35.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m ==> Parameters: 
2023-01-26 00:33:35.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273701887033872384[0;39m <==    Updates: 1
2023-01-26 00:33:35.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273701887033872384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-01-26 00:34:00.005 INFO  com.example.wiki.job.EbookSnapshotJob             :32   [32m273701991895666688[0;39m 生成今日电子书快照开始
2023-01-26 00:34:00.007 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-01-26 00:34:00.008 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m ==> Parameters: 
2023-01-26 00:34:00.011 DEBUG c.e.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m273701991895666688[0;39m <==    Updates: 0
2023-01-26 00:34:00.013 INFO  com.example.wiki.job.EbookSnapshotJob             :35   [32m273701991895666688[0;39m 生成今日电子书快照结束，耗时：7毫秒
2023-01-26 00:34:05.004 INFO  com.example.wiki.job.DocJob                       :32   [32m273702012862992384[0;39m 更新电子书下的文档数据开始
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-01-26 00:34:05.005 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m ==> Parameters: 
2023-01-26 00:34:05.006 DEBUG c.e.wiki.mapper.DocMapperCust.updateEbookInfo     :137  [32m273702012862992384[0;39m <==    Updates: 1
2023-01-26 00:34:05.006 INFO  com.example.wiki.job.DocJob                       :35   [32m273702012862992384[0;39m 更新电子书下的文档数据结束，耗时：2毫秒
